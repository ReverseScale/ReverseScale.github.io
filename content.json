{"meta":{"title":"Technology","subtitle":"","description":"","author":"Steven's Blog","url":"https://reversescale.github.io"},"pages":[{"title":"Not found","date":"2018-11-15T12:15:47.151Z","updated":"2018-11-15T02:35:05.000Z","comments":true,"path":"404.html","permalink":"https://reversescale.github.io/404.html","excerpt":"","text":"404 *{margin:0;padding:0;outline:none;font-family:\\5FAE\\8F6F\\96C5\\9ED1,å®‹ä½“;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-khtml-user-select:none;user-select:none;cursor:default;font-weight:lighter;} .center{margin:0 auto;} .whole{width:100%;height:100%;line-height:100%;position:fixed;bottom:0;left:0;z-index:-1000;overflow:hidden;} .whole img{width:100%;height:100%;} .mask{width:100%;height:100%;position:absolute;top:0;left:0;background:#fff;opacity:0.6;filter:alpha(opacity=60);} .b{width:100%;text-align:center;height:400px;position:absolute;top:50%;margin-top:-230px}.a{width:150px;height:50px;margin-top:30px}.a a{display:block;float:left;width:150px;height:50px;background:#fff;text-align:center;line-height:50px;font-size:18px;border-radius:25px;color:#333}.a a:hover{color:#000;box-shadow:#fff 0 0 20px} p{color:#000;margin-top:260px;font-size:24px;} #num{margin:0 5px;font-weight:bold;} var num=5; function redirect(){ num--; document.getElementById(\"num\").innerHTML=num; if(num"},{"title":"Categories","date":"2016-08-16T07:00:44.000Z","updated":"2018-01-25T14:41:06.000Z","comments":false,"path":"categories/index.html","permalink":"https://reversescale.github.io/categories/index.html","excerpt":"","text":""},{"title":"About","date":"2015-08-16T06:58:08.000Z","updated":"2018-11-15T12:29:41.694Z","comments":false,"path":"about/index.html","permalink":"https://reversescale.github.io/about/index.html","excerpt":"","text":"Excellence is a continuous process and not an accident. Thanks for reading! ~ ğŸ‘¨ğŸ»â€ğŸ’» èŒä¸šï¼šç¨‹åºå‘˜åŠé€€å¸ˆğŸ“Ÿ WeChatï¼šWhatsXieğŸ¤ª ä¸åªç”Ÿäº§ bug æ›´æ˜¯ bug çš„æ¬è¿å·¥ğŸ“® é‚®ä»¶ï¼šReverseScale@iCloud.comğŸ¤– Githubï¼šhttps://github.com/ReverseScale åšå®¢æ–°è£…ä¿®ï¼Œå†å²æ–‡ç« æ­£åœ¨è·¯ä¸Šâ€¦"},{"title":"Tags","date":"2016-08-11T04:12:45.000Z","updated":"2018-01-25T14:41:06.000Z","comments":true,"path":"tags/index.html","permalink":"https://reversescale.github.io/tags/index.html","excerpt":"","text":""},{"title":"Archives","date":"2016-08-16T07:00:24.000Z","updated":"2018-01-25T14:41:06.000Z","comments":true,"path":"archives/index.html","permalink":"https://reversescale.github.io/archives/index.html","excerpt":"","text":""}],"posts":[{"title":"ä½¿ç”¨ ngrok å¿«é€Ÿå®ç°å†…ç½‘ç©¿é€","slug":"Ngrok through","date":"2018-08-13T03:56:27.000Z","updated":"2018-11-15T13:18:46.822Z","comments":true,"path":"2018/08/13/Ngrok through/","link":"","permalink":"https://reversescale.github.io/2018/08/13/Ngrok through/","excerpt":"å®ç°å†…ç½‘ç©¿é€çš„å·¥å…·å¾ˆå¤šï¼Œä¹‹æ‰€ä»¥ä»‹ç» ngrokï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºå®ƒä½¿ç”¨ä¾¿æ·ï¼Œä¸ç”¨æ­å»ºæœåŠ¡å™¨ç­‰ç­‰éº»çƒ¦çš„å·¥åºï¼Œé€‚åˆå‰æ®µå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¿«é€Ÿè¯„ä¼°æ£€æµ‹é¡¹ç›®~","text":"å®ç°å†…ç½‘ç©¿é€çš„å·¥å…·å¾ˆå¤šï¼Œä¹‹æ‰€ä»¥ä»‹ç» ngrokï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºå®ƒä½¿ç”¨ä¾¿æ·ï¼Œä¸ç”¨æ­å»ºæœåŠ¡å™¨ç­‰ç­‰éº»çƒ¦çš„å·¥åºï¼Œé€‚åˆå‰æ®µå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¿«é€Ÿè¯„ä¼°æ£€æµ‹é¡¹ç›®~ Ngrokæ˜¯ä»€ä¹ˆngrok æ˜¯ä¸€ä¸ªåå‘ä»£ç†ï¼Œé€šè¿‡åœ¨å…¬å…±çš„ç«¯ç‚¹å’Œæœ¬åœ°è¿è¡Œçš„ Web æœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªå®‰å…¨çš„é€šé“ã€‚ngrok å¯æ•è·å’Œåˆ†ææ‰€æœ‰é€šé“ä¸Šçš„æµé‡ï¼Œä¾¿äºåæœŸåˆ†æå’Œé‡æ”¾ã€‚ è€Œæˆ‘ç”¨æ¥åœ¨å®¶é‡Œå¿«é€Ÿè®¿é—® Jenkinsï¼Œå·ä¸ªæ‡’ğŸ¤ª æ­å»ºæ–¹æ³•ç”±äºè¦å®Œæˆä¸€ä¸ªç½‘é¡µä¼˜åŒ–çš„ä½œä¸šæ‰¾äº†å¾ˆä¹…ngrokçš„ä½¿ç”¨æ–¹æ³•ï¼Œéƒ½ä¸å¤Ÿç®€ä¾¿æ˜“è¡Œæœ€åç»ˆäºå‘ç°äº†ä¸€ä¸ªå¥½æ–¹æ³•ã€‚ ä¸‹è½½ MAC ç‰ˆçš„ ngrokï¼šhttps://ngrok.com/download è§£å‹åˆ°æŒ‡å®šç›®å½•ï¼šSafari æµè§ˆå™¨ä¸‹è½½ Mac OS X ç¯å¢ƒä¸€èˆ¬ç›´æ¥è§£å‹ï¼ˆåæ­£æˆ‘æ˜¯è‡ªåŠ¨è§£å‹çš„ï¼‰ï¼Œå°† ngrok æ”¾è¿›é¡¹ç›®ç›®å½•ã€‚ è¿›å…¥åˆ° ngrok æ‰€åœ¨è·¯å¾„ï¼š1cd /tmp å¼€å¯æœåŠ¡1./ngrok http localhost:8080 ä¼šå‡ºç°å¦‚ä¸‹ ngrok æ§åˆ¶å° ç­‰å¾… Session Status çŠ¶æ€ä¸º onlineï¼ˆå˜ç»¿ï¼‰ï¼Œå°±å¯ä»¥åœ¨å¤–ç½‘é€šè¿‡ Forwarding çš„åœ°å€è¿›è¡Œè¿æ¥äº†ã€‚ æ³¨æ„ï¼šForwardingåœ°å€ä¸­çš„ c33faf1b ä¸æ˜¯å›ºå®šçš„ï¼Œåœ¨æ¯æ¬¡å¼€å§‹ ngrok æœåŠ¡çš„æ—¶å€™éƒ½ä¼šå˜æ›´ï¼Œæƒ³å›ºå®šï¼Ÿ ngrok:ğŸ˜›è¦é’±ã€‚ æµ‹è¯•ä¸€ä¸‹ä¾‹å¦‚ï¼š ngrok ç©¿é€å‰åœ¨å±€åŸŸç½‘ä¸­è®¿é—®åœ°å€ï¼šhttp://localhost:8080 ngrok ç©¿é€åå±€åŸŸç½‘ + å…¬ç½‘è®¿é—®åœ°å€ï¼šhttps://c33faf1b.ngrok.io","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"å¦‚ä½•ç”¨ Swift æ‰“é€ ä½ çš„ç¬¬ä¸€ä¸ªåŒºå—é“¾ App","slug":"How to build DApp","date":"2018-07-06T14:51:21.000Z","updated":"2018-11-15T13:19:04.032Z","comments":true,"path":"2018/07/06/How to build DApp/","link":"","permalink":"https://reversescale.github.io/2018/07/06/How to build DApp/","excerpt":"åŒºå—é“¾(Blockchain) æ˜¯ä¸€ç§çªç ´æ€§æŠ€æœ¯(Disruptive Technologies)ï¼Œè¿‘å¹´æ¸è·å…³æ³¨ï¼Œå·ç§°å°†äº’è”ç½‘ä»ä¿¡æ¯å…±äº«ï¼Œæ¨å‘ä»·å€¼ä¼ é€’ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„æ¥æ¢ç´¢å®ƒè®¾è®¡ä¸Šçš„å¥‡æ€å¦™æƒ³~","text":"åŒºå—é“¾(Blockchain) æ˜¯ä¸€ç§çªç ´æ€§æŠ€æœ¯(Disruptive Technologies)ï¼Œè¿‘å¹´æ¸è·å…³æ³¨ï¼Œå·ç§°å°†äº’è”ç½‘ä»ä¿¡æ¯å…±äº«ï¼Œæ¨å‘ä»·å€¼ä¼ é€’ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„æ¥æ¢ç´¢å®ƒè®¾è®¡ä¸Šçš„å¥‡æ€å¦™æƒ³~ å› ä¸ºåŒºå—é“¾æ˜¯è®¸å¤šåŠ å¯†è´§å¸(Cryptocurrencies) å¦‚æ¯”ç‰¹å¸(Bitcoin)ã€ä»¥å¤ªåŠ(Ethereum)ã€è±ç‰¹å¸(Litecoin) çš„åˆ›å§‹æŠ€æœ¯ã€‚é‚£åŒºå—é“¾æ˜¯å¦‚ä½•è¿ä½œçš„å‘¢ï¼Ÿåœ¨æœ¬æ¬¡çš„æ•™å­¦é‡Œï¼Œæˆ‘å°†ä¼šè°ˆåˆ°æ‰€æœ‰å…³äºåŒºå—é“¾æŠ€æœ¯çš„çŸ¥è¯†ï¼Œä»¥åŠå¦‚ä½•ç”¨Swift æ¥åˆ¶ä½œè‡ªå·±çš„ã€ŒåŒºå—é“¾ã€ã€‚é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼ åŒºå—é“¾çš„è¿ä½œé¡¾åæ€ä¹‰ï¼ŒåŒºå—é“¾å°±æ˜¯ä¸€ä¸ªç”±ä¸åŒçš„åŒºå—ä¸²è¿åœ¨ä¸€èµ·çš„ã€Œé“¾ã€ï¼Œæ¯ä¸ªåŒºå—åŒ…å«ä¸‰åˆ™èµ„è®¯ï¼šèµ„æ–™(Data)ã€æ‚å‡‘å€¼(Hash)ã€å’Œå‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼ã€‚ èµ„æ–™ â”€â”€ä¾æ®ä½¿ç”¨æƒ…å¢ƒï¼Œå‚¨å­˜åœ¨åŒºå—çš„èµ„æ–™ä¼šå› åŒºå—é“¾çš„ç±»å‹è€Œä¸åŒã€‚ä¾‹å¦‚ï¼Œåœ¨æ¯”ç‰¹å¸åŒºå—é“¾ä¸­ï¼Œå‚¨å­˜èµ„æ–™å°±æ˜¯ä¸äº¤æ˜“æœ‰å…³çš„èµ„è®¯ï¼Œå³æ˜¯è½¬å¸çš„é‡‘é¢ã€ä»¥åŠå‚ä¸äº¤æ˜“äºŒäººçš„èµ„è®¯ã€‚ æ‚å‡‘å€¼ â”€â”€ä½ å¯ä»¥æŠŠæ‚å‡‘æƒ³æˆæ˜¯ä¸€ç§æ•°ä½æŒ‡çº¹ï¼Œå®ƒæ˜¯ç”¨æ¥è¯†åˆ«ä¸€ä¸ªåŒºå—åŠå…¶èµ„æ–™ã€‚æ‚å‡‘æœ€é‡è¦çš„åœ°æ–¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å­—æ¯æ•°å­—(Alphanumeric)ç¨‹å¼ç ï¼Œé€šå¸¸ä¼šç”±64ä¸ªå­—å…ƒç»„æˆã€‚å½“ä¸€ä¸ªåŒºå—è¢«åˆ›é€ æ—¶ï¼Œæ‚å‡‘å€¼ä¹ŸåŒæ—¶äº§ç”Ÿã€‚å½“ä¸€ä¸ªåŒºå—è¢«æ›´åŠ¨æ—¶ï¼Œæ‚å‡‘å€¼ä¹Ÿä¼šåŒæ—¶è¢«æ›´åŠ¨ã€‚é€è¿‡è¿™ç§æ–¹å¼ï¼Œå½“ä½ æƒ³è¦æŸ¥çœ‹åŒºå—ä¸Šçš„ä»»ä½•å˜åŠ¨æ—¶ï¼Œæ‚å‡‘å€¼å°±éå¸¸é‡è¦ã€‚ å‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼ â”€â”€æ¯ä¸ªåŒºå—å°±æ˜¯è—‰ç”±å‚¨å­˜å‰ä¸ªåŒºå—çš„æ‚å‡‘æ¥é“¾ç»“åœ¨ä¸€èµ·ï¼Œç»„æˆä¸€ä¸ªåŒºå—é“¾ï¼è¿™å°±æ˜¯è®©åŒºå—é“¾å¦‚æ­¤å®‰å…¨çš„åŸå› ã€‚çœ‹çœ‹è¿™å¼ å›¾ç‰‡ï¼š å¦‚ä½ æ‰€è§ï¼Œæ¯ä¸ªåŒºå—ç”±èµ„æ–™ï¼ˆæœªæ˜¾ç¤ºï¼‰ã€æ‚å‡‘å€¼ã€å’Œå‰ä¸€ä¸ªåŒºå—æ‚å‡‘å€¼æ‰€ç»„æˆã€‚ä¸¾ä¸ªä¾‹å­ï¼Œé»„è‰²åŒºå—åŒ…å«äº†è‡ªå·±çš„æ‚å‡‘å€¼H7S6ã€å’Œçº¢è‰²åŒºå—çš„æ‚å‡‘å€¼8SD9ã€‚ä»¥è¿™ç§æ–¹å¼ï¼Œå®ƒä»¬ç»„æˆäº†ä¸€ä¸ªé“¾ç»“ï¼Œå¹¶ä»¥æ­¤è¿ç»“åœ¨ä¸€èµ·ã€‚ç°åœ¨ï¼Œå‡è®¾æœ‰ä¸ªéª‡å®¢å…¥ä¾µå¹¶å°è¯•æ›´åŠ¨çº¢è‰²åŒºå—ã€‚è¯·è®°ä½ï¼Œæ¯æ¬¡ä¸€ä¸ªåŒºå—ä»¥ä»»ä½•æ–¹å¼è¢«æ›´åŠ¨æ—¶ï¼ŒåŒºå—çš„æ‚å€¼å‡‘ä¹Ÿä¼šè¢«æ›´åŠ¨ï¼å› æ­¤ï¼Œå½“ä¸‹ä¸€ä¸ªåŒºå—æ‰§è¡Œç¡®è®¤ã€å¹¶çœ‹åˆ°å‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼å¹¶ä¸å»åˆæ—¶ï¼Œå®ƒä¼šæœ‰æ•ˆåœ°å°†è‡ªå·±ä»ã€Œé“¾ã€ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œè€Œä¸ä¼šè¢«éª‡å®¢è¯»å–ã€‚ è¿™å°±æ˜¯åŒºå—ç»ƒä¼šå¦‚æ­¤å®‰å…¨çš„åŸå› ï¼Œä½ å‡ ä¹ä¸å¯èƒ½å°è¯•å›æº¯å¹¶æ›´æ”¹ä»»ä½•èµ„æ–™ã€‚æ‚å‡‘å€¼æä¾›äº†ä¸é”™çš„ä¿å¯†åŠéšç§ï¼Œä½†è¿˜æœ‰ä¸¤ä¸ªå®‰å…¨æœºåˆ¶æ¥è®©åŒºå—é“¾æ›´åŠ å®‰å…¨ï¼šéªŒè¯(Proof-of-work)åŠæ™ºæ…§åˆçº¦(Smart Contract)ã€‚è™½ç„¶æˆ‘ä¸ä¼šè¯¦è¿°ï¼Œä½†ä½ å¯ä»¥åœ¨è¿™é‡Œäº†è§£æ›´å¤šã€‚åŒºå—é“¾æœ€åä¸€ä¸ªä¿å…¨æ–¹å¼å°±æ˜¯åŸºäºå®ƒçš„ä½ç½®ã€‚ä¸å¤§å¤šå‚¨å­˜åœ¨ä¼ºæœå™¨æˆ–æ˜¯èµ„æ–™åº“å†…çš„èµ„æ–™ä¸åŒï¼ŒåŒºå—é“¾ä½¿ç”¨ç‚¹å¯¹ç‚¹ç½‘è·¯(Peer-To-Peer, P2P)ï¼Œå®ƒæ˜¯ä¸€ç§ç½‘è·¯å‹æ€ï¼Œå…è®¸ä»»ä½•äººåŠ å…¥å¹¶å°†è¯¥ç½‘è·¯ä¸Šçš„èµ„æ–™åˆ†å‘ç»™æ¯ä½æ¥æ”¶è€…ã€‚æ¯å½“æœ‰äººåŠ å…¥è¿™ä¸ªç½‘è·¯æ—¶ï¼Œä»–ä»¬å°±ä¼šå¾—åˆ°åŒºå—é“¾çš„å®Œæ•´æ‹·è´ï¼›æ¯å½“æœ‰äººå»ºç«‹ä¸€ä¸ªæ–°åŒºå—æ—¶ï¼Œå°±ä¼šä¼ é€åˆ°ç½‘è·¯å†…çš„æ‰€æœ‰äººã€‚ç„¶åï¼Œé€è¿‡ä¸€äº›å¤æ‚çš„ç¨‹å¼ï¼Œè®©èŠ‚ç‚¹(Node)åœ¨åŠ å…¥è¿™ä¸ªåŒºå—åˆ°åŒºå—é“¾ä¹‹å‰ï¼Œå…ˆç¡®è®¤è¯¥åŒºå—æœ‰å¦è¢«çªœæ”¹ã€‚å°±è¿™æ ·ï¼Œä»»ä½•åœ°æ–¹çš„ä»»ä½•äººéƒ½å¯ä»¥å–å¾—è¿™äº›èµ„è®¯ã€‚å¦‚æœä½ æ˜¯HBOçŸ½è°·ç¾¤çä¼ (Silicon Valley)çš„å¿ å®ç²‰ä¸ï¼Œè¿™å¬èµ·æ¥å¯èƒ½æœ‰ç‚¹ç†Ÿæ‚‰ï¼Œå› ä¸ºåœ¨è¿™å‡ºç¾å‰§é‡Œï¼Œä¸»è§’å°±æ˜¯ç”¨äº†ç±»ä¼¼çš„æŠ€æœ¯æ¥å»ºç«‹ä¸€ä¸ªå…¨æ–°ç½‘è·¯ã€‚ å› ä¸ºæ¯ä¸ªäººæˆ–èŠ‚ç‚¹éƒ½æœ‰ä¸€ä»½åŒºå—é“¾çš„æ‹·è´ï¼Œä»–ä»¬å¯ä»¥æœ‰å…±è¯†å¹¶ç¡®è®¤å“ªäº›åŒºå—æ˜¯åˆæ³•çš„ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦éª‡å…¥ä¸€ä¸ªåŒºå—ï¼Œä½ å¿…é¡»éª‡å…¥ç½‘è·¯ä¸Šè¶…è¿‡50% çš„åŒºå—æ¥é€šè¿‡ä½ çš„èµ„è®¯ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŒºå—é“¾æˆ–è®¸æ˜¯è¿‡å»åå¹´ä»¥æ¥æœ€å®‰å…¨çš„æŠ€æœ¯ä¹‹ä¸€ã€‚ å…³äºèŒƒä¾‹åº”ç”¨ç°åœ¨ä½ äº†è§£åŒºå—é“¾æ˜¯å¦‚ä½•è¿ä½œäº†ï¼Œé‚£ä¹ˆå¼€å§‹æ¥åˆ¶ä½œæˆ‘ä»¬çš„èŒƒä¾‹Appå§ï¼è¯·å…ˆä¸‹è½½åˆå§‹é¡¹ç›®ã€‚ï¼ˆhttps://raw.githubusercontent.com/appcoda/BlockchainDemo/master/BlockchainStarter.zipï¼‰ å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ¯”ç‰¹å¸é’±åŒ…ã€‚ç¬¬ä¸€ä¸ªå¸å·Account 1065 æ‹¥æœ‰500 BTCï¼Œè€Œç¬¬äºŒä¸ªå¸å·0217 åˆ™ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚æˆ‘ä»¬åˆ©ç”¨ä¼ é€æŒ‰é’®æ¥ä¼ é€æ¯”ç‰¹å¸åˆ°å…¶ä»–å¸å·ã€‚ä¸ºäº†èµšå–BTCï¼Œæˆ‘ä»¬æŒ‰ä¸‹Mine æŒ‰é’®å°±å¯ä»¥è·å¾—50 BTC ä¸ºå¥–åŠ±ã€‚åŸºæœ¬æ¥è¯´ï¼Œæˆ‘ä»¬åšçš„æ˜¯å½“App æ‰§è¡Œæ—¶ï¼Œåˆ©ç”¨æ§åˆ¶å°æ¥è§‚å¯Ÿä¸¤ä¸ªæ¯”ç‰¹å¸å¸å·é—´çš„äº¤æ˜“æƒ…å†µã€‚ ä½ ä¼šæ³¨æ„åˆ°ï¼Œä¾§è¾¹æ é‡Œæœ‰ä¸¤ä¸ªé‡è¦çš„ç±»åˆ«ï¼šBlockåŠBlockchainã€‚æ‰“å¼€è¿™äº›æ¡£æ¡ˆï¼Œä½ ä¼šçœ‹åˆ°æ¡£æ¡ˆæ˜¯ç©ºçš„ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘å°†ä¼šå¼•å¯¼ä½ å†™å‡ºè¿™äº›ç±»åˆ«çš„é€»è¾‘ã€‚é‚£æˆ‘ä»¬å¼€å§‹å§ï¼ åœ¨Swift å®šä¹‰Blockå‰å¾€Block.swiftå¹¶æ·»åŠ ç¨‹å¼ç ä»¥å®šä¹‰ä¸€ä¸ªåŒºå—ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹åŒºå—æ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬å…ˆå‰å®šä¹‰äº†ä¸€ä¸ªåŒºå—ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šæ‚å‡‘å€¼ã€è®°å½•çš„å®é™…èµ„æ–™ã€ä»¥åŠå‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼ã€‚å½“æˆ‘ä»¬æƒ³å»ºç«‹è‡ªå·±çš„åŒºå—é“¾æ—¶ï¼Œå¿…é¡»è¦çŸ¥é“åŒºå—çš„æ’åºï¼Œè¿™ä¸€ç‚¹å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨Swiftä¸­å®šä¹‰ã€‚æ·»åŠ ä»¥ä¸‹ç¨‹å¼ç åˆ°ç±»åˆ«é‡Œï¼š 1234var hash: String!var data: String!var previousHash: String!var index: Int! ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æœ€åä¸€ä¸ªé‡è¦çš„ç¨‹å¼ç ã€‚æˆ‘ä¹‹å‰æåˆ°æ¯æ¬¡ä¸€ä¸ªåŒºå—è¢«æ›´åŠ¨ï¼Œæ‚å‡‘å°±ä¼šæ”¹å˜ï¼›è¿™å°±æ˜¯åŒºå—é“¾å¦‚æ­¤å®‰å…¨çš„ç‰¹è‰²ä¹‹ä¸€ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»å»ºç«‹ä¸€ä¸ªå‡½å¼æ¥äº§ç”Ÿä¸€ä¸ªéšæœºå­—æ¯æ•°å­—çš„æ‚å‡‘ã€‚è¿™ä¸ªå‡½å¼åªéœ€è¦å‡ è¡Œç¨‹å¼ç ï¼š 123func generateHash() -&gt; String &#123; return NSUUID().uuidString.replacingOccurrences(of: \"-\", with: \"\")&#125; NSUUIDæ˜¯ä¸€ä¸ªç‰©ä»¶ï¼Œä»£è¡¨æ¡¥æ¥UUIDçš„é€šç”¨å”¯ä¸€å€¼ã€‚å®ƒå†…ç½®äºSwiftä¸­ï¼Œè€Œä¸”éå¸¸é€‚åˆç”¨æ¥äº§ç”Ÿ32å­—å…ƒçš„å­—ä¸²ã€‚è¿™ä¸ªå‡½å¼äº§ç”Ÿä¸€ä¸ªUUIDï¼Œæ¶ˆé™¤æ‰€æœ‰è¿å­—ç¬¦(-)ï¼Œç„¶åå›ä¼ Stringï¼Œå³åŒºå—çš„æ‚å‡‘ã€‚Block.swiftç°åœ¨åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š æˆ‘ä»¬å·²ç»å®šä¹‰äº†Blockç±»åˆ«ï¼Œæ¥ç€è®©æˆ‘ä»¬å®šä¹‰Blockchainç±»åˆ«å§ã€‚åˆ‡æ¢åˆ°Blockchain.swiftã€‚ åœ¨Swift å®šä¹‰Blockchainå¦‚å‰æ–‡æ‰€è¯´ï¼Œè®©æˆ‘ä»¬å°è¯•ä»åŸºæœ¬é¢æ¥äº†è§£åŒºå—é“¾ã€‚åœ¨åŸºæœ¬çš„æœ¯è¯­é‡Œï¼ŒåŒºå—é“¾åªæ˜¯åŒºå—ä¸²åœ¨ä¸€èµ·ç»„æˆçš„é“¾ï¼›æ¢å¥è¯è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰é¡¹ç›®çš„åˆ—è¡¨ã€‚å¬èµ·æ¥æ˜¯ä¸æ˜¯æœ‰ç‚¹ç†Ÿæ‚‰å‘¢ï¼Ÿå› ä¸ºè¿™å°±æ˜¯é˜µåˆ—çš„å®šä¹‰ï¼Œè€Œè¿™ä¸ªé˜µåˆ—å°±æ˜¯ç”±åŒºå—æ‰€ç»„æˆï¼è®©æˆ‘ä»¬æŠŠä¸‹åˆ—çš„ç¨‹å¼ç åŠ è¿›å»å§ï¼š 1var chain = [Block]() å°æç¤ºï¼šè¿™å‡ ä¹å¯ä»¥åº”ç”¨åœ¨ç”µè„‘ç§‘å­¦ä¸–ç•Œçš„æ‰€æœ‰äº‹ä¸Šã€‚å¦‚æœä½ æ›¾é‡è¿‡å¤§é—®é¢˜ï¼Œè¯•ç€å°†å®ƒæ‹†è§£æˆå°ç»„ä»¶ï¼Œç„¶åä»¥è‡ªå·±çš„æ–¹æ³•æ¥è§£å†³é—®é¢˜ï¼›å°±åƒæˆ‘ä»¬å¼„æ¸…æ¥šå¦‚ä½•åœ¨Swiftä¸­åŠ å…¥åŒºå—åŠåŒºå—é“¾ä¸€æ ·ï¼ ä½ ä¼šæ³¨æ„åˆ°åœ¨é˜µåˆ—é‡Œé¢åŒ…å«äº†å…ˆå‰å®šä¹‰çš„Blockç±»åˆ«ï¼Œé‚£æ˜¯æˆ‘ä»¬åœ¨åŒºå—é“¾ä¸­éœ€è¦çš„æ‰€æœ‰å˜æ•°ã€‚åŠ å…¥ä¸¤ä¸ªå‡½å¼åˆ°ç±»åˆ«é‡Œï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ã€‚è¯•ç€ç”¨æˆ‘å‰æ–‡æ‰€æ•™çš„æ¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼š åœ¨ä¸€ä¸ªåŒºå—é“¾ä¸­ï¼Œä¸¤ä¸ªä¸»è¦çš„å‡½å¼æ˜¯ä»€ä¹ˆï¼Ÿ å¸Œæœ›ä½ èƒ½å¤Ÿå›ç­”è¿™ä¸ªé—®é¢˜ï¼è¿™ä¸¤ä¸ªåŒºå—é“¾æ‹¥æœ‰çš„ä¸»è¦å‡½å¼ï¼Œæ˜¯ç”¨æ¥å»ºç«‹åˆå§‹åŒºå—ï¼Œä»¥åŠåœ¨åé¢æ–°å¢æ–°çš„åŒºå—ã€‚å½“ç„¶ï¼Œç°åœ¨æˆ‘ä¸ä¼šä¸‹æ”¾è¿™ä¸ªé“¾å¹¶åŠ å…¥æ™ºæ…§åˆçº¦ï¼Œä½†æ˜¯è¿™äº›æ˜¯åŸºæœ¬å‡½å¼ï¼åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç åˆ°Blockchain.swiftï¼š 1234567891011121314151617func createGenesisBlock(data:String) &#123; let genesisBlock = Block() genesisBlock.hash = genesisBlock.generateHash() genesisBlock.data = data genesisBlock.previousHash = \"0000\" genesisBlock.index = 0 chain.append(genesisBlock)&#125; func createBlock(data:String) &#123; let newBlock = Block() newBlock.hash = newBlock.generateHash() newBlock.data = data newBlock.previousHash = chain[chain.count-1].hash newBlock.index = chain.count chain.append(newBlock)&#125; æˆ‘ä»¬åŠ å…¥çš„ç¬¬ä¸€ä¸ªå‡½å¼æ˜¯ç”¨æ¥å»ºç«‹åˆå§‹åŒºå—ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªå‡½å¼æ¥æŠŠåŒºå—çš„èµ„æ–™ä½œä¸ºInputã€‚ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåä¸ºgenesisBlockçš„å˜æ•°ï¼Œå¹¶å°†å®ƒè®¾ä¸ºBlockå‹åˆ«ã€‚å› ä¸ºå®ƒæ˜¯Blockå‹åˆ«ï¼Œæ‰€ä»¥å®ƒæœ‰æˆ‘ä»¬ä¹‹å‰åœ¨Block.swiftå®šä¹‰çš„æ‰€æœ‰å˜æ•°åŠå‡½å¼ã€‚æˆ‘ä»¬è®¾å®šgenerateHash()ä¸ºæ‚å‡‘ã€ Input dataä¸ºèµ„æ–™ã€‚å› ä¸ºè¿™æ˜¯ç¬¬ä¸€ä¸ªåŒºå—ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘è®¾å®šä¸º000ï¼Œå¥½è®©æˆ‘ä»¬çŸ¥é“è¿™æ˜¯åˆå§‹åŒºå—ã€‚æˆ‘ä»¬å°†å®ƒçš„ç´¢å¼•å€¼è®¾ä¸º0 ï¼Œç„¶åæ”¾åˆ°åŒºå—é“¾chainã€‚ æˆ‘ä»¬å»ºç«‹çš„ä¸‹ä¸€ä¸ªå‡½å¼åˆ™é€‚ç”¨äºæ‰€æœ‰genesisBlockåçš„åŒºå—ï¼Œè€Œå®ƒä¼šå»ºç«‹å‰©ä¸‹çš„æ‰€æœ‰åŒºå—ã€‚ä½ ä¼šæ³¨æ„åˆ°å®ƒè·Ÿä¹‹å‰çš„å‡½å¼éå¸¸ç›¸ä¼¼ï¼Œå”¯ä¸€çš„ä¸åŒçš„æ˜¯æˆ‘ä»¬å°†previousHashè®¾å®šä¸ºå‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘ï¼Œå¹¶å°†indexè®¾ä¸ºå®ƒåœ¨åŒºå—ç»ƒçš„ä½ç½®ã€‚å®Œæˆäº†ï¼æˆ‘ä»¬å·²ç»æˆåŠŸå®šä¹‰è‡ªå·±çš„Blockchainï¼ä½ çš„ç¨‹å¼ç åº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ æ¥ç€ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„éƒ¨åˆ†è¿æ¥åˆ°ViewController.swiftæ¡£æ¡ˆï¼Œå¹¶çœ‹çœ‹æ‰§è¡Œæˆæœå§ï¼ é’±åŒ…åå°(Wallet Backend)åˆ‡æ¢åˆ°ViewController.swiftï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„UIå…ƒä»¶éƒ½å·²ç»è¿ç»“å®Œæ¯•ã€‚æˆ‘ä»¬æ‰€éœ€è¦åšçš„å°±æ˜¯å¤„ç†äº¤æ˜“ï¼Œå¹¶å°†äº¤æ˜“åˆ—å°åˆ°æ§åˆ¶å°ä¸Šã€‚ç„¶è€Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥ç¨å¾®æ¢è®¨ä¸€ä¸‹æ¯”ç‰¹å¸åŒºå—é“¾ã€‚æ¯”ç‰¹å¸æ¥è‡ªä¸€ä¸ªæ€»å¸å·ï¼Œå‡è®¾è¿™ä¸ªå¸å·çš„ç¼–å·æ˜¯000ã€‚å½“ä½ æŒ–æ˜ä¸€é¢—æ¯”ç‰¹å¸æ—¶ï¼Œå°±è¡¨ç¤ºä½ è§£ç­”äº†æ•°å­¦é—®é¢˜ï¼Œå¹¶è·å¾—ä¸€å®šæ•°é‡çš„æ¯”ç‰¹å¸ä½œä¸ºå¥–åŠ±ã€‚è¿™æ˜¯å‘è¡Œè´§å¸ä¸€ä¸ªå¾ˆèªæ˜çš„æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿåˆ›é€ äº†è®©æ›´å¤šäººå»æŒ–æ˜çš„åŠ¨æœºã€‚åœ¨æˆ‘ä»¬çš„App é‡Œï¼Œæˆ‘ä»¬å°†100 BTC ä½œä¸ºå¥–åŠ±ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨ViewController æ·»åŠ éœ€è¦çš„å˜æ•°ï¼š 123456let firstAccount = 1065let secondAccount = 0217let bitcoinChain = Blockchain()let reward = 100var accounts: [String: Int] = [\"0000\": 10000000]let invalidAlert = UIAlertController(title: \"Invalid Transaction\", message: \"Please check the details of your transaction as we were unable to process this.\", preferredStyle: .alert) æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªå¸å·ï¼šä¸€ä¸ªç¼–å·ä¸º1065ï¼Œå¦ä¸€ä¸ªç¼–å·ä¸º0217ã€‚æˆ‘ä»¬åŒæ—¶æ–°å¢ä¸€ä¸ªbitcoinChainå˜æ•°æ¥ä½œä¸ºæˆ‘ä»¬çš„åŒºå—é“¾ï¼Œå¹¶å°†rewardè®¾å®šä¸º100ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä½œä¸ºæ¯”ç‰¹å¸æ¥æºçš„ä¸»å¸å·ï¼šè¿™æ˜¯æˆ‘ä»¬çš„åˆå§‹å¸å·ï¼Œç¼–å·ä¸º0000ï¼Œå®ƒæ‹¥æœ‰ä¸€åƒä¸‡ä¸ªæ¯”ç‰¹å¸ã€‚ä½ å¯ä»¥æŠŠè¿™ä¸ªå¸å·å½“æˆé“¶è¡Œï¼Œåœ¨æ¯ä¸€æ¬¡çš„å¥–åŠ±ä¸­ï¼Œå°±ä¼šä»ä¸­å–å‡º100ä¸ªæ¯”ç‰¹å¸ï¼Œå¹¶è½¬è‡³åˆæ³•çš„å¸å·é‡Œã€‚æˆ‘ä»¬ä¹Ÿå®šä¹‰ä¸€ä¸ªè­¦å‘Šï¼Œåœ¨æ¯æ¬¡äº¤æ˜“æ— æ³•å®Œæˆæ—¶æ˜¾ç¤ºã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥å†™äº›å°†ä¼šæ‰§è¡Œçš„æ³›ç”¨å‡½å¼ã€‚ä½ å¯ä»¥çŒœåˆ°è¿™äº›å‡½å¼æ˜¯ä»€ä¹ˆå—ï¼Ÿ ç¬¬ä¸€ä¸ªå‡½å¼æ˜¯ç”¨æ¥å¤„ç†äº¤æ˜“çš„ã€‚æˆ‘ä»¬è¦ç¡®è®¤ä¼ é€è€…åŠæ¥æ”¶è€…çš„å¸å·ä¸­ï¼Œæ¥æ”¶æˆ–æ‰£é™¤çš„é‡‘é¢æ˜¯æ­£ç¡®çš„ï¼Œè€Œä¸”è¿™ä¸ªèµ„è®¯ä¼šè¢«è®°å½•åœ¨æˆ‘ä»¬çš„åŒºå—é“¾ä¸Šã€‚ ä¸‹ä¸€ä¸ªå‡½å¼æ˜¯è¦åœ¨æ§åˆ¶å°é‡Œå°å‡ºå®Œæ•´çš„çºªå½•ï¼Œå®ƒä¼šæ˜¾ç¤ºæ¯ä¸ªåŒºå—åŠæ¯ä¸ªåŒºå—å†…çš„èµ„æ–™ã€‚ æœ€åä¸€ä¸ªå‡½å¼æ˜¯ç”¨æ¥éªŒè¯åŒºå—é“¾æ˜¯å¦åˆæ³•ï¼Œæ–¹æ³•ä¸ºç¡®è®¤å‰ä¸ªåŒºå—çš„æ‚å‡‘æ˜¯å¦ç¬¦åˆä¸‹ä¸€ä¸ªåŒºå—çš„èµ„è®¯ã€‚å› ä¸ºæˆ‘ä»¬ä¸ä¼šç¤ºèŒƒä»»ä½•éª‡å®¢æ–¹æ³•ï¼Œæ‰€ä»¥èŒƒä¾‹ä¸­çš„é“¾æ°¸è¿œéƒ½æ˜¯åˆæ³•çš„ã€‚ Transaction å‡½å¼ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„æ³›ç”¨äº¤æ˜“å‡½å¼ã€‚åœ¨å®šä¹‰å˜æ•°ä¹‹ä¸‹è¾“å…¥ä»¥ä¸‹ç¨‹å¼ç ï¼š 1234567891011121314151617181920212223242526func transaction(from: String, to: String, amount: Int, type: String) &#123; // 1 if accounts[from] == nil &#123; self.present(invalidAlert, animated: true, completion: nil) return &#125; else if accounts[from]!-amount &lt; 0 &#123; self.present(invalidAlert, animated: true, completion: nil) return &#125; else &#123; accounts.updateValue(accounts[from]!-amount, forKey: from) &#125; // 2 if accounts[to] == nil &#123; accounts.updateValue(amount, forKey: to) &#125; else &#123; accounts.updateValue(accounts[to]!+amount, forKey: to) &#125; // 3 if type == \"genesis\" &#123; bitcoinChain.createGenesisBlock(data: \"From: \\(from); To: \\(to); Amount: \\(amount)BTC\") &#125; else if type == \"normal\" &#123; bitcoinChain.createBlock(data: \"From: \\(from); To: \\(to); Amount: \\(amount)BTC\") &#125;&#125; çœ‹èµ·æ¥ç¨‹å¼ç å¾ˆå¤šï¼Œä½†æ˜¯å®ƒçš„æ ¸å¿ƒåªæ˜¯ä¸ºæ¯æ¬¡çš„äº¤æ˜“å®šä¹‰ä¸€äº›è§„åˆ™ã€‚åœ¨å¼€å¤´çš„åœ°æ–¹ï¼Œæˆ‘ä»¬æœ‰å››ä¸ªå‚æ•°ï¼štoã€fromã€amountä»¥åŠtypeã€‚Toã€Fromã€åŠAmountçš„å«ä¹‰ä¸€ç›®äº†ç„¶ï¼Œè€ŒTypeåŸºæœ¬ä¸Šå°±æ˜¯å®šä¹‰äº¤æ˜“çš„ç±»å‹ã€‚è¿™é‡Œæœ‰ä¸¤ç§Typeï¼šNormalå’ŒGenesisã€‚ä¸€ä¸ªNormalçš„äº¤æ˜“ç±»å‹ä¼šæ˜¯åœ¨å¸å·1065ä¸0217ä¹‹é—´è¿›è¡Œï¼Œè€ŒGenesisäº¤æ˜“ç±»å‹åˆ™ä¼šæ¶‰åŠåˆ°å¸å·0000ã€‚ ç¬¬ä¸€ä¸ªif-elseæ¡ä»¶å¼æ˜¯å…³äºæ¥æºå¸å·ã€‚å¦‚æœæ¥æºå¸å·ä¸å­˜åœ¨æˆ–é‡‘é¢ä¸è¶³ï¼Œæˆ‘ä»¬ä¼šæ˜¾ç¤ºäº¤æ˜“æ— æ•ˆçš„è­¦å‘Šï¼Œç„¶åç»“æŸå‡½å¼ã€‚è€Œå¦‚æœé€šè¿‡çš„è¯ï¼Œæˆ‘ä»¬ä¼šæ›´æ–°æ•°å€¼ã€‚ ç¬¬äºŒä¸ªif-elseæ¡ä»¶å¼æ˜¯å…³äºæ¥æ”¶å¸å·ã€‚å¦‚æœæ¥æ”¶å¸å·ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬éšå®ƒè€Œå»ï¼Œç„¶åç»“æŸå‡½å¼ã€‚è¦ä¸ç„¶ï¼Œæˆ‘ä»¬å°±ä¼šä¼ é€æ­£ç¡®çš„æ¯”ç‰¹å¸æ•°é‡åˆ°å¸å·ã€‚ ç¬¬ä¸‰ä¸ªif-elseæ¡ä»¶å¼å¤„ç†äº¤æ˜“çš„ç±»å‹ã€‚å¦‚æœä¸€ä¸ªäº¤æ˜“æ¶‰åŠåˆå§‹åŒºå—ï¼Œæˆ‘ä»¬å°±å»ºç«‹ä¸€ä¸ªæ–°çš„åˆå§‹åŒºå—ï¼›åä¹‹æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªæ–°åŒºå—æ¥å‚¨å­˜èµ„æ–™ã€‚ Printing å‡½å¼åœ¨æ¯æ¬¡äº¤æ˜“çš„æœ€åï¼Œæˆ‘ä»¬æƒ³è¦çœ‹åˆ°ä¸€ä¸ªæ¸…å•åˆ—å‡ºæ‰€æœ‰äº¤æ˜“ï¼Œæ¥ç¡®ä¿æˆ‘ä»¬çŸ¥é“æ‰€æœ‰å‘ç”Ÿçš„äº‹æƒ…ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨transactionå‡½å¼ä¸‹è¾“å…¥çš„ç¨‹å¼ç ï¼š 123456789func chainState() &#123; for i in 0...bitcoinChain.chain.count-1 &#123; print(\"\\tBlock: \\(bitcoinChain.chain[i].index!)\\n\\tHash: \\(bitcoinChain.chain[i].hash!)\\n\\tPreviousHash: \\(bitcoinChain.chain[i].previousHash!)\\n\\tData: \\(bitcoinChain.chain[i].data!)\") &#125; redLabel.text = \"Balance: \\(accounts[String(describing: firstAccount)]!) BTC\" blueLabel.text = \"Balance: \\(accounts[String(describing: secondAccount)]!) BTC\" print(accounts) print(chainValidity())&#125; è¿™æ˜¯ä¸€ä¸ªç®€å•çš„forå›åœˆï¼ŒåŒ…å«bitcoinChainçš„æ¯ä¸ªåŒºå—ã€‚æˆ‘ä»¬å°å‡ºåŒºå—çš„ç¼–å·ã€æ‚å‡‘å€¼ã€å‰ä¸ªåŒºå—çš„æ‚å‡‘ã€ä»¥åŠå‚¨å­˜çš„èµ„æ–™ï¼Œå†æ›´æ–°UILabelæ¥æ˜¾ç¤ºæ¯ä¸ªå¸å·å†…æ­£ç¡®çš„BTCæ•°ç›®ã€‚æœ€åï¼Œå°å‡ºä¸€ä¸ªåˆ—å‡ºæ¯ä¸ªå¸å·çš„æ¸…å•ï¼ˆåº”è¯¥ä¼šæœ‰ä¸‰ä¸ªï¼‰ï¼Œå¹¶éªŒè¯é“¾çš„åˆæ³•æ€§ã€‚ç°åœ¨ï¼Œä½ åº”è¯¥ä¼šåœ¨å‡½å¼æœ€åä¸€è¡Œä¸­å‘ç”Ÿé”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡å®šä¹‰chainValidity()å‡½å¼ï¼Œé‚£ä¹ˆå°±æ¥å¼€å§‹å§ï¼ Validity å‡½å¼è®°ä½ï¼Œå¦‚æœå‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼ç¬¦åˆç›®å‰åŒºå—æ‰€æè¿°çš„å†…å®¹ï¼Œé‚£ä¹ˆè¿™ä¸€ä¸ªé“¾å°±æ˜¯åˆæ³•çš„ã€‚æˆ‘ä»¬å¯ä»¥è½»æ˜“åœ°ç”¨å¦ä¸€ä¸ªfor å›åœˆæ¥é‡å¤éªŒè¯æ¯ä¸ªåŒºå—ã€‚ 123456789func chainValidity() -&gt; String &#123; var isChainValid = true for i in 1...bitcoinChain.chain.count-1 &#123; if bitcoinChain.chain[i].previousHash != bitcoinChain.chain[i-1].hash &#123; isChainValid = false &#125; &#125; return \"Chain is valid: \\(isChainValid)\\n\"&#125; è·Ÿä¹‹å‰æœ‰ç‚¹ç›¸ä¼¼ï¼Œæˆ‘ä»¬åœ¨bitcoinChainä¸­é‡å¤éªŒè¯æ¯ä¸ªåŒºå—ï¼Œæ¥ç¡®è®¤å‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼æ˜¯å¦ä¸ç›®å‰åŒºå—æ‰€æè¿°çš„å†…å®¹ç¬¦åˆã€‚è¿™æ ·å°±å®Œæˆäº†ï¼æˆ‘ä»¬å·²ç»å®šä¹‰äº†å‡½å¼ï¼Œå¹¶å°†ä¼šæ¯æ¬¡éƒ½ç”¨åˆ°å®ƒä»¬ï¼ä½ çš„ViewController.swiftç°åœ¨åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š ç°åœ¨æˆ‘ä»¬åªéœ€è¦å°†æŒ‰é’®è¿æ¥åˆ°å‡½å¼å°±å®Œæˆäº†ï¼Œæ¥å¼€å§‹æœ€åçš„ç¯‡ç« å§ï¼ å°†æ‰€æœ‰ä¸œè¥¿è¿ç»“åœ¨ä¸€èµ·å½“æˆ‘ä»¬çš„Appé¦–æ¬¡å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬æƒ³è®©åˆå§‹å¸å·0000ä¼ é€50 BTCåˆ°æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå¸å·ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†è®©ç¬¬ä¸€ä¸ªå¸å·ä¼ é€10 BTCåˆ°ç¬¬äºŒä¸ªå¸å·ã€‚è¿™ä¸ªæ­¥éª¤ä»…éœ€ä¸‰è¡Œç¨‹å¼ç å°±å¯ä»¥å®Œæˆã€‚å¦‚æ­¤æ›´æ”¹ä½ çš„viewDidLoadå‡½å¼ï¼š 1234567override func viewDidLoad() &#123; super.viewDidLoad() transaction(from: \"0000\", to: \"\\(firstAccount)\", amount: 50, type: \"genesis\") transaction(from: \"\\(firstAccount)\", to: \"\\(secondAccount)\", amount: 10, type: \"normal\") chainState() self.invalidAlert.addAction(UIAlertAction(title: \"OK\", style: .default, handler: nil))&#125; æˆ‘ä»¬ä½¿ç”¨å…ˆå‰å®šä¹‰å¥½çš„å‡½å¼ï¼Œå¹¶åœ¨æœ€åå‘¼å«chainState()ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ªOKæŒ‰é’®åˆ°äº¤æ˜“æ— æ•ˆçš„è­¦å‘Šä¸­ã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹å‰©ä¸‹çš„å››ä¸ªå‡½å¼é‡Œè¦åŠ å…¥ä»€ä¹ˆï¼šredMine()ã€blueMine()ã€redSend()åŠblueSend()ã€‚ æŒ–çŸ¿å‡½å¼æŒ–çŸ¿å‡½å¼éå¸¸åœ°ç®€å•ï¼Œåªè¦ä¸‰è¡Œç¨‹å¼ç å°±è¡Œäº†ã€‚è¿™å°±æ˜¯æˆ‘ä»¬è¦æ·»åŠ çš„ç¨‹å¼ç ï¼š 1234567891011@IBAction func redMine(_ sender: Any) &#123; transaction(from: \"0000\", to: \"\\(firstAccount)\", amount: 100, type: \"normal\") print(\"New block mined by: \\(firstAccount)\") chainState()&#125; @IBAction func blueMine(_ sender: Any) &#123; transaction(from: \"0000\", to: \"\\(secondAccount)\", amount: 100, type: \"normal\") print(\"New block mined by: \\(secondAccount)\") chainState()&#125; åœ¨ç¬¬ä¸€ä¸ªæŒ–çŸ¿å‡½å¼ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨transactionå‡½å¼ä»åˆå§‹å¸å·ä¼ é€100 BTCåˆ°ç¬¬ä¸€ä¸ªå¸å·ï¼Œå…ˆå°å‡ºä¸€ä¸ªåŒºå—è¢«æŒ–å‡ºï¼Œå†å°å‡ºchainStateã€‚åŒæ ·åœ°ï¼Œæˆ‘ä»¬åœ¨blueMineå‡½å¼é‡Œå°†100 BTCä¼ é€åˆ°ç¬¬äºŒä¸ªå¸å·ã€‚ ä¼ é€å‡½å¼ä¼ é€å‡½å¼ä¸å…ˆå‰çš„å‡½å¼ä¹Ÿç¨å¾®ç›¸ä¼¼ã€‚ 123456789101112131415161718192021@IBAction func redSend(_ sender: Any) &#123; if redAmount.text == \"\" &#123; present(invalidAlert, animated: true, completion: nil) &#125; else &#123; transaction(from: \"\\(firstAccount)\", to: \"\\(secondAccount)\", amount: Int(redAmount.text!)!, type: \"normal\") print(\"\\(redAmount.text!) BTC sent from \\(firstAccount) to \\(secondAccount)\") chainState() redAmount.text = \"\" &#125;&#125; @IBAction func blueSend(_ sender: Any) &#123; if blueAmount.text == \"\" &#123; present(invalidAlert, animated: true, completion: nil) &#125; else &#123; transaction(from: \"\\(secondAccount)\", to: \"\\(firstAccount)\", amount: Int(blueAmount.text!)!, type: \"normal\") print(\"\\(blueAmount.text!) BTC sent from \\(secondAccount) to \\(firstAccount)\") chainState() blueAmount.text = \"\" &#125;&#125; é¦–å…ˆï¼Œæˆ‘ä»¬ç¡®è®¤redAmountæˆ–blueAmountä¸­çš„æ–‡å­—æ ä½æ˜¯å¦ä¸ºç©ºå€¼ã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬ä¼šæ˜¾ç¤ºä¸€ä¸ªäº¤æ˜“æ— æ•ˆçš„è­¦å‘Šã€‚å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­ã€‚æˆ‘ä»¬ä½¿ç”¨transactionå‡½å¼è¾“å…¥é‡‘é¢ï¼Œå¹¶æŠŠäº¤æ˜“è®¾ä¸ºnormalå‹æ€ï¼Œä»¥å°†ç¬¬ä¸€ä¸ªå¸å·çš„é‡‘é¢ä¼ é€åˆ°ç¬¬äºŒä¸ªå¸å·ï¼ˆæˆ–ç›¸åï¼‰ã€‚æˆ‘ä»¬å°å‡ºè¢«ä¼ é€çš„é‡‘é¢ï¼Œç„¶åå‘¼å«chainState()å‡½å¼ã€‚æœ€åï¼ŒæŠŠæ–‡å­—æ ä½æ¸…ç©ºã€‚è¿™æ ·æˆ‘ä»¬å°±å®Œæˆå•°ï¼ç¡®è®¤ä¸€ä¸‹ä½ çš„ç¨‹å¼ç æ˜¯å¦ç¬¦åˆä¸‹å›¾æ‰€ç¤ºã€‚ æ‰§è¡ŒApp è¯•è¯•çœ‹ï¼ä»å‰ç«¯æ¥è¯´ï¼Œå®ƒçœ‹èµ·æ¥å°±å¦‚ä¸€ä¸ªæ™®é€šçš„äº¤æ˜“Appï¼Œä½†ä½ ä¼šçŸ¥é“å®ƒåå°çš„è¿ä½œã€‚è¯•è¯•ä½¿ç”¨App å°†BTC ä»ä¸€ä¸ªå¸å·äº¤æ˜“ç»™å¦ä¸€ä¸ªå¸å·ã€å¹¶è¯•ç€æ¬ºéª—App å§ï¼ ç»“è®ºåœ¨è¿™æ¬¡çš„æ•™å­¦ä¸­ï¼Œä½ å­¦åˆ°äº†å¦‚ä½•ä½¿ç”¨Swift æ¥å»ºç«‹ä¸€ä¸ªåŒºå—é“¾ï¼Œå¹¶å»ºç«‹è‡ªå·±çš„æ¯”ç‰¹å¸äº¤æ˜“ã€‚è¯·æ³¨æ„åœ¨çœŸå®çš„åŠ å¯†è´§å¸åå°é‡Œï¼Œå®ä½œéƒ¨åˆ†æ˜¯è·Ÿä¸Šæ–‡æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ä¸œè¥¿ï¼Œå› ä¸ºå®ƒéœ€è¦è—‰ç”±æ™ºæ…§åˆçº¦æ¥åˆ†æ•£ï¼Œä½†æ˜¯ä¸Šé¢çš„ç¤ºèŒƒå†…å®¹ç”¨æ¥å­¦ä¹ çš„ã€‚åœ¨è¿™ä¸ªèŒƒä¾‹ä¸­ï¼Œæˆ‘ä»¬è¿ç”¨äº†æ¯”ç‰¹å¸æ¥å½“åŠ å¯†è´§å¸ï¼Œä½†ä½ èƒ½æƒ³åˆ°åŒºå—é“¾è¿˜çš„å…¶ä»–ç”¨é€”å—ï¼Ÿæ¬¢è¿åœ¨ä¸‹é¢ç•™è¨€åˆ†äº«ä½ çš„çœ‹æ³•ï¼å¸Œæœ›ä½ åœ¨æ­¤å­¦åˆ°æ–°çš„ä¸œè¥¿ï¼ä½ å¯ä»¥åœ¨Githubä¸‹è½½å®Œæ•´é¡¹ç›®ä½œå‚è€ƒã€‚ å®Œæ•´é¡¹ç›®ï¼šhttps://github.com/appcoda/BlockchainDemoåŸæ–‡é“¾æ¥ï¼šhttps://www.appcoda.com/blockchain-introduction/","categories":[{"name":"Blockchain","slug":"Blockchain","permalink":"https://reversescale.github.io/categories/Blockchain/"}],"tags":[{"name":"Blockchain","slug":"Blockchain","permalink":"https://reversescale.github.io/tags/Blockchain/"}]},{"title":"èµ°åœ¨æŠ€æœ¯å‰æ²¿çš„ iOS æ¶æ„å®ç°","slug":"iOS Architecture","date":"2018-05-01T13:56:27.000Z","updated":"2018-11-15T15:14:12.443Z","comments":true,"path":"2018/05/01/iOS Architecture/","link":"","permalink":"https://reversescale.github.io/2018/05/01/iOS Architecture/","excerpt":"æˆ‘ç†è§£çš„æ¡†æ¶ï¼Œå°±å¥½æ¯”è®¡ç®—æœºçš„ä¸»æ¿ï¼Œæˆ¿å±‹çš„å»ºç­‘éª¨æ¶ï¼Œé“è·¯çš„åŸºç¡€è®¾æ–½é…å¥—ï¼Œæ¡†æ¶æ­çš„å¥½ï¼Œèƒ½ç›´æ¥å½±å“å¼€å‘è€…çš„å¼€å‘å¿ƒæƒ…ï¼Œæ›´èƒ½è®©é¡¹ç›®å¥å£®æ€§å’Œæ‰©å±•æ€§å¤§å¤§å¢å¼º~","text":"æˆ‘ç†è§£çš„æ¡†æ¶ï¼Œå°±å¥½æ¯”è®¡ç®—æœºçš„ä¸»æ¿ï¼Œæˆ¿å±‹çš„å»ºç­‘éª¨æ¶ï¼Œé“è·¯çš„åŸºç¡€è®¾æ–½é…å¥—ï¼Œæ¡†æ¶æ­çš„å¥½ï¼Œèƒ½ç›´æ¥å½±å“å¼€å‘è€…çš„å¼€å‘å¿ƒæƒ…ï¼Œæ›´èƒ½è®©é¡¹ç›®å¥å£®æ€§å’Œæ‰©å±•æ€§å¤§å¤§å¢å¼º~ åŸºäº Objective-C å®ç°çš„æ¡†æ¶è®¾è®¡ï¼ŒYTKNetworkç½‘ç»œå±‚ + AOPæ›¿ä»£åŸºç±» + MVVM + ReactiveObjC + JLRoutesè·¯ç”± ğŸ‘¨ğŸ»â€ğŸ’» Github Demo ğŸ¤– è¦æ±‚ iOS 8.0+ Xcode 8.0+ Objective-C ğŸ¨ æµ‹è¯• UI ä»€ä¹ˆæ ·å­ï¼Ÿ 1.å±•ç¤ºé¡µ 2.å±•ç¤ºé¡µ 3.å±•ç¤ºé¡µ 4.è¯´æ˜é¡µ ç™»å½•è§†å›¾ ç¤ºä¾‹å±•ç¤º è·³è½¬é¡µé¢ ä»‹ç»é¡µé¢ ğŸ¯ å®‰è£…æ–¹æ³•å®‰è£…åœ¨ iOS, ä½ éœ€è¦åœ¨ Podfile ä¸­æ·»åŠ .123456789101112131415161718source &apos;https://github.com/CocoaPods/Specs.git&apos;platform :ios, &apos;9.0&apos;use_frameworks! # æç¤ºç»„ä»¶æ¡†æ¶ pod &apos;SVProgressHUD&apos;, &apos;~&gt; 2.2.2&apos; # ç½‘ç»œè¯·æ±‚æ¡†æ¶ pod &apos;YTKNetwork&apos;, &apos;~&gt; 2.0.3&apos; # AOPé¢å‘åˆ‡é¢ pod &apos;Aspects&apos;, &apos;~&gt; 1.4.1&apos; # å“åº”å‡½æ•°å¼æ¡†æ¶ pod &apos;ReactiveObjC&apos;, &apos;~&gt; 3.0.0&apos; # è·¯ç”±ç»„ä»¶åŒ–è§£è€¦ pod &apos;JLRoutes&apos;, &apos;~&gt; 2.0.5&apos; # æç¤ºç»„ä»¶æ¡†æ¶ pod &apos;SVProgressHUD&apos;, &apos;~&gt; 2.2.2&apos; # è‡ªåŠ¨å¸ƒå±€ pod &apos;Masonry&apos;, &apos;~&gt; 1.0.2&apos; ğŸ›  æ¡†æ¶ä»‹ç»AOP æ¨¡å¼ï¼ˆAspects-RunTime ä»£æ›¿åŸºç±»ï¼‰+ Category æ–¹æ³•äº¤æ¢é‡‡ç”¨AOPæ€æƒ³ï¼Œä½¿ç”¨ Aspects æ¥å®Œæˆæ›¿æ¢ Controller ï¼ŒViewï¼ŒViewModelåŸºç±»ï¼Œå’ŒåŸºç±»è¯´æ‹œæ‹œ Casaåé©å‘½å·¥ç¨‹å¸ˆ iOSåº”ç”¨æ¶æ„è°ˆ viewå±‚çš„ç»„ç»‡å’Œè°ƒç”¨æ–¹æ¡ˆ åšå®¢ä¸­æåˆ°ä¸€ä¸ªç–‘é—®æ˜¯å¦æœ‰å¿…è¦è®©ä¸šåŠ¡æ–¹ç»Ÿä¸€æ´¾ç”ŸViewController Casaå¤§ç¥å›ç­”æ˜¯NOï¼ŒåŸå› å¦‚ä¸‹ ä½¿ç”¨æ´¾ç”Ÿæ¯”ä¸ä½¿ç”¨æ´¾ç”Ÿæ›´å®¹æ˜“å¢åŠ ä¸šåŠ¡æ–¹çš„ä½¿ç”¨æˆæœ¬ ä¸ä½¿ç”¨æ´¾ç”Ÿæ‰‹æ®µä¸€æ ·ä¹Ÿèƒ½è¾¾åˆ°ç»Ÿä¸€è®¾ç½®çš„ç›®çš„å¯¹äºç¬¬ä¸€ç‚¹ï¼Œä» é›†æˆæˆæœ¬ ï¼Œä¸Šæ‰‹æˆæœ¬ ï¼Œæ¶æ„ç»´æŠ¤æˆæœ¬ç­‰å› ç´ å…¥æ‰‹ï¼Œå¤§ç¥åšå®¢ä¸­ä¹Ÿå·²ç»å¾ˆè¯¦ç»†ã€‚ æ¡†æ¶ä¸éœ€è¦é€šè¿‡ç»§æ‰¿å³èƒ½å¤Ÿå¯¹ViewControllerè¿›è¡Œç»Ÿä¸€é…ç½®ã€‚ä¸šåŠ¡å³ä½¿è„±ç¦»ç¯å¢ƒï¼Œä¹Ÿèƒ½å¤Ÿè·‘å®Œä»£ç ï¼ŒViewControllerä¸€æ—¦æ”¾å…¥æ¡†æ¶ç¯å¢ƒï¼Œä¸éœ€è¦æ·»åŠ é¢å¤–çš„æˆ–è€…åªéœ€æ·»åŠ å°‘é‡ä»£ç ï¼Œæ¡†æ¶ä¹Ÿèƒ½å¤Ÿèµ·åˆ°ç›¸åº”çš„ä½œç”¨ å¯¹äºæœ¬äººæ¥è¯´ ï¼Œå…·å¤‡è¿™ç‚¹çš„å¸å¼•åŠ›ï¼Œå·²ç»è¶³å¤Ÿè®©æˆ‘æœ‰å°è¯•ä¸€ç•ªçš„å¿ƒæ€äº†ã€‚ å¯¹äºOCæ¥è¯´ï¼Œæ–¹æ³•æ‹¦æˆªå¾ˆå®¹æ˜“å°±æƒ³åˆ°è‡ªå¸¦çš„é»‘é­”æ³•æ–¹æ³•è°ƒé… Method Swizzlingï¼Œ è‡³äºä¸ºViewControlleråšåŠ¨æ€é…ç½®ï¼Œè‡ªç„¶éCategoryè«å±äº†Method Swizzling ä¸šç•Œå·²ç»æœ‰éå¸¸æˆç†Ÿçš„ä¸‰æ–¹åº“ Aspects, æ‰€ä»¥Demoä»£ç é‡‡ç”¨ Aspects åšæ–¹æ³•æ‹¦æˆªã€‚ 12345678910111213141516171819202122+ (void)load &#123; [super load]; [FKViewControllerIntercepter sharedInstance];&#125;// .... å•ä¾‹åˆå§‹åŒ–ä»£ç - (instancetype)init &#123; self = [super init]; if (self) &#123; /* æ–¹æ³•æ‹¦æˆª */ // æ‹¦æˆª viewDidLoad æ–¹æ³• [UIViewController aspect_hookSelector:@selector(viewDidLoad) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt;aspectInfo)&#123; [self _viewDidLoad:aspectInfo.instance]; &#125; error:nil]; // æ‹¦æˆª viewWillAppear: [UIViewController aspect_hookSelector:@selector(viewWillAppear:) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; aspectInfo, BOOL animated)&#123; [self _viewWillAppear:animated controller:aspectInfo.instance]; &#125; error:NULL]; &#125; return self;&#125; è‡³äº Category å·²ç»éå¸¸ç†Ÿæ‚‰äº† 12345678910111213141516171819202122232425262728@interface UIViewController (NonBase)/** å»Model&amp;&amp;è¡¨å¾åŒ–å‚æ•°åˆ—è¡¨ */@property (nonatomic, strong) NSDictionary *params;/** ViewModel å±æ€§ */@property (nonatomic, strong) id &lt;FKViewControllerProtocol&gt; viewModel;#pragma mark - é€šç”¨ç±»/** è¿”å›Controllerçš„å½“å‰bounds @param hasNav æ˜¯å¦æœ‰å¯¼èˆªæ  @param hasTabBar æ˜¯å¦æœ‰tabbar @return åæ ‡ */- (CGRect)fk_visibleBoundsShowNav:(BOOL)hasNav showTabBar:(BOOL)hasTabBar;/** éšè—é”®ç›˜ */- (void)fk_hideKeyBoard;@end è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†ä¸ç»§æ‰¿åŸºç±»æ¥å®ç°å¯¹ViewControllerçš„é…ç½®ï¼Œé¡¹ç›®ä¸­çš„ View ViewModel å»åŸºç±»åŸç†å¦‚å‡ºä¸€è¾™ã€‚ Viewå±‚é‡‡ç”¨ MVVM è®¾è®¡æ¨¡å¼ï¼Œä½¿ç”¨ ReactiveObjC è¿›è¡Œæ•°æ®ç»‘å®š-MVC- ä½œä¸ºè€ç‰Œæ€æƒ³MVCï¼Œå¤§å®¶æ—©å·²è€³ç†Ÿèƒ½è¯¦ï¼ŒMVCç´ æœ‰ Massive VCä¹‹ç§°ï¼Œéšç€ä¸šåŠ¡å¢åŠ ï¼ŒControllerå°†ä¼šè¶Šæ¥è¶Šå¤æ‚ï¼Œæœ€ç»ˆControllerä¼šå˜æˆä¸€ä¸ªâ€ç¥ç±»â€, å³æœ‰ç½‘ç»œè¯·æ±‚ç­‰ä»£ç ï¼Œåˆå……æ–¥ç€å¤§é‡ä¸šåŠ¡é€»è¾‘ï¼Œæ‰€ä»¥ä¸ºControllerå‡è´Ÿï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å˜å¾—åŠ¿åœ¨å¿…è¡Œ -MVVM- MVVMæ˜¯åŸºäºèƒ–Modelçš„æ¶æ„æ€è·¯å»ºç«‹çš„ï¼Œç„¶ååœ¨èƒ–Modelä¸­æ‹†å‡ºä¸¤éƒ¨åˆ†ï¼šModelå’ŒViewModel (æ³¨ï¼šèƒ–Model æ˜¯æŒ‡åŒ…å«äº†ä¸€äº›å¼±ä¸šåŠ¡é€»è¾‘çš„Model)èƒ–Modelå®é™…ä¸Šæ˜¯ä¸ºäº†å‡è´Ÿ Controller è€Œå­˜åœ¨çš„ï¼Œè€Œ MVVM æ˜¯ä¸ºäº†æ‹†åˆ†èƒ–Model , æœ€ç»ˆç›®çš„éƒ½æ˜¯ä¸ºäº†å‡è´ŸControllerã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œè‹¹æœMVCå¹¶æ²¡æœ‰ä¸“é—¨ä¸ºç½‘ç»œå±‚ä»£ç åˆ†ä¸“é—¨çš„å±‚çº§ï¼ŒæŒ‰ç…§ä»¥å¾€ä¹ æƒ¯ï¼Œå¤§å®¶éƒ½å†™åœ¨äº†Controller ä¸­ï¼Œè¿™ä¹Ÿæ˜¯Controller å˜Massiveå¾—å…ƒå‡¶ä¹‹ä¸€ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å°†ç½‘ç»œè¯·æ±‚ç­‰è¯¸å¦‚æ­¤ç±»çš„ä»£ç æ”¾åˆ°ViewModelä¸­äº† ï¼ˆæ–‡ç« ååŠéƒ¨åˆ†å°†ä¼šæè¿°ViewModelä¸­çš„ç½‘ç»œè¯·æ±‚ï¼‰ -æ•°æ®æµå‘- æ­£å¸¸çš„ç½‘ç»œè¯·æ±‚è·å–æ•°æ®ï¼Œç„¶åæ›´æ–°Viewè‡ªç„¶ä¸å¿…å¤šè¯´ï¼Œé‚£ä¹ˆå¦‚æœViewäº§ç”Ÿäº†æ•°æ®è¦æ€ä¹ˆæŠŠæ•°æ®ç»™åˆ°Modelï¼Œç”±äºViewä¸ç›´æ¥æŒæœ‰ViewModelï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ä¸ªæ¡¥æ¢ ReactiveCocoa, é€šè¿‡ Signal æ¥å’Œ ViewModel é€šä¿¡ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬ä½¿ç”¨ é€šçŸ¥ æˆ–è€… Target-Actionä¹Ÿå¯ä»¥å®ç°ç›¸åŒçš„æ•ˆæœï¼Œåªä¸è¿‡æ²¡æœ‰ ReactiveCocoa å¦‚æ­¤æ–¹ä¾¿ç½¢äº† 123456789101112131415161718/* View -&gt; ViewModel ä¼ é€’æ•°æ®ç¤ºä¾‹ */#pragma mark - Bind ViewModel- (void)bindViewModel:(id&lt;FKViewModelProtocol&gt;)viewModel withParams:(NSDictionary *)params &#123; if ([viewModel isKindOfClass:[FKLoginViewModel class]])&#123; FKLoginViewModel *_viewModel = (FKLoginViewModel *)viewModel; // ç»‘å®šè´¦å· View -&gt; ViewModel ä¼ é€’æ•°æ® @weakify(self); RAC(_viewModel, userAccount) = [[self.inputTextFiled.rac_textSignal takeUntil:self.rac_prepareForReuseSignal] map:^id _Nullable(NSString * _Nullable account) &#123; @strongify(self); // é™åˆ¶è´¦å·é•¿åº¦ if (account.length &gt; 25) &#123; self.inputTextFiled.text = [account substringToIndex:25]; &#125; return self.inputTextFiled.text; &#125;]; &#125;&#125; ä¸Šé¢ä»£ç ç»™å‡ºäº† View -&gt; ViewModel ç»‘å®šçš„ä¸€ä¸ªä¾‹å­ å…·ä½“ä¸€äº›è¯¦æƒ…ï¼Œå¯ä»¥ç›´æ¥çœ‹DemoMVVMä¸€äº›æ€»ç»“ï¼š View C ViewModel Model å®é™…ä¸Šåº”è¯¥ç§°ä¹‹ä¸ºMVCVM Controller å°†ä¸å†ç›´æ¥å’Œ Model è¿›è¡Œç»‘å®šï¼Œè€Œé€šè¿‡æ¡¥æ¢ViewModel æœ€ç»ˆ Controller çš„ä½œç”¨å˜æˆä¸€äº›UIçš„å¤„ç†é€»è¾‘ï¼Œå’Œè¿›è¡ŒViewå’ŒViewModelçš„ç»‘å®š MVVM å’Œ MVC å…¼å®¹ ç”±äºå¤šäº†ä¸€å±‚ ViewModel, ä¼šéœ€è¦å†™ä¸€äº›èƒ¶æ°´ä»£ç ï¼Œæ‰€ä»¥ä»£ç é‡ä¼šå¢åŠ  ç½‘ç»œå±‚ä½¿ç”¨ YTKNetwork é…åˆ ReactiveCocoa å°è£…ç½‘ç»œè¯·æ±‚ï¼Œè§£å†³å¦‚ä½•äº¤ä»˜æ•°æ®ï¼Œäº¤ä»˜ä»€ä¹ˆæ ·çš„æ•°æ®ï¼ˆå»ModelåŒ–)ç­‰é—®é¢˜YTKNetwork æ˜¯çŒ¿é¢˜åº“ iOS ç ”å‘å›¢é˜ŸåŸºäº AFNetworking å°è£…çš„ iOS ç½‘ç»œåº“ï¼Œå…¶å®ç°äº†ä¸€å¥— High Level çš„ APIï¼Œæä¾›äº†æ›´é«˜å±‚æ¬¡çš„ç½‘ç»œè®¿é—®æŠ½è±¡ã€‚ ç¬”è€…å¯¹ YTKNetwork è¿›è¡Œäº†ä¸€äº›å°è£…ï¼Œç»“åˆ ReactiveCocoaï¼Œå¹¶æä¾› reFormatter æ¥å£å¯¹æœåŠ¡å™¨å“åº”æ•°æ®é‡æ–°å¤„ç†ï¼Œçµæ´»äº¤ä»˜ç»™ä¸šåŠ¡å±‚ã€‚æ¥ä¸‹æ¥ï¼Œæœ¬æ–‡ä¼šå›ç­”ä¸¤ä¸ªé—®é¢˜ ä»¥ä»€ä¹ˆæ–¹å¼å°†æ•°æ®äº¤ä»˜ç»™ä¸šåŠ¡å±‚ï¼Ÿ äº¤ä»˜ä»€ä¹ˆæ ·çš„æ•°æ® ?å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ ä»¥ä»€ä¹ˆæ–¹å¼å°†æ•°æ®äº¤ä»˜ç»™ä¸šåŠ¡å±‚ï¼Ÿ è™½ç„¶ iOSåº”ç”¨æ¶æ„è°ˆ ç½‘ç»œå±‚è®¾è®¡æ–¹æ¡ˆ ä¸­ Casaå¤§ç¥å†™åˆ° å°½é‡ä¸è¦ç”¨blockï¼Œåº”è¯¥ä½¿ç”¨ä»£ç†çš„ç¡®ï¼ŒBlockéš¾ä»¥è¿½è¸ªå’Œå®šä½é”™è¯¯ï¼Œå®¹æ˜“å†…å­˜æ³„æ¼ï¼Œ YTKNetwork ä¹Ÿæä¾›ä»£ç†æ–¹å¼å›è°ƒ 1234567891011121314@protocol YTKRequestDelegate &lt;NSObject&gt;@optional/// Tell the delegate that the request has finished successfully.////// @param request The corresponding request.- (void)requestFinished:(__kindof YTKBaseRequest *)request;/// Tell the delegate that the request has failed.////// @param request The corresponding request.- (void)requestFailed:(__kindof YTKBaseRequest *)request;@end å‰æ–‡æœ‰è¯´è¿‡ï¼ŒMVVM å¹¶ä¸ç­‰äº ReactiveCocoa , ä½†æ˜¯æƒ³è¦ä½“éªŒæœ€çº¯æ­£çš„ ReactiveCocoa è¿˜æ˜¯Blockè¾ƒä¸ºé…¸çˆ½ï¼ŒDemoä¸­ç¬”è€…ä¸¤è€…éƒ½ç»™å‡ºäº†ä»£ç , å¤§å®¶å¯ä»¥è‡ªè¡Œé€‰æ‹©å’Œæ–Ÿé…Œå“ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹ YTKNetwork å’Œ ReactiveCocoa ç»“åˆçš„ä»£ç  123456789101112131415161718192021222324252627- (RACSignal *)rac_requestSignal &#123; [self stop]; RACSignal *signal = [[RACSignal createSignal:^RACDisposable * _Nullable(id&lt;RACSubscriber&gt; _Nonnull subscriber) &#123; // è¯·æ±‚èµ·é£ [self startWithCompletionBlockWithSuccess:^(__kindof YTKBaseRequest * _Nonnull request) &#123; // æˆåŠŸå›è°ƒ [subscriber sendNext:[request responseJSONObject]]; [subscriber sendCompleted]; &#125; failure:^(__kindof YTKBaseRequest * _Nonnull request) &#123; // é”™è¯¯å›è°ƒ [subscriber sendError:[request error]]; &#125;]; return [RACDisposable disposableWithBlock:^&#123; // Signalé”€æ¯ åœæ­¢è¯·æ±‚ [self stop]; &#125;]; &#125;] takeUntil:[self rac_willDeallocSignal]]; //è®¾ç½®åç§° ä¾¿äºè°ƒè¯• if (DEBUG) &#123; [signal setNameWithFormat:@\"%@ -rac_xzwRequest\", RACDescription(self)]; &#125; return signal;&#125; å†™äº†ä¸€ä¸ªç®€å•çš„ Category FKBaseRequest+Rac.hViewModel ä¸­ä½¿ç”¨ RACCommand å°è£…è°ƒç”¨ï¼š1234567891011- (RACCommand *)loginCommand &#123; if (!_loginCommand) &#123; @weakify(self); _loginCommand = [[RACCommand alloc] initWithSignalBlock:^RACSignal * _Nonnull(id _Nullable input) &#123; @strongify(self); return [[[FKLoginRequest alloc] initWithUsr:self.userAccount pwd:self.password] rac_requestSignal]; &#125;]; &#125; return _loginCommand;&#125; Blockæ–¹å¼äº¤ä»˜ä¸šåŠ¡1234567FKLoginRequest *loginRequest = [[FKLoginRequest alloc] initWithUsr:self.userAccount pwd:self.password];return [[[loginRequest rac_requestSignal] doNext:^(id _Nullable x) &#123; // è§£ææ•°æ® [[NSUserDefaults standardUserDefaults] setObject:@(YES) forKey:@\"isLogin\"]; &#125;] materialize]; Delegateæ–¹å¼äº¤ä»˜ä¸šåŠ¡12345678910FKLoginRequest *loginRequest = [[FKLoginRequest alloc] initWithUsr:self.userAccount pwd:self.password];// æ•°æ®è¯·æ±‚å“åº”ä»£ç† é€šè¿‡ä»£ç†å›è°ƒloginRequest.delegate = self;return [loginRequest rac_requestSignal];#pragma mark - YTKRequestDelegate- (void)requestFinished:(__kindof YTKBaseRequest *)request &#123; // è§£ææ•°æ® [[NSUserDefaults standardUserDefaults] setObject:@(YES) forKey:@\"isLogin\"];&#125; äº¤ä»˜ä»€ä¹ˆæ ·çš„æ•°æ® ? ç°åœ¨è¯¸å¦‚ JSONModel ï¼ŒYYModel ä¹‹ç±»çš„Jsonè½¬Modelçš„åº“ä¹Ÿéå¸¸å¤šï¼Œå¤§å¤šæ•°Jsonå¯¹è±¡ï¼Œç½‘ç»œè¯·æ±‚æˆåŠŸç›´æ¥å°±è¢«è½¬æˆModeläº†ç„¶è€Œ iOSåº”ç”¨æ¶æ„è°ˆ ç½‘ç»œå±‚è®¾è®¡æ–¹æ¡ˆ ä¸­ç»™å‡ºäº†ä¸¤ç§æœ‰æ„æ€çš„äº¤ä»˜æ€è·¯ ä½¿ç”¨ reformer å¯¹æ•°æ®è¿›è¡Œæ¸…æ´— å»ç‰¹å®šå¯¹è±¡è¡¨å¾ ï¼ˆå»Modelï¼‰ Casaæ–‡ç« ä¸­å¥½å¤„å·²ç»å†™å¾—å¾ˆè¯¦ç»†äº†ï¼Œé€šè¿‡ä¸åŒçš„ reformer æ¥é‡å¡‘å’Œäº¤ä»˜ä¸åŒçš„ä¸šåŠ¡æ•°æ®ï¼Œå¯ä»¥è¯´æ˜¯éå¸¸çµæ´»äº† ä½¿ç”¨ reformer å¯¹æ•°æ®è¿›è¡Œæ¸…æ´— åœ¨ç½‘ç»œå±‚å°è£… FKBaseRequest.h ä¸­ ç»™å‡ºäº† FKBaseRequestFeformDelegate æ¥å£æ¥é‡å¡‘æ•°æ®1234567891011121314151617181920@protocol FKBaseRequestFeformDelegate &lt;NSObject&gt;/** è‡ªå®šä¹‰è§£æå™¨è§£æå“åº”å‚æ•° @param request å½“å‰è¯·æ±‚ @param jsonResponse å“åº”æ•°æ® @return è‡ªå®šreformatæ•°æ® */- (id)request:(FKBaseRequest *)request reformJSONResponse:(id)jsonResponse;@endç„¶ååœ¨å¯¹åº”çš„ reformer å¯¹æ•°æ®è¿›è¡Œé‡å¡‘#pragma mark - FKBaseRequestFeformDelegate- (id)request:(FKBaseRequest *)request reformJSONResponse:(id)jsonResponse &#123; if([request isKindOfClass:FKLoginRequest.class])&#123; // åœ¨è¿™é‡Œå¯¹jsonæ•°æ®è¿›è¡Œé‡æ–°æ ¼å¼åŒ– &#125; return jsonResponse;&#125; ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å­ç±»çš„ RequestManager ä¸­è¦†ç›–çˆ¶ç±»æ–¹æ³•è¾¾åˆ°ä¸€æ ·çš„æ•ˆæœ12345/* FKLoginRequest.m */// å¯ä»¥åœ¨è¿™é‡Œå¯¹response æ•°æ®è¿›è¡Œé‡æ–°æ ¼å¼åŒ–ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨delegate è®¾ç½® reformattor- (id)reformJSONResponse:(id)jsonResponse &#123;&#125; å»ç‰¹å®šå¯¹è±¡è¡¨å¾ ï¼ˆå»Modelï¼‰ è¿™æ€è·¯å¯ä»¥è¯´æ˜¯ä¸šç•Œçš„æ³¥çŸ³æµäº†å»Modelä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨NSDictionaryå½¢å¼äº¤ä»˜æ•°æ®ï¼Œå¯¹äºç½‘ç»œå±‚è€Œè¨€ï¼Œåªéœ€è¦ä¿æŒä½åŸå§‹æ•°æ®å³å¯ï¼Œä¸éœ€è¦ä¸»åŠ¨è½¬åŒ–æˆæ•°æ®åŸå‹ä½†æ˜¯ä¼šå­˜åœ¨ä¸€äº›å°é—®é¢˜ å»Modelå¦‚ä½•ä¿æŒå¯è¯»æ€§ï¼Ÿ å¤æ‚å’Œå¤šæ ·çš„æ•°æ®ç»“æ„å¦‚ä½•è§£æï¼Ÿ Casaå¤§ç¥ æå‡ºäº† ä½¿ç”¨EXTERN + Const å­—ç¬¦ä¸²å½¢å¼ï¼Œå¹¶å»ºè®®å­—ç¬¦ä¸²è·Ÿç€reformerèµ°ï¼Œä¸ªäººè§‰å¾—å¾ˆå¤šæ—¶å€™APIåªéœ€è¦ä¸€ç§è§£ææ ¼å¼ï¼Œæ‰€ä»¥Demoè·Ÿç€ APIManager èµ°ï¼Œå…¶ä»–æƒ…å†µä¸‹å¸¸é‡å­—ç¬¦ä¸²å»ºè®®å¬ä» Casaå¤§ç¥ çš„å»ºè®®ï¼Œå¸¸é‡å®šä¹‰ï¼š 123456/* FKBaseRequest.h */// ç™»å½•token keyFOUNDATION_EXTERN NSString *FKLoginAccessTokenKey;/* FKBaseRequest.m */NSString *FKLoginAccessTokenKey = @\"accessToken\"; åœ¨ .h å’Œ .m æ–‡ä»¶ä¸­è¦åŒæ—¶å†™å¤ªå¤šä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å±€éƒ¨å¸¸é‡çš„å½¢å¼ï¼Œåªè¦åœ¨ .h æ–‡ä»¶ä¸­å®šä¹‰å³å¯ 12345678910111213// ä¹Ÿå¯ä»¥å†™æˆ å±€éƒ¨å¸¸é‡å½¢å¼static const NSString *FKLoginAccessTokenKey2 = @\"accessToken\";æœ€ç»ˆé‚£ä¹ˆæˆ‘ä»¬çš„reformerå¯èƒ½ä¼šå˜æˆè¿™æ ·å­- (id)request:(FKBaseRequest *)request reformJSONResponse:(id)jsonResponse &#123; if([request isKindOfClass:FKLoginRequest.class])&#123; // åœ¨è¿™é‡Œå¯¹jsonæ•°æ®è¿›è¡Œé‡æ–°æ ¼å¼åŒ– return @&#123; FKLoginAccessTokenKey : jsonResponse[@\"token\"], &#125;; &#125; return jsonResponse;&#125; å¤æ‚å’Œå¤šæ ·çš„æ•°æ®ç»“æ„å¦‚ä½•è§£æï¼Ÿæœ‰æ—¶å€™ï¼Œreformer äº¤ä»˜è¿‡æ¥çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦è§£æçš„å¯èƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¹Ÿå¯èƒ½æ˜¯NSNumberç±»å‹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æ•°ç»„ä¸ºæ­¤ï¼Œç¬”è€…æä¾›äº†ä¸€ç³»åˆ— Encode Decodeæ–¹æ³•ï¼Œæ¥é™ä½è§£æçš„å¤æ‚åº¦å’Œå®‰å…¨æ€§1234567891011121314151617181920212223242526#pragma mark - Encode Decode æ–¹æ³•// NSDictionary -&gt; NSStringFK_EXTERN NSString* DecodeObjectFromDic(NSDictionary *dic, NSString *key);// NSArray + index -&gt; idFK_EXTERN id DecodeSafeObjectAtIndex(NSArray *arr, NSInteger index);// NSDictionary -&gt; NSStringFK_EXTERN NSString * DecodeStringFromDic(NSDictionary *dic, NSString *key);// NSDictionary -&gt; NSString ï¼Ÿ NSString ï¼š defaultStrFK_EXTERN NSString* DecodeDefaultStrFromDic(NSDictionary *dic, NSString *key,NSString * defaultStr);// NSDictionary -&gt; NSNumberFK_EXTERN NSNumber * DecodeNumberFromDic(NSDictionary *dic, NSString *key);// NSDictionary -&gt; NSDictionaryFK_EXTERN NSDictionary *DecodeDicFromDic(NSDictionary *dic, NSString *key);// NSDictionary -&gt; NSArrayFK_EXTERN NSArray *DecodeArrayFromDic(NSDictionary *dic, NSString *key);FK_EXTERN NSArray *DecodeArrayFromDicUsingParseBlock(NSDictionary *dic, NSString *key, id(^parseBlock)(NSDictionary *innerDic));#pragma mark - Encode Decode æ–¹æ³•// (nonull Key: nonull NSString) -&gt; NSMutableDictionaryFK_EXTERN void EncodeUnEmptyStrObjctToDic(NSMutableDictionary *dic,NSString *object, NSString *key);// nonull objec -&gt; NSMutableArrayFK_EXTERN void EncodeUnEmptyObjctToArray(NSMutableArray *arr,id object);// (nonull (Key ? key : defaultStr) : nonull Value) -&gt; NSMutableDictionaryFK_EXTERN void EncodeDefaultStrObjctToDic(NSMutableDictionary *dic,NSString *object, NSString *key,NSString * defaultStr);// (nonull Key: nonull object) -&gt; NSMutableDictionaryFK_EXTERN void EncodeUnEmptyObjctToDic(NSMutableDictionary *dic,NSObject *object, NSString *key); æˆ‘ä»¬çš„reformerå¯ä»¥å†™æˆè¿™æ ·å­1234567891011#pragma mark - FKBaseRequestFeformDelegate- (id)request:(FKBaseRequest *)request reformJSONResponse:(id)jsonResponse &#123; if([request isKindOfClass:FKLoginRequest.class])&#123; // åœ¨è¿™é‡Œå¯¹jsonæ•°æ®è¿›è¡Œé‡æ–°æ ¼å¼åŒ– return @&#123; FKLoginAccessTokenKey : DecodeStringFromDic(jsonResponse, @\"token\") &#125;; &#125; return jsonResponse;&#125; è§£ææœ‰å¯èƒ½æ˜¯è¿™æ ·å­1NSString *token = DecodeStringFromDic(jsonResponse, FKLoginAccessTokenKey) å¥½äº†ï¼Œè‡³æ­¤æˆ‘ä»¬è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ ä»¥ä»€ä¹ˆæ–¹å¼å°†æ•°æ®äº¤ä»˜ç»™ä¸šåŠ¡å±‚ç­”ï¼šdelegate æœ€ä½³ï¼Œblockä¸ºæ¬¡ äº¤ä»˜ä»€ä¹ˆæ ·çš„æ•°æ®ç­”ï¼šçº¯å­—å…¸ï¼Œå»Model é‡‡ç”¨ JLRoutes è·¯ç”±å¯¹åº”ç”¨è¿›è¡Œç»„ä»¶åŒ–è§£è€¦ å¸¦ç€é—®é¢˜æ€è€ƒå¦‚ä½•æ‰èƒ½è®¾è®¡å‡ºæœ€å¥½çš„ç»„ä»¶åŒ–è·¯ç”±ï¼š 1ï¼‰3D-TouchåŠŸèƒ½æˆ–è€…ç‚¹å‡»æ¨é€æ¶ˆæ¯ï¼Œè¦æ±‚å¤–éƒ¨è·³è½¬åˆ°Appå†…éƒ¨ä¸€ä¸ªå¾ˆæ·±å±‚æ¬¡çš„ä¸€ä¸ªç•Œé¢ã€‚ 2ï¼‰è‡ªå®¶çš„ä¸€ç³»åˆ—Appä¹‹é—´å¦‚ä½•ç›¸äº’è·³è½¬ï¼Ÿ 3ï¼‰å¦‚ä½•è§£é™¤Appç»„ä»¶ä¹‹é—´å’ŒAppé¡µé¢ä¹‹é—´çš„è€¦åˆæ€§ï¼Ÿ 4ï¼‰å¦‚ä½•èƒ½ç»Ÿä¸€iOSå’ŒAndroidä¸¤ç«¯çš„é¡µé¢è·³è½¬é€»è¾‘ï¼Ÿç”šè‡³å¦‚ä½•èƒ½ç»Ÿä¸€ä¸‰ç«¯çš„è¯·æ±‚èµ„æºçš„æ–¹å¼ï¼Ÿ 5ï¼‰å¦‚æœä½¿ç”¨äº†åŠ¨æ€ä¸‹å‘é…ç½®æ–‡ä»¶æ¥é…ç½®Appçš„è·³è½¬é€»è¾‘ï¼Œé‚£ä¹ˆå¦‚æœåšåˆ°iOSå’ŒAndroidä¸¤è¾¹åªè¦å…±ç”¨ä¸€å¥—é…ç½®æ–‡ä»¶ï¼Ÿ 6ï¼‰å¦‚æœAppå‡ºç°bugäº†ï¼Œå¦‚ä½•ä¸ç”¨JSPatchï¼Œå°±èƒ½åšåˆ°ç®€å•çš„çƒ­ä¿®å¤åŠŸèƒ½ï¼Ÿ 7ï¼‰å¦‚ä½•åœ¨æ¯ä¸ªç»„ä»¶é—´è°ƒç”¨å’Œé¡µé¢è·³è½¬æ—¶éƒ½è¿›è¡ŒåŸ‹ç‚¹ç»Ÿè®¡ï¼Ÿæ¯ä¸ªè·³è½¬çš„åœ°æ–¹éƒ½æ‰‹å†™ä»£ç åŸ‹ç‚¹ï¼Ÿåˆ©ç”¨Runtime AOP ï¼Ÿ 8ï¼‰å¦‚ä½•åœ¨æ¯ä¸ªç»„ä»¶é—´è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼ŒåŠ å…¥è°ƒç”¨çš„é€»è¾‘æ£€æŸ¥ï¼Œä»¤ç‰Œæœºåˆ¶ï¼Œé…åˆç°åº¦è¿›è¡Œé£æ§é€»è¾‘ï¼Ÿ 9ï¼‰å¦‚ä½•åœ¨Appä»»ä½•ç•Œé¢éƒ½å¯ä»¥è°ƒç”¨åŒä¸€ä¸ªç•Œé¢æˆ–è€…åŒä¸€ä¸ªç»„ä»¶ï¼Ÿåªèƒ½åœ¨AppDelegateé‡Œé¢æ³¨å†Œå•ä¾‹æ¥å®ç°ï¼Ÿ iOSåº”ç”¨æ¶æ„è°ˆ ç»„ä»¶åŒ–æ–¹æ¡ˆ ä¸€æ–‡ä¸­ Casa é’ˆå¯¹ è˜‘è‡è¡—ç»„ä»¶åŒ– æå‡ºäº†è´¨ç–‘ï¼Œè´¨ç–‘ç‚¹ä¸»è¦åœ¨è¿™å‡ æ–¹é¢ Appå¯åŠ¨æ—¶ç»„ä»¶éœ€è¦æ³¨å†ŒURL URLè°ƒç”¨ç»„ä»¶æ–¹å¼ä¸å¤ªå¥½ä¼ é€’ç±»ä¼¼ UIImage ç­‰éå¸¸è§„å¯¹è±¡ URLéœ€è¦æ·»åŠ é¢å¤–å‚æ•°å¯è¯»æ€§å·®ï¼Œæ‰€ä»¥æ²¡å¿…è¦ä½¿ç”¨URL å¯¹äº Appå¯åŠ¨æ—¶ç»„ä»¶éœ€è¦æ³¨å†ŒURL é¡¾è™‘ä¸»è¦åœ¨äºï¼Œæ³¨å†Œçš„URLéœ€è¦åœ¨åº”ç”¨ç”Ÿå­˜å‘¨æœŸå†…å¸¸é©»å†…å­˜ï¼Œå¦‚æœæ˜¯æ³¨å†ŒClassè¿˜å¥½äº›ï¼Œå¦‚æœæ³¨å†Œçš„æ˜¯å®ä¾‹ï¼Œæ¶ˆè€—çš„å†…å­˜å°±éå¸¸å¯è§‚äº† 12345#pragma mark - è·¯ç”±è¡¨NSString *const FKNavPushRoute = @\"/com_madao_navPush/:viewController\";NSString *const FKNavPresentRoute = @\"/com_madao_navPresent/:viewController\";NSString *const FKNavStoryBoardPushRoute = @\"/com_madao_navStoryboardPush/:viewController\";NSString *const FKComponentsCallBackRoute = @\"/com_madao_callBack/*\"; è€Œä¸”JLRoutes è¿˜æ”¯æŒ * æ¥è¿›è¡Œé€šé…ï¼Œè·¯ç”±è¡¨å¦‚ä½•ç¼–å†™å¤§å®¶å¯ä»¥è‡ªç”±å‘æŒ¥å¯¹åº”çš„è·¯ç”±äº‹ä»¶ handler 12345678910111213141516171819202122232425262728293031323334353637// push// è·¯ç”± /com_madao_navPush/:viewController[[JLRoutes globalRoutes] addRoute:FKNavPushRoute handler:^BOOL(NSDictionary&lt;NSString *,id&gt; * _Nonnull parameters) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [self _handlerSceneWithPresent:NO parameters:parameters]; &#125;); return YES;&#125;];// present// è·¯ç”± /com_madao_navPresent/:viewController[[JLRoutes globalRoutes] addRoute:FKNavPresentRoute handler:^BOOL(NSDictionary&lt;NSString *,id&gt; * _Nonnull parameters) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [self _handlerSceneWithPresent:YES parameters:parameters]; &#125;); return YES;&#125;];#pragma mark - Private/// å¤„ç†è·³è½¬äº‹ä»¶- (void)_handlerSceneWithPresent:(BOOL)isPresent parameters:(NSDictionary *)parameters &#123; // å½“å‰æ§åˆ¶å™¨ NSString *controllerName = [parameters objectForKey:FKControllerNameRouteParam]; UIViewController *currentVC = [self _currentViewController]; UIViewController *toVC = [[NSClassFromString(controllerName) alloc] init]; toVC.params = parameters; if (currentVC &amp;&amp; currentVC.navigationController) &#123; if (isPresent) &#123; [currentVC.navigationController presentViewController:toVC animated:YES completion:nil]; &#125;else &#123; [currentVC.navigationController pushViewController:toVC animated:YES]; &#125; &#125;&#125; é€šè¿‡URLä¸­ä¼ å…¥çš„ç»„ä»¶ååŠ¨æ€æ³¨å†Œï¼Œå¤„ç†ç›¸åº”è·³è½¬äº‹ä»¶ï¼Œå¹¶ä¸éœ€è¦æ¯ä¸ªç»„ä»¶ä¸€ä¸€æ³¨å†Œä½¿ç”¨URLè·¯ç”±ï¼Œå¿…ç„¶URLä¼šæ•£è½åˆ°ä»£ç å„ä¸ªåœ°æ–¹ 1234NSString *key = @\"key\";NSString *value = @\"value\";NSString *url = [NSString stringWithFormat:@\"/com_madao_navPush/%@?%@=%@\", NSStringFromClass(ViewController.class), key, value];[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; è¯¸å¦‚æ­¤ç±»ä¸‘é™‹çš„ä»£ç ï¼Œæ•£è½åœ¨å„ä¸ªåœ°æ–¹çš„è¯ç®€ç›´ä¼šè®©äººå¤´çš®å‘éº», æ‰€ä»¥ç¬”è€…åœ¨ JLRoutes+GenerateURL.h å†™äº†ä¸€äº› Helperæ–¹æ³•1234567891011121314151617181920212223242526272829303132333435/** é¿å… URL æ•£è½å„å¤„ï¼Œ é›†ä¸­ç”ŸæˆURL @param pattern åŒ¹é…æ¨¡å¼ @param parameters é™„å¸¦å‚æ•° @return URLå­—ç¬¦ä¸² */+ (NSString *)fk_generateURLWithPattern:(NSString *)pattern parameters:(NSArray *)parameters;/** é¿å… URL æ•£è½å„å¤„ï¼Œ é›†ä¸­ç”ŸæˆURL é¢å¤–å‚æ•°å°†è¢« ?key=value&amp;key2=value2 æ ·å¼ç»™å‡º @param pattern åŒ¹é…æ¨¡å¼ @param parameters é™„åŠ å‚æ•° @param extraParameters é¢å¤–å‚æ•° @return URLå­—ç¬¦ä¸² */+ (NSString *)fk_generateURLWithPattern:(NSString *)pattern parameters:(NSArray *)parameters extraParameters:(NSDictionary *)extraParameters;/** è§£æNSURLå¯¹è±¡ä¸­çš„è¯·æ±‚å‚æ•°http://madao?param1=value1Â¶m2=value2 è§£ææˆ @&#123;param1:value1, param2:value2&#125; @param URL NSURLå¯¹è±¡ @return URLå­—ç¬¦ä¸² */+ (NSDictionary *)fk_parseParamsWithURL:(NSURL *)URL;/** å°†å‚æ•°å¯¹è±¡è¿›è¡Œurlç¼–ç  å°†@&#123;param1:value1, param2:value2&#125; è½¬æ¢æˆ ?param1=value1&amp;param2=value2 @param dic å‚æ•°å¯¹è±¡ @return URLå­—ç¬¦ä¸² */+ (NSString *)fk_mapDictionaryToURLQueryString:(NSDictionary *)dic; å®å®šä¹‰Helper12345678910#undef JLRGenRoute#define JLRGenRoute(Schema, path) \\([NSString stringWithFormat: @\"%@:/%@\", \\Schema, \\path])#undef JLRGenRouteURL#define JLRGenRouteURL(Schema, path) \\([NSURL URLWithString: \\JLRGenRoute(Schema, path)]) æœ€ç»ˆæˆ‘ä»¬çš„è°ƒç”¨å¯ä»¥å˜æˆ12NSString *router = [JLRoutes fk_generateURLWithPattern:FKNavPushRoute parameters:@[NSStringFromClass(ViewController.class)] extraParameters:nil];[[UIApplication sharedApplication] openURL:JLRGenRouteURL(FKDefaultRouteSchema, router)]; ğŸ“ æ•´ç†åˆ¶ä½œCasa Taloyumï¼šhttps://casatwy.com/modulization_in_action.html ç®€ä¹¦åšå®¢ï¼šhttp://www.jianshu.com/p/921dd65e79cb ğŸ˜¬ è”ç³» å¾®ä¿¡ : WhatsXie é‚®ä»¶ : ReverseScale@iCloud.com åšå®¢ : https://reversescale.github.io","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"ReactNative å¼€å‘å¸¸ç”¨å‘½ä»¤è¡Œï¼ˆæŒç»­æ›´æ–°ï¼‰","slug":"ReactNative command","date":"2018-03-29T14:56:27.000Z","updated":"2018-11-15T13:53:41.655Z","comments":true,"path":"2018/03/29/ReactNative command/","link":"","permalink":"https://reversescale.github.io/2018/03/29/ReactNative command/","excerpt":"è®°å½•ä¸€äº› ReactNative å¸¸ç”¨çš„å‘½ä»¤è¡Œï¼ŒåŒ…æ‹¬äº†ä¾‹å¦‚å®‰è£…ã€å¯åŠ¨æœåŠ¡ã€æ’ä»¶ç®¡ç†ã€çƒ­æ›´æ–°ç­‰ä¸€äº›æ—¥å¸¸ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ï¼Œä¼šéšç€ä½¿ç”¨çš„æ·±å…¥ä¸æ–­çš„è¡¥å…… ~","text":"è®°å½•ä¸€äº› ReactNative å¸¸ç”¨çš„å‘½ä»¤è¡Œï¼ŒåŒ…æ‹¬äº†ä¾‹å¦‚å®‰è£…ã€å¯åŠ¨æœåŠ¡ã€æ’ä»¶ç®¡ç†ã€çƒ­æ›´æ–°ç­‰ä¸€äº›æ—¥å¸¸ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ï¼Œä¼šéšç€ä½¿ç”¨çš„æ·±å…¥ä¸æ–­çš„è¡¥å…… ~ Node ç›¸å…³æŸ¥çœ‹æ‰€æœ‰å®‰è£…çš„nodeç‰ˆæœ¬ä¿¡æ¯ï¼š1nvm list æŸ¥çœ‹æ›´æ–°äº†çš„nodeçš„ç‰ˆæœ¬(å¯èƒ½éœ€è¦ç¿»å¢™)ï¼š1nvm ls-remote å®‰è£…nodeï¼š1nvm install v7.4.0 è®¾ç½®é»˜è®¤çš„nodeç‰ˆæœ¬(è¿™é‡Œè®¾ç½®æˆäº†7.4.0)ï¼Œè§£å†³æœ‰äº›ç‰ˆæœ¬æœ‰äº›å…¼å®¹æ€§çš„é—®é¢˜ï¼š1nvm alias default v7.4.0 React ç›¸å…³å¸è½½å‘½ä»¤ï¼š1npm uninstall -g react-native-cli å®‰è£…å‘½ä»¤ï¼š1npm install -g react-native-cli æŸ¥çœ‹æŸä¸ªæ¨¡å—æœ€æ–°å‘å¸ƒç‰ˆæœ¬ä¿¡æ¯(è¿™é‡ŒæŸ¥çœ‹react-nativeå‘å¸ƒçš„ç‰ˆæœ¬ä¿¡æ¯)ï¼š1npm info react-native å‡çº§æˆ–è€…é™çº§react-nativeçš„ç‰ˆæœ¬å¹¶ä¸”æ›´æ–°package.jsonï¼Œéœ€è¦ç”¨åœ¨react-nativeé¡¹ç›®ç›®å½•ä¸‹ï¼š1npm install --save react-native@0.41.1 æ–°å»º react-native é¡¹ç›®å¹¶æŒ‡å®šç‰ˆæœ¬ï¼š1react-native init demo --version 0.40.0 å¼€å¯æœåŠ¡ï¼š1react-native start è¿è¡ŒAndroidï¼š1react-native run-android è¿è¡ŒiOSï¼š1react-native run-ios ç‰ˆæœ¬æŸ¥çœ‹ï¼š1react-native --version é¡¹ç›®ç‰ˆæœ¬æŸ¥çœ‹ï¼š1react-native -v æŸ¥çœ‹react-nativeçš„å¸®åŠ©ä¿¡æ¯ï¼š1react-native --help ä½¿ç”¨ Cocoapods ç®¡ç† ReactNativePodfile æ–‡ä»¶æ ¼å¼ï¼š1234567891011pod &apos;React&apos;, :path =&gt; &apos;./node_modules/react-native&apos;, :subspecs =&gt; [ &apos;Core&apos;, &apos;RCTText&apos;, &apos;RCTImage&apos;, &apos;RCTActionSheet&apos;, &apos;RCTGeolocation&apos;, &apos;RCTNetwork&apos;, &apos;RCTSettings&apos;, &apos;RCTVibration&apos;, &apos;RCTWebSocket&apos;, ] ReactNative 0.42.0 ä»¥ä¸Šç‰ˆæœ¬éœ€åœ¨ Podfile é…ç½® yogaï¼š12# å¦‚æœä½ çš„RNç‰ˆæœ¬ &gt;= 0.42.0ï¼Œè¯·åŠ å…¥ä¸‹é¢è¿™è¡Œpod &quot;yoga&quot;, :path =&gt; &quot;./node_modules/react-native/ReactCommon/yoga&quot; å¼€æºç»„ä»¶åº“ï¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š1npm install react-native-tab-navigator --save å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼š1npm install --save react-native-tab-navigator@0.4.0 react-native é›†æˆç»„ä»¶ç»‘å®š(ReactNative 0.27ä»¥åï¼Œè‡ªé›†æˆRNPM)ï¼š1react-native link react-native-splash-screen å¸¸ç”¨å¼€æºåº“ï¼š12345678npm install --save react-native-tab-navigator@0.4.0npm install --save react-native-scrollable-tab-view@0.7.0npm install --save react-native-check-box@1.0.4npm install --react-native-easy-toast@1.0.9npm install --save GitHubTrending@2.0.0npm install --save react-native-htmlview@0.5.0npm install --save react-native-popover@0.5.0npm install --react-native-splash-screen@2.0.0 Code-Push å¸¸ç”¨å‘½ä»¤Code-Push æ¨åŒ…å‘½ä»¤ï¼š1code-push release-react &lt;appName&gt; &lt;platform&gt; [options] ç¤ºä¾‹ï¼š 1code-push release-react RNAPPGithub ios --t 1.0.2 --dev false --d Staging --des &quot;1.çƒ­æ›´æ–°ç›¸å…³è®¾ç½®&quot; --m true Code-Push çº¿ä¸ŠæŸ¥çœ‹æ›´æ–°ï¼š1code-push deployment ls RNAPPGithub Code-Push æŸ¥çœ‹é¡¹ç›®Keyï¼š1code-push deployment ls RNAPPGithub -k Code-Push iOSæ›´æ–°æ‰“åŒ…æ–¹æ³•ï¼š1react-native bundle --platform ios --entry-file index.js --bundle-output release_ios/main.jsbundle --assets-dest release_ios/ --dev fasle IDE æŠ€å·§ã€Šä½¿ç”¨VS Codeè°ƒè¯•React-Nativeç¨‹åºã€‹ï¼ˆhttps://jingyan.baidu.com/article/ad310e80fb13fc1849f49ed1.htmlï¼‰","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"ReactNative å­¦ä¹ æˆæœæ€»ç»“","slug":"ReactNative APP","date":"2018-03-29T11:56:27.000Z","updated":"2018-11-15T15:02:07.961Z","comments":true,"path":"2018/03/29/ReactNative APP/","link":"","permalink":"https://reversescale.github.io/2018/03/29/ReactNative APP/","excerpt":"ReactNative è¿™å‡ å¹´é£ç”Ÿæ°´èµ·ï¼Œå½“ç„¶é™¤äº† React ç¤¾åŒºç”Ÿæ€åœˆçš„åŠ æŒå’Œ Facebook çš„å¤§åŠ›æ¨å¹¿ä»¥å¤–ï¼Œå¦å¤–ä¸€ä¸ªæœ€ä¸»è¦çš„åŸå› å°±æ˜¯å…¶åœ¨å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½æ–¹é¢å–å¾—äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å¹³è¡¡~","text":"ReactNative è¿™å‡ å¹´é£ç”Ÿæ°´èµ·ï¼Œå½“ç„¶é™¤äº† React ç¤¾åŒºç”Ÿæ€åœˆçš„åŠ æŒå’Œ Facebook çš„å¤§åŠ›æ¨å¹¿ä»¥å¤–ï¼Œå¦å¤–ä¸€ä¸ªæœ€ä¸»è¦çš„åŸå› å°±æ˜¯å…¶åœ¨å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½æ–¹é¢å–å¾—äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å¹³è¡¡~ å­¦ä¹ è¯¾ç¨‹ï¼šã€ŠåŒå¹³å°çœŸå®å¼€å‘GitHub App React NativeæŠ€æœ¯å…¨é¢æŒæ¡ã€‹399 å¤§æ´‹ï¼Œå«ç€æ³ªåƒäº†ä¸€ä¸ªæœˆæ³¡é¢.. ğŸ‘¨ğŸ»â€ğŸ’» Github Demo çŸ¥è¯†ç‚¹ï¼š 1.æ•´ç† ReactNative ç½‘ç»œå°è£…åŠå¸¸ç”¨çš„ä¸‰æ–¹æ¨¡å— 2.ReactNative çš„ AsyncStorageæ•°æ®åº“æŠ€æœ¯ã€ç¦»çº¿ç¼“å­˜ 3.ReactNative çš„æ•°æ® DAO å±‚è®¾è®¡æŠ€å·§ï¼Œæ•°æ®çŠ¶æ€å®æ—¶æ›´æ–° 4.ReactNative çš„ä»£ç æå–æŠ€å·§ï¼Œç»„åˆæ¨¡å¼åº”ç”¨æŠ€å·§ï¼Œæ•°æ®å¼‚æ­¥åˆ·æ–°ä¸åŠ¨æ€æ·»åŠ  5.ReactNative çš„ç‰ˆæœ¬å‡çº§ã€æ•°æ®ç»Ÿè®¡ã€ç¤¾ä¼šåŒ–åˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œçƒ­æ›´æ–°ç­‰ 6.ReactNative é¡¹ç›®å‘å¸ƒå‰çš„ä¼˜åŒ–ã€æ‰“åŒ…ä¸ä¸Šçº¿ ç›®å½•ç»“æ„ï¼š ç”Ÿå‘½å‘¨æœŸåŠä½¿ç”¨åœºæ™¯ é¡¹ç›®ä»‹ç» ç»„ä»¶åŒ– é›†æˆä¸ç®¡ç† å¸ƒå±€çº¦æŸ ç»„ä»¶å°è£… æœ¬åœ°æŒä¹…åŒ– ç½‘ç»œè¯·æ±‚å°è£… åŠŸèƒ½è°ƒè¯• åŒå¹³å°é€‚é… å¼€æºç»„ä»¶åº“çš„ä½¿ç”¨ çƒ­æ›´æ–° ç”Ÿå‘½å‘¨æœŸåŠä½¿ç”¨åœºæ™¯å¸¸ç”¨æ–¹æ³•ï¼š constructor: componentWillMount: render: componentDidMount: componentWillReceiveProps: shouldComponentUpdate: componentWillUpdate: componentDidUpdate componentWillUnmount: constructor:åœ¨ç»„ä»¶åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡,è¿™ä¸ªæ–¹æ³•è¿›è¡Œthis.stateåˆå§‹åŒ–çŠ¶æ€æœºã€‚123456constructor(props) &#123; super(props); // åˆå§‹çŠ¶æ€ this.state = &#123; isShow:true &#125;;&#125; componentWillMount:åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡,åœ¨åˆå§‹æ¸²æŸ“(renderå‡½æ•°)å‰è¢«æ‰§è¡Œã€‚æ³¨æ„: å¦‚æœè¿™ä¸ªå‡½æ•°é€šè¿‡setStateå‡½æ•°ä¿®æ”¹çŠ¶æ€æœºå˜é‡,RNæ¡†æ¶ä¸ä¼šé¢å¤–æ‰§è¡Œæ¸²æŸ“(ç•Œé¢åˆ·æ–°) å¦‚æœå­ç»„ä»¶ä¹Ÿæœ‰componentWillMountå‡½æ•°ä½¿ç”¨,ä¼šåœ¨çˆ¶ç»„ä»¶ä¹‹åè°ƒç”¨ éœ€è¦ä»æœ¬åœ°å­˜å‚¨ä¸­è¯»å–æ•°æ®ç”¨äºæ˜¾ç¤º,å¸¸ç”¨è¿™ä¸ªå‡½æ•° render:è¯¥å‡½æ•°ç»„ä»¶å¿…æœ‰çš„ï¼Œé€šè¿‡è¿”å›JSXæˆ–å…¶ä»–ç»„ä»¶æ¥æ„æˆDOMï¼Œæ¢è¨€ä¹‹ï¼Œå°±æ˜¯ç»„ä»¶çš„æ ¸å¿ƒæ¸²æŸ“è¿‡ç¨‹ã€‚ componentDidMount:åœ¨React Nativeç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­,è¿™ä¸ªå‡½æ•°åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå®ƒåœ¨åˆå§‹æ¸²æŸ“å®Œæˆåä¼šé©¬ä¸Šè¢«è°ƒç”¨ã€‚åœ¨è¿™ä¹‹åå¼€å‘è€…å¯ä»¥é€šè¿‡å­ç»„ä»¶çš„å¼•ç”¨æ¥è®¿é—®ï¼Œæ“ä½œä»»ä½•å­ç»„ä»¶ã€‚å¦‚æœRNç»„ä»¶çš„å­ç»„ä»¶ä¹Ÿæœ‰componentDidMountå‡½æ•°ï¼Œå¹¶ä¼šåœ¨çˆ¶ç»„ä»¶çš„componentDidMountå‡½æ•°ä¹‹å‰è¢«è°ƒç”¨ã€‚ å¸¸ç”¨æ¥ç½‘ç»œè¯·æ±‚æ•°æ® componentWillReceiveProps:åœ¨React Nativeç»„ä»¶çš„åˆå§‹æ¸²æŸ“å®Œæˆåï¼Œpropsæ”¹å˜æ—¶ï¼Œè¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨ï¼Œå‚æ•°æ˜¯ä¸ªæ–°çš„propsã€‚ shouldComponentUpdate:React Nativeç»„ä»¶çš„åˆå§‹æ¸²æŸ“æ‰§è¡Œå®Œæˆå, RNç»„ä»¶æ¥æ”¶åˆ°æ–°çš„stateæˆ–è€…propsæ—¶è¿™ä¸ªå‡½æ•°ä¼šè°ƒç”¨ã€‚ é€šè¿‡è¿™ä¸ªå‡½æ•°é˜»æ­¢æ— å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œæ˜¯æé«˜React Nativeåº”ç”¨ç¨‹åºæ€§èƒ½çš„ä¸€å¤§æŠ€å·§ã€‚ componentWillUpdate:åˆå§‹æ¸²æŸ“å®Œæˆå,é‡æ–°æ¸²æŸ“å‰ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ è¿™ä¸ªå‡½æ•°ä¸èƒ½é€šè¿‡this.setStateå†æ¬¡æ”¹å˜çŠ¶æ€æœºå˜é‡çš„å€¼ã€‚ ç»„ä»¶æ›´æ–°æ—¶è°ƒç”¨ã€‚ componentDidUpdateRNç»„ä»¶åˆå§‹æ¸²æŸ“å®Œæˆåï¼ŒRNæ¡†æ¶åœ¨é‡æ–°æ¸²æŸ“RNç»„ä»¶å®Œæˆåè°ƒç”¨ã€‚å‚æ•°æ˜¯æ¸²æŸ“å‰çš„propså’Œstateã€‚ ç»„ä»¶æ›´æ–°å®Œæ¯•æ—¶è°ƒç”¨ã€‚ componentWillUnmount:ReactNative ç»„ä»¶è¢«å¸è½½å‰ä¼šè°ƒç”¨ï¼Œé€šå¸¸åšä¸€äº›æ¸…ç†å†…å®¹ã€‚ é¡¹ç›®ä»‹ç»åŒå¹³å°æ•ˆæœé¢„è§ˆï¼š React Nativeæ˜¯Reactåœ¨ç§»åŠ¨ç«¯çš„è·¨å¹³å°æ–¹æ¡ˆã€‚å¦‚æœæƒ³æ›´å¿«åœ°ç†è§£å’ŒæŒæ¡React Nativeå¼€å‘ï¼Œå°±å¿…é¡»å…ˆäº†è§£Reactã€‚ Reactæ˜¯FaceBookå¼€æºçš„ä¸€ä¸ªå‰ç«¯æ¡†æ¶ï¼Œå®ƒèµ·æºäº Facebook çš„å†…éƒ¨é¡¹ç›®ï¼Œå¹¶äº 2013 å¹´ 5 æœˆå¼€æºã€‚å› ä¸ºReact æ‹¥æœ‰è¾ƒé«˜çš„æ€§èƒ½ï¼Œä»£ç é€»è¾‘éå¸¸ç®€å•ï¼Œæ‰€ä»¥è¶Šæ¥è¶Šå¤šçš„äººå·²å¼€å§‹å…³æ³¨å’Œä½¿ç”¨å®ƒï¼Œç›®å‰è¯¥æ¡†æ¶åœ¨Githubä¸Šå·²ç»æœ‰7ä¸‡+starã€‚ ReactNative æŠ€æœ¯å¯¼å›¾ï¼š ç»„ä»¶åŒ–Reacté‡‡ç”¨ç»„ä»¶åŒ–çš„æ–¹å¼å¼€å‘ï¼Œé€šè¿‡å°†viewæ„å»ºæˆç»„ä»¶ï¼Œä½¿å¾—ä»£ç æ›´åŠ å®¹æ˜“å¾—åˆ°å¤ç”¨ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„åº”ç”¨åœ¨å¤§é¡¹ç›®çš„å¼€å‘ä¸­ã€‚æœ‰ä¸€å¥è¯è¯´çš„å¾ˆå½¢è±¡ï¼šåœ¨Reactä¸­ï¼Œæ„å»ºåº”ç”¨å°±åƒæ­ç§¯æœ¨ä¸€æ ·ã€‚ ç»„ä»¶åŒ–ç‰¹å¾Reactè®¤ä¸ºä¸€ä¸ªç»„ä»¶åº”è¯¥å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š å¯ç»„åˆï¼ˆComposeableï¼‰ï¼šä¸€ä¸ªç»„ä»¶æ˜“äºå’Œå…¶å®ƒç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œæˆ–è€…åµŒå¥—åœ¨å¦ä¸€ä¸ªç»„ä»¶å†…éƒ¨ã€‚å¦‚æœä¸€ä¸ªç»„ä»¶å†…éƒ¨åˆ›å»ºäº†å¦ä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆè¯´çˆ¶ç»„ä»¶æ‹¥æœ‰å®ƒåˆ›å»ºçš„å­ç»„ä»¶ï¼Œé€šè¿‡è¿™ä¸ªç‰¹æ€§ï¼Œä¸€ä¸ªå¤æ‚çš„UIå¯ä»¥æ‹†åˆ†æˆå¤šä¸ªç®€å•çš„UIç»„ä»¶ï¼› å¯é‡ç”¨ï¼ˆReusableï¼‰ï¼šæ¯ä¸ªç»„ä»¶éƒ½æ˜¯å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ï¼Œå®ƒå¯ä»¥è¢«ä½¿ç”¨åœ¨å¤šä¸ªUIåœºæ™¯ï¼› å¯ç»´æŠ¤ï¼ˆMaintainableï¼‰ï¼šæ¯ä¸ªå°çš„ç»„ä»¶ä»…ä»…åŒ…å«è‡ªèº«çš„é€»è¾‘ï¼Œæ›´å®¹æ˜“è¢«ç†è§£å’Œç»´æŠ¤ï¼› å°è£…å¥½çš„å¯¼èˆªæ å°±å¯ä»¥è¢«ç§°ä¹‹ä¸ºä¸€ä¸ªç»„ä»¶ï¼Œå®ƒç¬¦åˆä¸Šè¿°ä¸‰ä¸ªç‰¹ç‚¹ï¼š å¯ç»„åˆï¼šå¯ä»¥å°†å¯¼èˆªæ ç»„ä»¶æ”¾åœ¨é¡µé¢ç»„ä»¶ä¸­ä½œä¸ºé¡µé¢ç»„ä»¶çš„å­ç»„ä»¶ã€‚è€Œä¸”åœ¨å¯¼èˆªæ ç»„ä»¶çš„å†…éƒ¨ï¼Œä¹Ÿæœ‰æŒ‰é’®ç»„ä»¶ç­‰å­ç»„ä»¶ã€‚ å¯é‡ç”¨ï¼šå¦‚æœå°è£…å¥½äº†è¯¥ç»„ä»¶ï¼Œå°±å¯ä»¥æ”¾åœ¨ä»»æ„éœ€è¦å¯¼èˆªæ çš„é¡µé¢ï¼ˆç»„ä»¶ï¼‰ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ å¯ç»´æŠ¤ï¼šå› ä¸ºå…·æœ‰ç‹¬ç«‹çš„åŠŸèƒ½å’Œå±•ç¤ºé€»è¾‘ï¼Œæ‰€ä»¥ä¾¿äºå®šä½å’Œä¿®æ”¹ã€‚ ç»„ä»¶çš„å±æ€§ä¸çŠ¶æ€åœ¨React Nativeï¼ˆReact.jsï¼‰é‡Œï¼Œç»„ä»¶æ‰€æŒæœ‰çš„æ•°æ®åˆ†ä¸ºä¸¤ç§ï¼š å±æ€§ï¼ˆpropsï¼‰ï¼šç»„ä»¶çš„propsæ˜¯ä¸å¯å˜çš„ï¼Œå®ƒåªèƒ½ä»å…¶ä»–çš„ç»„ä»¶ï¼ˆä¾‹å¦‚çˆ¶ç»„ä»¶ï¼‰ä¼ é€’è¿‡æ¥ã€‚ çŠ¶æ€ï¼ˆstateï¼‰ï¼šç»„ä»¶çš„stateæ˜¯å¯å˜çš„ï¼Œå®ƒè´Ÿè´£å¤„ç†ä¸ç”¨æˆ·çš„äº¤äº’ã€‚åœ¨é€šè¿‡ç”¨æˆ·ç‚¹å‡»äº‹ä»¶ç­‰æ“ä½œä»¥åï¼Œå¦‚æœä½¿å¾—å½“å‰ç»„ä»¶çš„æŸä¸ªstateå‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆå½“å‰ç»„ä»¶å°±ä¼šè§¦å‘render()æ–¹æ³•åˆ·æ–°è‡ªå·±ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªé¡µé¢æœ‰ä¸¤ä¸ªå­é¡µé¢ï¼Œä¸€ä¸ªæ˜¯â€˜æœ€çƒ­â€™é¡µé¢ï¼ˆç»„ä»¶ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯â€˜è¶‹åŠ¿â€˜é¡µé¢ï¼ˆç»„ä»¶ï¼‰ã€‚é‚£ä¹ˆè¿™ä¸¤ä¸ªç»„ä»¶éƒ½æœ‰ä»€ä¹ˆpropså’Œstateå‘¢ï¼Ÿ 1.propsï¼šç”±äºpropsæ˜¯ä»å…¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ï¼Œé‚£ä¹ˆå¯æƒ³è€ŒçŸ¥ï¼Œpropsçš„å£°æ˜åº”è¯¥æ˜¯åœ¨å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶é‡Œæ¥åšã€‚åœ¨React Nativeä¸­ï¼Œé€šå¸¸propsçš„å£°æ˜æ˜¯å’Œå½“å‰ç»„ä»¶çš„å£°æ˜æ”¾åœ¨ä¸€èµ·çš„ï¼š 1234//æœ€çƒ­å­é¡µé¢&lt;FavoriteTabPage &#123;...this.props&#125; tabLabel='æœ€çƒ­' flag=&#123;FlAG_STORAGE.flag_popular&#125;/&gt;//è¶‹åŠ¿å­é¡µé¢&lt;FavoriteTabPage &#123;...this.props&#125; tabLabel='è¶‹åŠ¿' flag=&#123;FlAG_STORAGE.flag_trending&#125;/&gt; åœ¨è¿™é‡Œï¼Œæ”¶è—é¡µé¢æ˜¯çˆ¶ç»„ä»¶ï¼Œè€Œæœ€çƒ­é¡µé¢å’Œè¶‹åŠ¿é¡µé¢æ˜¯å…¶å­ç»„ä»¶ã€‚åœ¨æ”¶è—é¡µé¢ç»„ä»¶é‡Œå£°æ˜äº†æœ€çƒ­é¡µé¢å’Œè¶‹åŠ¿é¡µé¢çš„ç»„ä»¶ã€‚ è€Œä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæœ€çƒ­é¡µé¢å’Œè¶‹åŠ¿é¡µé¢ç»„ä»¶éƒ½ç”¨çš„æ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼šFavoriteTabPageï¼Œè€Œè¿™ä¸¤ä¸ªé¡µé¢çš„ä¸åŒç‚¹åªåœ¨äºä¼ å…¥çš„ä¸¤ä¸ªpropsçš„ä¸åŒï¼štabLabelå’Œflagã€‚ è€Œåœ¨FavoriteTabPageç»„ä»¶å†…éƒ¨ï¼Œå¦‚æœæƒ³è°ƒç”¨flagè¿™ä¸ªpropsï¼Œå¯ä»¥ä½¿ç”¨this.props.flagæ¥è°ƒç”¨ã€‚ 2.state: ä¸‹é¢æ˜¯æœ€çƒ­å’Œè¶‹åŠ¿é¡µé¢çš„ç»„ä»¶ï¼š 12345678class FavoriteTabPage extends Component&#123;//ç»„ä»¶çš„æ„é€ æ–¹æ³•constructor(props)&#123; super(props); this.state=&#123; dataSource:new ListView.DataSource(&#123;rowHasChanged:(r1,r2)=&gt;r1!==r2&#125;),isLoading:false, &#125;&#125; è¿™é‡Œé¢å®šä¹‰äº†ä¸¤ä¸ªstate: dataSource:åˆ—è¡¨çš„æ•°æ®æº isLoading:æ˜¯å¦æ­£åœ¨åˆ·æ–° è¿™ä¸¤ä¸ªstateéƒ½æ˜¯å°†æ¥å¯èƒ½ç»å¸¸å˜åŒ–çš„ã€‚æ¯”å¦‚åœ¨ç½‘ç»œè¯·æ±‚ä»¥åï¼Œåˆ—è¡¨çš„æ•°æ®æºä¼šè¢«æ›¿æ¢æ‰ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦è°ƒç”¨: 1234this.setState(&#123; //æŠŠæ–°çš„å€¼newDataArrå¯¹è±¡ä¼ ç»™dataSource dataSource:newDataArr&#125;) 3.DOMDOM æ˜¯å‰ç«¯çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæš‚æ—¶å¯ä»¥ç²—ç•¥ç†è§£ä¸ºä¸€ä¸ªé¡µé¢çš„æ ‘å½¢ç»“æ„ã€‚React ç”Ÿå‘½å‘¨æœŸçš„ä¸‰å¤§é˜¶æ®µ Mountingï¼šå·²æ’å…¥çœŸå® DOM Updatingï¼šæ­£åœ¨è¢«é‡æ–°æ¸²æŸ“ Unmountingï¼šå·²ç§»å‡ºçœŸå® DOM åœ¨æ¯ä¸ªé˜¶æ®µéƒ½æœ‰ç›¸åº”çš„çŠ¶æ€å’Œä¸ä¹‹å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œå…·ä½“å¯ä»¥çœ‹ä¸‹å›¾ï¼š ä¸Šå›¾æ¥è‡ªï¼šè´¾é¹è¾‰çš„æŠ€æœ¯åšå®¢ï¼šReact Nativeä¹‹Reacté€Ÿå­¦æ•™ç¨‹(ä¸­) é›†æˆä¸ç®¡ç†1.æŒ‡å®šç‰ˆæœ¬åˆå§‹åŒ–åœ¨ç»ˆç«¯è¾“å…¥react-native demo â€“version 0.40.0å‘½ä»¤ä»¥åï¼Œå°±ä¼šåˆå§‹åŒ–ä¸€ä¸ªReact Nativeç‰ˆæœ¬ä¸º0.40.0çš„é¡¹ç›®ã€‚è¿™ä¸ªæœ€åˆé¡¹ç›®é‡Œé¢ç›´æ¥å°±åŒ…å«äº†iOSå’ŒAndroidçš„å·¥ç¨‹æ–‡ä»¶å¤¹ï¼Œå¯ä»¥ç”¨å¯¹åº”çš„IDEæ‰“å¼€åç¼–è¯‘è¿è¡Œã€‚ åœ¨æ–°å»ºä¸€ä¸ªReact Nativeé¡¹ç›®ä¹‹åçš„æ ¹ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ï¼š 2.ä½¿ç”¨ Cocoapods ç®¡ç† ReactNativePodfile æ–‡ä»¶æ ¼å¼ï¼š1234567891011pod &apos;React&apos;, :path =&gt; &apos;./node_modules/react-native&apos;, :subspecs =&gt; [ &apos;Core&apos;, &apos;RCTText&apos;, &apos;RCTImage&apos;, &apos;RCTActionSheet&apos;, &apos;RCTGeolocation&apos;, &apos;RCTNetwork&apos;, &apos;RCTSettings&apos;, &apos;RCTVibration&apos;, &apos;RCTWebSocket&apos;, ] ReactNative 0.42.0 ä»¥ä¸Šç‰ˆæœ¬éœ€åœ¨ Podfile é…ç½® yogaï¼š12# å¦‚æœä½ çš„RNç‰ˆæœ¬ &gt;= 0.42.0ï¼Œè¯·åŠ å…¥ä¸‹é¢è¿™è¡Œpod &quot;yoga&quot;, :path =&gt; &quot;./node_modules/react-native/ReactCommon/yoga&quot; è¾“å…¥react-native run-iosæˆ–è€…react-native run-androidæŒ‡ä»¤ï¼Œ å°±ä¼šè‡ªåŠ¨æ‰“å¼€æ¨¡æ‹Ÿå™¨è¿è¡Œé¡¹ç›®(å‰ææ˜¯å®‰è£…äº†ç›¸åº”çš„å¼€å‘ç¯å¢ƒ)ã€‚ ä½†æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„é¡¹ç›®ä»…ä»…æœ‰è¿™äº›ç±»åˆ«çš„æ–‡ä»¶æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦ä¸€äº›å·¥å…·ç±»ï¼Œæ¨¡å‹ç±»ï¼Œèµ„æºç­‰æ–‡ä»¶ã€‚ä¸ºäº†å¾ˆå¥½åœ°åŒºåˆ†å®ƒä»¬ï¼Œä½¿é¡¹ç›®ç»“æ„ä¸€ç›®äº†ç„¶ï¼Œéœ€è¦ç»„ç»‡å¥½é¡¹ç›®æ–‡ä»¶å¤¹ä»¥åŠç±»çš„å‘½åï¼Œä¸‹é¢æ˜¯æˆ‘å°†æ•™ç¨‹é‡Œçš„æ–‡ä»¶å¤¹å‘½åå’Œç»“æ„ç¨åŠ ä¿®æ”¹åçš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œå¯ä¾›å¤§å®¶å‚è€ƒï¼š å¸ƒå±€çº¦æŸé‡‡ç”¨Flexå¸ƒå±€çš„å…ƒç´ ï¼Œè¢«ç§°ä¸ºFlex containerï¼Œå…¶æ‰€æœ‰å­å…ƒç´ è¢«ç§°ä¸ºFlex itemï¼›å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤ä¸ªè½´ï¼Œåˆ†åˆ«æ˜¯ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰,ä¸»è½´å¼€å§‹çš„ä½ç½®å«åšmain startï¼Œç»“æŸçš„ä½ç½®å«main endï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åšcross startï¼Œç»“æŸçš„ä½ç½®å«åšcross endï¼›å•ä¸ªitemå æ®çš„ä¸»è½´ç©ºé—´å«åšmain sizeï¼Œå æ®çš„äº¤å‰è½´æ§ä»¶å«åšcross sizeã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç»„ä»¶åŒ–é©±åŠ¨ä¸‹ï¼Œæœç´¢ç»“æœé¡µä¸­å±•ç¤ºçš„ Cell ä¸ä¹‹å‰çš„åˆ—è¡¨é¡µ Cell å¯ä»¥é‡ç”¨ï¼š æˆ‘ä»¬æŠŠè¯¥ç»„ä»¶å®šåä¸ºï¼šRespositoryCellï¼Œç»“åˆä»£ç æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„å®ç°ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960export default class RepositoryCell extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; isFavorite: this.props.projectModel.isFavorite, favoriteIcon: this.props.projectModel.isFavorite ? require('../../res/images/ic_star.png') : require('../../res/images/ic_unstar_transparent.png'), &#125;; &#125; componentWillReceiveProps(nextProps) &#123; this.setFavoriteState(nextProps.projectModel.isFavorite) &#125; setFavoriteState(isFavorite) &#123; this.props.projectModel.isFavorite = isFavorite; this.setState(&#123; isFavorite: isFavorite, favoriteIcon: isFavorite ? require('../../res/images/ic_star.png') : require('../../res/images/ic_unstar_transparent.png') &#125;) &#125; onPressFavorite() &#123; this.setFavoriteState(!this.state.isFavorite) this.props.onFavorite(this.props.projectModel.item, !this.state.isFavorite) &#125; render() &#123; let item = this.props.projectModel.item? this.props.projectModel.item:this.props.projectModel; let favoriteButton=this.props.projectModel.item? &lt;TouchableOpacity style=&#123;&#123;padding:6&#125;&#125; onPress=&#123;()=&gt;this.onPressFavorite()&#125; underlayColor='transparent'&gt; &lt;Image ref='favoriteIcon' style=&#123;[&#123;width: 22, height: 22,&#125;,this.props.theme.styles.tabBarSelectedIcon]&#125; source=&#123;this.state.favoriteIcon&#125;/&gt; &lt;/TouchableOpacity&gt;:null; return ( &lt;TouchableOpacity onPress=&#123;this.props.onSelect&#125; style=&#123;styles.container&#125; &gt; &lt;View style=&#123;styles.cell_container&#125;&gt; &lt;Text style=&#123;styles.title&#125;&gt;&#123;item.full_name&#125;&lt;/Text&gt; &lt;Text style=&#123;styles.description&#125;&gt;&#123;item.description&#125;&lt;/Text&gt; &lt;View style=&#123;styles.row&#125;&gt; &lt;View style=&#123;styles.row&#125;&gt; &lt;Text&gt;Author:&lt;/Text&gt; &lt;Image style=&#123;&#123;height: 22, width: 22&#125;&#125; source=&#123;&#123;uri: item.owner.avatar_url&#125;&#125; /&gt; &lt;/View&gt; &lt;View style=&#123;&#123;justifyContent: 'space-between', flexDirection: 'row'&#125;&#125;&gt; &lt;Text&gt;Star:&lt;/Text&gt; &lt;Text&gt;&#123;item.stargazers_count&#125;&lt;/Text&gt; &lt;/View&gt; &#123;favoriteButton&#125; &lt;/View&gt; &lt;/View&gt; &lt;/TouchableOpacity&gt; ) &#125;&#125; è¿™é‡Œå£°æ˜äº†RespositoryCellç»„ä»¶ï¼Œå®ƒç»§æ‰¿äºComponentï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶ç±»ï¼Œå³æ˜¯è¯´ï¼Œå£°æ˜ç»„ä»¶çš„æ—¶å€™å¿…é¡»éƒ½è¦ç»§æ‰¿ä¸è¿™ä¸ªç±»ã€‚ é›†ä¸­çœ‹ä¸€ä¸‹è¯¥ç»„ä»¶çš„renderæ–¹æ³•ï¼Œå®ƒè¿”å›çš„æ˜¯è¯¥ç»„ä»¶çš„å®é™…å¸ƒå±€ï¼šåœ¨è¯­æ³•ä¸Šä½¿ç”¨JSXï¼Œç±»ä¼¼äºHTMLçš„æ ‡ç­¾å¼è¯­æ³•ï¼Œå¾ˆæ¸…æ¥šåœ°å°†cellçš„å±‚çº§å±•ç°äº†å‡ºæ¥ï¼š æœ€å¤–å±‚è¢«ä¸€ä¸ªViewç»„ä»¶åŒ…è£¹ç€ï¼Œé‡Œé¢ç¬¬ä¸€å±‚æœ‰ä¸‰ä¸ªå­ç»„ä»¶ï¼šä¸¤ä¸ªTextç»„ä»¶å’Œä¸€ä¸ªä½œä¸ºåº•éƒ¨èƒŒæ™¯çš„Viewç»„ä»¶ã€‚ åº•éƒ¨èƒŒæ™¯çš„Viewç»„ä»¶åˆæœ‰ä¸‰ä¸ªå­ç»„ä»¶ï¼šViewç»„ä»¶ï¼ˆæ˜¾ç¤ºä½œè€…ä¿¡æ¯ï¼‰ï¼ŒViewç»„ä»¶ï¼ˆæ˜¾ç¤ºstarä¿¡æ¯ï¼‰,æ”¶è—æŒ‰é’®ã€‚ ç»“æ„åˆ†è§£å›¾ï¼š ç»„ä»¶å°è£… æˆ‘çš„é¡µé¢ ä¸ªäººä¸­å¿ƒ å¯¹äºâ€œæˆ‘çš„é¡µé¢â€å’Œâ€œä¸ªäººä¸­å¿ƒâ€è¿™ç±»ç»“æ„ç›¸ä¼¼çš„é¡µé¢ï¼Œå»ºè®®è¿›è¡Œç»„ä»¶å°è£…ï¼Œå°è£…åçš„ AboutPage å®ç°ä»£ç ç®€æ´å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768export default class AboutPage extends Component&#123; constructor(props) &#123; super(props); this.aboutCommon=new AboutCommon(props,(dic)=&gt;this.updateState(dic),FLAG_ABOUT.flag_about,config); this.state = &#123; projectModels: [], author:config.author &#125; &#125; componentDidMount() &#123; this.aboutCommon.componentDidMount(); &#125; componentWillUnmount() &#123; this.aboutCommon.componentWillUnmount(); &#125; updateState(dic)&#123; this.setState(dic); &#125; onClick(tab) &#123; let TargetComponent, params = &#123;...this.props,menuType:tab&#125;; switch (tab) &#123; case MORE_MENU.About_Author: TargetComponent = AboutMePage; break; case MORE_MENU.Website: TargetComponent = WebViewPage; params.title='GitHubPopular'; var url='https://reversescale.github.io'; params.url=url; break; case MORE_MENU.Feedback: var url='mailto://reversescale@icloud.com'; Linking.canOpenURL(url).then(supported =&gt; &#123; if (!supported) &#123; console.log('Can\\'t handle url: ' + url); &#125; else &#123; return Linking.openURL(url); &#125; &#125;).catch(err =&gt; console.error('An error occurred', err)); break; case MORE_MENU.Share: break; &#125; if (TargetComponent) &#123; this.props.navigator.push(&#123; component: TargetComponent, params: params, &#125;); &#125; &#125; render() &#123; let content=&lt;View&gt; &#123;this.aboutCommon.renderRepository(this.state.projectModels)&#125; &#123;ViewUtils.getSettingItem(()=&gt;this.onClick(MORE_MENU.Website), require('../../../res/images/ic_computer.png'), MORE_MENU.Website, this.props.theme.styles.tabBarSelectedIcon)&#125; &lt;View style=&#123;GlobalStyles.line&#125;/&gt; &#123;ViewUtils.getSettingItem(()=&gt;this.onClick(MORE_MENU.About_Author), require('../my/img/ic_insert_emoticon.png'), MORE_MENU.About_Author, this.props.theme.styles.tabBarSelectedIcon)&#125; &lt;View style=&#123;GlobalStyles.line&#125;/&gt; &#123;ViewUtils.getSettingItem(()=&gt;this.onClick(MORE_MENU.Feedback), require('../../../res/images/ic_feedback.png'), MORE_MENU.Feedback, this.props.theme.styles.tabBarSelectedIcon)&#125; &lt;/View&gt; return this.aboutCommon.render(content, &#123; 'name': 'GitHub Popular', 'description': 'è¿™æ˜¯ä¸€ä¸ªç”¨æ¥æŸ¥çœ‹GitHubæœ€å—æ¬¢è¿ä¸æœ€çƒ­é¡¹ç›®çš„App,å®ƒåŸºäºReact Nativeæ”¯æŒAndroidå’ŒiOSåŒå¹³å°ã€‚', \"avatar\": \"http://og1yl0w9z.bkt.clouddn.com/18-3-28/61685877.jpg\", \"backgroundImg\": \"http://og1yl0w9z.bkt.clouddn.com/18-3-28/37407402.jpg\", &#125;); &#125;&#125; æœ¬åœ°æŒä¹…åŒ– ä¸»é¢˜é€‰æ‹©ç•Œé¢ åˆ‡æ¢ä¸»é¢˜åç•Œé¢ åœ¨æ¶‰åŠå¦‚ä¸»é¢˜å˜æ›´ç­‰æ“ä½œæ—¶ï¼Œéœ€è¦å°†çŠ¶æ€ä¿¡æ¯ä¿å­˜ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°ç±»ä¼¼äºiOS ä¸­çš„NSUserDefaultï¼Œ AsyncStorage æ˜¯React Nativeä¸­çš„ Key-Value å­˜å‚¨ç³»ç»Ÿï¼Œå¯ä»¥åšæœ¬åœ°æŒä¹…åŒ–ã€‚ é¦–å…ˆçœ‹å®ƒä¸»è¦çš„å‡ ä¸ªæ¥å£ï¼š æ ¹æ®é”®æ¥è·å–å€¼ï¼Œè·å–çš„ç»“æœä¼šæ”¾åœ¨å›è°ƒå‡½æ•°ä¸­ï¼š1static getItem(key: string, callback:(error, result)) æ ¹æ®é”®æ¥è®¾ç½®å€¼ï¼š1static setItem(key: string, value: string, callback:(error)) æ ¹æ®é”®æ¥ç§»é™¤é¡¹ï¼š1static removeItem(key: string, callback:(error)) è·å–æ‰€æœ‰çš„é”®ï¼š1static getAllKeys(callback:(error, keys)) è®¾ç½®å¤šé¡¹ï¼Œå…¶ä¸­ keyValuePairs æ˜¯å­—ç¬¦ä¸²çš„äºŒç»´æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[[â€˜k1â€™, â€˜val1â€™], [â€˜k2â€™, â€˜val2â€™]]ï¼š1static multiSet(keyValuePairs, callback:(errors)) è·å–å¤šé¡¹ï¼Œå…¶ä¸­ keys æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[â€˜k1â€™, â€˜k2â€™]ï¼š1static multiGet(keys, callback:(errors, result)) åˆ é™¤å¤šé¡¹ï¼Œå…¶ä¸­ keys æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[â€˜k1â€™, â€˜k2â€™]ï¼š1static multiRemove(keys, callback:(errors)) æ¸…é™¤æ‰€æœ‰çš„é¡¹ç›®ï¼š1static clear(callback:(error)) ç½‘ç»œè¯·æ±‚å°è£…åœ¨React Nativeä¸­ï¼Œç»å¸¸ä½¿ç”¨Fetchå‡½æ•°æ¥å®ç°ç½‘ç»œè¯·æ±‚ï¼Œå®ƒæ”¯æŒGETå’ŒPOSTè¯·æ±‚å¹¶è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ªæ­£ç¡®çš„ç»“æœå’Œä¸€ä¸ªé”™è¯¯çš„ç»“æœã€‚ æ¥çœ‹ä¸€ä¸‹ç”¨Fetchå‘èµ·çš„POSTè¯·æ±‚å°è£…ï¼š 12345678910111213141516171819static post(url,data)&#123; return new Promise((resolve,reject)=&gt;&#123; fetch(url,&#123; method:'POST', header:&#123; 'Accept':'application/json', 'Content-Type':'application/json' &#125;, body:JSON.stringify(data) &#125;) .then(response=&gt;response.json()) .then(result=&gt;&#123; resolve(result); &#125;) .catch(error=&gt;&#123; reject(error); &#125;) &#125;) &#125; ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´çœ‹åˆ°ï¼šFetchå‡½æ•°ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚urlï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…æ‹¬æ–¹æ³•ï¼Œè¯·æ±‚å¤´ï¼Œè¯·æ±‚ä½“ç­‰ä¿¡æ¯ã€‚ éšåçš„thenå’Œcatchåˆ†åˆ«æ•æ‰äº†fetchå‡½æ•°çš„è¿”å›å€¼ï¼šä¸€ä¸ªPromiseå¯¹è±¡çš„æ­£ç¡®ç»“æœå’Œé”™è¯¯ç»“æœã€‚æ³¨æ„ï¼Œè¿™é‡Œé¢æœ‰ä¸¤ä¸ªthenï¼Œå…¶ä¸­ç¬¬äºŒä¸ªthenæŠŠç¬¬ä¸€ä¸ªthençš„ç»“æœæ‹¿äº†è¿‡æ¥ã€‚è€Œç¬¬ä¸€ä¸ªthenåšçš„äº‹æƒ…æ˜¯æŠŠç½‘ç»œè¯·æ±‚çš„ç»“æœè½¬åŒ–ä¸ºJSONå¯¹è±¡ã€‚ é‚£ä¹ˆä»€ä¹ˆæ˜¯Promiseå¯¹è±¡å‘¢ï¼Ÿ Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ŒPromiseå¯¹è±¡å¯ä»¥è·å–æŸä¸ªå¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚å®ƒé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ å®ƒåˆ†ä¸ºä¸‰ç§çŠ¶æ€ï¼š Pendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€Resolvedï¼ˆå·²æˆåŠŸï¼‰å’ŒRejectedï¼ˆå·²å¤±è´¥ï¼‰ å®ƒçš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectï¼š resolveå‡½æ•°çš„ä½œç”¨ï¼šå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜æˆâ€œæˆåŠŸâ€(å³ä»Pendingå˜ä¸ºResolved)ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼› rejectå‡½æ•°çš„ä½œç”¨ï¼šå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜æˆâ€œæˆåŠŸâ€(å³ä»Pendingå˜ä¸ºRejected)ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚ GET è¯·æ±‚å°è£…ï¼š123456789101112static get(url)&#123; return new Promise((resolve,reject)=&gt;&#123; fetch(url) .then(response=&gt;response.json()) .then(result=&gt;&#123; resolve(result); &#125;) .catch(error=&gt;&#123; reject(error); &#125;) &#125;) &#125; å› ä¸ºåªæ˜¯GETè¯·æ±‚ï¼Œæ‰€ä»¥ä¸éœ€è¦é…ç½®è¯·æ±‚ä½“ï¼Œè€Œä¸”å› ä¸ºè¿™ä¸ªfetchå‡½æ•°è¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨.thenå’Œ.catchæ¥æ•æ‰æ­£ç¡®å’Œé”™è¯¯çš„ç»“æœã€‚ åŠŸèƒ½è°ƒè¯•æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æ¥è°ƒè¯•React Nativeé¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡æ‰“æ–­ç‚¹çš„æ–¹å¼æ¥çœ‹æ•°æ®ä¿¡æ¯ä»¥åŠæ–¹æ³•çš„è°ƒç”¨ï¼š é¦–å…ˆåœ¨iOSæ¨¡æ‹Ÿå™¨ä¸­ç‚¹å‡»command + Dï¼Œç„¶åå†å¼¹å‡ºèœå•é‡Œç‚¹å‡»Debug JS Remotelyã€‚éšåå°±æ‰“å¼€äº†æµè§ˆå™¨è¿›å…¥äº†è°ƒè¯•ã€‚ æµè§ˆå™¨ä¸€èˆ¬ä¼šå±•ç¤ºä¸‹é¢çš„é¡µé¢ï¼Œç„¶åç‚¹å‡»command + option + Jè¿›å…¥çœŸç”Ÿçš„è°ƒè¯•ç•Œé¢ã€‚ åŒå¹³å°é€‚é…å› ä¸ºReact Nativeè®²æ±‚çš„æ˜¯ä¸€ä»½ä»£ç è·‘åœ¨ä¸¤ä¸ªå¹³å°ä¸Šï¼Œè€Œå®¢è§‚ä¸Šè¿™ä¸¤ä¸ªå¹³å°åˆæœ‰ä¸€äº›ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œæ‰€ä»¥å°±éœ€è¦åœ¨åˆ«è¦çš„æ—¶å€™åšä¸€ä¸‹ä¸¤ä¸ªå¹³å°çš„é€‚é…ã€‚ ä¾‹å¦‚å¯¼èˆªæ ï¼šåœ¨iOSè®¾å¤‡ä¸­æ˜¯å­˜åœ¨å¯¼èˆªæ çš„ï¼Œè€Œå®‰å“è®¾å¤‡ä¸Šæ˜¯æ²¡æœ‰çš„ã€‚æ‰€ä»¥åœ¨å®šåˆ¶å¯¼èˆªæ çš„æ—¶å€™ï¼Œåœ¨ä¸åŒå¹³å°ä¸‹ç»™å¯¼èˆªæ è®¾ç½®ä¸åŒçš„é«˜åº¦ï¼š 12345678910const NAV_BAR_HEIGHT_IOS = 54;const NAV_BAR_HEIGHT_ANDROID = 50;// css navBar: &#123; flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', height: Platform.OS === 'ios' ? NAV_BAR_HEIGHT_IOS : NAV_BAR_HEIGHT_ANDROID, &#125;, ä¸Šé¢çš„Platformæ˜¯React Nativeå†…ç½®çš„ç”¨äºåŒºåˆ†å¹³å°çš„åº“ï¼Œå¯ä»¥åœ¨å¼•å…¥åç›´æ¥ä½¿ç”¨ã€‚ å»ºè®®åœ¨è°ƒè¯•ç¨‹åºçš„æ—¶å€™ï¼ŒåŒæ—¶æ‰“å¼€iOSå’ŒAndroidçš„æ¨¡æ‹Ÿå™¨è¿›è¡Œè°ƒè¯•ï¼Œå› ä¸ºæœ‰äº›åœ°æ–¹å¯èƒ½åœ¨æŸä¸ªå¹³å°ä¸Šæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å¦ä¸€ä¸ªå¹³å°ä¸Šæœ‰é—®é¢˜ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨Platformæ¥åŒºåˆ†å¹³å°ã€‚ å¼€æºç»„ä»¶åº“çš„ä½¿ç”¨ReactNative çš„ç»„ä»¶ä¸åŸç”Ÿçš„ç»„ä»¶æœ‰è®¸å¤šå…±åŒä¹‹å¤„ï¼Œå¦‚ä¸‹æ‹‰åˆ·æ–°ï¼ŒåŒæ ·çš„ Github ä¸­å¼€æºç»„ä»¶å·²ç»ç›¸å½“å®Œå–„ã€‚ å¼€æºç»„ä»¶åº“æ–¹æ³•å¦‚ä¸‹ï¼Œå®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š1npm install react-native-tab-navigator --save å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼š1npm install --save react-native-tab-navigator@0.4.0 react-native é›†æˆç»„ä»¶ç»‘å®š(ReactNative 0.27ä»¥åï¼Œè‡ªé›†æˆRNPM)ï¼š1react-native link react-native-splash-screen å¸¸ç”¨å¼€æºåº“ï¼š12345678npm install --save react-native-tab-navigator@0.4.0npm install --save react-native-scrollable-tab-view@0.7.0npm install --save react-native-check-box@1.0.4npm install --react-native-easy-toast@1.0.9npm install --save GitHubTrending@2.0.0npm install --save react-native-htmlview@0.5.0npm install --save react-native-popover@0.5.0npm install --react-native-splash-screen@2.0.0 ä¸‹å›¾ä¸ºä½¿ç”¨ react-native-splash-screen åçš„æ•ˆæœæ¼”ç¤ºï¼š çƒ­æ›´æ–°CodePush æ˜¯å¾®è½¯æä¾›çš„ä¸€å¥—ç”¨äºçƒ­æ›´æ–° React Native å’Œ Cordova åº”ç”¨çš„æœåŠ¡ã€‚ CodePush æ˜¯æä¾›ç»™ React Native å’Œ Cordova å¼€å‘è€…ç›´æ¥éƒ¨ç½²ç§»åŠ¨åº”ç”¨æ›´æ–°ç»™ç”¨æˆ·è®¾å¤‡çš„äº‘æœåŠ¡ã€‚CodePush ä½œä¸ºä¸€ä¸ªä¸­å¤®ä»“åº“ï¼Œå¼€å‘è€…å¯ä»¥æ¨é€æ›´æ–° (JS, HTML, CSS and images)ï¼Œåº”ç”¨å¯ä»¥ä»å®¢æˆ·ç«¯ SDK é‡Œé¢æŸ¥è¯¢æ›´æ–°ã€‚ Code-Push æ¨åŒ…å‘½ä»¤ï¼š1code-push release-react &lt;appName&gt; &lt;platform&gt; [options] ç¤ºä¾‹ï¼š1code-push release-react RNAPPGithub ios --t 1.0.0 --dev false --d Staging --des &quot;1.çƒ­æ›´æ–°æˆ‘çš„é¡µé¢èƒŒæ™¯è‰²&quot; --m true 1code-push release-react RNAPPGithub ios --t 1.0.1 --dev false --d Staging --des &quot;1.çƒ­æ›´æ–°ç›¸å…³è®¾ç½®&quot; --m true Code-Push çº¿ä¸ŠæŸ¥çœ‹æ›´æ–°ï¼š1code-push deployment ls RNAPPGithub Code-Push æŸ¥çœ‹é¡¹ç›®Keyï¼š1code-push deployment ls RNAPPGithub -k Code-Push iOSæ›´æ–°æ‰“åŒ…æ–¹æ³•ï¼š1react-native bundle --platform ios --entry-file index.ios.js --bundle-output release_ios/main.jsbundle --assets-dest release_ios/ --dev fasle æ€»ç»“ä¹‹å‰ä¹Ÿæœ‰é›¶é›¶æ•£æ•£çš„è°ƒç ”è¿™é—¨æŠ€æœ¯ï¼Œä½†æ˜¯ç»è¿‡ç³»ç»Ÿçš„ 15 ä¸ªä¸‹åˆçš„åšæŒå­¦ä¹ ï¼Œæ·±æ„Ÿè·¨å¹³å°æŠ€æœ¯çš„ç‹¬åˆ°ä¹‹å¤„ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸åŸç”Ÿäº¤äº’çš„ç¼–å†™ä¸Šç®€ç›´è®©äººæ¬²ç”Ÿæ¬²æ­»ï¼Œè¿˜å¥½åœ¨ Github ä¸Šå·²ç»æœ‰å„è·¯å¤§ç¥å¼€æºçš„å„ç§æ–¹ä¾¿å¼€å‘çš„ç»„ä»¶åº“å¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚ åˆ†äº«é“¾æ¥ã€ŠReact Native å¼€å‘å¸¸ç”¨å‘½ä»¤è¡Œï¼ˆæŒç»­æ›´æ–°ï¼‰ã€‹(https://juejin.im/post/5abc54c86fb9a028da7c998c) ã€ŠReactNative å¼€å‘å¸¸ç”¨çš„ä¸‰æ–¹æ¨¡å—ã€‹(https://www.jianshu.com/p/53ff78168acc) ã€Šä½¿ç”¨VS Codeè°ƒè¯•React-Nativeç¨‹åºã€‹ï¼ˆhttps://jingyan.baidu.com/article/ad310e80fb13fc1849f49ed1.htmlï¼‰ å‚è€ƒèµ„æ–™ React Nativeä¸­æ–‡ç½‘ è´¾é¹è¾‰çš„æŠ€æœ¯åšå®¢ ä»ä¸€ä¸ªå®æˆ˜é¡¹ç›®æ¥çœ‹ä¸€ä¸‹React Nativeå¼€å‘çš„å‡ ä¸ªå…³é”®æŠ€æœ¯ç‚¹ Marno:ç»™æ‰€æœ‰å¼€å‘è€…çš„React Nativeè¯¦ç»†å…¥é—¨æŒ‡å— å¤§æ¼ :ä¸€ä¸ªå®Œæ•´çš„FlexboxæŒ‡å— é˜®ä¸€å³°:Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡ å…«æ®µä»£ç å½»åº•æŒæ¡ Promise é˜®ä¸€å³°ï¼šPromiseå¯¹è±¡ asce1885:React Native é«˜è´¨é‡å­¦ä¹ èµ„æ–™æ±‡æ€» ä¸–é”‹æ—¥ä¸Š:ReactNative å­¦ä¹ èµ„æºå¤§æ±‡é›†","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"åŸºäº Aspects æ·±å…¥äº†è§£ AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰","slug":"Library Aspects","date":"2018-03-23T13:56:27.000Z","updated":"2018-11-15T14:59:01.047Z","comments":true,"path":"2018/03/23/Library Aspects/","link":"","permalink":"https://reversescale.github.io/2018/03/23/Library Aspects/","excerpt":"AOP(Aspect-Oriented-Programming)ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ã€Œé¢å‘åˆ‡é¢ç¼–ç¨‹ã€ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œå¦‚ç»Ÿè®¡åŸ‹ç‚¹ã€æ–¹æ³•æ›¿æ¢ç­‰~","text":"AOP(Aspect-Oriented-Programming)ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ã€Œé¢å‘åˆ‡é¢ç¼–ç¨‹ã€ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œå¦‚ç»Ÿè®¡åŸ‹ç‚¹ã€æ–¹æ³•æ›¿æ¢ç­‰~ ğŸ‘¨ğŸ»â€ğŸ’» Github Demo ğŸ¨ æµ‹è¯• UI ä»€ä¹ˆæ ·å­ï¼Ÿ 1.å±•ç¤ºé¡µ 2.å±•ç¤ºé¡µ 3.å±•ç¤ºé¡µ å±•ç¤ºåˆ—è¡¨ æ‹¦æˆªç³»ç»Ÿäº‹ä»¶ è‡ªå®šä¹‰æ‹¦æˆª ğŸ¯ å®‰è£…æ–¹æ³•å®‰è£…åœ¨ iOS, ä½ éœ€è¦åœ¨ Podfile ä¸­æ·»åŠ .12345source &apos;https://github.com/CocoaPods/Specs.git&apos;platform :ios, &apos;9.0&apos;use_frameworks!pod &quot;Aspects&quot; ğŸ›  é…ç½®ç³»ç»Ÿçº§æ‹¦æˆªæ‹¦æˆªç³»ç»Ÿçº§çº§äº‹ä»¶ï¼Œå¦‚ viewWillAppear ç­‰ 1234567891011121314#import &lt;Aspects.h&gt;- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. [UIViewController aspect_hookSelector:@selector(viewWillAppear:) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; aspectInfo, BOOL animated) &#123; NSLog(@&quot;View Controller %@ will appear animated: %tu&quot;, aspectInfo.instance, animated); &#125; error:NULL];&#125;- (void)viewWillAppear:(BOOL)animated &#123; [super viewWillAppear:animated]; NSLog(@&quot;System View Controller will appear&quot;);&#125; è‡ªå®šä¹‰æ‹¦æˆªæ‹¦æˆªè‡ªå®šä¹‰äº‹ä»¶ï¼Œå¦‚å¯¹ç±»çš„æ“ä½œ 12345678910111213141516171819202122232425262728// Cat.h ç±»@interface Cat: NSObject+ (void)classFee;@end// Cat.m ç±»@implementation Cat+ (void)classFee &#123; NSLog(@&quot;Miao~&quot;);&#125;@end// å®ç°æ–¹æ³•#import &quot;Cat.h&quot;#import &lt;Aspects.h&gt;- (void)viewDidLoad &#123; [super viewDidLoad]; // Do any additional setup after loading the view. Class catMetal = objc_getMetaClass(NSStringFromClass(Cat.class).UTF8String); [catMetal aspect_hookSelector:@selector(classFee) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; aspectInfo) &#123; NSLog(@&quot;Miao~,I am angry~&quot;); &#125; error:NULL]; [Cat classFee];&#125; ğŸ“ æ·±å…¥å­¦ä¹ ç´¢å¼•ï¼š AOP ç®€ä»‹ Aspects ç®€ä»‹ Aspects ç»“æ„å‰–æ Aspects æ ¸å¿ƒä»£ç å‰–æ ä¼˜ç§€ AOP åº“åº”è¯¥å…·å¤‡çš„ç‰¹è´¨ æ€»ç»“ AOP ç®€ä»‹åœ¨ Objective-C çš„å®ç°ç»“æ„ä¸­ Runtime çš„åŠ¨æ€æ´¾å‘æœºåˆ¶ä¿è¯äº†è¿™ä¹ˆè¯­è¨€çš„çµæ´»æ€§ï¼Œè€Œåœ¨è¿è¡Œæ—¶ï¼ŒåŠ¨æ€åœ°å°†ä»£ç åˆ‡å…¥åˆ°ç±»çš„æŒ‡å®šæ–¹æ³•ã€æŒ‡å®šä½ç½®ä¸Šçš„ç¼–ç¨‹æ€æƒ³å°±æ˜¯AOP(é¢å‘åˆ‡é¢ç¼–ç¨‹)ã€‚ AOP æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼æˆ–è€…ç¼–ç¨‹æ€æƒ³ï¼Œå®ƒè§£å†³äº† OOP (Object-oriented programming) çš„å»¶ä¼¸é—®é¢˜ ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨ AOPå‡è®¾éšç€æˆ‘ä»¬æ‰€åœ¨çš„å…¬å¸é€æ­¥å‘å±•ï¼Œä¹‹å‰ç¬¬ä¸‰æ–¹çš„ç”¨æˆ·é¡µé¢ç»Ÿè®¡å·²ç»ä¸èƒ½æ»¡è¶³éœ€æ±‚äº†ï¼Œå…¬å¸è¦æ±‚å®ç°ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„ç”¨æˆ·é¡µé¢ç»Ÿè®¡ã€‚ åœ¨ä¼ ç»Ÿçš„ OOP æ€æƒ³ä¸‹ï¼Œå¯èƒ½ä¼šå¦‚ä¸‹æ“ä½œï¼š ä¸€ä¸ªç†Ÿæ‚‰ OOP æ€æƒ³çš„ç¨‹åºçŒ¿ä¼šç†æ‰€åº”å½“çš„æƒ³åˆ°è¦æŠŠç”¨æˆ·é¡µé¢ç»Ÿè®¡è¿™ä¸€ä»»åŠ¡æ”¾åˆ° ViewController ä¸­ï¼› è€ƒè™‘åˆ°ä¸€ä¸ªä¸ªçš„æ‰‹åŠ¨æ·»åŠ ç»Ÿè®¡ä»£ç è¦æ­»äººï¼ˆè€Œä¸”è¿˜ä¼šæ¼ï¼Œä»¥åæ–°å¢ ViewController ä¹Ÿè¦æ‰‹åŠ¨åŠ ï¼‰ï¼Œäºæ˜¯æƒ³åˆ°äº† OOP æ€æƒ³ä¸­çš„ç»§æ‰¿ï¼› ä¸å·§ç”±äºé¡¹ç›®ä¹…è¿œï¼Œæ‰€æœ‰çš„ ViewController éƒ½æ˜¯ç›´æ¥ç»§æ‰¿è‡ªç³»ç»Ÿç±» UIViewControllerï¼ˆç¬‘ï¼‰ï¼Œæ­¤æ—¶é€‰æ‹©æŠ½ä¸€ä¸ªé¡¹ç›® RootViewControllerï¼Œæ›¿æ¢æ‰€æœ‰ ViewController ç»§æ‰¿ RootViewControllerï¼› ç„¶ååœ¨ RootViewController çš„ viewWillAppear: å’Œ viewWillDisappear: æ–¹æ³•åŠ å…¥æ—¶é—´ç»Ÿè®¡ä»£ç ï¼Œè®°å½• ViewController ä»¥åŠ Router ä¼ å‚ã€‚ å…¶å® OOP ä¹Ÿæœ‰å…¶ç‰¹æ®Šçš„å®šä½ï¼Œä¹Ÿèƒ½å¤Ÿå®ç°ä¸Šè¿°çš„éœ€æ±‚ã€‚ è€Œ AOP åˆ™æ›´é€‚åˆåœ¨ç»™å¤šä¸ª App å†™é€šç”¨ç»„ä»¶å¹¶ä»¥é€šç”¨çš„å½¢å¼å®ç°ç»Ÿè®¡çš„æƒ…å†µä¸‹ã€‚ ä¸€ä¸ªç®€å•çš„æ€è·¯ï¼šHook æ–¹æ³•äº¤æ¢çš„æ–¹æ³•ï¼Œåœ¨åŸæ–¹æ³•æ‰§è¡Œä¹‹åè®°å½•éœ€è¦ç»Ÿè®¡çš„ä¿¡æ¯å¹¶ä¸ŠæŠ¥ã€‚ å•é€šè¿‡ Method Swizzling æ¥ Hook çš„æ–¹æ³•åœ¨å¤„ç†ä¸å½“çš„æƒ…å†µä¸‹å®¹æ˜“å‡ºç°å®‰å…¨éšæ‚£ Aspects ç®€ä»‹ Aspects æ˜¯ä¸€ä¸ªä½¿ç”¨èµ·æ¥ç®€å•æ„‰å¿«çš„ AOP åº“ï¼Œä½¿ç”¨ Objective-C ç¼–å†™ï¼Œé€‚ç”¨äº iOS ä¸ Mac OS Xã€‚ Aspects ç®€å•æ˜“ç”¨ï¼Œä½œè€…é€šè¿‡åœ¨ NSObject (Aspects) åˆ†ç±»ä¸­æš´éœ²å‡ºçš„ä¸¤ä¸ªæ¥å£åˆ†åˆ«æä¾›äº†å¯¹å®ä¾‹å’Œ Class çš„ Hook å®ç°ï¼š 12345678910@interface NSObject (Aspects)+ (id)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error;- (id)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error;@end Aspects æ”¯æŒå®ä¾‹ Hookï¼Œç›¸è¾ƒå…¶ä»– Objective-C AOP åº“è€Œè¨€å¯æ“ä½œç²’åº¦æ›´å°ï¼Œé€‚åˆçš„åœºæ™¯æ›´åŠ å¤šæ ·åŒ–ã€‚ä½œä¸ºä½¿ç”¨è€…æ— éœ€è¿›è¡Œæ›´å¤šçš„æ“ä½œå³å¯ Hook æŒ‡å®šå®ä¾‹æˆ–è€… Class çš„æŒ‡å®š SELï¼ŒAspectOptions å‚æ•°å¯ä»¥æŒ‡å®š Hook çš„ç‚¹ï¼Œä»¥åŠæ˜¯å¦æ‰§è¡Œä¸€æ¬¡ä¹‹åå°±æ’¤é”€ Hookã€‚ Aspects ç»“æ„å‰–æ å°½ç®¡ Aspects åªæœ‰ä¸åˆ°åƒè¡Œçš„æºç ï¼Œä½†æ˜¯å…¶å†…éƒ¨å®ç°è€ƒè™‘åˆ°äº†å¾ˆå¤š Hook ç›¸å…³çš„å®‰å…¨é—®é¢˜å’Œå…¶ä»–ç»†èŠ‚ï¼Œå¯¹æ¯”å…¶ä»– Objective-C AOP å¼€æºé¡¹ç›®æ¥è¯´ Aspects æ›´ä¸ºå¥å…¨ã€‚ Aspects å†…éƒ¨ç»“æ„Aspects å†…éƒ¨å®šä¹‰äº†ä¸¤ä¸ªåè®®ï¼š AspectToken - ç”¨äºæ³¨é”€ Hook AspectInfo - åµŒå…¥ Hook ä¸­çš„ Block é¦–ä½å‚æ•° æ­¤å¤– Aspects å†…éƒ¨è¿˜å®šä¹‰äº† 4 ä¸ªç±»ï¼š AspectInfo - åˆ‡é¢ä¿¡æ¯ï¼Œéµå¾ª AspectInfo åè®® AspectIdentifier - åˆ‡é¢ IDï¼Œåº”è¯¥éµå¾ª AspectToken åè®®ï¼ˆä½œè€…æ¼æ‰äº†ï¼Œå·²æ PRï¼‰ AspectsContainer - åˆ‡é¢å®¹å™¨ AspectTracker - åˆ‡é¢è·Ÿè¸ªå™¨ ä»¥åŠä¸€ä¸ªç»“æ„ä½“ï¼š AspectBlockRef - å³ _AspectBlockï¼Œå……å½“å†…éƒ¨ Blockå¦‚æœä½ æ‰’ä¸€éæºç ï¼Œè¿˜ä¼šå‘ç°ä¸¤ä¸ªå†…éƒ¨é™æ€å…¨å±€å˜é‡ï¼š static NSMutableDictionary *swizzledClassesDict; static NSMutableSet *swizzledClasses; Aspects åè®®AspectToken AspectToken åè®®æ—¨åœ¨è®©ä½¿ç”¨è€…å¯ä»¥çµæ´»çš„æ³¨é”€ä¹‹å‰æ·»åŠ è¿‡çš„ Hookï¼Œå†…éƒ¨è§„å®šéµå®ˆæ­¤åè®®çš„å¯¹è±¡é¡»å®ç° remove æ–¹æ³•ã€‚ 12345/// ä¸é€æ˜çš„ Aspect Tokenï¼Œç”¨äºæ³¨é”€ Hook@protocol AspectToken /// æ³¨é”€ä¸€ä¸ª aspect./// è¿”å› YES è¡¨ç¤ºæ³¨é”€æˆåŠŸï¼Œå¦åˆ™è¿”å› NO- (BOOL)remove;@end AspectInfo AspectInfo åè®®æ—¨åœ¨è§„èŒƒå¯¹ä¸€ä¸ªåˆ‡é¢ï¼Œå³ aspect çš„ Hook å†…éƒ¨ä¿¡æ¯çš„çº°æ¼ï¼Œæˆ‘ä»¬åœ¨ Hook æ—¶æ·»åŠ åˆ‡é¢çš„ Block ç¬¬ä¸€ä¸ªå‚æ•°å°±éµå®ˆæ­¤åè®®ã€‚ 12345678/// AspectInfo åè®®æ˜¯æˆ‘ä»¬å—è¯­æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚@protocol AspectInfo /// å½“å‰è¢« Hook çš„å®ä¾‹- (id)instance;/// è¢« Hook æ–¹æ³•çš„åŸå§‹ invocation- (NSInvocation *)originalInvocation;/// æ‰€æœ‰æ–¹æ³•å‚æ•°ï¼ˆè£…ç®±ä¹‹åçš„ï¼‰æƒ°æ€§æ‰§è¡Œ- (NSArray *)arguments;@end è£…ç®±æ˜¯ä¸€ä¸ªå¼€é”€æ˜‚è´µæ“ä½œï¼Œæ‰€ä»¥ç”¨åˆ°å†å»æ‰§è¡Œ Aspects å†…éƒ¨ç±»æ¥ç€åè®®ï¼Œæˆ‘ä»¬ä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹ Aspects çš„å†…éƒ¨ç±»ã€‚ AspectInfo AspectInfo åœ¨è¿™é‡Œæ˜¯ä¸€ä¸ª Classï¼Œå…¶éµå®ˆä¸Šæ–‡ä¸­è®²åˆ°çš„ AspectInfo åè®®ï¼Œä¸è¦æ··æ·†ã€‚ 123456@interface AspectInfo : NSObject - (id)initWithInstance:(__unsafe_unretained id)instance invocation:(NSInvocation *)invocation;@property (nonatomic, unsafe_unretained, readonly) id instance;@property (nonatomic, strong, readonly) NSArray *arguments;@property (nonatomic, strong, readonly) NSInvocation *originalInvocation;@end AspectInfo æ¯”è¾ƒç®€å•ï¼Œå‚è€ƒ ReactiveCocoa å›¢é˜Ÿæä¾›çš„ NSInvocation å‚æ•°é€šç”¨æ–¹æ³•å¯å°†å‚æ•°è£…ç®±ä¸º NSValueï¼Œç®€å•æ¥è¯´ AspectInfo æ‰®æ¼”äº†ä¸€ä¸ªæä¾› Hook ä¿¡æ¯çš„è§’è‰²ã€‚ AspectIdentifier AspectIdentifier ç±»å®šä¹‰ï¼š 123456789@interface AspectIdentifier : NSObject+ (instancetype)identifierWithSelector:(SEL)selector object:(id)object options:(AspectOptions)options block:(id)block error:(NSError **)error;- (BOOL)invokeWithInfo:(id)info;@property (nonatomic, assign) SEL selector;@property (nonatomic, strong) id block;@property (nonatomic, strong) NSMethodSignature *blockSignature;@property (nonatomic, weak) id object;@property (nonatomic, assign) AspectOptions options;@end AspectIdentifier å®é™…ä¸Šæ˜¯æ·»åŠ åˆ‡é¢çš„ Block çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå…¶åº”è¯¥éµå¾ª AspectToken åè®®ï¼Œäº‹å®ä¸Šä¹Ÿçš„ç¡®å¦‚æ­¤ï¼Œå…¶æä¾›äº† remove æ–¹æ³•çš„å®ç°ã€‚ AspectIdentifier å†…éƒ¨éœ€è¦æ³¨æ„çš„æ˜¯ç”±äºä½¿ç”¨ Block æ¥å†™ Hook ä¸­æˆ‘ä»¬åŠ çš„æ–™ï¼Œè¿™é‡Œç”Ÿæˆäº† blockSignatureï¼Œåœ¨ AspectIdentifier åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­ä¼šå»åˆ¤æ–­ blockSignature ä¸å…¥å‚ object çš„ selector å¾—åˆ°çš„ methodSignature çš„å…¼å®¹æ€§ï¼Œå…¼å®¹æ€§åˆ¤æ–­æˆåŠŸæ‰ä¼šé¡ºåˆ©åˆå§‹åŒ–ã€‚ AspectsContainer AspectsContainer ä½œä¸ºåˆ‡é¢çš„å®¹å™¨ç±»ï¼Œå…³è”æŒ‡å®šå¯¹è±¡çš„æŒ‡å®šæ–¹æ³•ï¼Œå†…éƒ¨æœ‰ä¸‰ä¸ªåˆ‡é¢é˜Ÿåˆ—ï¼Œåˆ†åˆ«å®¹çº³å…³è”æŒ‡å®šå¯¹è±¡çš„æŒ‡å®šæ–¹æ³•ä¸­ç›¸å¯¹åº” AspectOption çš„ Hookï¼š NSArray *beforeAspects; - AspectPositionBefore NSArray *insteadAspects; - AspectPositionInstead NSArray *afterAspects; - AspectPositionAfter AspectsContainer åœ¨ NSObject åˆ†ç±»ä¸­é€šè¿‡ AssociatedObject æ–¹æ³•ä¸å½“å‰è¦ Hook çš„ç›®æ ‡å…³è”åœ¨ä¸€èµ·çš„ã€‚ 12345678@interface AspectsContainer : NSObject- (void)addAspect:(AspectIdentifier *)aspect withOptions:(AspectOptions)injectPosition;- (BOOL)removeAspect:(id)aspect;- (BOOL)hasAspects;@property (atomic, copy) NSArray *beforeAspects;@property (atomic, copy) NSArray *insteadAspects;@property (atomic, copy) NSArray *afterAspects;@end å…³è”ç›®æ ‡æ˜¯ Hook ä¹‹åçš„ Selectorï¼Œå³ aliasSelectorï¼ˆåŸå§‹ SEL åç§°åŠ  aspects_ å‰ç¼€å¯¹åº”çš„ SELï¼‰ AspectTracker AspectTracker ç±»å®šä¹‰ï¼š 123456@interface AspectTracker : NSObject- (id)initWithTrackedClass:(Class)trackedClass parent:(AspectTracker *)parent;@property (nonatomic, strong) Class trackedClass;@property (nonatomic, strong) NSMutableSet *selectorNames;@property (nonatomic, weak) AspectTracker *parentEntry;@end AspectTracker ä½œä¸ºåˆ‡é¢è¿½è¸ªå™¨ï¼ŒåŸç†å¤§è‡´å¦‚ä¸‹ï¼š 12345678910111213// Add the selector as being modified.currentClass = klass;AspectTracker *parentTracker = nil;do &#123; AspectTracker *tracker = swizzledClassesDict[currentClass]; if (!tracker) &#123; tracker = [[AspectTracker alloc] initWithTrackedClass:currentClass parent:parentTracker]; swizzledClassesDict[(id)currentClass] = tracker; &#125; [tracker.selectorNames addObject:selectorName]; // All superclasses get marked as having a subclass that is modified. parentTracker = tracker;&#125;while ((currentClass = class_getSuperclass(currentClass))); å…¨å±€å˜é‡ swizzledClassesDict ä¸­çš„ value å¯¹åº”ç€ AspectTracker æŒ‡é’ˆã€‚ AspectTracker æ˜¯ä»ä¸‹è€Œä¸Šè¿½è¸ªï¼Œæœ€åº•å±‚çš„ parentEntry ä¸º nilï¼Œçˆ¶ç±»çš„ parentEntry ä¸ºå­ç±»çš„ trackerã€‚ Aspects é™æ€å…¨å±€å˜é‡ 1ï¼‰static NSMutableDictionary *swizzledClassesDict; static NSMutableDictionary *swizzledClassesDict; åœ¨ Aspects ä¸­æ‰®æ¼”ç€å·²æ··å†™ç±»å­—å…¸çš„è§’è‰²ï¼ŒAspects å†…éƒ¨æä¾›äº†ä¸“é—¨è®¿é—®è¿™ä¸ªå…¨å±€å­—å…¸çš„æ–¹æ³•ï¼š 12345678static NSMutableDictionary *aspect_getSwizzledClassesDict() &#123; static NSMutableDictionary *swizzledClassesDict; static dispatch_once_t pred; dispatch_once(&amp;pred, ^&#123; swizzledClassesDict = [NSMutableDictionary new]; &#125;); return swizzledClassesDict;&#125; è¿™ä¸ªå…¨å±€å˜é‡å¯ä»¥ç®€å•ç†è§£ä¸ºè®°å½•æ•´ä¸ª Hook å½±å“çš„ Class åŒ…å«å…¶ SuperClass çš„è¿½è¸ªè®°å½•çš„å…¨å±€å­—å…¸ã€‚ 2ï¼‰static NSMutableSet *swizzledClasses; static NSMutableSet *swizzledClasses; åœ¨ Aspects ä¸­æ‹…å½“è®°å½•å·²æ··å†™ç±»çš„è§’è‰²ï¼ŒAspects å†…éƒ¨æä¾›ä¸€ä¸ªç”¨äºä¿®æ”¹è¿™ä¸ªå…¨å±€å˜é‡å†…å®¹çš„æ–¹æ³•ï¼š 12345678910static void _aspect_modifySwizzledClasses(void (^block)(NSMutableSet *swizzledClasses)) &#123; static NSMutableSet *swizzledClasses; static dispatch_once_t pred; dispatch_once(&amp;pred, ^&#123; swizzledClasses = [NSMutableSet new]; &#125;); @synchronized(swizzledClasses) &#123; block(swizzledClasses); &#125;&#125; Aspects æ ¸å¿ƒä»£ç å‰–æHook Class &amp;&amp; Hook InstanceAspects ä¸å…‰æ”¯æŒ Hook Class è¿˜æ”¯æŒ Hook Instanceï¼Œè¿™æä¾›äº†æ›´å°ç²’åº¦çš„æ§åˆ¶ï¼Œé…åˆ Hook çš„æ’¤é”€åŠŸèƒ½å¯ä»¥æ›´åŠ çµæ´»ç²¾å‡†çš„å®ç°åŠŸèƒ½ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647static Class aspect_hookClass(NSObject *self, NSError **error) &#123; // æ–­è¨€ self NSCParameterAssert(self); // classClass statedClass = self.class;// isaClass baseClass = object_getClass(self);NSString *className = NSStringFromClass(baseClass); // å·²ç»å­ç±»åŒ–è¿‡äº†if ([className hasSuffix:AspectsSubclassSuffix]) &#123;return baseClass; // æˆ‘ä»¬æ··å†™äº†ä¸€ä¸ª class å¯¹è±¡ï¼Œè€Œéä¸€ä¸ªå•ç‹¬çš„ object&#125;else if (class_isMetaClass(baseClass)) &#123; // baseClass æ˜¯å…ƒç±»ï¼Œåˆ™ self æ˜¯ Class æˆ– MetaClassï¼Œæ··å†™ self return aspect_swizzleClassInPlace((Class)self); // å¯èƒ½æ˜¯ä¸€ä¸ª KVO'ed classã€‚æ··å†™å°±ä½ã€‚ä¹Ÿè¦æ··å†™ meta classesã€‚ &#125;else if (statedClass != baseClass) &#123; // å½“ .class å’Œ isa æŒ‡å‘ä¸åŒçš„æƒ…å†µï¼Œæ··å†™ baseClass return aspect_swizzleClassInPlace(baseClass); &#125; // é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åˆ›å»ºå­ç±» // æ‹¼æ¥å­ç±»åç¼€ AspectsSubclassSuffixconst char *subclassName = [className stringByAppendingString:AspectsSubclassSuffix].UTF8String;// å°è¯•ç”¨æ‹¼æ¥åç¼€çš„åç§°è·å– isaClass subclass = objc_getClass(subclassName); // æ‰¾ä¸åˆ° isaï¼Œä»£è¡¨è¿˜æ²¡æœ‰åŠ¨æ€åˆ›å»ºè¿‡è¿™ä¸ªå­ç±»if (subclass == nil) &#123; // åˆ›å»ºä¸€ä¸ª class pairï¼ŒbaseClass ä½œä¸ºæ–°ç±»çš„ superClassï¼Œç±»åä¸º subclassNamesubclass = objc_allocateClassPair(baseClass, subclassName, 0);if (subclass == nil) &#123; // è¿”å› nilï¼Œå³åˆ›å»ºå¤±è´¥ NSString *errrorDesc = [NSString stringWithFormat:@\"objc_allocateClassPair failed to allocate class %s.\", subclassName]; AspectError(AspectErrorFailedToAllocateClassPair, errrorDesc); return nil; &#125; // æ··å†™ forwardInvocation:aspect_swizzleForwardInvocation(subclass);// subClass.class = statedClassaspect_hookedGetClass(subclass, statedClass);// subClass.isa.class = statedClassaspect_hookedGetClass(object_getClass(subclass), statedClass);// æ³¨å†Œæ–°ç±»objc_registerClassPair(subclass);&#125; // è¦†ç›– isaobject_setClass(self, subclass);return subclass;&#125; éš¾ç‚¹å°±åœ¨äºå¯¹ .class å’Œ object_getClass çš„åŒºåˆ†ã€‚ .class å½“ target æ˜¯ Instance åˆ™è¿”å› Classï¼Œå½“ target æ˜¯ Class åˆ™è¿”å›è‡ªèº« object_getClass è¿”å› isa æŒ‡é’ˆçš„æŒ‡å‘ åŠ¨æ€åˆ›å»ºä¸€ä¸ª Class çš„å®Œæ•´æ­¥éª¤ä¹Ÿæ˜¯æˆ‘ä»¬åº”è¯¥æ³¨æ„çš„ã€‚ objc_allocateClassPair class_addMethod class_addIvar objc_registerClassPair Hook çš„å®ç°åœ¨ä¸Šé¢ aspect_hookClass æ–¹æ³•ä¸­ï¼Œä¸ä»…ä»…æ˜¯è¿”å›ä¸€ä¸ªè¦ Hook çš„ Classï¼ŒæœŸé—´è¿˜åšäº†ä¸€äº›ç»†èŠ‚æ“ä½œï¼Œä¸è®ºæ˜¯ Class è¿˜æ˜¯ Instanceï¼Œéƒ½ä¼šè°ƒç”¨ aspect_swizzleForwardInvocation æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡ä»€ä¹ˆéš¾ç‚¹ï¼Œç®€å•è´´ä¸€ä¸‹ä»£ç è®©å¤§å®¶æœ‰ä¸ªå°è±¡ï¼š 123456789101112static void aspect_swizzleForwardInvocation(Class klass) &#123; // æ–­è¨€ klass NSCParameterAssert(klass); // å¦‚æœæ²¡æœ‰ methodï¼Œreplace å®é™…ä¸Šä¼šåƒæ˜¯ class_addMethod ä¸€æ · IMP originalImplementation = class_replaceMethod(klass, @selector(forwardInvocation:), (IMP)__ASPECTS_ARE_BEING_CALLED__, \"v@:@\"); // æ‹¿åˆ° originalImplementation è¯æ˜æ˜¯ replace è€Œä¸æ˜¯ addï¼Œæƒ…å†µå°‘è§ if (originalImplementation) &#123; // æ·»åŠ  AspectsForwardInvocationSelectorName çš„æ–¹æ³•ï¼ŒIMP ä¸ºåŸç”Ÿ forwardInvocation: class_addMethod(klass, NSSelectorFromString(AspectsForwardInvocationSelectorName), originalImplementation, \"v@:@\"); &#125; AspectLog(@\"Aspects: %@ is now aspect aware.\", NSStringFromClass(klass));&#125; ä¸Šé¢çš„æ–¹æ³•å°±æ˜¯æŠŠè¦ Hook çš„ç›®æ ‡ Class çš„ forwardInvocation: æ··å†™äº†ï¼Œæ··å†™ä¹‹å forwardInvocation: çš„å…·ä½“å®ç°åœ¨ ASPECTS_ARE_BEING_CALLED ä¸­ï¼Œé‡Œé¢èƒ½çœ‹åˆ° invoke æ ‡è¯†ä½çš„ä¸åŒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å®ç°ç»†èŠ‚ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263// å®å®šä¹‰ï¼Œä»¥ä¾¿äºæˆ‘ä»¬æœ‰ä¸€ä¸ªæ›´æ˜æ™°çš„ stack trace#define aspect_invoke(aspects, info) \\for (AspectIdentifier *aspect in aspects) &#123;\\ [aspect invokeWithInfo:info];\\ if (aspect.options &amp; AspectOptionAutomaticRemoval) &#123; \\ aspectsToRemove = [aspectsToRemove?:@[] arrayByAddingObject:aspect]; \\ &#125; \\&#125;static void __ASPECTS_ARE_BEING_CALLED__(__unsafe_unretained NSObject *self, SEL selector, NSInvocation *invocation) &#123; // __unsafe_unretained NSObject *self ä¸è§£é‡Šäº† // æ–­è¨€ self, invocation NSCParameterAssert(self); NSCParameterAssert(invocation); // ä» invocation å¯ä»¥æ‹¿åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚ originalSelector SEL originalSelector = invocation.selector; // originalSelector åŠ å‰ç¼€å¾—åˆ° aliasSelectorSEL aliasSelector = aspect_aliasForSelector(invocation.selector);// ç”¨ aliasSelector æ›¿æ¢ invocation.selector invocation.selector = aliasSelector; // Instance çš„å®¹å™¨ AspectsContainer *objectContainer = objc_getAssociatedObject(self, aliasSelector); // Class çš„å®¹å™¨ AspectsContainer *classContainer = aspect_getContainerForClass(object_getClass(self), aliasSelector); AspectInfo *info = [[AspectInfo alloc] initWithInstance:self invocation:invocation]; NSArray *aspectsToRemove = nil; // Before hooks. aspect_invoke(classContainer.beforeAspects, info); aspect_invoke(objectContainer.beforeAspects, info); // Instead hooks. BOOL respondsToAlias = YES; if (objectContainer.insteadAspects.count || classContainer.insteadAspects.count) &#123; // å¦‚æœæœ‰ä»»ä½• insteadAspects å°±ç›´æ¥æ›¿æ¢äº† aspect_invoke(classContainer.insteadAspects, info); aspect_invoke(objectContainer.insteadAspects, info); &#125;else &#123; // å¦åˆ™æ­£å¸¸æ‰§è¡Œ // éå† invocation.target åŠå…¶ superClass æ‰¾åˆ°å®ä¾‹å¯ä»¥å“åº” aliasSelector çš„ç‚¹ invoke Class klass = object_getClass(invocation.target); do &#123; if ((respondsToAlias = [klass instancesRespondToSelector:aliasSelector])) &#123; [invocation invoke]; break; &#125; &#125;while (!respondsToAlias &amp;&amp; (klass = class_getSuperclass(klass))); &#125; // After hooks. aspect_invoke(classContainer.afterAspects, info); aspect_invoke(objectContainer.afterAspects, info); // å¦‚æœæ²¡æœ‰ hookï¼Œåˆ™æ‰§è¡ŒåŸå§‹å®ç°ï¼ˆé€šå¸¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰ if (!respondsToAlias) &#123; invocation.selector = originalSelector; SEL originalForwardInvocationSEL = NSSelectorFromString(AspectsForwardInvocationSelectorName); // å¦‚æœå¯ä»¥å“åº” originalForwardInvocationSELï¼Œè¡¨ç¤ºä¹‹å‰æ˜¯ replace method è€Œé add method if ([self respondsToSelector:originalForwardInvocationSEL]) &#123; ((void( *)(id, SEL, NSInvocation *))objc_msgSend)(self, originalForwardInvocationSEL, invocation); &#125;else &#123; [self doesNotRecognizeSelector:invocation.selector]; &#125; &#125; // ç§»é™¤ aspectsToRemove é˜Ÿåˆ—ä¸­çš„ AspectIdentifierï¼Œæ‰§è¡Œ remove [aspectsToRemove makeObjectsPerformSelector:@selector(remove)];&#125;#undef aspect_invoke aspect_invoke å®å®šä¹‰çš„ä½œç”¨åŸŸ ä»£ç å®ç°å¯¹åº”äº† Hook çš„ AspectOptions å‚æ•°çš„ Beforeï¼ŒInstead å’Œ Afterã€‚ aspect_invoke ä¸­ aspectsToRemove æ˜¯ä¸€ä¸ª NSArrayï¼Œé‡Œé¢å®¹çº³ç€éœ€è¦è¢«é”€æˆ·çš„ Hookï¼Œå³ AspectIdentifierï¼ˆä¹‹åä¼šè°ƒç”¨ remove ç§»é™¤ï¼‰ã€‚ éå† invocation.target åŠå…¶ superClass æ‰¾åˆ°å®ä¾‹å¯ä»¥å“åº” aliasSelector çš„ç‚¹ invoke å®ç°ä»£ç ã€‚ Block Hook Aspects è®©æˆ‘ä»¬åœ¨æŒ‡å®š Class æˆ– Instance çš„ç‰¹å®š Selector æ‰§è¡Œæ—¶ï¼Œæ ¹æ® AspectOptions æ’å…¥æˆ‘ä»¬è‡ªå·±çš„ Block åš Hookï¼Œè€Œè¿™ä¸ª Block å†…éƒ¨æœ‰æˆ‘ä»¬æƒ³è¦çš„æœ‰å…³äºå½“å‰ Target å’Œ Selector çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Aspects æ˜¯æ€ä¹ˆåŠåˆ°çš„ï¼š 1234567891011121314151617181920212223242526272829303132333435363738- (BOOL)invokeWithInfo:(id)info &#123; NSInvocation *blockInvocation = [NSInvocation invocationWithMethodSignature:self.blockSignature]; NSInvocation *originalInvocation = info.originalInvocation; NSUInteger numberOfArguments = self.blockSignature.numberOfArguments; // åæ‰§ã€‚æˆ‘ä»¬å·²ç»åœ¨ hook æ³¨å†Œçš„æ—¶å€™æ£€æŸ¥è¿‡äº†ï¼Œï¼ˆä¸è¿‡è¿™é‡Œæˆ‘ä»¬è¿˜è¦æ£€æŸ¥ï¼‰ã€‚ if (numberOfArguments &gt; originalInvocation.methodSignature.numberOfArguments) &#123; AspectLogError(@\"Block has too many arguments. Not calling %@\", info); return NO; &#125; // block çš„ `self` å°†ä¼šæ˜¯ AspectInfoã€‚å¯é€‰çš„ã€‚ if (numberOfArguments &gt; 1) &#123; [blockInvocation setArgument:&amp;info atIndex:1]; &#125; // ç®€å†å‚æ•°åˆ†é…å†…å­˜ argBuf ç„¶åä» originalInvocation å– argument èµ‹å€¼ç»™ blockInvocationvoid *argBuf = NULL; for (NSUInteger idx = 2; idx &lt; numberOfArguments; idx++) &#123; const char *type = [originalInvocation.methodSignature getArgumentTypeAtIndex:idx];NSUInteger argSize;NSGetSizeAndAlignment(type, &amp;argSize, NULL); // reallocf ä¼˜ç‚¹ï¼Œå¦‚æœåˆ›å»ºå†…å­˜å¤±è´¥ä¼šè‡ªåŠ¨é‡Šæ”¾ä¹‹å‰çš„å†…å­˜ï¼Œè®²ç©¶if (!(argBuf = reallocf(argBuf, argSize))) &#123; AspectLogError(@\"Failed to allocate memory for block invocation.\");return NO;&#125; [originalInvocation getArgument:argBuf atIndex:idx];[blockInvocation setArgument:argBuf atIndex:idx]; &#125; // æ‰§è¡Œ [blockInvocation invokeWithTarget:self.block]; // é‡Šæ”¾ argBuf if (argBuf != NULL) &#123; free(argBuf); &#125; return YES;&#125; è€ƒè™‘ä¸¤ä¸ªé—®é¢˜ï¼š [blockInvocation setArgument:&amp;info atIndex:1]; ä¸ºä»€ä¹ˆè¦åœ¨ç´¢å¼• 1 å¤„æ’å…¥å‘¢ï¼Ÿ for (NSUInteger idx = 2; idx &lt; numberOfArguments; idx++) ä¸ºä»€ä¹ˆè¦ä»ç´¢å¼• 2 å¼€å§‹éå†å‚æ•°å‘¢ï¼Ÿ ä¼˜ç§€ AOP åº“åº”è¯¥å…·å¤‡çš„ç‰¹è´¨ è‰¯å¥½çš„ä½¿ç”¨ä½“éªŒ å¯æ§ç²’åº¦å° ä½¿ç”¨ Block åš Hook æ”¯æŒæ’¤é”€ Hook å®‰å…¨æ€§ è‰¯å¥½çš„ä½¿ç”¨ä½“éªŒAspects ä½¿ç”¨ NSObject + Categroy çš„æ–¹å¼æä¾›æ¥å£ï¼Œéå¸¸å·§å¦™çš„æ¶µç›–äº† Instance å’Œ Classã€‚ Aspects æä¾›çš„æ¥å£ä¿æŒé«˜åº¦ä¸€è‡´ï¼ˆæœ¬ç€æ˜“ç”¨ï¼Œç®€å•ï¼Œæ–¹ä¾¿çš„åŸåˆ™è®¾è®¡æ¥å£å’Œæ•´ä¸ªæ¡†æ¶çš„å®ç°ä¼šè®©ä½ çš„å¼€æºé¡¹ç›®æ›´å®¹æ˜“è¢«äººä»¬æ¥çº³å’Œä½¿ç”¨ï¼‰ï¼š 12345678+ (id)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error;- (id)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error; å¯æ§ç²’åº¦å°Aspects ä¸ä»…æ”¯æŒå¤§éƒ¨åˆ† AOP æ¡†æ¶åº”è¯¥åšåˆ°çš„å¯¹äº Class çš„ Hookï¼Œè¿˜æ”¯æŒç²’åº¦æ›´å°çš„ Instance Hookï¼Œè€Œå…¶åœ¨å†…éƒ¨å®ç°ä¸­ä¸ºäº†æ”¯æŒ Instance Hook æ‰€åšçš„ä»£ç ä¹Ÿéå¸¸å€¼å¾—æˆ‘ä»¬å‚è€ƒå’Œå­¦ä¹ ï¼ˆå·²åœ¨ä¸Šæ–‡ Aspects æ ¸å¿ƒä»£ç å‰–æå¤„å•ç‹¬åˆ†æï¼‰ã€‚ ä¸ºä½¿ç”¨è€…æä¾›æ›´ä¸ºè‡ªç”±çš„ Hook æ–¹å¼ä»¥è¾¾åˆ°æ›´åŠ ç²¾å‡†çš„æ§åˆ¶æ˜¯æ¯ä¸ªä½¿ç”¨è€…ä¹äºè§åˆ°çš„äº‹ã€‚ ä½¿ç”¨ Block åš HookAspects ä½¿ç”¨ Block æ¥åš Hook åº”è¯¥è€ƒè™‘åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œæ”¯æŒä½¿ç”¨è€…é€šè¿‡åœ¨ Block ä¸­è·å–åˆ°ç›¸å…³çš„ä¿¡æ¯ï¼Œä¹¦å†™è‡ªå·±é¢å¤–çš„æ“ä½œå°±å¯ä»¥å®ç° Hook éœ€æ±‚ã€‚ æ”¯æŒæ’¤é”€ HookAspects è¿˜æ”¯æŒæ’¤é”€ä¹‹å‰åšçš„ Hook ä»¥åŠå·²æ··å†™çš„ Methodï¼Œä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ Aspects è®¾è®¡äº†å…¨å±€å®¹å™¨ï¼ŒæŠŠ Hook å’Œæ··å†™ç”¨å…¨å±€å®¹å™¨åšè®°å½•ï¼Œè®©ä¸€åˆ‡éƒ½å¯ä»¥å¤åŸï¼Œè¿™ä¸æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„å—ï¼Ÿ å®‰å…¨æ€§åœ¨å­¦ä¹  Runtime çš„æ—¶å€™ï¼Œå°±åº”è¯¥çœ‹åˆ°è¿‡ä¸å°‘æ–‡ç« è®²è§£ Method Swizzling è¦æ³¨æ„çš„å®‰å…¨æ€§é—®é¢˜ï¼Œç”±äºç”¨åˆ°äº†å¤§é‡ Runtime æ–¹æ³•ï¼ŒåŠ ä¸Š AOP æ˜¯é¢å‘æ•´ä¸ªåˆ‡é¢çš„ï¼Œæ‰€ä»¥ä¸€å•å‘ç°é—®é¢˜å°±ä¼šæ¯”è¾ƒä¸¥é‡ï¼Œè®¾è®¡çš„é¢ä¼šæ¯”è¾ƒå¹¿ï¼Œè€Œä¸”éš¾ä»¥è°ƒè¯•ã€‚ ä¸èƒ½å› ä¸ºå®¹æ˜“é€ æˆé—®é¢˜å°±å¯ä»¥å›é¿ Method Swizzlingï¼Œå°±å¥½æ¯”å¤§å­¦è€å¸ˆè®²åˆ°é€’å½’æ—¶å¼ºè°ƒå®¹æ˜“å¼•èµ·å¾ªç¯è°ƒç”¨ï¼Œå¾ˆå¤šäººå°±åœ¨å†…å¿ƒå›é¿ä½¿ç”¨é€’å½’ï¼Œç”šè‡³äºéå¸¸é€‚åˆä½¿ç”¨é€’å½’æ¥å†™çš„ç®—æ³•é¢˜ï¼ˆè¿™é‡ŒæŒ‡é€’å½’æ¥å†™ä¼šæ˜“è¯»å†™ã€æ˜“ç»´æŠ¤ï¼‰åªä¼šç”¨å¤æ‚çš„æ–¹å¼æ¥æ€è€ƒã€‚ æ€»ç»“ æ–‡ç« ç®€å•ä»‹ç»äº† AOP çš„æ¦‚å¿µï¼Œå¸Œæœ›èƒ½ç»™å„ä½è¯»è€…å¯¹ AOP æ€æƒ³çš„ç†è§£æä¾›å¾®è–„çš„å¸®åŠ©ã€‚ æ–‡ç« ç³»ç»Ÿçš„å‰–æäº† Aspects å¼€æºåº“çš„å†…éƒ¨ç»“æ„ï¼Œå¸Œæœ›èƒ½è®©å¤§å®¶åœ¨æµè§ˆ Aspects æºç æ—¶å¿«é€Ÿå®šä½ä»£ç ä½ç½®ï¼Œæ‰¾åˆ°æ ¸å¿ƒå†…å®¹ã€‚ æ–‡ç« é‡ç‚¹åˆ†æäº† Aspects çš„æ ¸å¿ƒä»£ç ï¼Œæç‚¼äº†ä¸€äº›ç¬”è€…è®¤ä¸ºå€¼å¾—æ³¨æ„çš„ç‚¹ï¼Œä½†æ„¿å¯ä»¥åœ¨å¤§å®¶æ‰’æºç æ—¶æä¾›ä¸€äº›æŒ‡å¼•ã€‚ æ–‡ç« ç»“å°¾æ€»ç»“äº† Aspects ä½œä¸ºä¸€ä¸ªæ¯”è¾ƒä¼˜ç§€çš„ AOP å¼€æºåº“æ‰€å…·æœ‰çš„ç‰¹è´¨ï¼Œä¸è¿‡æ¯•ç«Ÿæ˜¯å¾ˆä¹…ä¹‹å‰çš„ä»£ç äº†ï¼Œå¦‚æœæœ‰å“ªä½æƒ³è¦é€ ä¸€ä¸ªå…³äº AOP çš„è½®å­ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿäº§ç”Ÿäº›è®¸å¸®åŠ©ã€‚ ğŸ˜¬ è”ç³» å¾®ä¿¡ : WhatsXie é‚®ä»¶ : ReverseScale@iCloud.com åšå®¢ : https://reversescale.github.io","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"iOS RAC çš„ä½¿ç”¨æ€»ç»“","slug":"Reactive Cocoa","date":"2018-03-16T14:56:27.000Z","updated":"2018-11-15T14:12:52.976Z","comments":true,"path":"2018/03/16/Reactive Cocoa/","link":"","permalink":"https://reversescale.github.io/2018/03/16/Reactive Cocoa/","excerpt":"Reactive Cocoa(ç®€ç§°RAC),æ˜¯ GitHub ä¸Šå¼€æºçš„ä¸€ä¸ªåº”ç”¨äº iOS å’Œ OS X å¼€å‘çš„ä¸€ä¸ªæ–°æ¡†æ¶ï¼ŒRACå…·æœ‰å‡½æ•°å¼ç¼–ç¨‹å’Œå“åº”è€…ç¼–ç¨‹çš„ç‰¹æ€§~","text":"Reactive Cocoa(ç®€ç§°RAC),æ˜¯ GitHub ä¸Šå¼€æºçš„ä¸€ä¸ªåº”ç”¨äº iOS å’Œ OS X å¼€å‘çš„ä¸€ä¸ªæ–°æ¡†æ¶ï¼ŒRACå…·æœ‰å‡½æ•°å¼ç¼–ç¨‹å’Œå“åº”è€…ç¼–ç¨‹çš„ç‰¹æ€§~ ReactiveCocoaè§£å†³çš„é—®é¢˜: 1.ä¼ ç»ŸiOSå¼€å‘è¿‡ç¨‹ä¸­,çŠ¶æ€ä»¥åŠçŠ¶æ€ä¹‹é—´ä¾èµ–è¿‡å¤šçš„é—®é¢˜ 2.ä¼ ç»ŸMVCæ¶æ„çš„é—®é¢˜:Controlleræ¯”è¾ƒå¤æ‚,å¯æµ‹è¯•æ€§å·® 3.æä¾›ç»Ÿä¸€çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ é”®å€¼è§‚å¯Ÿâ€“ç›‘å¬ TF çš„å€¼å‘ç”Ÿå˜åŒ–123456789101112- (void)demo1&#123; @weakify(self); [self.tF.rac_textSignal subscribeNext:^(NSString *value) &#123; @strongify(self); self.value = value; &#125;]; //å½“self.valueçš„å€¼å˜åŒ–æ—¶è°ƒç”¨Blockï¼Œè¿™æ˜¯ç”¨KVOçš„æœºåˆ¶ï¼ŒRACå°è£…äº†KVO [RACObserve(self, value) subscribeNext:^(NSString *value) &#123; NSLog(@&quot;%@&quot;,value); &#125;];&#125; map çš„ä½¿ç”¨1234567891011121314151617- (void)demo2&#123; //åˆ›å»ºä¸€ä¸ªä¿¡å· RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; //è¿™ä¸ªä¿¡å·é‡Œé¢æœ‰ä¸€ä¸ªNextäº‹ä»¶çš„ç»ç’ƒçƒå’Œä¸€ä¸ªcompleteäº‹ä»¶çš„ç»ç’ƒçƒ [subscriber sendNext:@&quot;å”±æ­Œ&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //å¯¹ä¿¡å·è¿›è¡Œæ”¹è¿›,å½“ä¿¡å·é‡Œé¢æµçš„æ˜¯å”±æ­Œ.å°±æ”¹è¿›ä¸º&apos;è·³èˆ&apos;è¿”è¿˜ç»™self.value RAC(self, tF.text) = [signalA map:^id(NSString *value) &#123; if ([value isEqualToString:@&quot;å”±æ­Œ&quot;]) &#123; return @&quot;è·³èˆ&quot;; &#125; return @&quot;&quot;; &#125;]; &#125; filter ä½¿ç”¨,ä½ å‘è¥¿ï¼Œä»–å°±å‘ä¸œï¼Œä»–å‘å·¦ï¼Œä½ å°±å‘å³1234567891011121314151617181920212223242526272829303132333435363738394041424344- (void)demo3&#123; //åˆ›å»ºä¸¤ä¸ªé€šé“,ä¸€ä¸ªä»Aæµå‡ºçš„é€šé“A,å’Œä¸€ä¸ªä»Bæµå‡ºçš„é€šé“B RACChannelTerminal *channelA = RACChannelTo(self, value); RACChannelTerminal *channelB = RACChannelTo(self, value2); //æ”¹é€ é€šé“A,ä½¿é€šè¿‡é€šé“Açš„å€¼,å¦‚æœç­‰äº&apos;è¥¿&apos;,å°±æ”¹ä¸º&apos;ä¸œ&apos; [[channelA map:^id(NSString *value) &#123; if ([value isEqualToString:@&quot;è¥¿&quot;]) &#123; NSLog(@&quot;ä¸œ&quot;); return @&quot;ä¸œ&quot;; &#125; NSLog(@&quot;====== %@&quot;,value); return value; &#125;] subscribe:channelB];//é€šé“Aæµå‘B //æ”¹é€ é€šé“B,ä½¿é€šè¿‡é€šé“Bçš„å€¼,å¦‚æœç­‰äº&apos;å·¦&apos;,å°±æ”¹ä¸º&apos;å³&apos;ä¼ å‡ºå» [[channelB map:^id(id value) &#123; if ([value isEqualToString:@&quot;å·¦&quot;]) &#123; NSLog(@&quot;å³&quot;); return @&quot;å³&quot;; &#125; NSLog(@&quot;====== %@&quot;,value); return value; &#125;] subscribe:channelA];//é€šé“Bæµå‘é€šé“A //KVOç›‘å¬valueAçš„å€¼çš„å˜åŒ–,è¿‡æ»¤valueAçš„å€¼,è¿”å›Yesè¡¨ç¤ºé€šè¿‡ //åªæœ‰valueæœ‰å€¼,æ‰å¯é€šè¿‡ [[RACObserve(self, value) filter:^BOOL(id value) &#123; return value ? YES : NO; &#125;] subscribeNext:^(id x) &#123; NSLog(@&quot;ä½ å‘%@&quot;,x); &#125;]; //KVOç›‘å¬value2çš„å˜åŒ– [[RACObserve(self, value2) filter:^BOOL(id value) &#123; return value ? YES: NO; &#125;] subscribeNext:^(id x) &#123; NSLog(@&quot;ä»–å‘%@&quot;,x); &#125;]; //ä¸‹é¢ä½¿valueçš„å€¼å’Œvalue2çš„å€¼å‘ç”Ÿæ”¹å˜ self.value = @&quot;è¥¿&quot;; self.value2 = @&quot;å·¦&quot;; &#125; ä»£ç†1)ä»£ç†çš„ç¬¬ä¸€ç§å†™æ³• .mæ–‡ä»¶123- (void)demo4&#123; [self.delegate makeAnApp:@&quot;12345ä¸Šå±±æ‰“è€è™&quot; String:@&quot;è€è™ä¸åœ¨å®¶,æ€ä¹ˆåŠ&quot;];&#125; .hæ–‡ä»¶12345- (void)makeAnApp:(NSString *)string String:(NSString *)string;@end@interface Base5Controller : UIViewController@property (nonatomic, assign)id&lt;ProgrammerDelegate&gt; delegate; ç¬¬ä¸€ä¸ªæ§åˆ¶å™¨çš„.h123456789101112131415161718192021222324Base5Controller *base = [[Base5Controller alloc] init]; // base.delegate = self; [self demo4]; // è¿™é‡Œæ˜¯ä¸ªå‘,å¿…é¡»å°†ä»£ç†æœ€åè®¾ç½®,å¦åˆ™ä¿¡å·æ˜¯æ— æ³•è®¢é˜…åˆ°çš„ // é›·çº¯å³°å¤§å¤§æ˜¯è¿™æ ·å­è§£é‡Šçš„:åœ¨è®¾ç½®ä»£ç†çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šç¼“å­˜è¿™ä¸ªä»£ç†å¯¹è±¡å®ç°äº†å“ªäº›ä»£ç æ–¹æ³• // å¦‚æœå°†ä»£ç†æ”¾åœ¨è®¢é˜…ä¿¡å·å‰è®¾ç½®,é‚£ä¹ˆå½“æ§åˆ¶å™¨æˆä¸ºä»£ç†æ—¶æ˜¯æ— æ³•ç¼“å­˜è¿™ä¸ªä»£ç†å¯¹è±¡å®ç°äº†å“ªäº›ä»£ç æ–¹æ³•çš„ base.delegate = self; [self.navigationController pushViewController:base animated:YES]; &#125; else &#123; [self.navigationController pushViewController:[cl new] animated:YES]; &#125;&#125;#pragma mark---demo4//ä½¿ç”¨RACä»£æ›¿ä»£ç†æ—¶,rac_signalForSelector: fromProtocol:è¿™ä¸ªä»£æ›¿ä»£ç†çš„æ–¹æ³•ä½¿ç”¨æ—¶,åˆ‡è®°è¦å°†selfè®¾ä¸ºä»£ç†è¿™å¥è¯æ”¾åœ¨è®¢é˜…ä»£ç†ä¿¡å·çš„åé¢å†™,å¦åˆ™ä¼šæ— æ³•æ‰§è¡Œ- (void)demo4&#123; //ä¸ºselfæ·»åŠ ä¸€ä¸ªä¿¡å·,è¡¨ç¤ºä»£ç†ProgrammerDelegateçš„makeAnApp; //RACTuple ç›¸å½“äºswiftä¸­çš„å…ƒç¥– [[self rac_signalForSelector:@selector(makeAnApp:String:) fromProtocol:@protocol(ProgrammerDelegate)] subscribeNext:^(RACTuple *x) &#123; //è¿™é‡Œå¯ä»¥ç«‹å³ä¸ºmakeAnAppçš„æ–¹æ³•è¦æ‰§è¡Œçš„ä»£ç  NSLog(@&quot;%@ &quot;,x.first); NSLog(@&quot;%@&quot;,x.second); &#125;];&#125; 2)æ–¹æ³•2 ä½¿ç”¨RACSubjectæ›¿ä»£ä»£ç†123456789101112131415161718192021/*** RACSubject:ä¿¡å·æä¾›è€…,è‡ªå·±å¯ä»¥å……å½“ä¿¡å·,åˆèƒ½å‘é€ä¿¡å·åˆ›å»ºæ–¹æ³•:1.åˆ›å»ºRACSubject2.è®¢é˜…ä¿¡å·3.å‘é€ä¿¡å·å·¥ä½œæµç¨‹:1.è®¢é˜…ä¿¡å·,å†…éƒ¨ä¿å­˜äº†è®¢é˜…è€…,å’Œè®¢é˜…è€…ç›¸åº”block2.å½“å‘é€ä¿¡å·çš„,éå†è®¢é˜…è€…,è°ƒç”¨è®¢é˜…è€…çš„nextBolckæ³¨:å¦‚æœè®¢é˜…ä¿¡å·,å¿…é¡»åœ¨å‘é€ä¿¡å·ä¹‹å‰è®¢é˜…ä¿¡å·,ä¸ç„¶æ”¶ä¸åˆ°ä¿¡å·,æœ‰åˆ©ç”¨åŒºåˆ«RACReplaySubject*/-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; RacSubjectController *racsub = [[RacSubjectController alloc] init]; racsub.subject = [RACSubject subject]; [racsub.subject subscribeNext:^(id x) &#123; NSLog(@&quot;è¢«é€šçŸ¥äº†%@&quot;,x); &#125;]; [self.navigationController pushViewController:racsub animated:YES];&#125; åœ¨RacSubjectController.hé‡Œé¢å£°æ˜å±æ€§1@property (nonatomic, strong) RACSubject *subject; .mé‡Œé¢è¿›è¡Œæ•°æ®çš„ä¼ é€’12345-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; if (self.subject) &#123; [self.subject sendNext:@1]; &#125;&#125; å¹¿æ’­12345678910111213141516//å‘é€é€šçŸ¥- (void)demo5&#123; NSNotificationCenter *center = [NSNotificationCenter defaultCenter]; //å‘é€å¹¿æ’­é€šçŸ¥ [center postNotificationName:@&quot;å¦‡å¥³ä¹‹å‹&quot; object:nil userInfo:@&#123;@&quot;æŠ€å·§&quot;:@&quot;ç”¨å¿ƒå¬&quot;&#125;];&#125;//æ¥æ”¶é€šçŸ¥NSNotificationCenter *center = [NSNotificationCenter defaultCenter];//RACçš„é€šçŸ¥ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç§»é™¤//æ³¨å†Œå¹¿æ’­é€šçŸ¥RACSignal *siganl = [center rac_addObserverForName:@&quot;å¦‡å¥³ä¹‹å‹&quot; object:nil];//è®¾ç½®æ¥æ”¶é€šçŸ¥çš„å›è°ƒå¤„ç†[siganl subscribeNext:^(NSNotification *x) &#123; NSLog(@&quot;æŠ€å·§: %@&quot;,x.userInfo[@&quot;æŠ€å·§&quot;]);&#125;]; ä¸¤ä¸ªä¿¡å·ä¸²è”,ä¸¤ä¸ªç®¡ä¸²è”,ä¸€ä¸ªç®¡å¤„ç†å®Œè‡ªå·±çš„ä¸œè¥¿,ä¸‹ä¸€ä¸ªç®¡æ‰å¼€å§‹å¤„ç†è‡ªå·±çš„ä¸œè¥¿12345678910111213141516171819202122- (void)demo6&#123; //åˆ›å»ºä¸€ä¸ªä¿¡å·ç®¡A RACSignal *siganlA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;åƒé¥­&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆ›å»ºä¸€ä¸ªä¿¡å·ç®¡B RACSignal *siganlB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;åƒçš„é¥±é¥±çš„,æ‰å¯ä»¥ç¡è§‰çš„&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //ä¸²è”ç®¡Aå’Œç®¡B RACSignal *concatSiganl = [siganlA concat:siganlB]; //ä¸²è”åçš„æ¥æ”¶ç«¯å¤„ç† ,ä¸¤ä¸ªäº‹ä»¶,èµ°ä¸¤æ¬¡,ç¬¬ä¸€ä¸ªæ‰“å°siggnalAçš„ç»“æœ,ç¬¬äºŒæ¬¡æ‰“å°siganlBçš„ç»“æœ [concatSiganl subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; å¹¶è”,åªè¦æœ‰ä¸€ä¸ªç®¡æœ‰ä¸œè¥¿,å°±å¯ä»¥æ‰“å°123456789101112131415161718192021- (void)demo7&#123; //åˆ›å»ºä¿¡å·A RACSignal *siganlA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;çº¸å‚æ±¡æ°´&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆ›å»ºä¿¡å·B RACSignal *siganlB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;ç”µé•€å‚æ±¡æ°´&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //å¹¶è”ä¸¤ä¸ªä¿¡å·,æ ¹ä¸Šé¢ä¸€æ ·,åˆ†ä¸¤æ¬¡æ‰“å° RACSignal *mergeSiganl = [RACSignal merge:@[siganlA,siganlB]]; [mergeSiganl subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; ç»„åˆ,åªæœ‰ä¸¤ä¸ªä¿¡å·éƒ½æœ‰å€¼,æ‰å¯ä»¥ç»„åˆ1234567891011121314151617181920- (void)demo8&#123; //å®šä¹‰2ä¸ªè‡ªå®šä¹‰ä¿¡å· RACSubject *letters = [RACSubject subject]; RACSubject *numbers = [RACSubject subject]; //ç»„åˆä¿¡å· [[RACSignal combineLatest:@[letters,numbers] reduce:^(NSString *letter, NSString *number)&#123; return [letter stringByAppendingString:number]; &#125;] subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;]; //è‡ªå·±æ§åˆ¶å‘ç”Ÿä¿¡å·å€¼ [letters sendNext:@&quot;A&quot;]; [letters sendNext:@&quot;B&quot;]; [numbers sendNext:@&quot;1&quot;]; //æ‰“å°B1 [letters sendNext:@&quot;C&quot;];//æ‰“å°C1 [numbers sendNext:@&quot;2&quot;];//æ‰“å°C2&#125; åˆæµå‹ç¼©12345678910111213141516171819202122- (void)demo9&#123; //åˆ›å»ºä¿¡å·A RACSignal *siganlA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;çº¢&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆ›å»ºä¿¡å·B RACSignal *siganlB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;ç™½&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆæµåå¤„ç†çš„æ˜¯å‹ç¼©åŒ…,éœ€è¦è§£å‹åæ‰èƒ½å–åˆ°é‡Œé¢çš„å€¼ [[siganlA zipWith:siganlB] subscribeNext:^(id x) &#123; //è§£å‹ç¼© RACTupleUnpack(NSString *stringA, NSString *stringB) = x; NSLog(@&quot;%@ %@&quot;,stringA, stringB); &#125;];&#125; æ˜ å°„,æˆ‘å¯ä»¥ç‚¹çŸ³æˆé‡‘12345678910111213141516171819- (void)demo10&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:nil]; [subscriber sendCompleted]; return nil; &#125;]; //å¯¹ä¿¡å·è¿›è¡Œæ”¹é€ ,æ”¹&quot;çŸ³&quot;æˆ&quot;é‡‘&quot; siganl = [siganl map:^id(NSString *value) &#123; if ([value isEqualToString:@&quot;çŸ³&quot;]) &#123; return @&quot;é‡‘&quot;; &#125; return value; &#125;]; //æ‰“å°,ä¸è®ºä¿¡å·å‘é€çš„æ˜¯ä»€ä¹ˆ,è¿™ä¸€æ­¥éƒ½ä¼šèµ°çš„ [siganl subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; è¿‡æ»¤,æœªæ»¡18å²,ç¦æ­¢å…¥å†…12345678910111213141516171819- (void)demo11&#123; RACSignal *singal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@(15)]; [subscriber sendNext:@(17)]; [subscriber sendNext:@(21)]; [subscriber sendNext:@(14)]; [subscriber sendNext:@(30)]; [subscriber sendCompleted]; return nil; &#125;]; //è¿‡æ»¤ä¿¡å·,æ‰“å° [[singal filter:^BOOL(NSNumber *value) &#123; //å¤§äº18å²çš„,æ‰å¯ä»¥é€šè¿‡ return value.integerValue &gt;= 18;//returnä¸ºyeså¯ä»¥é€šè¿‡ &#125;] subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; ç§©åº(flattenMap æ–¹æ³•ä¹Ÿå¯ä»¥æ¢æˆ then æ–¹æ³•,æ•ˆæœä¸€æ ·)123456789101112131415161718192021222324252627282930313233-(void)demo12&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@&quot;æ‰“è›‹æ¶²&quot;); [subscriber sendNext:@&quot;è›‹æ¶²&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //å¯¹ä¿¡å·è¿›è¡Œç§©åºç§©åºçš„ç¬¬ä¸€æ­¥ siganl = [siganl flattenMap:^RACStream *(NSString *value) &#123; //å¤„ç†ä¸Šä¸€æ­¥çš„RACSiganlçš„ä¿¡å·value.è¿™é‡Œçš„value=@&quot;è›‹æ¶²&quot; NSLog(@&quot;æŠŠ%@å€’è¿›é”…é‡Œé¢ç…&quot;,value); return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;ç…è›‹&quot;]; [subscriber sendCompleted]; return nil; &#125;]; &#125;]; //å¯¹ä¿¡å·è¿›è¡Œç¬¬äºŒæ­¥å¤„ç† siganl = [siganl flattenMap:^RACStream *(id value) &#123; NSLog(@&quot;æŠŠ%@è£…è½½ç›˜é‡Œ&quot;,value); return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;ä¸Šèœ&quot;]; [subscriber sendCompleted]; return nil; &#125;]; &#125;]; //æœ€åæ‰“å° æœ€åå¸¦æœ‰===ä¸Šèœ [siganl subscribeNext:^(id x) &#123; NSLog(@&quot;====%@&quot;,x); &#125;];&#125; å‘½ä»¤12345678910111213-(void)demo13&#123; RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123; //æ‰“å°ï¼šä»Šå¤©æˆ‘æŠ•é™äº† //å‘½ä»¤æ‰§è¡Œä»£ç† NSLog(@&quot;%@æˆ‘æŠ•é™äº†&quot;,input); //è¿”å›ä¸€ä¸ªRACSignalä¿¡å· return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; return nil; &#125;]; &#125;]; //æ‰§è¡Œå‘½ä»¤ [command execute:@&quot;ä»Šå¤©&quot;];&#125; å»¶è¿Ÿ12345678910111213- (void)demo14&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@&quot;ç­‰ç­‰æˆ‘,æˆ‘è¿˜æœ‰10så°±åˆ°äº†&quot;); [subscriber sendNext:@&quot;åŒ—æ&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //å»¶è¿Ÿ10sæ¥å—nextçš„ç»ç’ƒçƒ [[siganl delay:10] subscribeNext:^(id x) &#123; NSLog(@&quot;æˆ‘åˆ°äº†%@&quot;,x); &#125;];&#125; é‡æ”¾123456789101112131415161718- (void)demo15&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@&quot;ç”µå½±&quot;); [subscriber sendNext:@&quot;ç”µå½±&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆ›å»ºè¯¥æ™®é€šä¿¡å·çš„é‡å¤ä¿¡å· RACSignal *replaySiganl = [siganl replay]; //é‡å¤æ¥å—ä¿¡å· [replaySiganl subscribeNext:^(NSString *x) &#123; NSLog(@&quot;å°ç±³%@&quot;,x); &#125;]; [replaySiganl subscribeNext:^(NSString *x) &#123; NSLog(@&quot;å°çº¢%@&quot;,x); &#125;];&#125; å®šæ—¶â€”æ¯éš” 8 å°æ—¶æœç”¨ä¸€æ¬¡è¯12345678- (void)demo16&#123; //åˆ›å»ºå®šæ—¶å™¨ä¿¡å·.å®šæ—¶8å°æ—¶ RACSignal *siganl = [RACSignal interval:60 * 60 * 8 onScheduler:[RACScheduler mainThreadScheduler]]; //å®šæ—¶å™¨æ‰§è¡Œä»£ç  [siganl subscribeNext:^(id x) &#123; NSLog(@&quot;åƒè¯&quot;); &#125;];&#125; è¶…æ—¶12345678910111213141516171819202122- (void)demo17&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@&quot;æˆ‘å¿«åˆ°äº†&quot;); RACSignal *sendSiganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:nil]; [subscriber sendCompleted]; return nil; &#125;]; //å‘ç”Ÿä¿¡å·è¦1ä¸ªå°æ—¶10åˆ†é’Ÿæ‰åˆ° [[sendSiganl delay:60 * 70] subscribeNext:^(id x) &#123; //è¿™é‡Œæ‰å‘é€nextç»ç’ƒçƒåˆ°siganl [subscriber sendNext:@&quot;æˆ‘åˆ°äº†&quot;]; [subscriber sendCompleted]; &#125;]; return nil; &#125;]; [[siganl timeout:60 * 60 onScheduler:[RACScheduler mainThreadScheduler]] subscribeNext:^(id x) &#123; NSLog(@&quot;ç­‰äº†ä½ ä¸€ä¸ªå°æ—¶,ä½ ä¸€ç›´æ²¡æ¥,æˆ‘èµ°äº†&quot;); &#125;];&#125; é‡è¯•12345678910111213141516171819202122- (void)demo18&#123; __block int failedCount = 0; //åˆ›å»ºä¿¡å· RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; if (failedCount &lt; 100) &#123; failedCount ++; NSLog(@&quot;æˆ‘å¤±è´¥äº†&quot;); [subscriber sendError:nil]; &#125;else&#123; NSLog(@&quot;ç»å†äº†æ•°ç™¾æ¬¡å,æˆ‘æˆåŠŸäº†&quot;); [subscriber sendNext:nil]; &#125; return nil; &#125;]; //é‡è¯• RACSignal *retrySiganl = [siganl retry]; //ç›´åˆ°å‘ç”Ÿnextçš„ç»ç’ƒçƒ [retrySiganl subscribeNext:^(id x) &#123; NSLog(@&quot;é‡è¦æˆåŠŸäº†&quot;); &#125;];&#125; èŠ‚æµ,ä¸å¥½æ„æ€,è¿™é‡Œæ¯ä¸€ç§’åªèƒ½é€šè¿‡ä¸€ä¸ªäºº,å¦‚æœ 1s å†…å‘ç”Ÿå¤šä¸ª,åªé€šè¿‡æœ€åä¸€ä¸ª1234567891011121314151617181920212223242526272829- (void)demo19&#123; RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; //å³ä½¿å‘é€ä¸€ä¸ªnextçš„ç»ç’ƒçƒ [subscriber sendNext:@&quot;A&quot;]; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; [subscriber sendNext:@&quot;B&quot;]; &#125;); dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; [subscriber sendNext:@&quot;C&quot;]; [subscriber sendNext:@&quot;D&quot;]; [subscriber sendNext:@&quot;E&quot;]; &#125;); dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; [subscriber sendNext:@&quot;F&quot;]; &#125;); return nil; &#125;]; //å¯¹ä¿¡å·è¿›è¡ŒèŠ‚æµ,é™åˆ¶æ—¶é—´å†…ä¸€æ¬¡åªèƒ½é€šè¿‡ä¸€ä¸ªç»ç’ƒçƒ [[signal throttle:1] subscribeNext:^(id x) &#123; NSLog(@&quot;%@é€šè¿‡äº†&quot;,x); &#125;]; /* [2015-08-16 22:08:45.677]æ—…å®¢A [2015-08-16 22:08:46.737]æ—…å®¢B [2015-08-16 22:08:47.822]æ—…å®¢E [2015-08-16 22:08:48.920]æ—…å®¢F */&#125; æ¡ä»¶(takeUntil æ–¹æ³•,å½“ç»™å®šçš„ signal å®Œæˆå‰ä¸€ç›´å–å€¼)1234567891011121314151617181920212223242526- (void)demo20&#123; RACSignal *takeSiganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; //åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ä¿¡å·,æ¯ä¸€ç§’è§¦å‘ä¸€æ¬¡ RACSignal *siganl = [RACSignal interval:1 onScheduler:[RACScheduler mainThreadScheduler]]; [siganl subscribeNext:^(id x) &#123; //åœ¨è¿™é‡Œå®šæ—¶å‘é€nextç»ç’ƒçƒ [subscriber sendNext:@&quot;ç›´åˆ°ä¸–ç•Œå°½å¤´&quot;]; &#125;]; return nil; &#125;]; //åˆ›å»ºæ¡ä»¶ä¿¡å· RACSignal *conditionSiganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; //è®¾ç½®5såå‘ç”Ÿcompleteç»ç’ƒçƒ dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; NSLog(@&quot;ä¸–ç•Œçš„ä»Šå¤©åˆ°äº†,è¯·ä¸‹è½¦&quot;); [subscriber sendCompleted]; &#125;); return nil; &#125;]; //è®¾ç½®æ¡ä»¶,takeSiganlä¿¡å·åœ¨conditionSignalä¿¡å·æ¥æ”¶å®Œæˆå‰,ä¸æ–­å–å€¼ [[takeSiganl takeUntil:conditionSiganl] subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; RACReplaySubject ä½¿ç”¨12345678910111213141516171819202122232425/*** RACReplaySubjectåˆ›å»ºæ–¹æ³• 1.åˆ›å»ºRACSubject 2.è®¢é˜…ä¿¡å· 3.å‘é€ä¿¡å· å·¥ä½œæµç¨‹: 1.è®¢é˜…ä¿¡å·,å†…éƒ¨ä¿å­˜äº†è®¢é˜…è€…,å’Œè®¢é˜…è€…ç›¸åº”çš„block 2.å½“å‘é€ä¿¡å·çš„,éå†è®¢é˜…è€…,è°ƒç”¨è®¢é˜…è€…çš„nextBlock 3.å‘é€çš„ä¿¡å·ä¼šä¿å­˜èµ·æ¥,å½“è®¢é˜…è€…è®¢é˜…ä¿¡å·çš„æ—¶å€™,ä¼šå°†ä¹‹å‰ä¿å­˜çš„ä¿¡å·,ä¸€ä¸ªä¸ªä½œç”¨äºæ–°çš„è®¢é˜…è€…,ä¿å­˜ä¿¡å·çš„å®¹é‡ç”±capacityå†³å®š,è¿™ä¹Ÿæ˜¯æœ‰åˆ«äºRACSubjectçš„*/-(void)RACReplaySubject&#123; RACReplaySubject *replaySubject = [RACReplaySubject subject]; [replaySubject subscribeNext:^(id x) &#123; NSLog(@&quot; 1 %@&quot;,x); &#125;]; [replaySubject subscribeNext:^(id x) &#123; NSLog(@&quot;2 %@&quot;,x); &#125;]; [replaySubject sendNext:@7]; [replaySubject subscribeNext:^(id x) &#123; NSLog(@&quot;3 %@&quot;,x); &#125;];&#125; rac_liftSelector:withSignals ä½¿ç”¨12345678910111213141516171819//è¿™é‡Œçš„rac_liftSelector:withSignals å°±æ˜¯å¹²è¿™ä»¶äº‹çš„ï¼Œå®ƒçš„æ„æ€æ˜¯å½“signalAå’ŒsignalBéƒ½è‡³å°‘sendNextè¿‡ä¸€æ¬¡ï¼Œæ¥ä¸‹æ¥åªè¦å…¶ä¸­ä»»æ„ä¸€ä¸ªsignalæœ‰äº†æ–°çš„å†…å®¹ï¼ŒdoA:withBè¿™ä¸ªæ–¹æ³•å°±ä¼šè‡ªåŠ¨è¢«è§¦å‘-(void)test&#123; RACSignal *sigalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; double delayInSeconds = 2.0; dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds *NSEC_PER_SEC)); dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(popTime * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; [subscriber sendNext:@&quot;A&quot;]; &#125;); return nil; &#125;]; RACSignal *signalB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;B&quot;]; [subscriber sendNext:@&quot;Another B&quot;]; [subscriber sendCompleted]; return nil; &#125;]; [self rac_liftSelector:@selector(doA:withB:) withSignals:sigalA,signalB, nil];&#125; æ¥æºï¼šç®€ä¹¦ä½œè€…æœªé­é›¨è¾° ã€ŠiOS RACçš„ä½¿ç”¨æ€»ç»“ã€‹","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"Swift 4.0 ä¸­å¯¹ Dictionary çš„æ”¹è¿›","slug":"Swift 4 Dictionary","date":"2018-03-13T13:56:27.000Z","updated":"2018-11-15T14:04:15.042Z","comments":true,"path":"2018/03/13/Swift 4 Dictionary/","link":"","permalink":"https://reversescale.github.io/2018/03/13/Swift 4 Dictionary/","excerpt":"Swift 4 å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰åˆ‡æ¢åˆ° 4.0 ç‰ˆæœ¬ã€‚ è¿™æ¬¡ 4.0 æ›´æ–°ç»™æˆ‘æœ€å¤§çš„æ„Ÿå—å°±æ˜¯æ²¡æœ‰äº†å‰å‡ æ¬¡å‡çº§çš„è·³è·ƒå¼å˜åŒ–ã€‚ ä¸ç”¨ä¸ºäº†æ›´æ–°è¯­è¨€ç‰ˆæœ¬ï¼Œå®Œå…¨æ¨ç¿»å·²æœ‰çš„é¡¹ç›®ï¼Œè¿™ä¹Ÿæ˜¯ Swift æ…¢æ…¢è¶‹å‘äºç¨³å®šçš„æ ‡å¿—~","text":"Swift 4 å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰åˆ‡æ¢åˆ° 4.0 ç‰ˆæœ¬ã€‚ è¿™æ¬¡ 4.0 æ›´æ–°ç»™æˆ‘æœ€å¤§çš„æ„Ÿå—å°±æ˜¯æ²¡æœ‰äº†å‰å‡ æ¬¡å‡çº§çš„è·³è·ƒå¼å˜åŒ–ã€‚ ä¸ç”¨ä¸ºäº†æ›´æ–°è¯­è¨€ç‰ˆæœ¬ï¼Œå®Œå…¨æ¨ç¿»å·²æœ‰çš„é¡¹ç›®ï¼Œè¿™ä¹Ÿæ˜¯ Swift æ…¢æ…¢è¶‹å‘äºç¨³å®šçš„æ ‡å¿—~ å’±ä»¬è¿™æ¬¡è¯´è¯´ Swift 4.0 å¯¹ Dictionary è¿™ä¸ªç»å¸¸ä¼šç”¨åˆ°çš„ç±»çš„æ”¹è¿›ã€‚ è‡ªåŠ¨æ ¹æ® key åˆ†ç»„Dictionary æ–°å¢äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¯ä»¥å°†ç»™å®šçš„ä¸€ä¸ªæ•°ç»„ï¼Œæ ¹æ®æŒ‡å®šçš„æ¡ä»¶è¿›è¡Œåˆ†ç»„ã€‚ æ¥çœ‹ä¸€ä¸ªä¾‹å­: 123456789struct Person &#123; var name: String var gender: Gender var age: Int enum Gender &#123; case male case female &#125;&#125; è¿™é‡Œæœ‰ä¸€ä¸ª Person ç»“æ„, ç„¶åæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ï¼š 12345let p1 = Person(name: \"aa\", gender: .female, age: 22)let p2 = Person(name: \"bb\", gender: .male, age: 24)let p3 = Person(name: \"cc\", gender: .male, age: 21)let persons = [p1, p2, p3] ç°åœ¨ç”¨æ–°çš„ Dictionary æ„é€ æ–¹æ³•ï¼Œå¯ä»¥ç«‹å³å°†è¿™ç»„ Person å®ä¾‹æ ¹æ®ä»–ä»¬çš„ gender å±æ€§è¿›è¡Œåˆ†ç»„ï¼š 123let groupedDict = Dictionary(grouping: persons) &#123; p in return p.gender&#125; è¿™ä¸ªæ„é€ æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•° grouping æ¥æ”¶çš„æ˜¯ persons æ•°ç»„ï¼Œ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œç”¨äºè¿”å›æ ¹æ®è¿›è¡Œåˆ†ç»„çš„ä¾æ®ï¼Œæˆ‘ä»¬è¿™é‡Œè¿”å›çš„æ˜¯ p.genderã€‚ç»“æœä¸€ç›®äº†ç„¶ï¼š 123456789[ .male: [ Person(name: \"bb\", gender: .male, age: 24), Person(name: \"cc\", gender: .male, age: 21) ], .female: [ Person(name: \"aa\", gender: .female, age: 22) ]] ä»¥å¾€è¦å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œå°±éœ€è¦æ‰‹åŠ¨éå†æ•´ä¸ªæ•°ç»„ï¼Œå–å‡º keyï¼Œ ç„¶åç”Ÿæˆå­—å…¸ï¼Œ ç°åœ¨æ–¹ä¾¿å¾ˆå¤šã€‚ value æ— ç¼è½¬æ¢å¦å¤–ä¸€ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„ç‰¹æ€§æ˜¯ï¼ŒDictionary æä¾›çš„ mapValues æ–¹æ³•ã€‚ è¿˜ä»¥æˆ‘ä»¬åˆšæ‰ç”Ÿæˆçš„ groupedDict ä¸ºä¾‹ï¼Œå¯ä»¥è¿›è¡Œè¿™æ ·çš„æ“ä½œï¼š 123let count = groupedDict.mapValues &#123; persons in persons.count&#125; å…ˆçœ‹ä¸€ä¸‹è¾“å‡ºï¼Œå¤§å®¶å¯èƒ½å°±çŒœåˆ°è¿™ä¸ªæ–¹æ³•çš„ç”¨é€”æ˜¯ä»€ä¹ˆäº†ï¼š 1234[ .male: 2, .female: 1] ä¸Šé¢çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œ mapValues ä¼šéå†æ¯ä¸€ä¸ª key å¯¹åº”çš„ valuesï¼Œ ç„¶åä¼ é€’ç»™é—­åŒ…è¿›è¡Œè‡ªå®šä¹‰è½¬æ¢ã€‚ æˆ‘ä»¬ä¾‹å­ä¸­çš„é—­åŒ…è¿”å›çš„å°±æ˜¯æ¯ä¸ª key å¯¹åº”çš„ Person é›†åˆçš„æ•°é‡ï¼Œæœ€ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„ Dictionaryï¼Œé‡Œé¢çš„ key å’Œä¹‹å‰ä¸€æ ·ï¼Œåªæ˜¯å¯¹åº”çš„å€¼å˜æˆäº†æˆ‘ä»¬é—­åŒ…ä¸­è‡ªå®šä¹‰çš„äº†ã€‚ mapValues æ–¹æ³•åŒæ ·æ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬è§£å†³ç¹æ‚æ“ä½œçš„å·¥å…·æ–¹æ³•ã€‚ ä»é”®å€¼å¯¹å…ƒç»„ä¸­ç›´æ¥æ„å»ºå‡å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªæ•°ç»„: 1let personsTuples = [(\"group 1\", [p1, p2]), (\"group 2\", [p3])] ç„¶åå¯ä»¥è°ƒç”¨ uniqueKeysWithValues æ„é€ æ–¹æ³•ç›´æ¥åˆå§‹åŒ–å­—å…¸ï¼š 1let dict = Dictionary(uniqueKeysWithValues: personsTuples) personsTuples æ•°ç»„ä¸­ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå…ƒç»„(Tuple)ï¼Œ è¿™ä¸ªæ„é€ æ–¹æ³•æŠŠå…ƒç»„ä¸­çš„ç¬¬ä¸€é¡¹å½“åš keyï¼Œ ç¬¬äºŒé¡¹å½“åš valueï¼Œ ç”Ÿæˆä¸€ä¸ªæ–°çš„ Dictionaryï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789[ \"group 1\": [ Person(name: \"aa\", gender: .female, age: 22), Person(name: \"bb\", gender: .male, age: 24) ], \"group 2\": [ Person(name: \"cc\", gender: .male, age: 21) ]] ä½¿ç”¨ uniqueKeysWithValues æ„é€ æ–¹æ³•æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå°±æ˜¯ä¼ å…¥çš„æ•°ç»„ä¸­ï¼Œä¸èƒ½æœ‰é‡å¤çš„ keyï¼Œ å¦åˆ™ä¼šæŠ¥è¿è¡Œæ—¶é”™è¯¯ï¼Œæ¯”å¦‚è¿™ä¸ªæ•°ç»„å°±ä¼šæŠ¥é”™ï¼š 1let personsTuples = [(\"group 1\", [p1, p2]), (\"group 2\", [p3]), (\"group 2\", [p4])] ä¸Šé¢æ•°ç»„ä¸­ group 2 å‡ºç°äº†ä¸¤æ¬¡ã€‚ å¦‚æœç”¨å®ƒæ¥åˆå§‹åŒ–çš„è¯ï¼Œå°±ä¼šå‡ºé”™ã€‚ æ‰€ä»¥ Swift 4.0 è¿˜æä¾›äº†å¦å¤–ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œ å¯¹äºä¸Šé¢è¿™ä¸ªæ•°ç»„ï¼Œå¯ä»¥è°ƒç”¨ï¼š 123let dict = Dictionary(personsTuples) &#123; old, new in return new&#125; ç¬¬äºŒä¸ªé—­åŒ…å‚æ•°ï¼Œä¼šåœ¨é‡åˆ°é‡å¤çš„ key æ—¶å€™è°ƒç”¨ã€‚ å®ƒæä¾›ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯åŒæ ·è¿™ä¸ª key çš„ä¸Šä¸€ä¸ªå€¼ oldï¼Œ è¿˜æœ‰å½“å‰çš„å€¼ newã€‚ æˆ‘ä»¬è¿™é‡Œç›´æ¥è¿”å› newï¼Œæ„æ€å°±æ˜¯ æ¯æ¬¡é‡åˆ°é‡å¤çš„ keyï¼Œ å°±ç”¨æ–°çš„å€¼ä»£æ›¿è€çš„å€¼ã€‚ è¿™æ ·åˆå§‹åŒ–åï¼Œç”Ÿæˆçš„ Dictionary ç»“æ„å¦‚ä¸‹ï¼š 123456789[ \"group 1\": [ p1, p2 ], \"group 2\": [ p4 ]] group 2 ä¸­çš„å€¼ï¼Œ æ˜¯ç¬¬äºŒæ¬¡ key æ‰€å¯¹åº”çš„ p4ã€‚ æä¾›é»˜è®¤å€¼å¦‚æœæˆ‘ä»¬è®¿é—®äº†ä¸€ä¸ªå­—å…¸ä¸­ä¸å­˜åœ¨çš„ keyï¼Œ ä¼šè¿”å› nilï¼š 1dict[\"group 3\"] å› ä¸ºä¸Šé¢å­—å…¸ä¸­ï¼Œä¸å­˜åœ¨ group 3 è¿™ä¸ª keyï¼Œ æ‰€ä»¥å®ƒè¿”å›äº† nilã€‚ Swift 4 ä¸­æ–°å¢äº†æŒ‡å®šé»˜è®¤å€¼çš„èƒ½åŠ›ï¼š 1dict[\"group 3\", default: []] è¿™æ ·è°ƒç”¨ï¼Œå¦‚æœ group 3 è¿™ä¸ª key ä¸å­˜åœ¨çš„è¯ï¼Œ å°±ä¼šè¿”å›æˆ‘ä»¬æŒ‡å®šçš„é»˜è®¤å€¼ç©ºæ•°ç»„ï¼Œ è€Œä¸æ˜¯ nil äº†ã€‚ è¿™ä¸ªç‰¹æ€§åœ¨æˆ‘ä»¬å¤„ç† JSON æ•°æ®è§£æè¿™ç±»çš„é—®é¢˜ä¸Šå¾ˆå®ç”¨ã€‚ è¿‡æ»¤å™¨è¿‡æ»¤å™¨å¯¹äºé›†åˆç±»æ¥è¯´æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„åŠŸèƒ½ã€‚ Swift 4 ä¸­å¯¹ Dictionary ç±»å‹ä¹Ÿæä¾›äº†è¿‡æ»¤å™¨çš„æ”¯æŒï¼š 123let filteredDict = dict.filter &#123; key, val in return val.count &gt;= 2&#125; filter æ–¹æ³•æ¥æ”¶ä¸€ä¸ªé—­åŒ…ï¼Œå®ƒä¼šéå† Dictionary ä¸­æ‰€æœ‰çš„å…ƒç´ ï¼Œå¹¶ä¸”ä½œä¸ºé—­åŒ…çš„å‚æ•°ä¼ å…¥ã€‚ æˆ‘ä»¬éœ€è¦é€šè¿‡é—­åŒ…çš„è¿”å›å€¼ç¡®å®šè¿™ä¸ªå…ƒç´ æ˜¯å¦è¢«ä¿ç•™ã€‚ ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ¯”å¦‚æˆ‘ä»¬ dict ä¸­çš„å…ƒç´ æ˜¯ ï¼š 123456789[ \"group 1\": [ p1, p2 ], \"group 2\": [ p4 ]] è°ƒç”¨ filter åï¼Œæˆ‘ä»¬åªä¿ç•™æ•°é‡å¤§äº 2 çš„é›†åˆï¼š 123456[ \"group 1\": [ p1, p2 ]] æ€»ç»“ä»¥ä¸Šå°±æ˜¯ Swift 4.0 å¯¹äº Dictionary çš„ä¸»è¦æ”¹è¿›ã€‚ è¿™äº›æ–°å¢çš„å·¥å…·æ–¹æ³•å¯¹äºæé«˜æˆ‘ä»¬å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡éƒ½æœ‰å¸®åŠ©ï¼Œå¸Œæœ›è¿™é‡Œçš„ä»‹ç»å¯¹ä½ æœ‰å¸®åŠ©ã€‚ å…³äº Dictionary æ›´å®Œæ•´çš„ä¿¡æ¯ï¼Œå¤§å®¶è¿˜å¯ä»¥å‚è€ƒè‹¹æœå®˜æ–¹çš„æ–‡æ¡£ï¼Œè¿˜æœ‰ Swift Blog ä¸­çš„ä»‹ç»ã€‚ å‚è€ƒæ–‡çŒ®Dictionary å®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.apple.com/documentation/swift/dictionarySwift Blog: https://swift.org/blog/dictionary-and-set-improvements/","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"ä½¿ç”¨ CocoaPods å¯¹å…¬æœ‰åº“å¼€æºå’Œç§æœ‰åº“ç»„ä»¶","slug":"Open source library","date":"2018-03-12T13:56:27.000Z","updated":"2018-11-15T14:01:12.844Z","comments":true,"path":"2018/03/12/Open source library/","link":"","permalink":"https://reversescale.github.io/2018/03/12/Open source library/","excerpt":"æœ€è¿‘åœ¨ç ”ç©¶ä½¿ç”¨ CocoaPods å¯¹ iOS å·¥ç¨‹ç»„ä»¶åŒ–ï¼Œåˆ›å»ºå…¬æœ‰ Pod åº“å’Œç§æœ‰ Pod åº“æ–¹æ³•ï¼Œä¸ºäº†æ–¹ä¾¿æ•´ç†å’Œå­¦ä¹ å°±æ•´ç†äº†è¿™ç¯‡æ–‡ç« ~","text":"æœ€è¿‘åœ¨ç ”ç©¶ä½¿ç”¨ CocoaPods å¯¹ iOS å·¥ç¨‹ç»„ä»¶åŒ–ï¼Œåˆ›å»ºå…¬æœ‰ Pod åº“å’Œç§æœ‰ Pod åº“æ–¹æ³•ï¼Œä¸ºäº†æ–¹ä¾¿æ•´ç†å’Œå­¦ä¹ å°±æ•´ç†äº†è¿™ç¯‡æ–‡ç« ~ åˆ›å»ºå…¬æœ‰ Pod åº“æˆ–è€…ç§æœ‰ Pod åº“ï¼Œå®é™…ä¸ŠåŸç†æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åŸºäº git æœåŠ¡å’Œ repo åè®®ï¼Œä¸ä¸€æ ·çš„æ˜¯ï¼Œä¸¤è€…çš„ç‰ˆæœ¬ç´¢å¼•æŸ¥è¯¢æ–¹å¼ä¸ä¸€æ ·ï¼Œå…¬æœ‰åº“çš„ podspec ç”± CocoaPods/Specs ç®¡ç†ï¼Œè€Œå†…éƒ¨ç§æœ‰ä½¿ç”¨çš„ pod åº“éœ€è¦è‡ªå·±å»ºç«‹ä¸€ä¸ªä»“åº“æ¥ç®¡ç† podspecã€‚ å®ç”¨ï¼šå¼€æºå…¬æœ‰åº“ä¾‹å­: æˆ‘æœ‰å°è£…è¿‡ä¸€ä¸ªå·¥å…·CollectionIndexToolsï¼ŒCollectionIndexTools å¯ä»¥ç»™ Collection æ·»åŠ ä¸€ä¸ªç±»ä¼¼ TableView å³ä¾§çš„ç´¢å¼•æ¡ï¼Œæˆ‘æƒ³é€šè¿‡ Podfile ä¸­æ·»åŠ  pod â€˜CollectionIndexToolsLibâ€™ å³å¯ä½¿ç”¨. æ³¨å†Œ CocoaPods è´¦æˆ·ä¿¡æ¯æƒ³è¦åˆ›å»ºä¸€ä¸ªå¼€æº pod åº“ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æ³¨å†Œ CocoaPods, è¿™é‡Œä½¿ç”¨ trunk æ–¹å¼ï¼Œä½œä¸ºä¸€ä¸ª iOS å¼€å‘äººå‘˜ä½ ä¸€å®šå®‰è£…äº† CocoaPodsï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œï¼š 1pod trunk register é‚®ç®±åœ°å€ &apos;ç”¨æˆ·å&apos; --verbose è¿™é‡Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ Github é‚®ç®±å’Œç”¨æˆ·åï¼Œç„¶ååœ¨ä½ çš„é‚®ç®±ä¸­ä¼šæ”¶åˆ°ç¡®è®¤é‚®ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»é“¾æ¥ç¡®è®¤å³æ³¨å†ŒæˆåŠŸï¼ŒæˆåŠŸä¹‹åå¯ä»¥ç»ˆç«¯æ‰§è¡Œï¼š 1pod trunk me æŸ¥çœ‹è‡ªå·±çš„æ³¨å†Œä¿¡æ¯ï¼Œä»¥åå½“ä½ æœ‰äº†è‡ªå·±çš„å¼€æºPodåº“ï¼Œä¹Ÿå¯ä»¥ç”¨æ­¤æ–¹å¼éšæ—¶æŸ¥çœ‹è‡ªå·±å‘å¸ƒè¿‡çš„Podsï¼š åˆ›å»ºå…±äº«åº“æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°å…¬æœ‰ä»“åº“å…±äº«åº“éœ€è¦ä¸‰ä¸ªå¿…ä¸å¯å°‘çš„éƒ¨åˆ†: 1.å…±äº«æ–‡ä»¶å¤¹(æ–‡ä»¶å¤¹å­˜æ”¾ç€ä½ è¦å…±äº«çš„å†…å®¹, ä¹Ÿå°±æ˜¯å…¶ä»–äººpodå¾—åˆ°çš„æ–‡ä»¶, .podspecæ–‡ä»¶ä¸­çš„source_fileséœ€è¦æŒ‡å®šæ­¤æ–‡ä»¶è·¯å¾„åŠæ–‡ä»¶ç±»å‹); 2.LICENSEæ–‡ä»¶(é»˜è®¤ä¸€èˆ¬é€‰æ‹©MIT); 3.åº“æè¿°æ–‡ä»¶.podspec(æœ¬åº“çš„å„é¡¹ä¿¡æ¯æè¿°, éœ€è¦æäº¤ç»™CocoaPods, podé€šè¿‡è¿™ä¸ªæ–‡ä»¶æŸ¥æ‰¾åˆ°ä½ å…±äº«çš„åº“, .podspecæ–‡ä»¶çš„æ ¼å¼è§ç¬¬3ç‚¹). è¿™ä¸€æ­¥åˆ†ä¸¤ç§åœºæ™¯: åœºæ™¯ä¸€ï¼šå¦‚æœä½ å·²ç»æœ‰äº†ç°æˆçš„æƒ³è¦å…±äº«çš„æ–‡ä»¶,ä½ åªéœ€è¦æ»¡è¶³ä¸Šé¢ä¸‰ä¸ªéƒ¨åˆ†,å³å¯ä¸Šä¼ åˆ°å…¬æœ‰ä»“åº“å³å¯ç»§ç»­å…¶ä»–çš„æ­¥éª¤; åœºæ™¯äºŒï¼šä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å·¥ç¨‹å»åšè‡ªå·±çš„å…±äº«, å¯ä»¥ä½¿ç”¨ç»ˆç«¯å‘½ä»¤: 1pod lib create CollectionIndexToolsLib éœ€è¦è¾“å…¥ä¸€äº›æ¨¡æ¿å‚æ•°ï¼š Cocoapods ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ¨¡æ¿é¡¹ç›®ï¼Œç›®å½•ç»“æ„ï¼š 123456789101112131415CollectionIndexToolsLibâ”œâ”€â”€ Example #demo APPâ”‚ â”œâ”€â”€ CollectionIndexToolsLibâ”‚ â”œâ”€â”€ CollectionIndexToolsLib.xcodeprojâ”‚ â”œâ”€â”€ CollectionIndexToolsLib.xcworkspaceâ”‚ â”œâ”€â”€ Podfile #demo APP çš„ä¾èµ–æè¿°æ–‡ä»¶â”‚ â”œâ”€â”€ Podfile.lockâ”‚ â”œâ”€â”€ Pods #demo APP çš„ä¾èµ–æ–‡ä»¶â”‚ â””â”€â”€ Testsâ”œâ”€â”€ LICENSE #å¼€æºåè®® é»˜è®¤MITâ”œâ”€â”€ Pod #ç»„ä»¶çš„ç›®å½•â”‚ â”œâ”€â”€ Assets #èµ„æºæ–‡ä»¶â”‚ â””â”€â”€ Classes #ç±»æ–‡ä»¶â”œâ”€â”€ PodCollectionIndexToolsLib.podspec #ç¬¬ä¸‰æ­¥è¦åˆ›å»ºçš„podspecæ–‡ä»¶â””â”€â”€ README.md #markdownæ ¼å¼çš„README ç¼–è¾‘.podspecæ–‡ä»¶ä»¥CollectionIndexToolsLib.podspecä¸ºä¾‹:123456789101112131415161718192021Pod::Spec.new do |s| s.name = 'CollectionIndexToolsLib' s.version = '0.1.0' s.summary = 'Custom IndexTools similar to TableViews index bar' s.description = &lt;&lt;-DESC I believe you must have thought about adding an index like Table View to Collection View. I will give you one today. DESC s.homepage = 'https://github.com/ReverseScale/CollectionIndexToolsLib' s.license = 'MIT' s.author = &#123; 'ReverseScale' =&gt; 'reversescale@icloud.com' &#125; s.source = &#123; :git =&gt; 'https://github.com/ReverseScale/CollectionIndexToolsLib.git', :tag =&gt; s.version.to_s &#125; s.ios.deployment_target = '8.0' s.source_files = 'CollectionIndexToolsLib/Classes/**/*' s.requires_arc = trueend ç†è®ºä¸Šå‰é¢çš„è®¾ç½®å°±å¯ä»¥é€šè¿‡éªŒè¯ï¼Œä¸‹é¢æ˜¯æ³¨é‡Šå‚ç…§ï¼š1234567891011121314151617181920212223242526272829Pod::Spec.new do |s| s.name = \"PodTestLibrary\" #åç§° s.version = \"0.1.0\" #ç‰ˆæœ¬å· s.summary = \"Just Testing.\" #ç®€çŸ­ä»‹ç»ï¼Œä¸‹é¢æ˜¯è¯¦ç»†ä»‹ç» s.description = &lt;&lt;-DESC Testing Private Podspec. * Markdown format. * Don't worry about the indent, we strip it! DESC s.homepage = \"https://coding.net/u/wtlucky/p/podTestLibrary\" #ä¸»é¡µ,è¿™é‡Œè¦å¡«å†™å¯ä»¥è®¿é—®åˆ°çš„åœ°å€ï¼Œä¸ç„¶éªŒè¯ä¸é€šè¿‡ # s.screenshots = \"www.example.com/screenshots_1\", \"www.example.com/screenshots_2\" #æˆªå›¾ s.license = 'MIT' #å¼€æºåè®® s.author = &#123; \"wtlucky\" =&gt; \"wtlucky@foxmail.com\" &#125; #ä½œè€…ä¿¡æ¯ s.source = &#123; :git =&gt; \"https://coding.net/wtlucky/podTestLibrary.git\", :tag =&gt; \"0.1.0\" &#125; #é¡¹ç›®åœ°å€ï¼Œè¿™é‡Œä¸æ”¯æŒsshçš„åœ°å€ï¼ŒéªŒè¯ä¸é€šè¿‡ï¼Œåªæ”¯æŒHTTPå’ŒHTTPSï¼Œæœ€å¥½ä½¿ç”¨HTTPS # s.social_media_url = 'https://twitter.com/&lt;TWITTER_USERNAME&gt;' #å¤šåª’ä½“ä»‹ç»åœ°å€ s.platform = :ios, '7.0' #æ”¯æŒçš„å¹³å°åŠç‰ˆæœ¬ s.requires_arc = true #æ˜¯å¦ä½¿ç”¨ARCï¼Œå¦‚æœæŒ‡å®šå…·ä½“æ–‡ä»¶ï¼Œåˆ™å…·ä½“çš„é—®é¢˜ä½¿ç”¨ARC s.source_files = 'Pod/Classes/**/*' #ä»£ç æºæ–‡ä»¶åœ°å€ï¼Œ**/*è¡¨ç¤ºClassesç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚æœæœ‰å¤šä¸ªç›®å½•ä¸‹åˆ™ç”¨é€—å·åˆ†å¼€ï¼Œå¦‚æœéœ€è¦åœ¨é¡¹ç›®ä¸­åˆ†ç»„æ˜¾ç¤ºï¼Œè¿™é‡Œä¹Ÿè¦åšç›¸åº”çš„è®¾ç½® s.resource_bundles = &#123; 'PodTestLibrary' =&gt; ['Pod/Assets/*.png'] &#125; #èµ„æºæ–‡ä»¶åœ°å€ s.public_header_files = 'Pod/Classes/**/*.h' #å…¬å¼€å¤´æ–‡ä»¶åœ°å€ s.frameworks = 'UIKit' #æ‰€éœ€çš„frameworkï¼Œå¤šä¸ªç”¨é€—å·éš”å¼€ s.dependency 'AFNetworking', '~&gt; 2.3' #ä¾èµ–å…³ç³»ï¼Œè¯¥é¡¹ç›®æ‰€ä¾èµ–çš„å…¶ä»–åº“ï¼Œå¦‚æœæœ‰å¤šä¸ªéœ€è¦å¡«å†™å¤šä¸ªs.dependencyend ç¼–å†™å®Œæˆå, æˆ‘ä»¬éœ€è¦éªŒè¯.podspecæ–‡ä»¶çš„åˆæ³•æ€§, è¿™é‡Œéœ€è¦ç»ˆç«¯cdåˆ°.podspecæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹, æ‰§è¡Œ:å¿½è§†è­¦å‘Šï¼šâ€“allow-warnings 1pod lib lint CollectionIndexToolsLib.podspec å¦‚æœ‰è­¦å‘Šæˆ–è€…é”™è¯¯è¯·é‡æ–°æ£€æŸ¥ä½ çš„ç¼–å†™æ­£ç¡®æ€§ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜ä¼šå‡ºç°ï¼š 123-&gt; CollectionIndexToolsLib (0.1.0)CollectionIndexToolsLib passed validation. æ‰“tag, å‘å¸ƒä¸€ä¸ªreleaseç‰ˆæœ¬ä¸€åˆ‡å‡†å¤‡å°±ç»ªå, æˆ‘ä»¬éœ€è¦åœ¨ä½ çš„gitä»“åº“é‡Œé¢å­˜åœ¨ä¸€ä¸ªä¸.podspecæ–‡ä»¶ä¸­ä¸€è‡´çš„version, è¿™é‡Œä½ å¯ä»¥åœ¨ä½ çš„gitä»“åº“ä¸­çš„releasesä¸€é¡¹å»æ‰‹åŠ¨å‘å¸ƒ, ä¹Ÿå¯ä»¥åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ç»ˆç«¯å‘½ä»¤: 12git tag -m &apos;ğŸ”–:Releasing tags.&apos; &apos;0.1.0&apos;git push --tag #æ¨é€tagåˆ°è¿œç«¯ä»“åº“ æˆåŠŸä¹‹åå³å¯åœ¨ä½ çš„ releases é‡Œé¢çœ‹åˆ°è¿™ä¸ª tag çš„ç‰ˆæœ¬. å‘å¸ƒè‡ªå·±çš„åº“æè¿°æ–‡ä»¶podspecç»™cocoapodsåŒæ ·åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹, ç»ˆç«¯æ‰§è¡Œ:å¿½è§†è­¦å‘Šï¼šâ€“allow-warnings 1pod trunk push CollectionIndexToolsLib.podspec å°†ä½ çš„åº“æ–‡ä»¶.podspecæ–‡ä»¶æäº¤åˆ°å…¬æœ‰çš„specsä¸Šé¢, è¿™ä¸€æ­¥åšçš„æ“ä½œæ˜¯éªŒè¯ä½ çš„podspecæ–‡ä»¶æ˜¯å¦åˆæ³•+æäº¤åˆ°specsä¸­(ç­‰åŒäºfork;commit;push)+å°†ä¸Šä¼ çš„podspecæ–‡ä»¶è½¬æˆjsonæ ¼å¼æ–‡ä»¶)ï¼ŒæˆåŠŸåä¼šå‡ºç°Congratsä¿¡æ¯ã€‚ æˆåŠŸä¸Šä¼ åç­‰å¾…ç‰‡åˆ»å°±å¯ä»¥ç”¨æŸ¥æ‰¾å‘½ä»¤æ‰¾åˆ°ä½ çš„åº“ï¼š 1pod search CollectionIndexToolsLib æ—¥åç»´æŠ¤æ›´æ–°å¼€æºåº“å¦‚æœæœ‰é”™è¯¯æˆ–è€…éœ€è¦è¿­ä»£ç‰ˆæœ¬,ä¿®æ”¹å·¥ç¨‹æ–‡ä»¶åæ¨é€åˆ°è¿œç«¯ä»“åº“å, éœ€è¦ä¿®æ”¹podspecä¸­çš„ç‰ˆæœ¬å·, å¹¶é‡æ–°æ‰“tagä¸Šä¼ , å†è¿›è¡Œæ–°ä¸€è½®çš„éªŒè¯å’Œå‘å¸ƒ.å¦‚æœåœ¨å¼€å‘è¿‡ç¨‹ä¸­å‘ç°æŸåŸºç¡€ç»„ä»¶å­˜åœ¨ bug éœ€è¦æ›´æ–° Podï¼Œå…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š ä¿®æ”¹ podspec æ–‡ä»¶ä¸­çš„ s.version; ä¿®å¤ bug å¹¶å¯¹é¡¹ç›®æ‰“ tagï¼Œtag åç§°å’Œ s.version ä¸€ç›´å¹¶ push åˆ°è¿œç¨‹ä»“åº“ã€‚ éªŒè¯ podspec æ–‡ä»¶çš„æœ‰æ•ˆæ€§ï¼› æ¨é€ podspec æ–‡ä»¶åˆ°è¿œç¨‹ä»“åº“ï¼› æ‰§è¡Œ pod search RRCache éªŒè¯ç»“æœï¼› å®ç”¨ï¼šç»„ä»¶åŒ–ç§æœ‰åº“ç»„ä»¶åŒ–çš„å®ç”¨ä¹‹å¤„è¯·å‚è€ƒã€Šç§»åŠ¨ç«¯ iOS å¹´ç»ˆå·¥ä½œæ€»ç»“-çº¯å¹²è´§è¯·è‡ªå¤‡é…’æ°´ã€‹ï¼ˆhttps://juejin.im/post/5a934dfa6fb9a0634514d8a9ï¼‰ ç§æœ‰Podåº“å’Œå…¬æœ‰Podåº“çš„åˆ›å»ºæ–¹å¼æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«, ä¸ä¸€æ ·çš„æ˜¯ç®¡ç†ä»–ä»¬çš„ spec repo ä¸ä¸€æ ·. æ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªè·ŸCocoaPods/Specsç±»ä¼¼çš„ä»“åº“æ¥ç®¡ç†å†…éƒ¨åˆ›å»ºçš„Podåº“çš„podspecæ–‡ä»¶, ä¾›å†…éƒ¨äººå‘˜æ›´æ–°å’Œä¾èµ–ä½¿ç”¨å†…éƒ¨Podç»„ä»¶åº“. ç§æœ‰repoçš„æ„å»ºå½¢å¼æœ‰ä¸¤ç§, ä¸€ç§æ˜¯ç§æœ‰gitæœåŠ¡å™¨ä¸Šé¢åˆ›å»ºï¼Œä¸€ç§æ˜¯æœ¬æœºåˆ›å»º. æœ¬æœºåˆ›å»ºè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£:Private Pods, è¿™é‡Œä»‹ç»çš„æ˜¯åœ¨å…¬å¸å†…éƒ¨æ­å»ºçš„gitæœåŠ¡å™¨ä¸Šé¢åˆ›å»ºæ•´ä¸ªæœåŠ¡çš„æ–¹å¼. åˆ›å»ºä¸€ä¸ªgitä»“åº“ç”¨æ¥åšå†…éƒ¨ç§æœ‰åº“çš„Spec Repoåœ¨ç§æœ‰æœåŠ¡å™¨ä¸€ä¸ªä»“åº“,ä¸€ä¸ªç”¨æ¥å­˜æ”¾æ‰€æœ‰å…±äº«åº“çš„podspec, è¿™é‡Œåˆ›å»ºå¥½ä¹‹åçš„å†…éƒ¨SSHåè®®åœ°å€æ˜¯:https://gitee.com/WhatsXie/LibComponent.git, èŠ±é’±ä¹°gitçš„ç§æœ‰ä»“åº“æˆ–è€…ä½¿ç”¨å…¶ä»–å…è´¹çš„ç¬¬ä¸‰æ–¹gitæœåŠ¡(å¦‚Bitbucketç­‰)åˆ›å»ºçš„ç§æœ‰ä»“åº“ç»™åˆ°çš„http/httpsåœ°å€ä¹Ÿä¸€æ ·.ç»ˆç«¯è¾“å…¥å‘½ä»¤:1pod repo add LibComponent https://gitee.com/WhatsXie/LibComponent.git å°†LibComponentæ·»åŠ åˆ°æœ¬åœ°repo, æ·»åŠ æˆåŠŸåå¯ä»¥åœ¨/.cocoapods/repos/ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°å®˜æ–¹çš„specs:masterå’ŒåˆšåˆšåŠ å…¥çš„specs:LibComponent å¦‚æœæœ‰å…¶ä»–åˆä½œäººå‘˜å…±åŒä½¿ç”¨è¿™ä¸ªç§æœ‰Spec Repoçš„è¯åœ¨ä»–æœ‰å¯¹åº”Gitä»“åº“çš„æƒé™çš„å‰æä¸‹æ‰§è¡Œç›¸åŒçš„å‘½ä»¤æ·»åŠ è¿™ä¸ªSpec Repoå³å¯. åˆ›å»ºç§æœ‰Podç»„ä»¶åº“ç»§ç»­åˆ›å»ºä¸€ä¸ªç§æœ‰ä»“åº“,ç”¨æ¥å»ºç«‹éœ€è¦å…±äº«çš„å†…éƒ¨ç»„ä»¶, ä»¥RSGuidePageLibä¸ºä¾‹:https://gitee.com/WhatsXie/RSGuidePageLib.git å¯ä»¥åˆ›å»ºç¤ºä¾‹å·¥ç¨‹, åƒåˆ›å»ºå…¬æœ‰çš„åº“ä¸€æ ·, å¡«å†™è‡ªå·±çš„podspecæ–‡ä»¶ 1234567891011121314151617181920212223242526272829Pod::Spec.new do |s|s.name = 'RSGuidePageLib's.version = '0.3.0's.summary = 'Custom guide page package's.description = &lt;&lt;-DESCSwift implementation of the guide page package, support for multiple pictures and video guide pageDESCs.homepage = 'https://gitee.com/WhatsXie/RSGuidePageLib.git's.license = &#123; :type =&gt; 'MIT', :file =&gt; 'LICENSE' &#125;s.author = &#123; 'ReverseScale@icloud.com' =&gt; 'reversescale' &#125;s.source = &#123; :git =&gt; 'https://gitee.com/WhatsXie/RSGuidePageLib.git', :tag =&gt; s.version.to_s &#125;s.ios.deployment_target = '8.0's.swift_version = '3.2's.source_files = 'RSGuidePageLib/Classes/**/*'s.requires_arc = true å€¼å¾—æ³¨æ„çš„æ˜¯:podspecæ–‡ä»¶ä¸­çš„homepageå’Œsourceä¸æ”¯æŒsshåè®®åœ°å€,æ‰€ä»¥æˆ‘ä»¬å¾—æ”¾å…¥http/httpsåœ°å€. ä¸å…¬æœ‰åº“çš„åˆ›å»ºæ–¹å¼ä¸€æ ·, pod lib lint Category.podspecéªŒè¯æˆåŠŸä¹‹åpushåˆ°ä»“åº“, ç„¶åæ‰“tagå‘å¸ƒreleaseç‰ˆæœ¬. ç„¶åå°†podspecåŠ å…¥ç§æœ‰Sepc repoä¸­å…¬æœ‰åº“ä½¿ç”¨trunkæ–¹å¼å°†.podspecæ–‡ä»¶å‘å¸ƒåˆ°CocoaPods/Specs, å†…éƒ¨çš„podç»„ä»¶åº“åˆ™æ˜¯æ·»åŠ åˆ°æˆ‘ä»¬ç¬¬ä¸€æ­¥åˆ›å»ºçš„ç§æœ‰Spec repoä¸­å», åœ¨ç»ˆç«¯æ‰§è¡Œ:â€“allow-warnings å¿½ç•¥è­¦å‘Šâ€“private ç§æœ‰åº“ 1pod repo push LibComponent RSGuidePageLib.podspec æ·»åŠ æˆåŠŸä¹‹åLibComponentä¸­ä¼šåŒ…å«RSGuidePageLibåº“çš„podspecä¿¡æ¯, å¯ä»¥å‰å¾€~/.cocoapods/reposä¸‹çš„LibComponentæ–‡ä»¶å¤¹ä¸­æŸ¥çœ‹, åŒæ—¶gitæœåŠ¡å™¨ä¸­çš„è¿œç«¯ä¹Ÿæ›´æ–°äº†. ç§»é™¤ç§æœ‰Repo 1pod repo remove [name] æŸ¥æ‰¾å’Œä½¿ç”¨å†…éƒ¨ç»„ä»¶åº“æ‰§è¡Œpod search Categoryå°±èƒ½æŸ¥åˆ°åˆšåˆšåˆ›å»ºå¥½çš„Categoryåº“äº†, ç„¶ååœ¨æƒ³è¦ä½¿ç”¨æ­¤ç»„ä»¶çš„å·¥ç¨‹çš„Podfileä¸­åŠ å…¥pod â€˜Categoryâ€™, â€˜~&gt;1.0.1â€™å³å¯ä½¿ç”¨å†…éƒ¨ç»„ä»¶å•¦ï¼ å€¼å¾—æ³¨æ„çš„æ˜¯:å¿…é¡»åœ¨Podfileå‰é¢éœ€è¦æ·»åŠ ä½ çš„ç§æœ‰Spec repoçš„gitåœ°å€source, pod installæ—¶, æ‰èƒ½åœ¨ç§æœ‰repoä¸­æŸ¥æ‰¾åˆ°ç§æœ‰åº“, åƒè¿™æ ·: 1234567891011# Uncomment the next line to define a global platform for your projectsource &apos;https://github.com/CocoaPods/Specs.git&apos;source &apos;https://gitee.com/WhatsXie/LibComponent.git&apos;# platform :ios, &apos;9.0&apos;target &apos;Demo&apos; dopod &apos;RSGuidePageLib&apos;, &apos;~&gt;0.3.0â€™end ç»è¿‡æµ‹è¯•, è¿™ç§æ–¹å¼å¯ä»¥æŠŠä½ çš„æ‰€æœ‰å¯ä»¥æ‹†åˆ†å‡ºæ¥çš„ç»„ä»¶, ç”šè‡³æ˜¯ä¸šåŠ¡éƒ½æ¥ä½¿ç”¨Podç®¡ç†, è¿™æ ·è¾¾åˆ°äº†è§£è€¦å’Œå•é¡¹æ›´æ–°ä¼˜åŒ–ã€‚æŸäº›ç»„ä»¶ä¸å½±å“è€ç‰ˆæœ¬çš„ä¾èµ–ä½¿ç”¨, å‡ºç°é—®é¢˜ä¿®æ”¹Podfileä¸­çš„ä¾èµ–ç‰ˆæœ¬å³å¯éšæ—¶å›æ»š, ç»™å¼€å‘äº†å¸¦æ¥æå¤§çš„ä¾¿åˆ©ã€‚ å‚è€ƒé“¾æ¥: CocoaPodsåˆ›å»ºå…¬æœ‰å’Œç§æœ‰Podåº“æ–¹æ³•æ€»ç»“ï¼ˆhttps://www.aliyun.com/jiaocheng/376300.htmlï¼‰ CocoaPods Guides(https://guides.cocoapods.org) Private Pods(https://guides.cocoapods.org/making/private-cocoapods.html) æ‰‹æŠŠæ‰‹æ•™ä½ å‘å¸ƒä»£ç åˆ°CocoaPods(Trunkæ–¹å¼)(http://www.cnblogs.com/wengzilin/p/4742530.html) ä½¿ç”¨Cocoapodsåˆ›å»ºç§æœ‰podspec(http://blog.wtlucky.com/blog/2015/02/26/create-private-podspec/) COCOAPODSåˆ›å»ºç§æœ‰PODS(http://www.cnblogs.com/tufeibo/p/5654268.html) CocoaPods ç»„ä»¶åŒ–å®è·µ - ç§æœ‰Pod(https://www.jianshu.com/p/475d6b6d5600)","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"Swift 4.0 æ–°ç‰¹å¾æ±‡æ€»åŠæ¼”ç¤ºé™„ Demo","slug":"Swift 4 New feature","date":"2018-03-09T13:16:27.000Z","updated":"2018-11-15T15:01:55.488Z","comments":true,"path":"2018/03/09/Swift 4 New feature/","link":"","permalink":"https://reversescale.github.io/2018/03/09/Swift 4 New feature/","excerpt":"Swift åœ¨ä¸æ–­çš„ç‰ˆæœ¬è¿­ä»£ä¸­ï¼Œç”±äºå…¶ ABI å°šä¸ç¨³å®šï¼Œæ‰€ä»¥ç»™å¼€å‘è€…å¸¦æ¥è®¸å¤šçš„æŒ‘æˆ˜ï¼Œä½†ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œè¿™é—¨è¯­è¨€æ‰æœ‰æ— é™å¯èƒ½~","text":"Swift åœ¨ä¸æ–­çš„ç‰ˆæœ¬è¿­ä»£ä¸­ï¼Œç”±äºå…¶ ABI å°šä¸ç¨³å®šï¼Œæ‰€ä»¥ç»™å¼€å‘è€…å¸¦æ¥è®¸å¤šçš„æŒ‘æˆ˜ï¼Œä½†ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œè¿™é—¨è¯­è¨€æ‰æœ‰æ— é™å¯èƒ½~ ğŸ‘¨ğŸ»â€ğŸ’» Github Demo Key Paths æ–°è¯­æ³•key-path é€šå¸¸æ˜¯ç”¨åœ¨é”®å€¼ç¼–ç ï¼ˆKVCï¼‰ä¸é”®å€¼è§‚å¯Ÿï¼ˆKVOï¼‰ä¸Šçš„ï¼ŒKVCã€KVO ç›¸å…³å†…å®¹å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„è¿™ç¯‡æ–‡ç« ï¼šSwift - åå°„ï¼ˆReflectionï¼‰çš„ä»‹ç»ä¸ä½¿ç”¨æ ·ä¾‹ï¼ˆé™„KVCä»‹ç»ï¼‰ 1.Swift 3 ä¹‹å‰ä½¿ç”¨çš„æ˜¯ String ç±»å‹çš„ key-Path1234567891011121314151617//ç”¨æˆ·ç±»class User: NSObject&#123; @objc var name:String = &quot;&quot; //å§“å @objc var age:Int = 0 //å¹´é¾„&#125; //åˆ›å»ºä¸€ä¸ªUserå®ä¾‹å¯¹è±¡let user1 = User()user1.name = &quot;hangge&quot;user1.age = 100 //ä½¿ç”¨KVCå–å€¼let name = user1.value(forKey: &quot;name&quot;)print(name) //ä½¿ç”¨KVCèµ‹å€¼user1.setValue(&quot;hangge.com&quot;, forKey: &quot;name&quot;) å…·ä½“æ˜¾ç¤ºå¦‚ä¸‹ï¼š 2.åˆ°äº† Swift 3 æ–°å¢äº† #keyPath() å†™æ³•ä½¿ç”¨ #keyPath() å†™æ³•ï¼Œå¯ä»¥é¿å…æˆ‘ä»¬å› ä¸ºæ‹¼å†™é”™è¯¯è€Œå¼•å‘é—®é¢˜ã€‚1234567891011121314151617//ç”¨æˆ·ç±»class User: NSObject&#123; @objc var name:String = &quot;&quot; //å§“å @objc var age:Int = 0 //å¹´é¾„&#125; //åˆ›å»ºä¸€ä¸ªUserå®ä¾‹å¯¹è±¡let user1 = User()user1.name = &quot;hangge&quot;user1.age = 100 //ä½¿ç”¨KVCå–å€¼let name = user1.value(forKeyPath: #keyPath(User.name))print(name) //ä½¿ç”¨KVCèµ‹å€¼user1.setValue(&quot;hangge.com&quot;, forKeyPath: #keyPath(User.name)) 3.Swift 4 ä¸­ç›´æ¥ç”¨ \\ ä½œä¸ºå¼€å¤´åˆ›å»º KeyPathæ–°çš„æ–¹å¼ä¸ä»…ä½¿ç”¨æ›´åŠ ç®€å•ï¼Œè€Œä¸”æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š ç±»å‹å¯ä»¥å®šä¹‰ä¸º classã€struct å®šä¹‰ç±»å‹æ—¶æ— éœ€åŠ ä¸Š @objc ç­‰å…³é”®å­— æ€§èƒ½æ›´å¥½ ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­ï¼Œä¾‹å¦‚ï¼šuser1.value(forKeyPath: #keyPath(User.name)) è¿”å›çš„ç±»å‹æ˜¯ Anyï¼Œuser1[keyPath: \\User.name] ç›´æ¥è¿”å› String ç±»å‹ å¯ä»¥åœ¨æ‰€æœ‰å€¼ç±»å‹ä¸Šä½¿ç”¨ï¼ˆ1ï¼‰æ¯”å¦‚ä¸Šé¢çš„æ ·ä¾‹åœ¨ Swift4 ä¸­å¯ä»¥è¿™ä¹ˆå†™ï¼š1234567891011121314151617//ç”¨æˆ·ç±»class User: NSObject&#123; var name:String = &quot;&quot; //å§“å var age:Int = 0 //å¹´é¾„&#125; //åˆ›å»ºä¸€ä¸ªUserå®ä¾‹å¯¹è±¡let user1 = User()user1.name = &quot;hangge&quot;user1.age = 100 //ä½¿ç”¨KVCå–å€¼let name = user1[keyPath: \\User.name]print(name) //ä½¿ç”¨KVCèµ‹å€¼user1[keyPath: \\User.name] = &quot;hangge.com&quot; ï¼ˆ2ï¼‰keyPath å®šä¹‰åœ¨å¤–é¢ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š123456let keyPath = \\User.name let name = user1[keyPath: keyPath]print(name) user1[keyPath: keyPath] = &quot;hangge.com&quot; ï¼ˆ3ï¼‰å¯ä»¥ä½¿ç”¨ appending æ–¹æ³•å‘å·²å®šä¹‰çš„ Key Path åŸºç¡€ä¸Šå¡«åŠ æ–°çš„ Key Pathã€‚12let keyPath1 = \\User.phonelet keyPath2 = keyPath1.appending(path: \\.number) ç±»ä¸åè®®çš„ç»„åˆç±»å‹åœ¨ Swift 4 ä¸­ï¼Œå¯ä»¥æŠŠç±»ï¼ˆClassï¼‰å’Œåè®®ï¼ˆProtocolï¼‰ç”¨ &amp; ç»„åˆåœ¨ä¸€èµ·ä½œä¸ºä¸€ä¸ªç±»å‹ä½¿ç”¨ã€‚ ä½¿ç”¨æ ·ä¾‹1ï¼š12345678910111213protocol MyProtocol &#123; &#125; class View &#123; &#125; class ViewSubclass: View, MyProtocol &#123; &#125; class MyClass &#123; var delegate: (View &amp; MyProtocol)?&#125; let myClass = MyClass()myClass.delegate = ViewSubclass() //è¿™ä¸ªç¼–è¯‘æ­£å¸¸myClass.delegate = View() //è¿™ä¸ªç¼–è¯‘æŠ¥é”™: å…·ä½“é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š ä½¿ç”¨æ ·ä¾‹2ï¼š123456789101112131415161718192021protocol Shakeable &#123; func shake()&#125; extension UIButton: Shakeable &#123; func shake() &#123; /* ... */ &#125;&#125; extension UISlider: Shakeable &#123; func shake() &#123; /* ... */ &#125;&#125; func shakeEm(controls: [UIControl &amp; Shakeable]) &#123; for control in controls where control.isEnabled &#123; control.shake() &#125;&#125; ä¸‹æ ‡æ”¯æŒæ³›å‹1.ä¸‹æ ‡çš„è¿”å›ç±»å‹æ”¯æŒæ³›å‹æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå†™ä¸€äº›æ•°æ®å®¹å™¨ï¼ŒSwift æ”¯æŒé€šè¿‡ä¸‹æ ‡æ¥è¯»å†™å®¹å™¨ä¸­çš„æ•°æ®ã€‚ä½†æ˜¯å¦‚æœå®¹å™¨ç±»ä¸­çš„æ•°æ®ç±»å‹å®šä¹‰ä¸ºæ³›å‹ï¼Œè¿‡å»ä¸‹æ ‡è¯­æ³•å°±åªèƒ½è¿”å› Anyï¼Œåœ¨å–å‡ºå€¼åéœ€è¦ç”¨ as? æ¥è½¬æ¢ç±»å‹ã€‚ç°åœ¨ Swift 4 å®šä¹‰ä¸‹æ ‡ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹äº†ã€‚12345678910111213141516171819202122struct GenericDictionary&lt;Key: Hashable, Value&gt; &#123; private var data: [Key: Value] init(data: [Key: Value]) &#123; self.data = data &#125; subscript&lt;T&gt;(key: Key) -&gt; T? &#123; return data[key] as? T &#125;&#125; //å­—å…¸ç±»å‹: [String: Any]let earthData = GenericDictionary(data: [&quot;name&quot;: &quot;Earth&quot;, &quot;population&quot;: 7500000000, &quot;moons&quot;: 1]) //è‡ªåŠ¨è½¬æ¢ç±»å‹ï¼Œä¸éœ€è¦åœ¨å†™ &quot;as? String&quot;let name: String? = earthData[&quot;name&quot;]print(name) //è‡ªåŠ¨è½¬æ¢ç±»å‹ï¼Œä¸éœ€è¦åœ¨å†™ &quot;as? Int&quot;let population: Int? = earthData[&quot;population&quot;]print(population) 2.ä¸‹æ ‡ç±»å‹åŒæ ·æ”¯æŒæ³›å‹12345678910111213141516extension GenericDictionary &#123; subscript&lt;Keys: Sequence&gt;(keys: Keys) -&gt; [Value] where Keys.Iterator.Element == Key &#123; var values: [Value] = [] for key in keys &#123; if let value = data[key] &#123; values.append(value) &#125; &#125; return values &#125;&#125; // Arrayä¸‹æ ‡let nameAndMoons = earthData[[&quot;moons&quot;, &quot;name&quot;]] // [1, &quot;Earth&quot;]// Setä¸‹æ ‡let nameAndMoons2 = earthData[Set([&quot;moons&quot;, &quot;name&quot;])] // [1, &quot;Earth&quot;] Codable åºåˆ—åŒ–å¦‚æœè¦å°†ä¸€ä¸ªå¯¹è±¡æŒä¹…åŒ–ï¼Œéœ€è¦æŠŠè¿™ä¸ªå¯¹è±¡åºåˆ—åŒ–ã€‚è¿‡å»çš„åšæ³•æ˜¯å®ç° NSCoding åè®®ï¼Œä½†å®ç° NSCoding åè®®çš„ä»£ç å†™èµ·æ¥å¾ˆç¹çï¼Œå°¤å…¶æ˜¯å½“å±æ€§éå¸¸å¤šçš„æ—¶å€™ã€‚Swift 4 ä¸­å¼•å…¥äº† Codable åè®®ï¼Œå¯ä»¥å¤§å¤§å‡è½»äº†æˆ‘ä»¬çš„å·¥ä½œé‡ã€‚æˆ‘ä»¬åªéœ€è¦è®©éœ€è¦åºåˆ—åŒ–çš„å¯¹è±¡ç¬¦åˆ Codable åè®®å³å¯ï¼Œä¸ç”¨å†å†™ä»»ä½•å…¶ä»–çš„ä»£ç ã€‚1234struct Language: Codable &#123; var name: String var version: Int&#125; 1.Encode æ“ä½œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠç¬¦åˆäº† Codable åè®®çš„å¯¹è±¡ encode æˆ JSON æˆ–è€… PropertyListã€‚12345678let swift = Language(name: &quot;Swift&quot;, version: 4) //encodedå¯¹è±¡let encodedData = try JSONEncoder().encode(swift) //ä»encodedå¯¹è±¡è·å–Stringlet jsonString = String(data: encodedData, encoding: .utf8)print(jsonString) 2.Decode æ“ä½œ12let decodedData = try JSONDecoder().decode(Language.self, from: encodedData)print(decodedData.name, decodedData.version) SubtringSwift 4 ä¸­æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–å°±æ˜¯ String å¯ä»¥å½“åš Collection æ¥ç”¨ï¼Œå¹¶ä¸æ˜¯å› ä¸º String å®ç°äº† Collection åè®®ï¼Œè€Œæ˜¯ String æœ¬èº«å¢åŠ äº†å¾ˆå¤š Collection åè®®ä¸­çš„æ–¹æ³•ï¼Œä½¿å¾— String åœ¨ä½¿ç”¨æ—¶çœ‹ä¸Šå»å°±æ˜¯ä¸ª Collectionã€‚1234567let str = &quot;hangge.com&quot; print(str.prefix(5)) // &quot;hangg&quot;print(str.suffix(5)) // &quot;e.com&quot; print(str.dropFirst()) // &quot;angge.com&quot;print(str.dropLast()) // &quot;hangge.co&quot; æ¯”å¦‚ä¸Šé¢çš„æ ·ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€äº› Collection åè®®çš„æ–¹æ³•å¯¹å­—ç¬¦ä¸²è¿›è¡Œæˆªå–ï¼Œåªä¸è¿‡å®ƒä»¬çš„è¿”å›ç»“æœä¸æ˜¯ String ç±»å‹ï¼Œè€Œæ˜¯ Swift 4 æ–°å¢çš„ Substring ç±»å‹ã€‚ 1.ä¸ºä½•è¦å¼•å…¥ Substringï¼Ÿæ—¢ç„¶æˆ‘ä»¬æƒ³è¦çš„åˆ°çš„å°±æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆç›´æ¥è¿”å› String å°±å¥½äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¤šæ­¤ä¸€ä¸¾è¿”å› Substringã€‚åŸå› åªæœ‰ä¸€ä¸ªï¼šæ€§èƒ½ã€‚å…·ä½“å¯ä»¥å‚è€ƒä¸‹å›¾ï¼šå½“æˆ‘ä»¬ç”¨ä¸€äº› Collection çš„æ–¹å¼å¾—åˆ° String é‡Œçš„ä¸€éƒ¨åˆ†æ—¶ï¼Œåˆ›å»ºçš„éƒ½æ˜¯ Substringã€‚Substring ä¸åŸ String æ˜¯å…±äº«ä¸€ä¸ª Storageã€‚è¿™æ„å‘³æˆ‘ä»¬åœ¨æ“ä½œè¿™ä¸ªéƒ¨åˆ†çš„æ—¶å€™ï¼Œæ˜¯ä¸éœ€è¦é¢‘ç¹çš„å»åˆ›å»ºå†…å­˜ï¼Œä»è€Œä½¿å¾— Swift 4 çš„ String ç›¸å…³æ“ä½œå¯ä»¥è·å–æ¯”è¾ƒé«˜çš„æ€§èƒ½ã€‚è€Œå½“æˆ‘ä»¬æ˜¾å¼åœ°å°† Substring è½¬æˆ String çš„æ—¶å€™ï¼Œæ‰ä¼š Copy ä¸€ä»½ String åˆ°æ–°çš„å†…å­˜ç©ºé—´æ¥ï¼Œè¿™æ—¶æ–°çš„ String å’Œä¹‹å‰çš„ String å°±æ²¡æœ‰å…³ç³»äº†ã€‚ 2.ä½¿ç”¨ Substring çš„æ³¨æ„äº‹é¡¹ç”±äº Substring ä¸åŸ String æ˜¯å…±äº«å­˜å‚¨ç©ºé—´çš„ï¼Œåªè¦æˆ‘ä»¬ä½¿ç”¨äº† Substringï¼ŒåŸ String å°±ä¼šå­˜åœ¨å†…å­˜ç©ºé—´ä¸­ã€‚åªæœ‰ Substring è¢«é‡Šæ”¾ä»¥åï¼Œæ•´ä¸ª String æ‰ä¼šè¢«é‡Šæ”¾ã€‚è€Œä¸” Substring ç±»å‹æ— æ³•ç›´æ¥èµ‹å€¼ç»™éœ€è¦ String ç±»å‹çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¿…é¡»ç”¨ String() åŒ…ä¸€å±‚ã€‚å½“ç„¶è¿™æ—¶ç³»ç»Ÿå°±ä¼šé€šè¿‡å¤åˆ¶åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¹‹ååŸå­—ç¬¦ä¸²å°±ä¼šè¢«é‡Šæ”¾ã€‚ 3.ä½¿ç”¨æ ·ä¾‹è¿™é‡Œå¯¹ String è¿›è¡Œæ‰©å±•ï¼Œæ–°å¢ä¸€ä¸ª subString æ–¹æ³•ã€‚ç›´æ¥å¯ä»¥æ ¹æ®èµ·å§‹ä½ç½®ï¼ˆInt ç±»å‹ï¼‰å’Œéœ€è¦çš„é•¿åº¦ï¼ˆInt ç±»å‹ï¼‰ï¼Œæ¥æˆªå–å‡ºå­å­—ç¬¦ä¸²ã€‚123456789101112extension String &#123; //æ ¹æ®å¼€å§‹ä½ç½®å’Œé•¿åº¦æˆªå–å­—ç¬¦ä¸² func subString(start:Int, length:Int = -1) -&gt; String &#123; var len = length if len == -1 &#123; len = self.count - start &#125; let st = self.index(startIndex, offsetBy:start) let en = self.index(st, offsetBy:len) return String(self[st ..&lt; en]) &#125;&#125; ä½¿ç”¨æ ·ä¾‹ï¼š1234let str1 = &quot;æ¬¢è¿è®¿é—®hangge.com&quot;let str2 = str1.subString(start: 4, length: 6)print(&quot;åŸå­—ç¬¦ä¸²ï¼š\\(str1)&quot;)print(&quot;æˆªå–å‡ºçš„å­—ç¬¦ä¸²ï¼š\\(str2)&quot;) è¿è¡Œç»“æœå¦‚ä¸‹ï¼š æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•æœ€åæˆ‘ä»¬ä¼šå°† Substring æ˜¾å¼åœ°è½¬æˆ String å†è¿”å›ã€‚ åºŸé™¤ swap æ–¹æ³•ï¼ˆ1ï¼‰è¿‡å»æˆ‘ä»¬ä¼šä½¿ç”¨ swap(_:_:) æ¥å°†ä¸¤ä¸ªå˜é‡çš„å€¼è¿›è¡Œäº¤æ¢ï¼š1234var a = 1var b = 2swap(&amp;a, &amp;b)print(a, b) ï¼ˆ2ï¼‰åé¢ swap() æ–¹æ³•å°†ä¼šè¢«åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨ tupleï¼ˆå…ƒç»„ï¼‰ç‰¹æ€§æ¥å®ç°å€¼äº¤æ¢ï¼Œä¹Ÿåªéœ€è¦ä¸€å¥è¯å°±èƒ½å®ç°ï¼š1234var a = 1var b = 2(b, a) = (a, b)print(a, b) ä½¿ç”¨ tuple æ–¹å¼çš„å¥½å¤„æ˜¯ï¼Œå¤šä¸ªå˜é‡å€¼ä¹Ÿå¯ä»¥ä¸€èµ·è¿›è¡Œäº¤æ¢ï¼š12345var a = 1var b = 2var c = 3(a, b, c) = (b, c, a)print(a, b, c) ï¼ˆ3ï¼‰è¡¥å……ä¸€ä¸‹ï¼šç°åœ¨æ•°ç»„å¢åŠ äº†ä¸ª swapAt æ–¹æ³•å¯ä»¥å®ç°ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®äº¤æ¢ã€‚1234var fruits = [&quot;apple&quot;, &quot;pear&quot;, &quot;grape&quot;, &quot;banana&quot;]//äº¤æ¢å…ƒç´ ä½ç½®ï¼ˆç¬¬2ä¸ªå’Œç¬¬3ä¸ªå…ƒç´ ä½ç½®è¿›è¡Œäº¤æ¢ï¼‰fruits.swapAt(1, 2)print(fruits) å‡å°‘éšå¼ @objc è‡ªåŠ¨æ¨æ–­1.è¿‡å»çš„æƒ…å†µï¼ˆSwift 3ï¼‰ï¼ˆ1ï¼‰åœ¨é¡¹ç›®ä¸­å¦‚æœæƒ³æŠŠ Swift å†™çš„ API æš´éœ²ç»™ Objective-C è°ƒç”¨ï¼Œéœ€è¦å¢åŠ  @objcã€‚åœ¨ Swift 3 ä¸­ï¼Œç¼–è¯‘å™¨ä¼šåœ¨å¾ˆå¤šåœ°æ–¹ä¸ºæˆ‘ä»¬éšå¼çš„åŠ ä¸Š @objcã€‚ï¼ˆ2ï¼‰æ¯”å¦‚å½“ä¸€ä¸ªç±»ç»§æ‰¿äº NSObjectï¼Œé‚£ä¹ˆè¿™ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè¢«éšå¼çš„åŠ ä¸Š @objcã€‚1234class MyClass: NSObject &#123; func print() &#123; &#125; // åŒ…å«éšå¼çš„ @objc func show() &#123; &#125; // åŒ…å«éšå¼çš„ @objc&#125; ï¼ˆ3ï¼‰ä½†è¿™æ ·åšå¾ˆå¤šå¹¶ä¸éœ€è¦æš´éœ²ç»™ Objective-C ä¹Ÿè¢«åŠ ä¸Šäº† @objcã€‚è€Œå¤§é‡ @objc ä¼šå¯¼è‡´äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°çš„å¢åŠ ã€‚ 2.ç°åœ¨çš„æƒ…å†µï¼ˆSwift 4ï¼‰ï¼ˆ1ï¼‰åœ¨ Swift 4 ä¸­éšå¼ @objc è‡ªåŠ¨æ¨æ–­åªä¼šå‘ç”Ÿåœ¨ä¸‹é¢è¿™ç§å¿…é¡»è¦ä½¿ç”¨ @objc çš„æƒ…å†µï¼š è¦†ç›–çˆ¶ç±»çš„ Objective-C æ–¹æ³• ç¬¦åˆä¸€ä¸ª Objective-C çš„åè®® ï¼ˆ2ï¼‰å¤§å¤šæ•°åœ°æ–¹å¿…é¡»æ‰‹å·¥æ˜¾ç¤ºåœ°åŠ ä¸Š @objcã€‚1234class MyClass: NSObject &#123; @objc func print() &#123; &#125; //æ˜¾ç¤ºçš„åŠ ä¸Š @objc @objc func show() &#123; &#125; //æ˜¾ç¤ºçš„åŠ ä¸Š @objc&#125; ï¼ˆ3ï¼‰å¦‚æœåœ¨ç±»å‰åŠ ä¸Š @objcMembersï¼Œé‚£ä¹ˆå®ƒã€å®ƒçš„å­ç±»ã€æ‰©å±•é‡Œçš„æ–¹æ³•éƒ½ä¼šéšå¼çš„åŠ ä¸Š @objcã€‚123456789@objcMembersclass MyClass: NSObject &#123; func print() &#123; &#125; //åŒ…å«éšå¼çš„ @objc func show() &#123; &#125; //åŒ…å«éšå¼çš„ @objc&#125; extension MyClass &#123; func baz() &#123; &#125; //åŒ…å«éšå¼çš„ @objc&#125; ï¼ˆ4ï¼‰å¦‚æœåœ¨æ‰©å±•ï¼ˆextensionï¼‰å‰åŠ ä¸Š @objcï¼Œé‚£ä¹ˆè¯¥æ‰©å±•é‡Œçš„æ–¹æ³•éƒ½ä¼šéšå¼çš„åŠ ä¸Š @objcã€‚123456class SwiftClass &#123; &#125; @objc extension SwiftClass &#123; func foo() &#123; &#125; //åŒ…å«éšå¼çš„ @objc func bar() &#123; &#125; //åŒ…å«éšå¼çš„ @objc&#125; ï¼ˆ5ï¼‰å¦‚æœåœ¨æ‰©å±•ï¼ˆextensionï¼‰å‰åŠ ä¸Š @nonobjcï¼Œé‚£ä¹ˆè¯¥æ‰©å±•é‡Œçš„æ–¹æ³•éƒ½ä¸ä¼šéšå¼çš„åŠ ä¸Š @objcã€‚12345678@objcMembersclass MyClass : NSObject &#123; func wibble() &#123; &#125; //åŒ…å«éšå¼çš„ @objc&#125; @nonobjc extension MyClass &#123; func wobble() &#123; &#125; //ä¸ä¼šåŒ…å«éšå¼çš„ @objc&#125;","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"ç§»åŠ¨ç«¯ iOS å¹´ç»ˆå·¥ä½œæ€»ç»“ - çº¯å¹²è´§è¯·è‡ªå¤‡é…’æ°´","slug":"iOS 2017","date":"2018-02-26T15:56:27.000Z","updated":"2018-11-15T15:29:48.050Z","comments":true,"path":"2018/02/26/iOS 2017/","link":"","permalink":"https://reversescale.github.io/2018/02/26/iOS 2017/","excerpt":"æ—¶é—´åŒ†åŒ†ï¼Œä¸€è½¬çœ¼ 2017 å¹´å·²ç»è¿‡å»äº†ï¼Œè¿™ä¸€å¹´ä¾æ—§åœ¨ä¸æ–­å­¦ä¹ ï¼Œåšç§¯è€Œè–„å‘~","text":"æ—¶é—´åŒ†åŒ†ï¼Œä¸€è½¬çœ¼ 2017 å¹´å·²ç»è¿‡å»äº†ï¼Œè¿™ä¸€å¹´ä¾æ—§åœ¨ä¸æ–­å­¦ä¹ ï¼Œåšç§¯è€Œè–„å‘~ ä¸»é¢˜ï¼šå‘å±• å†…å®¹å¤§çº²è§‚ç‚¹ï¼š Swift å‘å±•è§‚ ReactNative å‘å±•è§‚ è¿›é˜¶ï¼š æ¨¡å—åŒ– Pods ä¾èµ–åº“åŠç»„ä»¶åŒ– ç¯å¢ƒè‡ªåŠ¨åˆ‡æ¢ + è‡ªåŠ¨åŒ–æ‰“åŒ…æµ‹è¯• + çº¿ä¸Šè´¨é‡ç›‘æ§ ç®¡ç†ï¼š å›¢é˜Ÿæ ¸å¿ƒç»„æˆæ¶æ„ ç¡¬ä»¶è®¾å¤‡æŠ•å…¥ ä¾‹ä¼šå’Œæ–‡æ¡£åŒ– ç»„ç»‡ CodeReview å·¥å…·ï¼š Gitlab åŠ Git ç›¸å…³è§„èŒƒ Sketch è®¾è®¡å·¥å…· + Zeplin æ ‡æ³¨å·¥å…· æˆæœï¼š Github åŸåˆ›å¼€æºé¡¹ç›® 90+ï¼Œå…±è®¡ 400+ è´¡çŒ®åŠ› å‚ä¸ç»´æŠ¤å¼€æºé¡¹ç›® fastlane 20.5kï¼ˆè‡³2018.02.08ï¼‰ å®Œæˆ Swifter åŠŸèƒ½å±•ç¤ºåº”ç”¨ç ”å‘ è§‚ç‚¹Swift å‘å±•è§‚Apple åœ¨ WWDC 2017 å¤§ä¼šä¸Šå‘å¸ƒ Swift 4ï¼ŒSwift 4 å¸¦æ¥äº†æ›´å¿«ã€æ›´å®¹æ˜“ä½¿ç”¨çš„ String å®ç°ï¼Œå¯ä»¥ä¿æŒ Unicode çš„æ­£ç¡®æ€§ï¼Œå¹¶å¢åŠ å¯¹åˆ›å»ºã€ä½¿ç”¨å¹¿å‘Šç®¡ç†å­ä¸²çš„æ”¯æŒï¼Œå®ƒæé«˜äº†å¼€å‘è€…åˆ›å»ºã€ä½¿ç”¨å’Œç®¡ç†é›†åˆç±»å‹çš„èƒ½åŠ›ï¼Œå®ƒæ”¯æŒç»“æ„åŒ–æšä¸¾ç±»å‹çš„å½’æ¡£å¹¶å…è®¸å¯¹å¤–éƒ¨æ ¼å¼è¿›è¡Œç±»å‹å®‰å…¨çš„åºåˆ—åŒ–ï¼ŒåŒ…æ‹¬ JSON å’Œ plistã€‚ æ—¢ç„¶æåˆ°äº† WWDCï¼ˆhttps://developer.apple.com/wwdc/ï¼‰ï¼Œç›¸ä¿¡ Swift çš„å‘å±•è§‚å°±æ²¡æœ‰å¤ªå¤šäº‰è®®äº†ï¼Œè¿‘å‡ å¹´æ‰€æœ‰çš„å®˜æ–¹æ¼”ç¤ºè§†é¢‘éƒ½æ˜¯åŸºäº Swift æ¥æ¼”ç¤ºçš„ï¼Œä½œä¸º iOS çš„å¼€å‘äººå‘˜å¯èƒ½ä¼šç»§ç»­ä½¿ç”¨ Objective-Cï¼Œä½†æ˜¯å¦‚æœå¯¹ Swift æ˜¯æŒæŠ—æ‹’å¿ƒç†çš„ï¼Œé‚£æ— ç–‘å¯¹è‡ªèº«å‘å±•æ˜¯ä¸è´Ÿè´£ä»»çš„ã€‚ Apple äº 2017 å¹´å®£å¸ƒ Swift 5 åä¼šé”å®š ABIï¼Œä¹Ÿå°±æ ‡å¿—ç€è¿™é—¨è¯­è¨€ä¼šæ­£å¼ä½œä¸º iOSã€macOS çš„ä¸»æµè¯­è¨€ã€‚åŒå¹´ 12 æœˆï¼ŒApple å®£å¸ƒä¼šç€æ‰‹è®¡åˆ’ iOS å’Œ macOS çš„åº”ç”¨å±‚é¢åˆå¹¶ã€‚é…åˆ Apple ä¸€ç›´ä»¥æ¥çš„å¯¹ Swift å¹¼å„¿æ•™è‚²ä»¥åŠåœ¨ AIã€AR ç­‰é¢†åŸŸçš„æ¨è¿›ï¼Œä¸éš¾çœ‹å‡ºè¿™é—¨è¯­è¨€æœªæ¥çš„å‘å±•æ½œåŠ›ã€‚ ReactNative å‘å±•è§‚æåˆ° ReactNative å°±ä¸å¾—ä¸è¯´ FaceBookï¼Œå…¶å®ç°åœ¨ä¸»æµçš„ç§»åŠ¨ç«¯å¼€å‘è§„èŒƒå°±æ˜¯è¿™å®¶å…¬å¸è®¾è®¡çš„ã€‚å½“ç„¶é™¤äº† React ç¤¾åŒºç”Ÿæ€åœˆçš„åŠ æŒå’Œ Facebook çš„å¤§åŠ›æ¨å¹¿ä»¥å¤–ï¼Œå¦å¤–ä¸€ä¸ªæœ€ä¸»è¦çš„åŸå› å°±æ˜¯å…¶åœ¨å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½æ–¹é¢å–å¾—äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å¹³è¡¡ï¼š å¼€å‘æ•ˆç‡é€šè¿‡ JS å·¥ç¨‹å®è·µï¼Œé€»è¾‘è·¨å¹³å°å¤ç”¨å¾—åˆ°æå¤§æå‡ æ€§èƒ½åˆ™é€šè¿‡å…¨ Native çš„ UI å±‚å¾—åˆ°æ»¡è¶³ è·¨å¹³å°è¿™ä¸€ç‰¹æ€§å¯¹äºå°å…¬å¸çš„å¸å¼•åŠ›åˆ™æ›´ä½“ç°åœ¨èŠ‚çº¦ç”¨äººæˆæœ¬ä¸Šï¼Œå¯¹ç®€å•çš„éœ€æ±‚èƒ½åšåˆ°ä¸€ç«¯å¤šç”¨ï¼Œéšæ—¶å˜æ›´çº¿ä¸Šå†…å®¹ã€‚ å¯¹äºå·²ç»æ­£åœ¨è¿è¥çš„é¡¹ç›®ï¼Œå®Œå…¨åˆ‡ ReactNative æ€»æ˜¯ä¸å¤ªç°å®ï¼Œå…¶å®å¤§å¤šæ•°å‚å•†çš„æ–¹æ³•æ˜¯å¯¹è¿è¥å¼•æµæœ‰å½±å“çš„å…³é”®æ€§é¡µé¢ï¼ˆå¦‚ï¼šé¦–é¡µï¼‰è¿›è¡Œ ReactNative æ”¹ç‰ˆï¼Œè¿™é‡Œå¯èƒ½å°±ä¼šå¼•å…¥ä¸€ä¸ª æ¨¡å—åŒ– çš„æ¦‚å¿µï¼Œåé¢ä¼šæœ‰è®²åˆ°ã€‚ å¯¹äºæƒ³è¦å…¥é—¨çš„æœ‹å‹ï¼Œæ…•è¯¾ç½‘ä¸Šä¸€ä¸ªå…¥é—¨çº§ ReactNative æ•™å­¦è¿˜ä¸é”™ã€‚ æ•™å­¦è§†é¢‘ï¼šhttp://coding.imooc.com/class/89.html æºç ï¼šhttps://github.com/crazycodeboy/GitHubPopular/ è¿›é˜¶æ¨¡å—åŒ–æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–æˆ‘ååŠå¹´ä¸€ç›´åœ¨è°ƒç ”çš„è¯¾é¢˜ï¼Œå¯¹è¿™äº›çš„ç ”ç©¶ä¹Ÿç»™æˆ‘å¸¦æ¥äº†ä»é‡å˜åˆ°è´¨å˜çš„æå‡ã€‚ ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ï¼Ÿ é‚£ä¹ˆä»€ä¹ˆæ˜¯æ¨¡å—åŒ–å‘¢ï¼Ÿã€Š Java åº”ç”¨æ¶æ„è®¾è®¡ï¼šæ¨¡å—åŒ–æ¨¡å¼ä¸ OSGi ã€‹ä¸€ä¹¦ä¸­å¯¹å®ƒçš„å®šä¹‰æ˜¯ï¼šæ¨¡å—åŒ–æ˜¯ä¸€ç§å¤„ç†å¤æ‚ç³»ç»Ÿåˆ†è§£ä¸ºæ›´å¥½çš„å¯ç®¡ç†æ¨¡å—çš„æ–¹å¼ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠè½¯ä»¶çœ‹åšæ˜¯ä¸€è¾†æ±½è½¦ï¼Œå¼€å‘ä¸€æ¬¾è½¯ä»¶çš„è¿‡ç¨‹å°±æ˜¯ç”Ÿäº§ä¸€è¾†æ±½è½¦çš„è¿‡ç¨‹ã€‚ä¸€è¾†æ±½è½¦ç”±è½¦æ¶ã€å‘åŠ¨æœºã€å˜æ•°ç®±ã€è½¦è½®ç­‰ä¸€ç³»åˆ—æ¨¡å—ç»„æˆï¼›åŒæ ·ï¼Œä¸€æ¬¾å¤§å‹å•†ä¸šè½¯ä»¶ä¹Ÿæ˜¯ç”±å„ä¸ªä¸åŒçš„æ¨¡å—ç»„æˆçš„ã€‚ æ±½è½¦çš„è¿™äº›æ¨¡å—æ˜¯ç”±ä¸åŒçš„å·¥å‚ç”Ÿäº§çš„ï¼Œä¸€è¾† BMW çš„å‘åŠ¨æœºå¯èƒ½æ˜¯ç”±ä½äºå¾·å›½çš„å·¥å‚ç”Ÿäº§çš„ï¼Œå®ƒçš„è‡ªåŠ¨å˜æ•°ç®±å¯èƒ½æ˜¯ Jatcoï¼ˆä¸–ç•Œä¸‰å¤§å˜é€Ÿç®±å‚å•†ä¹‹ä¸€ï¼‰ä½äºæ—¥æœ¬çš„å·¥å‚ç”Ÿäº§çš„ï¼Œè½¦è½®å¯èƒ½æ˜¯ä¸­å›½çš„å·¥å‚ç”Ÿäº§çš„ï¼Œæœ€åäº¤ç»™åæ™¨å®é©¬çš„å·¥å‚ç»Ÿä¸€ç»„è£…æˆä¸€è¾†å®Œæ•´çš„æ±½è½¦ã€‚è¿™å°±ç±»ä¼¼äºæˆ‘ä»¬åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸé‡Œè¯´çš„å¤šå›¢é˜Ÿå¹¶è¡Œå¼€å‘ï¼Œæœ€åå°†å„ä¸ªå›¢é˜Ÿå¼€å‘çš„æ¨¡å—ç»Ÿä¸€æ‰“åŒ…æˆæˆ‘ä»¬å¯ä½¿ç”¨çš„ App ã€‚ ä¸€æ¬¾å‘åŠ¨æœºã€ä¸€æ¬¾å˜æ•°ç®±éƒ½ä¸å¯èƒ½åªåº”ç”¨äºä¸€ä¸ªè½¦å‹ï¼Œæ¯”å¦‚åŒä¸€æ¬¾ Jatco çš„ 6AT è‡ªåŠ¨å˜é€Ÿç®±æ—¢å¯èƒ½è¢«å®‰è£…åœ¨ BMW çš„è½¦å‹ä¸Šï¼Œä¹Ÿå¯èƒ½è¢«å®‰è£…åœ¨ Mazda çš„è½¦å‹ä¸Šã€‚è¿™å°±å¦‚åŒè½¯ä»¶å¼€å‘é¢†åŸŸé‡Œçš„æ¨¡å—é‡ç”¨ã€‚ åˆ°äº†å†¬å¤©ï¼Œç‰¹åˆ«æ˜¯åœ¨åŒ—æ–¹æˆ‘ä»¬å¯èƒ½éœ€è¦å¼€ç€è½¦èµ°é›ªè·¯ï¼Œä¸ºäº†å®‰å…¨èµ·è§å¾€å¾€æˆ‘ä»¬ä¼šå°†æ±½è½¦çš„å…¬è·¯èƒå‡çº§ä¸ºé›ªåœ°èƒï¼›è½®èƒå¯ä»¥å¾ˆè½»æ˜“çš„æ›´æ¢ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸè°ˆåˆ°çš„ä½è€¦åˆã€‚ä¸€ä¸ªæ¨¡å—çš„å‡çº§æ›¿æ¢ä¸ä¼šå½±å“åˆ°å…¶å®ƒæ¨¡å—ï¼Œä¹Ÿä¸ä¼šå—å…¶å®ƒæ¨¡å—çš„é™åˆ¶ï¼›åŒæ—¶è¿™ä¹Ÿç±»ä¼¼äºæˆ‘ä»¬åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸæåˆ°çš„å¯æ’æ‹”ã€‚ 20180906 æ›´æ–° å†è°ˆæ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ã€æ’ä»¶åŒ–å®šä¹‰ æ¨¡å—åŒ–ï¼šä¸€ä¸ªå¯å®ç°çš„å•å…ƒï¼Œæ ¸å¿ƒæ˜¯å†…èšå’Œåˆ†ç¦»ï¼Œå¦‚ç™»å½•æ¨¡å—çš„æŠ½ç¦» ç»„ä»¶åŒ–ï¼šä¹Ÿç§°æ„ä»¶ï¼Œæœ€ç†æƒ³æƒ…å†µä¸‹æ˜¯ä¸ä¸šåŠ¡æ— å…³ï¼Œå¼ºè°ƒå¤ç”¨ï¼Œå¦‚å¯å¤ç”¨ Library æ’ä»¶åŒ–ï¼šä¸ç»„ä»¶åŒ–ä¸åŒï¼Œç»„ä»¶åŒ–åœ¨ç¼–è¯‘æ—¶åˆå¹¶æ¨¡å—ï¼Œæ’ä»¶åŒ–åœ¨è¿è¡Œæ—¶åˆå¹¶æ¨¡å—ï¼Œå¦‚å¯å®ç°è¿œç¨‹æ›¿æ¢åŠŸèƒ½ æ¨¡å—åŒ–åˆ†å±‚è®¾è®¡ ä¸Šé¢çš„ç±»æ¯”å¾ˆæ¸…æ™°çš„è¯´æ˜çš„æ¨¡å—åŒ–å¸¦æ¥çš„å¥½å¤„ï¼š å¤šå›¢é˜Ÿå¹¶è¡Œå¼€å‘æµ‹è¯•ï¼› æ¨¡å—é—´è§£è€¦ã€é‡ç”¨ï¼› å¯å•ç‹¬ç¼–è¯‘æ‰“åŒ…æŸä¸€æ¨¡å—ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚ åœ¨ã€Šå®‰å±…å®¢ Android é¡¹ç›®æ¶æ„æ¼”è¿›ã€‹è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½œè€…ä»‹ç»äº†å®‰å±…å®¢ Android ç«¯çš„æ¨¡å—åŒ–è®¾è®¡æ–¹æ¡ˆï¼Œè¿™é‡Œä½œè€…è¿˜æ˜¯æ‹¿å®ƒæ¥ä¸¾ä¾‹ã€‚ä½†é¦–å…ˆè¦å¯¹æœ¬æ–‡ä¸­çš„ç»„ä»¶å’Œæ¨¡å—åšä¸ªåŒºåˆ«å®šä¹‰ï¼š ç»„ä»¶ï¼šæŒ‡çš„æ˜¯å•ä¸€çš„åŠŸèƒ½ç»„ä»¶ï¼Œå¦‚åœ°å›¾ç»„ä»¶ï¼ˆMapSDKï¼‰ã€æ”¯ä»˜ç»„ä»¶ï¼ˆAnjukePayï¼‰ã€è·¯ç”±ç»„ä»¶ï¼ˆRouterï¼‰ç­‰ç­‰ï¼› æ¨¡å—ï¼šæŒ‡çš„æ˜¯ç‹¬ç«‹çš„ä¸šåŠ¡æ¨¡å—ï¼Œå¦‚æ–°æˆ¿æ¨¡å—ï¼ˆNewHouseModuleï¼‰ã€äºŒæ‰‹æˆ¿æ¨¡å—ï¼ˆSecondHouseModuleï¼‰ã€å³æ—¶é€šè®¯æ¨¡å—ï¼ˆInstantMessagingModuleï¼‰ç­‰ç­‰ï¼›æ¨¡å—ç›¸å¯¹äºç»„ä»¶æ¥è¯´ç²’åº¦æ›´å¤§ã€‚ é’ˆå¯¹æ¨¡å—åŒ–ä½œè€…çš„å›¢é˜Ÿä¹Ÿå®šä¹‰äº†ä¸€äº›è‡ªå·±çš„æ¸¸æˆè§„åˆ™: å¯¹äº Business Module Layerï¼Œå„ä¸šåŠ¡æ¨¡å—ä¹‹é—´ä¸å…è®¸å­˜åœ¨ç›¸äº’ä¾èµ–å…³ç³»ï¼Œå®ƒä»¬ä¹‹é—´çš„è·³è½¬é€šè®¯é‡‡ç”¨è·¯ç”±æ¡†æ¶ Router æ¥å®ç°ï¼ˆåé¢ä¼šä»‹ç» Router æ¡†æ¶çš„å®ç°ï¼‰; å¯¹äº Business Component Layerï¼Œå•ä¸€ä¸šåŠ¡ç»„ä»¶åªèƒ½å¯¹åº”æŸä¸€é¡¹å…·ä½“çš„ä¸šåŠ¡ï¼Œä¸ªæ€§åŒ–éœ€æ±‚å¯¹å¤–éƒ¨æä¾›æ¥å£è®©è°ƒç”¨æ–¹å®šåˆ¶; åˆç†æ§åˆ¶å„ç»„ä»¶å’Œå„ä¸šåŠ¡æ¨¡å—çš„æ‹†åˆ†ç²’åº¦ï¼Œå¤ªå°çš„å…¬æœ‰æ¨¡å—ä¸è¶³ä»¥æ„æˆå•ç‹¬ç»„ä»¶æˆ–è€…æ¨¡å—çš„ï¼Œä½œè€…å…ˆæ”¾åˆ°ç±»ä¼¼äº CommonBusiness çš„ç»„ä»¶ä¸­ï¼Œåœ¨åæœŸä¸æ–­çš„é‡æ„è¿­ä»£ä¸­è§†æƒ…å†µè¿›è¡Œè¿›ä¸€æ­¥çš„æ‹†åˆ†; ä¸Šå±‚çš„å…¬æœ‰ä¸šåŠ¡æˆ–è€…åŠŸèƒ½æ¨¡å—å¯ä»¥é€æ­¥ä¸‹æ”¾åˆ°ä¸‹å±‚ï¼Œåˆç†æŠŠæ¡å¥½åº¦å°±å¥½ï¼› å„ Layer é—´ä¸¥ç¦åå‘ä¾èµ–ï¼Œæ¨ªå‘ä¾èµ–å…³ç³»ç”±å„ä¸šåŠ¡ Leader å’ŒæŠ€æœ¯å°ç»„å•†è®¨å†³å®šã€‚ è‡ªä» Oasis Feng åœ¨å»å¹´çš„ MDCC2016 ä¸Šåˆ†äº«äº†æ¨¡å—åŒ–çš„ç»éªŒåï¼Œæ¨¡å—åŒ–åœ¨ Android ç¤¾åŒºè¶Šæ¥è¶Šå¤šçš„è¢«æèµ·ã€‚ä½œè€…è‡ªç„¶ä¹Ÿä¸è½ä¿—çš„å»åšäº†ä¸€äº›ç ”ç©¶å’Œæ¢ç´¢ã€‚å®‰å±…å®¢ç°åœ¨é¢ä¸´å¾ˆå¤šé—®é¢˜ï¼šä¾‹å¦‚å…¨é‡ç¼–è¯‘æ—¶é—´å¤ªé•¿ï¼ˆæˆ‘è¿™å°13æ¬¾çš„ MacBook Pro ä¸Šæ‰“ä¸€æ¬¡åŒ…å¾—èŠ±åå¤šåˆ†é’Ÿï¼‰ï¼›ä¾‹å¦‚æ–°æˆ¿ã€äºŒæ‰‹æˆ¿ã€ç§Ÿæˆ¿ç­‰ç­‰æ¨¡å—é—´è€¦åˆä¸¥é‡ï¼Œä¸åˆ©äºå¤šå›¢é˜Ÿå¹¶è¡Œå¼€å‘æµ‹è¯•ï¼›å¦å¤–åœ¨17å¹´åˆå®‰å±…å®¢é‡æ–°å°†ç§Ÿæˆ¿ App æ¡èµ·æ¨å¹¿ï¼Œå•ç‹¬è®©äººæ¥å¼€å‘ç»´æŠ¤ä¸€ä¸ªä¸‰å¹´å‰çš„é¡¹ç›®å¹¶ä¸åˆ’ç®—ï¼Œæ‰€ä»¥ä½œè€…å¸Œæœ›èƒ½ç›´æ¥ä»ç°åœ¨çš„å®‰å±…å®¢ç”¨æˆ·ç«¯ä¸­æ‹†åˆ†å‡ºç§Ÿæˆ¿æ¨¡å—ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ App å‘å¸ƒä¸Šçº¿ã€‚è¿™æ ·çœ‹æ¥æ¨¡å—åŒ–ä¼¼ä¹æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ æ‰€ä»¥ä½œè€…åšæ¨¡å—åŒ–çš„ç›®çš„å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š ä¸šåŠ¡æ¨¡å—é—´è§£è€¦ å•ä¸ªä¸šåŠ¡æ¨¡å—å•ç‹¬ç¼–è¯‘æ‰“åŒ…ï¼ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦ å¤šå›¢é˜Ÿé—´å¹¶è¡Œå¼€å‘ã€æµ‹è¯• è§£å†³å¥½ç§ŸAppéœ€è¦å•ç‹¬ç»´æŠ¤çš„é—®é¢˜ï¼Œé™ä½ç ”å‘æˆæœ¬ å…³äºæ¨¡å—åŒ–ç»„ä»¶åŒ–çš„ç”ŸåŠ¨è§£è¯»æ¥è‡ªå®‰å±…å®¢ Android ç»„ç»„é•¿å¼ ç£Šçš„åšå®¢ http://baronzhang.com Pods ä¾èµ–åº“åŠç»„ä»¶åŒ–ç»„ä»¶åŒ–ä¸æ¨¡å—åŒ–å®‰å±…å®¢çš„ Android å›¢é˜Ÿå†…éƒ¨æˆç«‹äº†æŠ€æœ¯å°ç»„ï¼ŒåŸºç¡€ç»„ä»¶çš„å¼€å‘æ˜¯æŠ€æœ¯å°ç»„å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†å·¥ä½œï¼›æ¨¡å—åŒ–æ›´å¤šçš„æ˜¯ç°æœ‰çš„æ–¹æ¡ˆå—åˆ°æ¥è‡ªä¸šåŠ¡ä¸Šçš„æŒ‘æˆ˜ä»¥åŠå—åˆ°äº† Oasis Feng åœ¨ MDCC ä¸Šçš„åˆ†äº«å’Œæ•´ä¸ªå¤§ç¯å¢ƒçš„å¯å‘ï¼Œç°åœ¨æ­£å¤„äºè®¾è®¡è§„åˆ’å’Œ Demo å¼€å‘çš„é˜¶æ®µã€‚ ç»„ä»¶åŒ–ç»„ä»¶åŒ–ä¸æ˜¯ä¸ªæ–°æ¦‚å¿µï¼Œé€šä¿—çš„è®²ç»„ä»¶åŒ–å°±æ˜¯åŸºäºå¯é‡ç”¨çš„ç›®çš„ï¼Œå°†ä¸€ä¸ªå¤§çš„è½¯ä»¶ç³»ç»Ÿæ‹†åˆ†æˆä¸€ä¸ªä¸ªç‹¬ç«‹ç»„ä»¶ã€‚ ç»„ä»¶åŒ–çš„å¸¦æ¥çš„å¥½å¤„ä¸è¨€è€Œå–»ï¼š é¿å…é‡å¤é€ è½®å­ï¼ŒèŠ‚çœå¼€å‘ç»´æŠ¤æˆæœ¬ï¼› é™ä½é¡¹ç›®å¤æ‚æ€§ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼› å¤šä¸ªå›¢é˜Ÿå…¬ç”¨åŒä¸€ä¸ªç»„ä»¶ï¼Œåœ¨ä¸€å®šå±‚åº¦ä¸Šç¡®ä¿äº†æŠ€æœ¯æ–¹æ¡ˆçš„ç»Ÿä¸€æ€§ã€‚ ç°åœ¨çš„å®‰å±…å®¢æœ‰æ˜¯ä¸‰ä¸ªä¸šåŠ¡å›¢é˜Ÿï¼šå®‰å±…å®¢ç”¨æˆ· Appã€ç»çºªäºº Appã€é›†å®¢å®¶ Appã€‚ä¸ºäº†é¿å…å„ä¸ªä¸šåŠ¡å›¢é˜Ÿé‡å¤é€ è½®å­ï¼Œå›¢é˜Ÿä¸­ä¹Ÿéœ€è¦æœ‰ä¸€å®šçš„æŠ€æœ¯æ²‰æ·€ï¼Œå› æ­¤ç»„ä»¶åŒ–æ˜¯å¿…é¡»çš„ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦æä¾›æ›´å¤šçš„ã€èŒèƒ½å•ä¸€ã€æ€§èƒ½æ›´ä¼˜çš„ç»„ä»¶ä¾›ä¸šåŠ¡å›¢é˜Ÿä½¿ç”¨ã€‚æ ¹æ®ä¸šåŠ¡ç›¸å…³æ€§ï¼Œæˆ‘ä»¬å°†è¿™äº›ç»„ä»¶åˆ†ä¸ºï¼šåŸºç¡€ç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶ã€‚ é˜¿é‡Œæ¶æ„ç»„åŒæ ·æ˜¯ç»„ä»¶åŒ–çš„å…ˆé©±è€…ï¼Œä»¥ä¸‹æ˜¯é˜¿é‡Œæ¶æ„ç»„ Evans å¯¹ç»„ä»¶åŒ–çš„è§‚ç‚¹ï¼š é¦–å…ˆï¼Œæˆ‘çš„ç†è§£åˆ†å—åŒ–åº”è¯¥æ˜¯æœ‰å››ç§ï¼Œç»„ä»¶åŒ–+æ¨¡å—åŒ–+æ’ä»¶åŒ–+è§£è€¦ ç¬¬ä¸€ï¼Œç»„ä»¶å’Œç»„ä»¶å…¶å®æ˜¯æ²¡æœ‰ä»€ä¹ˆé¬¼æ˜ç¡®çš„çº¦æŸ ï¼Œå› ä¸ºç»„ä»¶ä¸€èˆ¬éƒ½æ˜¯å•ç‹¬å¼€å‘ã€å•ç‹¬æµ‹è¯•ï¼Œä¸èƒ½ç›´æ¥æ”¾åˆ°ä¸»é¡¹ç›®ä¸­å¼€å‘ï¼Œæµ‹è¯•ä¹Ÿæ˜¯å•ç‹¬é’ˆå¯¹æ€§çš„æµ‹è¯• ï¼ˆé‡Œé¢æ¶‰åŠåˆ°çŸ­é“¾+ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ+â€¦.ï¼‰ ç¬¬äºŒï¼Œæ¨¡å—åŒ–æˆ‘çš„ç†è§£æ˜¯ï¼Œæ€ä¹ˆåšå¥½projectçš„æ¨¡å—åŒ–çš„æ‹†åˆ†ï¼Œæˆ‘ä»¬å†…éƒ¨ä¸€ç›´åœ¨è¯´è¶Šåº•å±‚çš„æ¨¡å—ï¼Œåº”è¯¥è¶Šç¨³å®šï¼Œè¶ŠæŠ½è±¡ï¼Œè¶Šå…·æœ‰é«˜å¤ç”¨åº¦ï¼Œä½†æ˜¯å…¶å®æœ‰ä¸€ä¸ªå£å’å°±æ˜¯æ€ä¹ˆå»æå‡æ¨¡å—çš„å¤ç”¨åº¦ï¼Œæ€ä¹ˆå»å¿«é€Ÿå…·å¤‡å¤ç”¨æ€§é«˜äºä»£ç å¤ç”¨æ€§ï¼Œè¿™æˆ‘ä»¬å°±è¦åšå¥½æ¯ä¸ªæ¨¡å—åªåšå¥½ä¸€ä»¶äº‹æƒ…ï¼Œæ¨¡å—åŒ–ç»“æ„è¦æ›´åŠ æ¸…æ™°ï¼Œæ¯ä¸ªæ¨¡å—éƒ½åªåšä¸€ä»¶äº‹æƒ…ï¼Œå…·æœ‰è‰¯å¥½çš„å»¶å±•æ€§å’Œæ‹“å±•æ€§ï¼Œä½†æ„¿ä¸è¦å‡ºç°ä¸‹å±‚æ¨¡å—ä¾èµ–ä¸Šå±‚æ¨¡å—çš„ç°è±¡ï¼Œä¸šåŠ¡æ¨¡å—ä¹‹é—´ä¹Ÿå°½é‡ä¸è¦è€¦åˆã€‚å¥½å¤„æ˜¯åŒæ ·çš„åŠŸèƒ½æ¨¡å—ï¼Œå¯ä»¥åœ¨å¤šä¸ªappä¸­å¤ç”¨ï¼Œä¸šåŠ¡éš”ç¦»äº†è·¨å›¢é˜Ÿå¼€å‘ä»£ç æ§åˆ¶å’Œç‰ˆæœ¬é£é™©éƒ½å˜å°äº†ã€‚ ç¬¬ä¸‰ï¼Œè§£è€¦å…¶å®ç†è§£å¾ˆç®€å•å°±æ˜¯åœ¨åŸºäºæ¨¡å—è®¾è®¡åŸåˆ™ä¸Š, è®©æ¨¡å—ä¹‹é—´æ²¡æœ‰å¾ªç¯ä¾èµ–, è®©ä¸šåŠ¡æ¨¡å—ä¹‹é—´è§£é™¤ä¾èµ–ï¼Œä¸ç›¸äº’è°ƒç”¨ã€‚ æ¦‚å†µçš„ç†è§£å°±æ˜¯ ç»„ä»¶åŒ–ï¼šå•ç‹¬å¼€å‘ã€æµ‹è¯•ã€ç»´æŠ¤çš„å¼€å‘æ¨¡å¼ æ¨¡å—åŒ–ï¼šå¯¹ Project è¿›è¡Œæ‹†åˆ†ï¼Œæ ¹æ®ä¸šåŠ¡ã€åŠŸèƒ½è¿›è¡Œåˆ†ç±» è§£è€¦ï¼šæ¨¡å—è®¾è®¡åŸåˆ™ä¸Š, è®©æ¨¡å—ä¹‹é—´æ²¡æœ‰éå¿…è¦ä¾èµ– è€Œç»„ä»¶åŒ–ç°åœ¨ä¸»æµçš„åšæ³•æ˜¯é€šè¿‡ CocoaPods å¯¹è¦åŒ…è£…çš„å†…å®¹è¿›è¡Œæ‰“åŒ…ï¼Œæäº¤åˆ°å…¬å¸çš„ç§æœ‰åº“ï¼ˆå¼€æºé¡¹ç›®æ˜¯å…¬æœ‰åº“ï¼‰ï¼Œè¿›è¡Œæ—¥å¸¸ç»´æŠ¤åŠå¼€å‘ã€‚ ç¯å¢ƒè‡ªåŠ¨åˆ‡æ¢ + è‡ªåŠ¨åŒ–æ‰“åŒ…æµ‹è¯• + çº¿ä¸Šè´¨é‡ç›‘æ§ç¯å¢ƒè‡ªåŠ¨åˆ‡æ¢ Debug å’Œ Release ä»…ä»…æ˜¯ç¼–è¯‘é€‰é¡¹çš„ä¸åŒï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦åŒºåˆ† Debug å’Œ Release ç‰ˆæœ¬å‘¢ï¼Ÿ Debug å’Œ Releaseï¼Œä¸»è¦æ˜¯é’ˆå¯¹å…¶é¢å‘çš„ç›®æ ‡ä¸åŒçš„è€Œè¿›è¡ŒåŒºåˆ†çš„ã€‚ Debug é€šå¸¸ç§°ä¸ºè°ƒè¯•ç‰ˆæœ¬ï¼Œé€šè¿‡ä¸€ç³»åˆ—ç¼–è¯‘é€‰é¡¹çš„é…åˆï¼Œç¼–è¯‘çš„ç»“æœé€šå¸¸åŒ…å«è°ƒè¯•ä¿¡æ¯ï¼Œè€Œä¸”ä¸åšä»»ä½•ä¼˜åŒ–ï¼Œä¸ºå¼€å‘äººå‘˜æä¾›å¼ºå¤§çš„åº”ç”¨ç¨‹åºè°ƒè¯•èƒ½åŠ›ã€‚ è€Œ Release é€šå¸¸ç§°ä¸ºå‘å¸ƒç‰ˆæœ¬ï¼Œæ˜¯ä¸ºç”¨æˆ·ä½¿ç”¨çš„ï¼Œä¸€èˆ¬å®¢æˆ·ä¸å…è®¸åœ¨å‘å¸ƒç‰ˆæœ¬ä¸Šè¿›è¡Œè°ƒè¯•ã€‚æ‰€ä»¥ä¸ä¿å­˜è°ƒè¯•ä¿¡æ¯ï¼ŒåŒæ—¶ï¼Œå®ƒå¾€å¾€è¿›è¡Œäº†å„ç§ä¼˜åŒ–ï¼Œä»¥æœŸè¾¾åˆ°ä»£ç æœ€å°å’Œé€Ÿåº¦æœ€ä¼˜ã€‚ä¸ºç”¨æˆ·çš„ä½¿ç”¨æä¾›ä¾¿åˆ©ã€‚ å¯¹äºä¸€äº›ä¼ä¸šç‰ˆåº”ç”¨æˆ–è€…æœ‰å†…éƒ¨æµ‹è¯•çš„éœ€æ±‚å…¶å®è¿˜å¯ä»¥æ–°å¢ Beta ç‰ˆï¼Œæ”¶é›†æ ¸å¿ƒç”¨æˆ·çš„å»ºè®®æˆ–è€…æµ‹è¯•æ–°å¼€å‘çš„åŠŸèƒ½æ¨¡å—ï¼Œå¯¹åé¦ˆåšå‡ºè¿…é€Ÿååº”ï¼Œçµæ´»æ§åˆ¶ã€‚ ç”±äºä¹‹å‰å¼•å…¥äº†ç»„ä»¶åŒ–å¼€å‘æ¨¡å¼ï¼Œæ‰€æœ‰æˆ‘åˆåŠ å…¥äº† UnitTestï¼ˆå•å…ƒæµ‹è¯•ï¼‰æ¨¡å¼ï¼Œåªè¦ç”¨äºå¯¹ç»„ä»¶çš„åˆ†ç¦»åŒ–æµ‹è¯•ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚ åˆ‡æ¢ç¯å¢ƒçš„åŒæ—¶ä¼šå¯¹åº”åˆ‡æ¢åº”ç”¨çš„å›¾æ ‡ï¼Œèƒ½æœ‰æ•ˆé¿å…æµ‹è¯•ç¯èŠ‚ä¸­çš„ç¯å¢ƒæ··æ·†å’Œé™ä½è¾¨åˆ«æˆæœ¬ã€‚ è‡ªåŠ¨åŒ–æ‰“åŒ…æµ‹è¯• å…³äºè‡ªåŠ¨åŒ–æ‰“åŒ…å°±ä¸å¾—ä¸è¯´åœ¨åˆ›ä¸šå…¬å¸çš„ç»å†ï¼Œé‚£æ—¶å¼€å‘ä»»åŠ¡é‡ï¼Œææµ‹å‰å¸¸å¸¸åŠ ç­åˆ°æ™šä¸Š 12 ç‚¹ï¼Œå°±ç®— bug ä¿®å®Œï¼Œä¹Ÿè¦ç­‰åŠä¸ªå°æ—¶çœ‹ç€ Xcode ä¸æ…Œä¸å¿™çš„æ‰“åŒ…å®Œæˆä¸Šä¼ æµ‹è¯•å¹³å°å‘é‚®ä»¶æ‰èƒ½å®‰å¿ƒå›å®¶ã€‚ é‰´äºè¿™ç§æƒ¨ç—›ç»å†ï¼Œåˆ©ç”¨é—²æš‡æ—¶é—´å°±æäº†ä¸ªè‡ªåŠ¨æ‰“åŒ…è„šæœ¬ï¼ŒåæœŸåˆæ•´ç†ä¸€éå¹¶é€‚é… Xcode 8.2 ä¹‹åçš„ç‰ˆæœ¬ã€‚ åšçš„äº†ä¸‰æ­¥é…ç½®ï¼Œæœç»æ±¡æŸ“ï¼Œä¸€è¡Œå‘½ä»¤è‡ªåŠ¨ä¸Šä¼ ã€‚ ä¹Ÿæ˜¯é‰´äº Xcode ç‰ˆæœ¬å‡çº§åçš„è‹¦é€¼é€‚é…ç»å†ï¼Œæœ€ç»ˆé€‰æ‹©äº†å¼€æºçš„ fastlane åŒ…ï¼Œä»æ­¤æ­ä¸Šäº†ç»„ç»‡çš„å°ç«è½¦ï¼Œé…åˆ Testflight ç»ˆäºå¯ä»¥æ”¾å¿ƒçš„ç©è€äº†â€¦ FastLane æ˜¯ä¸€ç§é…ç½® iOS å’Œ Android è‡ªåŠ¨åŒ– Beta éƒ¨ç½²å’Œå‘å¸ƒçš„æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒå¯ä»¥ç®€åŒ–ä¸€äº›ä¹å‘³ã€å•è°ƒã€é‡å¤çš„å·¥ä½œï¼Œåƒæˆªå›¾ã€ä»£ç ç­¾åä»¥åŠå‘å¸ƒ Appã€‚ä¹Ÿèƒ½æ— ç¼è¡”æ¥è’²å…¬è‹±ã€Firç­‰æµ‹è¯•å¹³å°ï¼Œè¿™é…¸çˆ½â€¦ çœæ—¶ï¼šæ¯æ¬¡å°†æ–°ç‰ˆæœ¬æ¨é€åˆ°å•†åº—æˆ–Betaæµ‹è¯•æœåŠ¡æ—¶ï¼Œéƒ½å¯èŠ‚çœæ—¶é—´ã€‚ é›†æˆï¼šé›†æˆå½“å‰å¼€å‘ç¯å¢ƒä¸­æ‰€æœ‰å­˜åœ¨çš„å·¥å…·å’ŒæœåŠ¡ã€‚ å¼€æºï¼š100%åŸºäºMITè®¸å¯å¼€æºã€‚ ç®€å•ï¼šç®€å•çš„è®¾ç½®åŠ©æ‰‹ï¼Œå‡ åˆ†é’Ÿé…ç½®å³å¯ä½¿ç”¨ã€‚ è¿è¡Œï¼šåŸºäºä½ çš„appå’Œæ•°æ®ï¼Œè¿è¡Œåœ¨æœ¬åœ°æœºå™¨ä¸Šã€‚ CIï¼šé›†æˆå‡ ä¹æ‰€æœ‰CIç³»ç»Ÿã€‚ æ”¯æŒï¼šæ”¯æŒiOSã€Macä»¥åŠAndroid åº”ç”¨ã€‚ è‡ªå®šä¹‰ï¼šæ ¹æ®è‡ªèº«éœ€è¦æ‰©å±•å’Œå®šåˆ¶fastlaneï¼Œä¸ä¾èµ–ä»»ä½•äººã€‚ å‘½ä»¤è¡Œï¼šä¸éœ€è¦è®°ä½é™¤fastlaneä»¥å¤–çš„ä»»ä½•å‘½ä»¤ã€‚ é…ç½®ï¼šå¯ä»¥åœ¨ä»»ä½•ç”µè„‘ä¸Šé…ç½®ï¼ŒåŒ…æ‹¬CIæœåŠ¡å™¨ã€‚ å¯¹äº Testflightï¼Œå°±åƒæ²¡æ•…äº‹çš„å“åŒå­¦æ‰€è¯´çš„ã€‚ Testflight æœ‰ä¸ªè¾ƒå¤§çš„ä½¿ç”¨é—¨æ§›ï¼Œéœ€è¦æ”¶é›†ç”¨æˆ·çš„é‚®ç®±ï¼Œä¹‹ååœ¨ Testflight é‡Œè¾“å…¥è‹¹æœå‘å‡ºçš„é‚€è¯·ç æ‰èƒ½å¼€å§‹æµ‹è¯•ã€‚å¾ˆå¤šç”¨æˆ·å«Œéº»çƒ¦å°±é€€å‡ºäº†ï¼Œè¿è¥è®¤ä¸ºè¿™æ ·ä¼šç»™æµ‹è¯•å¸¦æ¥å¾ˆå¤§çš„ä¸ä¾¿ã€‚ä½†æ˜¯å†·é™äº†å¿ƒæ€åå…¶å®äº‹æƒ…å¹¶æ²¡æœ‰é‚£ä¹ˆç³Ÿç³•ã€‚çœŸæ­£å¯¹è¿™ä¸ªäº§å“æœ‰å…´è¶£çš„ç”¨æˆ·ä¸ä¼šå› ä¸ºè¦å¡«ä¸ªé‚®ç®±å°±æ”¾å¼ƒäº†ã€‚é‚£äº›æµå¤±çš„åªæ˜¯æ™®é€šçš„ç”¨æˆ·ã€‚ç”¨æˆ·ä½¿ç”¨äº† Testflight åï¼Œåç»­çš„æµ‹è¯•åŒ…çš„å‘å¸ƒä¹Ÿä¼šæ”¶åˆ°æ›´æ–°ã€‚ä¸ä¼šåƒä¼ä¸šç‰ˆé‚£æ ·ï¼Œåªèƒ½æ‰‹åŠ¨çš„å‘Šè¯‰ç”¨æˆ·æˆ‘ä»¬æœ‰æ–°çš„æµ‹è¯•åŒ…ã€‚å½“ beta æµ‹è¯•æ´»è·ƒç”¨æˆ·è¶…è¿‡ 100 ä¸ªä¼šæœ‰ä¸€ä¸ªè´¨å˜ã€‚è¿™äº›éƒ½æ˜¯ç§¯æçš„é‡åº¦ç”¨æˆ·ï¼Œä¸€ç¾¤é‡åº¦ç”¨æˆ·ä½¿ç”¨ä½ çš„æ–°ç‰ˆæœ¬å‡ å¤©ï¼Œè‡³å°‘å¯ä»¥ä¿è¯æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ˜¯æ²¡æœ‰çº°æ¼çš„ã€‚ è¿™é‡Œæ¨èé…åˆæµ‹è¯•çš„ SDK è´¨é‡ç›‘æ§æœåŠ¡â€”â€”Bugtagsï¼ŒBugtags å¯ä»¥é€šè¿‡æ‚¬æµ®çª—æˆ–è€…æ‘‡ä¸€æ‘‡çš„æ–¹å¼è¿›è¡Œæˆªå›¾ï¼Œå¹¶å°†æ•è·çš„ bug å›¾ç‰‡ä¸Šä¼ åˆ°æµ‹è¯•å¹³å°ï¼Œå…¶è‡ªèº«ä¹ŸåŒ…æ‹¬ Crash çš„è‡ªåŠ¨ä¸Šä¼ ã€‚ çº¿ä¸Šè´¨é‡ç›‘æ§Crashlytics æˆç«‹äº2011å¹´ï¼Œæ˜¯ä¸“é—¨ä¸ºç§»åŠ¨åº”ç”¨å¼€è€…å‘æä¾›çš„ä¿å­˜å’Œåˆ†æåº”ç”¨å´©æºƒä¿¡æ¯çš„å·¥å…·ã€‚ Crashlytics ä¸ä¼šæ¼æ‰ä»»ä½•åº”ç”¨å´©æºƒä¿¡æ¯ã€‚åœ¨å‘ç”Ÿå´©æºƒåï¼Œç”¨æˆ·å†æ¬¡è¿›å…¥ APP å¹¶è”ç½‘æƒ…å†µä¸‹ï¼Œæ—¥å¿—è‡ªåŠ¨ä¸Šä¼ ã€‚ Crashlytics å¯ä»¥è±¡ Bug ç®¡ç†å·¥å…·é‚£æ ·ï¼Œç®¡ç†è¿™äº›å´©æºƒæ—¥å¿—ã€‚ä¾‹å¦‚ï¼šCrashlytics ä¼šæ ¹æ®æ¯ç§ç±»å‹çš„ Crash çš„å‡ºç°é¢‘ç‡ä»¥åŠå½±å“çš„ç”¨æˆ·é‡æ¥è‡ªåŠ¨è®¾ç½®ä¼˜å…ˆçº§ã€‚å¯¹äºæ¯ç§ç±»å‹çš„ Crashï¼ŒCrashlytics é™¤äº†ä¼šåƒä¸€èˆ¬çš„å·¥å…·æä¾› Call Stack å¤–ï¼Œè¿˜ä¼šæ˜¾ç¤ºæ›´å¤šç›¸å…³çš„æœ‰åŠ©äºè¯Šæ–­çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šè®¾å¤‡æ˜¯å¦è¶Šç‹±ï¼Œå½“æ—¶çš„å†…å­˜é‡ï¼Œå½“æ—¶çš„ iOS ç‰ˆæœ¬ç­‰ã€‚å¯¹äºä¿®å¤æ‰çš„ Crash æ—¥å¿—ï¼Œå¯ä»¥åœ¨ Crashlytics çš„åå°å°†å…¶å…³æ‰ã€‚ Crashlytics å¯ä»¥æ¯å¤©å’Œæ¯å‘¨å°†å´©æºƒä¿¡æ¯æ±‡æ€»å‘åˆ°ä½ çš„é‚®ç®±ã€‚ æä¾›åœ¨çº¿çš„æŠ¥å‘Šï¼Œè§£é‡Šå´©æºƒåŸå› ï¼Œç”šè‡³èƒ½ç»™å‡ºæ˜¯å“ªä¸€è¡Œä»£ç å¯¼è‡´çš„å´©æºƒã€‚ Crashlytics æœ‰é…å¥—çš„ macOS åº”ç”¨ Fabric ç”¨æˆ·ä½“éªŒå€¼å¾—å›½å†… SDK æœåŠ¡å•†å­¦ä¹ ã€‚ 2013 å¹´ Twitter å¯¹ Crashlytics è¿›è¡Œäººæ‰å’ŒæœåŠ¡çš„å¤šé‡æ”¶è´­ï¼Œä¸€å¹´å Google æ”¶è´­ Firebaseï¼Œä»æ­¤ Fabric å’Œ Firebase è¿™å¯¹å¥½åŸºå‹å°±æˆä¸ºäº†åº”ç”¨å´©æºƒæŠ¥å‘Šçš„é»„é‡‘æ­æ¡£ã€‚ ç®¡ç†å›¢é˜Ÿæ ¸å¿ƒç»„æˆæ¶æ„å…³äºå›¢é˜Ÿçš„è§‚ç‚¹ï¼Œæˆ‘åŸºæœ¬å’Œæ²¡æ•…äº‹çš„å“åŒå­¦çœ‹æ³•ä¸€è‡´ï¼Œé™¤äº†æŠ€æœ¯çš„ç¡¬æŒ‡æ ‡ï¼Œåœ¨æ—©æœŸå›¢é˜Ÿè¿˜æœ‰ä¸€ä¸ªå·¥ç¨‹å›¢é˜Ÿæ–‡åŒ–çš„é—®é¢˜ã€‚ä¸€ä¸ªå‡ åä¸ªäººçš„é¡¹ç›®ï¼Œé‡Œé¢æŸä¸ªç‰¹å®šçš„äººçš„ç§¯ææ€§å¯¹äºé¡¹ç›®å…¶å®æ˜¯ä¸å¤ªé‡è¦çš„ã€‚ä»–åªè¦å®Œæˆåº”è¯¥å®Œæˆçš„å·¥ä½œã€‚ç”šè‡³å’Œå…¶ä»–äººä¸è¯´è¯ä¹Ÿå½±å“ä¸å¤§ã€‚ä¸€ä¸ªå¤§çš„é¡¹ç›®ä¹Ÿä¸èƒ½å› ä¸ºä»»ä½•ä¸€ä¸ªäººä¸åœ¨äº†å°±è¿è¡Œä¸ä¸‹å»ã€‚ æˆ‘ä¹‹å‰æ€è€ƒè¿‡å›¢é˜Ÿæ–‡åŒ–æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå½¢å®¹å›¢é˜Ÿæ–‡åŒ–ã€‚åæ¥çœ‹åˆ°ä¸€ä¸ªè¯´æ³•æ„Ÿè§‰æŒºè´´åˆ‡ã€‚æ–‡åŒ–æ˜¯ç©ºæ°”ï¼Œæ— å¤„ä¸åœ¨ã€‚å…¬å¸æ²¡æœ‰è§„å®šä¸‹ç­åç¤¾äº¤å¹³å°ä¸Šçœ‹åˆ°ç”¨æˆ·åé¦ˆéœ€è¦ä½ å»å›åº”ï¼Œä¹Ÿä¸ä¼šè§„å®šä½ å‘ç°å…¶ä»–éƒ¨é—¨çš„äº§å“æœ‰é—®é¢˜æ˜¯ä¸å½“å›äº‹è¿˜æ˜¯åº”è¯¥å»å’Œå…¶ä»–éƒ¨é—¨çš„äººæ²Ÿé€šï¼Œåˆæˆ–è€…çœ‹åˆ°ä¸€ä¸ªæ›´å¥½çš„å»ºè®®æ˜¯ä¸æ˜¯è¦å’Œå…¬å¸æå‡ºæ¥ã€‚è¿™äº›è¡Œä¸ºèƒŒåçš„æ”¯æ’‘å°±æ˜¯å›¢é˜Ÿæ–‡åŒ–ã€‚åœ¨å›¢é˜Ÿé‡Œçš„äººå†³å®šäº†ä»·å€¼è§‚ã€‚ æŠ€æœ¯å›¢é˜Ÿåšäº‹å°±åƒå¤ä»£çš„å…«æŠ¬å¤§è½¿ï¼Œå…¬å¸ä¸šåŠ¡å°±åƒè½¿å­é‡Œçš„å°å¨˜å­ï¼Œå›¢é˜Ÿæ–‡åŒ–å°±åƒæŠ¬è½¿å­æ—¶å–Šçš„å·å­ï¼Œå›¢é˜Ÿé‡Œçš„æ¯ä¸ªäººå°±åƒæ˜¯æŠ¬è½¿å­çš„è½¦å¤«ã€‚æŠ¬è½¿å­çš„å¤§å¤šæ•°äººèµ°çš„å¿«ï¼Œæ¯ä¸ªäººçš„æ­¥å­é½ï¼Œé‚£è½¿å­é‡Œçš„å°å¨˜å­å°±åå¾—å¾ˆèˆ’æœï¼Œå¦‚æœå“ªä¸ªç¯èŠ‚å‡ºç°é—®é¢˜éƒ½ä¼šå¯¹åè½¿å­çš„äººæœ‰å½±å“ã€‚ æ‰€ä»¥ï¼Œè½¦å¤«æ°´å¹³è¦æŒ‘å¥½ï¼Œå·å­è¦å“äº®ææ°”ï¼Œæ¯ä¸ªäººçš„æ­¥ä¼è¦åè°ƒï¼Œè½¿å­å°±èƒ½å¹³ç¨³ä¸Šè·¯ï¼Œå¯æ˜¯å¦‚æœæƒ³å¿«ç‚¹èµ¶è·¯ï¼Œé‚£å¯èƒ½å°±è¦å°è¯•ä¸åŒçš„æŠ¬è½¿å§¿åŠ¿ï¼Œæ¢æ›´å“äº®çš„å·å­ï¼Œæ’ç»ƒæ›´åè°ƒæ­¥å­ï¼Œç”šè‡³æ¢ä¸ªæ›´è½»çš„è½¿å­ã€æ¢ä¸ªè½®å­â€¦ ç¡¬ä»¶è®¾å¤‡æŠ•å…¥æ¥ç€ä¸Šé¢çš„â€œèŠ±è½¿â€è¯´ï¼Œç¡¬ä»¶æŠ•å…¥çš„é‡è¦æ€§å°±ä¸è¨€è€Œå–»äº†ï¼Œåˆ«äººå·²ç»æ¢ä¸Šäº†å¸¦è½®å­çš„é©¬è½¦äº†ï¼Œå½“ç„¶è·‘çš„é£å¿«ã€‚ æ‹¿ Swift çš„ç¼–è¯‘é€Ÿåº¦è®²ï¼ŒMacBook Air å’Œ MacBook Pro çš„å¤„ç†å™¨èŠ¯ç‰‡å’Œå†…å­˜å®¹é‡å†³å®šäº†ä¸¤ç§ç”µè„‘çš„ç¼–è¯‘è€—æ—¶å¯èƒ½ç›¸å·®1å€å·¦å³ï¼Œè€Œä¸€å—å¤–æ¥æ˜¾ç¤ºå±èƒ½èŠ‚çœçš„é¢‘ç¹æ“ä½œæ›´æ˜¯ä»¥å°‘ç§¯å¤šã€‚ å¦‚æœæŠŠä¸€ä¸ªå·¥ç¨‹å¸ˆçš„è–ªèµ„æ¢ç®—æˆæ—¶è–ªï¼Œé…åˆç¡¬ä»¶è®¾å¤‡æµªè´¹æ‰çš„æ—¶é—´ï¼Œå°†æ˜¯ä¸€ç¬”ä¸é‚£ä¹ˆæ˜æ™ºçš„å¼€é”€ï¼Œå½“ç„¶å¦‚æœä½ çš„å·¥ç¨‹å¸ˆæ¯å¤©åªæ˜¯å–å‡‰æ°´çœ‹æ–°é—»ï¼Œé‚£è¯·é…ç»™ä»–ä¸€ä¸ªä¿æ¸©æ¯å’Œè€èŠ±é•œ~ ä¾‹ä¼šå’Œæ–‡æ¡£åŒ–æœ‰å“ªäº›ä¼šï¼Ÿ å½“æˆ‘æ‰“ç®—å†™è¿™ä¸ªä¸»é¢˜æ—¶ï¼Œåæ€äº†ä¸‹è¿‡å»éƒ½å‚åŠ è¿‡å“ªäº›ä¼šè®®ï¼Œå‘ç°æœ‰æ—¶ä¼šè«åå…¶å¦™çš„å°±å‚åŠ äº†ä¸€äº›å®Œå…¨æ— æ„ä¹‰çš„ä¼šè®®ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆçœ‹çœ‹ä¸€èˆ¬ç¨‹åºå‘˜éƒ½ä¼šç¢°åˆ°å“ªäº›ä¼šè®®ã€‚ éœ€æ±‚ä¼š è¿™ç±»ä¼šè®®ä¸€èˆ¬æ˜¯äº§å“æˆ–é¡¹ç›®ç»ç†å¬é›†ï¼Œç»„ç»‡å‚ä¸é¡¹ç›®çš„ç¨‹åºå‘˜ä¸€èµ·è®¨è®ºéœ€æ±‚å¹¶ç¡®å®šæ’æœŸã€‚è¿™ç±»ä¼šè®®å®¹æ˜“å‡ºçš„é—®é¢˜æ˜¯ï¼Œç¨‹åºå‘˜åˆ°äº†ä¼šä¸Šæ‰ç¬¬ä¸€æ¬¡çŸ¥é“éœ€æ±‚ï¼Œå¹¶é™·å…¥åˆ°éœ€æ±‚ç»†èŠ‚çš„æ— ä¼‘æ­¢è®¨è®ºä¸­ã€‚æ›´å¥½çš„æ–¹å¼æ˜¯æå‰è®©ç¨‹åºå‘˜è¯¦ç»†äº†è§£éœ€æ±‚ï¼Œä¼šä¸Šåªéœ€æ•²å®šæ’æœŸå¹¶è®©äº’ç›¸æœ‰åä½œä¾èµ–çš„ç¨‹åºå‘˜ä¹‹é—´è¾¾æˆä¸€è‡´å’Œå½¢æˆæ‰¿è¯ºã€‚ è®¨è®ºä¼š è¿™ç±»ä¼šè®®çš„åœºæ™¯æ¯”è¾ƒå¹¿æ³›ï¼Œæ¯”å¦‚ï¼šé¡¹ç›®è¿›è¡Œè¿‡ç¨‹ä¸­åŒç»„ç¨‹åºå‘˜ä¹‹é—´å°±è®¾è®¡æˆ–å®ç°çš„è®¨è®ºï¼Œæˆ–ä¸å…¶ä»–ç»„é¡¹ç›®åˆä½œäººä¹‹é—´çš„è®¨è®ºç­‰ç­‰ã€‚è¿™ç±»ä¼šè®®å®¹æ˜“å‡ºç°çš„é—®é¢˜æ˜¯ä¸´æ—¶æŠŠä¸€å †äººæ‹‰åˆ°ä¼šä¸Šï¼Œç„¶åé™·å…¥æ··ä¹±çš„è‡ªç”±è®¨è®ºï¼Œå¤±å»ç„¦ç‚¹ã€‚ è¿˜æœ‰ä¸€ç±»è®¨è®ºä¼šå«å¤´è„‘é£æš´ä¼šï¼Œä¹Ÿæ˜¯å®¹æ˜“æŠŠä¸€å †äººæ‹‰åˆ°ä¼šä¸Šï¼Œå¼€åŠ¨å¤´è„‘é£æš´ã€‚å¦‚ä»Šé—æ†¾çš„é¢†æ‚Ÿåˆ°è¿™æ˜¯æœ€æ²¡æ•ˆç‡ä¹Ÿæ²¡æ•ˆæœçš„æ–¹å¼ã€‚å¤´è„‘é£æš´ä¼šéœ€è¦å°±å¾…è§£å†³çš„é—®é¢˜è®©å‚ä¸äººå‘˜æå‰å‡†å¤‡ï¼Œæœé›†æˆ–é˜…è¯»ææ–™ï¼Œä¸åŒäººä»ä¸åŒè§’åº¦å„è‡ªæå‡ºè‡ªå·±çš„è§‚ç‚¹æˆ–æ–¹æ¡ˆï¼Œç„¶ååˆ°äº†ä¼šä¸Šå°†æ‰€æœ‰è§‚ç‚¹å’Œæ–¹æ¡ˆåˆ—å‡ºæ¥ï¼Œå†å¼€åŠ¨å¤´è„‘ï¼Œç¢°æ’è¿æ¥ä¸€ä¸‹ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½é£æš´å‡ºä¸€äº›æ–°çš„è§‚ç‚¹æˆ–æ–¹æ¡ˆå»æœ‰æ•ˆè§£å†³é—®é¢˜ã€‚ å‘¨ä¾‹ä¼š ä¸€èˆ¬æ¥è¯´ä¸€ä¸ªéƒ¨é—¨æˆ–å°ç»„éƒ½ä¼šæ¯å‘¨å¼€ä¸ªä¾‹ä¼šï¼Œä¾‹ä¼šå®¹æ˜“è¢«å½“ä½œæ—¥å¸¸çš„ä¾‹è¡Œå·¥ä½œè€Œä¸è¢«é‡è§†ã€‚ä¾‹ä¼šåº”è¯¥æœ‰å›ºå®šçš„æ—¶é—´å’Œè®®ç¨‹ï¼Œè€Œä¸”ä¾‹ä¼šæ˜¯ä¸€ç¾¤ç»å¸¸ä¸€èµ·å·¥ä½œå¹¶ç†Ÿæ‚‰çš„äººå¼€ä¼šã€‚è™½ç„¶å¼€ä¾‹ä¼šçš„äººéƒ½åœ¨åŒä¸€ä¸ªéƒ¨é—¨ï¼Œä½†å¹¶ä¸æ„å‘³ç€ä»–ä»¬éƒ½ä¼šç›¸äº’åˆä½œå®ŒæˆåŒä¸€ä¸ªé¡¹ç›®æˆ–äº‹æƒ…ã€‚æ‰€ä»¥ï¼Œä¾‹ä¼šæ˜¯é€šè¿‡äº†è§£å„è‡ªå·¥ä½œæ¥å®Œæˆäº†è§£æ•´ä¸ªéƒ¨é—¨æˆ–å°ç»„å·¥ä½œè¿›å±•çš„æœºä¼šï¼Œè€Œä¸æ˜¯æ¯å‘¨å›ºå®šçš„ä¼‘é—²æ—¶å…‰ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ¯å‘¨çš„ä¾‹ä¼šç•™å‡ºä¸€æ®µè‡ªç”±è®¨è®ºæ—¶é—´ï¼Œå¯ä»¥ç•…æ‰€æ¬²è¨€ï¼Œå¢åŠ å·¥ä½œä¹‹å¤–äº¤æµã€‚ é™¤äº†å‘¨ä¾‹ä¼šï¼Œæœ‰äº›å®æ–½æ•æ·æ–¹æ³•çš„å›¢é˜Ÿä¹Ÿä¼šå¼€æ¯æ—¥ç«™ç«‹ä¼šï¼Œæ¯æ—¥ç«™ç«‹ä¼šçš„ä¸€èˆ¬å†…å®¹æ˜¯ï¼š æ˜¨å¤©å¹²äº†ä»€ä¹ˆ ä»Šå¤©è®¡åˆ’å¹²ä»€ä¹ˆ é‡åˆ°äº†ä»€ä¹ˆéšœç¢ æ¯æ—¥ç«™ç«‹ä¼šè®®çš„ä¸»è¦ç›®çš„æ˜¯è®©å›¢é˜Ÿæˆå‘˜äº’ç›¸äº¤æµäº’é€šå·¥ä½œæƒ…å†µï¼Œè€Œä¸æ˜¯ä¸ºäº†è®©ç»ç†ä»¬äº†è§£æƒ…å†µè€Œå¬å¼€çš„ä¼šè®®ã€‚æ¯æ—¥ç«™ç«‹ä¼šä¸æ˜¯ä¸€ä¸ªå›¢é˜Ÿçš„äººç«™ä¸€åœˆå„è‡ªè¯´ä¸‹å·¥ä½œæƒ…å†µï¼Œå› ä¸ºæ›¾ç»å‘ç°å½¼æ­¤å¹¶ä¸å…³å¿ƒå¯¹æ–¹å·¥ä½œå†…å®¹çš„äººç«™ä¸€åœˆå¼€è¿™ä¸ªç«™ç«‹ä¼šï¼Œå…¶æ„ä¹‰ä½•åœ¨ï¼Ÿ åˆ†äº«ä¼š éƒ¨é—¨å†…ã€å…¬å¸å†…æˆ–è¡Œä¸šå†…éƒ½ä¼šæœ‰å„ç±»ä¸åŒè§„æ¨¡åˆ†äº«ä¼šï¼Œæƒ³æ¸…æ¥šä½ ä¸ºä»€ä¹ˆè¦å»å‚åŠ ä¸€ä¸ªåˆ†äº«ä¼šï¼Ÿä¸€èˆ¬æ¥è¯´æˆ‘åªæœ‰ä¸¤ä¸ªåŸå› ï¼Œæˆ‘å¯¹åˆ†äº«çš„å†…å®¹æ„Ÿå…´è¶£ï¼Œè¿™åº”è¯¥æ˜¯å¤§éƒ¨åˆ†äººå‚ä¼šçš„åŸå› ã€‚å¦ä¸€ä¸ªï¼Œå³ä½¿åˆ†äº«å†…å®¹æˆ‘å·²ç»å¾ˆç†Ÿæ‚‰ï¼Œé‚£ä¹ˆå‚ä¼šçš„åŸå› ä¸€èˆ¬å°±æ˜¯å¯¹åˆ†äº«äººæ„Ÿå…´è¶£ï¼Œæƒ³è¦å»é€šè¿‡è¿™ä¸ªåˆ†äº«äº†è§£åˆ†äº«äººã€‚ è¿˜æœ‰ä¸€ç§æƒ…å†µå¯èƒ½æ˜¯ç¢äºé¢å­å‚åŠ ä¸€äº›å®Œå…¨æ²¡å…´è¶£çš„åˆ†äº«ä¼šï¼Œæ©ï¼Œè¿™ç§è¿˜æ˜¯å°½é‡è§„é¿å§ã€‚ ä¸´æ—¶ä¼š æ€»ä¼šç¢°åˆ°è¿™ç§æƒ…å†µï¼Œçªç„¶æœ‰ä¸ªäººè¿‡æ¥å«ä½ ä¸´æ—¶å»å‚åŠ ä¸ªä¼šï¼Œç„¶åä½ å°±ä¸€è„¸æ‡µé€¼çš„å»äº†ã€‚è¿™ç§ä¼šä¼¼ä¹å±äºèº«ä¸ç”±å·±ï¼Œä¸å¥½è§„é¿ï¼Œè¿™ç±»ä¼šè®®å¤šæ˜¯éè®¡åˆ’æ€§çš„ä»»åŠ¡é©±åŠ¨å‹ä¼šè®®ã€‚è‹±ç‰¹å°”å‰ CEO å®‰è¿ªÂ·æ ¼é²å¤«è¯´è¿‡ï¼š åœ¨ç°å®ä¸­ï¼Œæœ‰ 20% çš„æƒ…å†µè¿˜å¾—é ä»»åŠ¡å¯¼å‘ä¼šè®®æ¥è§£å†³ã€‚ä½†å¦‚æœç»ç†äººå°†è¶…è¿‡ 25% çš„æ—¶é—´ç”¨åœ¨åº”æ€¥çš„ä»»åŠ¡å¯¼å‘ä¼šè®®ä¸Šï¼Œè¿™ä¸ªç»„ç»‡å°±ä¸€å®šæœ‰äº†æ¯›ç—…ã€‚è¿™ç§ç±»å‹çš„ä¼šè®®éšæ—¶å¬å¼€ï¼Œè€Œä¸”ä¼šé’ˆå¯¹å…·ä½“æƒ…å†µäº§ç”Ÿå†³ç­–ï¼Œè‹¥è¿™ç§ä¸´æ—¶ç´§æ€¥çš„ä»»åŠ¡é©±åŠ¨ä¼šè®®å¤ªå¤šäº†ï¼Œé‚£é—®é¢˜è‚¯å®šå‡ºåœ¨å¹³æ—¶çš„å·¥ä½œä¸­ã€‚ æ€»ç»“ä¼š å¯èƒ½æ˜¯é¡¹ç›®ä¸Šçº¿æˆ–äº§å“å‘å¸ƒåçš„æ€»ç»“ä¼šï¼Œä¹Ÿå¯èƒ½æ˜¯çº¿ä¸Šæ•…éšœåçš„ç»éªŒæ•™è®­æ€»ç»“ä¼šã€‚æˆ‘ä»¥å‰å¼€è¿‡çš„å¾ˆå¤šæ€»ç»“ä¼šéƒ½å˜æˆäº†é¢†å¯¼çš„æ€»ç»“ä¼šï¼Œå…³äºè¿™ç±»ä¼šå¤§å®¶æœ‰ä»€ä¹ˆå¥½æƒ³æ³•å—ï¼Ÿ å¯¹äºä»¥ä¸Šè¿™äº›åƒå¥‡ç™¾æ€ªçš„ä¼šè®®ï¼Œäºæ˜¯æœ‰äººåˆ¶ä½œäº†è¿™å¹…æ¼«ç”»ï¼š å…¶å®å‘¢ï¼Œå‡¡äº‹éƒ½æœ‰ä¸¤é¢æ€§ï¼Œæœ€éš¾æŠŠæ§çš„æ°¸è¿œæ˜¯äººï¼Œä½œä¸ºæœ‰æ•ˆçš„è®¨è®ºæ´»åŠ¨ï¼Œä¼šè®®æœ¬äº‹æ²¡æœ‰é—®é¢˜ï¼Œç²¾è€•ç»†ä½œä¹Ÿä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿è¯è´¨é‡ã€‚é‡è¦çš„æ˜¯ä¼šè®®çš„æ°”æ°›ã€ä¸»é¢˜ä»¥åŠæ§åœºåŠ›ã€‚ é«˜æ•ˆä¼šè®®çš„ä¸‰ä¸ªè¦è¯€ï¼š1.æå‰é€šçŸ¥è®®é¢˜å¹¶å‘ç»™å‚ä¼šäººç›¸å…³èµ„æ–™ï¼Œä¸è¦æ±‚å¯å‚åŠ å¯ä¸å‚åŠ çš„äºº2.ä¼šè®®å¿…é¡»æœ‰ä¸»æŒäººï¼Œå¼•å¯¼å¤§å®¶æ—¶åˆ»ç›¯ä½ä¼šè®®ä¸»é¢˜3.è¦æœ‰ä¼šè®®çºªè¦ï¼Œä¼šåå¯¹ä¼šè®®ç»“è®ºã€è¡ŒåŠ¨è®¡åˆ’ã€è´Ÿè´£äººã€è¿›åº¦è¡¨å’Œè€ƒæ ¸ç›®æ ‡çš„æç‚¼æ€»ç»“ æˆ‘ä¹‹å‰é‡åˆ°ä¸€ä¸ªé¡¹ç›®é¢†å¯¼å°±å¾ˆæœ‰ç‰¹è‰²ï¼Œç”±äºé‡‡å–å°é—­å¼æ•æ·å¼€å‘æ¨¡å¼ï¼Œéœ€è¦æ¯å¤©ç¡®å®šå·¥ä½œå†…å®¹ï¼Œè°ƒèŠ‚å„éƒ¨é—¨é—´å·¥ä½œè¿›å±•ï¼Œæ‰€ä»¥éœ€è¦æ¯å¤©åšåˆä¼šï¼Œä½†æ˜¯å½“æ—¶å¹¶ä¸æ¯ç‡¥è€Œä¸”å›¢é˜Ÿåä½œèæ´½ï¼Œå› ä¸ºåœ¨ä¾‹ä¼šè¿‡åæœ‰ç»„ç»‡æŠ½ç­¾ä¹°é¥®æ–™ã€é›¶é£Ÿå’Œæƒ©ç½šå€’éœ‰é¬¼çš„æ´»åŠ¨ï¼Œå¦‚ä»Šæƒ³æ¥ï¼Œä»–ç¡®å®æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ç»„ç»‡è€…ã€‚ ä»¥ä¸Šè¿™äº›ä¼šè®®å†…å®¹æ¥è‡ªåšå®¢å›­çš„ mindwindï¼Œè®©æˆ‘ä»¬åŒæƒ…ä»–ä¸€åˆ»é’Ÿ~ æ–‡æ¡£åŒ–æ–‡æ¡£åŒ–å’Œä¾‹ä¼šä¸€æ ·æ˜¯å……æ»¡äº‰è®®çš„ä¸¾æªï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è®©ä¸€åˆ‡æœ‰æ®å¯æŸ¥ï¼Œæ–¹ä¾¿åæœŸæŸ¥é˜…å’Œå‡å°‘äº¤æ¥å·¥ä½œè´Ÿæ‹…ã€‚ä½†ä¹Ÿä¸ä¹åå¯¹è€…ï¼Œè®¤ä¸ºæ˜¯åœ¨æµªè´¹æ—¶é—´ï¼Œå½¢åŠ¿ä¸»ä¹‰ã€‚ è¿˜æ˜¯ä¸€æ ·çš„é“ç†ï¼Œç¨³å®šçš„æ–¹æ³•ä¸ä¼šé”™ï¼Œéš¾æŠŠæ¡çš„æ˜¯ä¸ªäººã€‚æŠŠæ¯ä¸€ä¸ªè´¦å·å¯†ç æ•´ç†ä¿å­˜ä¹Ÿæ˜¯æ–‡æ¡£åŒ–ã€‚ä¿æŒä¼šè®®è®°å½•ã€å·¥ä½œèŠå¤©æ—¥å¿—ä¹Ÿèƒ½åœ¨å¿…è¦æ—¶ä¸æ¥å—é£æ¥çš„æ¨ªâ€œé”…â€~ ç»„ç»‡ CodeReviewè¿˜æ˜¯å¼•ç”¨æ²¡æ•…äº‹çš„å“åŒå­¦çš„è¯ï¼ŒCode review æ˜¯ä¸€ä»¶ç¥å¥‡çš„äº‹æƒ…ã€‚æ‰€æœ‰æœ‰ç´ å…»çš„å·¥ç¨‹å¸ˆéƒ½è§‰å¾— code review å¥½ï¼Œæ®æˆ‘ä»¬æ‰€çŸ¥å›½å¤–å¾ˆå¤šä¼˜ç§€çš„ IT ä¼ä¸šéƒ½å¾ˆæ³¨é‡ code reviewï¼Œä½†æ˜¯åœ¨å›½å†…å´å¾ˆå°‘çœ‹åˆ°æœ‰å›¢é˜Ÿæ‰§è¡Œ code reviewã€‚æˆ–è€…ä¸­å°å›¢é˜Ÿé‡Œå¾ˆå°‘çœ‹åˆ° code reviewã€‚ ä½œä¸ºä¸€ä¸ª leaderï¼Œåœ¨ review çš„æ—¶å€™å¸®åŠ©æˆå‘˜æˆé•¿ï¼Œå’Œåªæ˜¯çœ‹ä¸‹ä»£ç æ˜¯ä¸æ˜¯èƒ½å®ŒæˆåŠŸèƒ½æœ€åä¼šå¼•å‘ä¸åŒçš„ç»“æœã€‚çœ‹è¿‡ä¸€å¥å¾ˆæœ‰è§¦åŠ¨çš„è¯ï¼Œç°åœ¨å¾ˆå¤š leader çŸ¥é“è‡ªå·±çš„å·¥ä½œé‡Œéœ€è¦ç®¡ç†å…¶ä»–äººï¼Œä½†æ˜¯å´å¿½ç•¥äº†è¿˜éœ€è¦ lead ã€‚è€å®è¯´æ¨è¿› code review ç¡®å®é‡åˆ°å¾ˆå¤šé˜»åŠ›ã€‚æœ‰å›¢é˜Ÿé‡Œçš„ä¹Ÿæœ‰å›¢é˜Ÿå¤–çš„ã€‚å›¢é˜Ÿå¤–çš„çœ‹æ³•æ˜¯ code review æ‹–æ…¢äº†é¡¹ç›®è¿›åº¦ã€‚æˆ‘ä½œä¸ºä¸€ä¸ªæ ¸å¿ƒçš„å¼€å‘æˆå‘˜ï¼Œæ¯å¤©è¶…è¿‡ 20% çš„æ—¶é—´æ˜¯æ²¡æœ‰å¯è§çš„å·¥ä½œäº§å‡ºçš„ã€‚æœ‰æ—¶åˆ«äººå†™çš„æœ‰é—®é¢˜è¢«æˆ‘æ‰“å›å»æ”¹ï¼Œä¸€ä¸ªå·²ç»å®Œæˆçš„åŠŸèƒ½åˆå¤šèŠ±äº†å‡ ä¸ªå°æ—¶ã€‚å›¢é˜Ÿå†…é‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œå¾ˆå¤šæˆå‘˜ä¸ç†è§£è¿™é¡¹å·¥ä½œèƒŒåçš„ä»·å€¼ã€‚ åŒæ ·çš„æ„Ÿè§¦æ¥è‡ªä¸Šé¢æåˆ°çš„é‚£å®¶å…¬å¸ï¼Œè´Ÿè´£æˆ‘ä»¬çš„å°ç»„ç»„é•¿æ˜¯ä¸€åæœ‰ç€ 6 å¹´ç§»åŠ¨ç«¯å¼€å‘ç»éªŒçš„ä¼˜ç§€å·¥ç¨‹å¸ˆï¼Œåœ¨ä¸€å¥—ä¸¥æ ¼çš„ä»£ç è§„èŒƒè¦æ±‚å’Œ code review çš„é”»ç‚¼ä¸‹ï¼Œæˆ‘çš„æˆé•¿å‡ ä¹æ˜¯è‚‰çœ¼å¯è§çš„ï¼ˆå¯¹æ¯”å›çœ‹ä¹‹å‰çš„ä»£ç ï¼‰ï¼Œä»–å¯¹æˆ‘ä»¬çš„æŒ‡å¯¼ä¹Ÿæ˜¯æ— ç§ä¸”ä¸“ä¸šçš„ï¼Œä»¥è‡³äºæˆ‘ç°åœ¨ä¾ç„¶åœ¨æ„Ÿè°¢ç€ä»–ã€‚ CodeReview çš„æ–¹å¼ å¼€ Code Review ä¼šè®® å›¢é˜Ÿå†…éƒ¨ä¼šæ•´ç† Check List å›¢é˜Ÿå†…éƒ¨æˆå‘˜äº¤æ¢ä»£ç  æ‰¾å‡ºå¯ä¼˜åŒ–æ–¹æ¡ˆ å¤šé—®é—®é¢˜ï¼Œä¾‹å¦‚ï¼šâ€œè¿™å—å„¿æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿâ€ã€â€œå¦‚æœæœ‰XXX æƒ…å†µï¼Œä½ è¿™ä¸ªæ€ä¹ˆå¤„ç†ï¼Ÿâ€ åŒºåˆ†é‡ç‚¹ï¼Œä¼˜å…ˆæŠ“ä½è®¾è®¡ï¼Œå¯è¯»æ€§ï¼Œå¥å£®æ€§ç­‰é‡ç‚¹é—®é¢˜ æ•´ç†å¥½çš„ç¼–ç å®è·µï¼Œç”¨æ¥ä½œä¸º Code Review çš„å‚è€ƒ CodeReview çš„å†…å®¹ [1]æ¶æ„/è®¾è®¡/å¸¸è§„1.å•ä¸€èŒè´£åŸåˆ™è¿™æ˜¯ç»å¸¸è¢«è¿èƒŒçš„åŸåˆ™ã€‚ä¸€ä¸ªç±»åªèƒ½å¹²ä¸€ä¸ªäº‹æƒ…ï¼Œä¸€ä¸ªæ–¹æ³•æœ€å¥½ä¹Ÿåªå¹²ä¸€ä»¶äº‹æƒ…ã€‚æ¯”è¾ƒå¸¸è§çš„è¿èƒŒæ˜¯ä¸€ä¸ªç±»æ—¢å¹²UIçš„äº‹æƒ…ï¼Œåˆå¹²é€»è¾‘çš„äº‹æƒ…ï¼Œè¿™ä¸ªåœ¨ä½è´¨é‡çš„å®¢æˆ·ç«¯ä»£ç é‡Œå¾ˆå¸¸è§2.è¡Œä¸ºæ˜¯å¦ç»Ÿä¸€ï¼Œä¾‹å¦‚ï¼š1)ç¼“å­˜æ˜¯å¦ç»Ÿä¸€2)é”™è¯¯å¤„ç†æ˜¯å¦ç»Ÿä¸€3)é”™è¯¯æç¤ºæ˜¯å¦ç»Ÿä¸€4)å¼¹å‡ºæ¡†æ˜¯å¦ç»Ÿä¸€5)â€¦â€¦3.ä»£ç æ±¡æŸ“ä»£ç æœ‰æ²¡æœ‰å¯¹å…¶ä»–æ¨¡å—å¼ºè€¦åˆ4.é‡å¤ä»£ç â€“&gt;åº”è¯¥æŠ½å–5.å¼€é—­åŸåˆ™6.é¢å‘æ¥å£ç¼–ç¨‹7.å¥å£®æ€§1)æ˜¯å¦è€ƒè™‘çº¿ç¨‹å®‰å…¨2)æ•°æ®è®¿é—®æ˜¯å¦ä¸€è‡´æ€§3)è¾¹ç•Œå¤„ç†æ˜¯å¦å®Œæ•´4)é€»è¾‘æ˜¯å¦å¥å£®5)æ˜¯å¦æœ‰å†…å­˜æ³„æ¼6)æœ‰æ²¡æœ‰å¾ªç¯ä¾èµ–7)æœ‰æ²¡æœ‰é‡æŒ‡é’ˆ8)æ˜¯å¦æ£€æŸ¥äº†æ•°ç»„çš„â€œè¶Šç•Œâ€œé”™è¯¯9)â€¦â€¦8.é”™è¯¯å¤„ç†9.æ”¹åŠ¨æ˜¯ä¸æ˜¯å¯¹ä»£ç çš„æå‡æ–°çš„æ”¹åŠ¨æ˜¯æ‰“è¡¥ä¸ï¼Œè®©ä»£ç è´¨é‡ç»§ç»­æ¶åŒ–ï¼Œè¿˜æ˜¯å¯¹ä»£ç è´¨é‡åšäº†ä¿®å¤10.æ•ˆç‡/æ€§èƒ½1)å…³é”®ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å¤šå°‘ï¼Ÿæœ‰æ²¡æœ‰å¯èƒ½æœ‰æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆ2)å®¢æˆ·ç«¯ç¨‹åºå¯¹é¢‘ç¹æ¶ˆæ¯å’Œè¾ƒå¤§æ•°æ®ç­‰è€—æ—¶æ“ä½œæ˜¯å¦å¤„ç†å¾—å½“ [2]ä»£ç é£æ ¼1.å¯è¯»æ€§è¡¡é‡å¯è¯»æ€§çš„å¯ä»¥æœ‰å¾ˆå¥½å®è·µçš„æ ‡å‡†ï¼Œå°±æ˜¯ Reviewer èƒ½å¦éå¸¸å®¹æ˜“çš„ç†è§£è¿™ä¸ªä»£ç ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£æ„å‘³ç€ä»£ç çš„å¯è¯»æ€§è¦è¿›è¡Œæ”¹è¿›2.å‘½å1)å‘½åå¯¹å¯è¯»æ€§éå¸¸é‡è¦2)æ˜¯å¦è·Ÿç³»ç»Ÿå±æ€§å‘½åé€ æˆå†²çª3)è‹±è¯­ç”¨è¯å°½é‡å‡†ç¡®ä¸€ç‚¹ï¼Œå¿…è¦æ—¶å¯ä»¥æŸ¥å­—å…¸3.å‡½æ•°é•¿åº¦/ç±»é•¿åº¦1)å‡½æ•°å¤ªé•¿çš„ä¸å¥½é˜…è¯»2)ç±»å¤ªé•¿äº†ï¼Œæ£€æŸ¥æ˜¯å¦è¿åçš„ å•ä¸€èŒè´£ åŸåˆ™4.æ³¨é‡Šæ°åˆ°å¥½å¤„çš„æ³¨é‡Š,ä¸æ˜¯æ³¨é‡Šè¶Šå¤šè¶Šå¥½5.å‚æ•°ä¸ªæ•°ä¸è¦å¤ªå¤šï¼Œä¸€èˆ¬ä¸è¦è¶…è¿‡ 3 ä¸ª å·¥å…·Gitlab åŠ Git ç›¸å…³è§„èŒƒGitlabå¯¹äºä»£ç ä»“åº“å¼€æºé¦–é€‰ GitHubï¼Œä¸å¼€æºç°åœ¨ä¹Ÿæœ‰è®¸å¤šæœåŠ¡å•†ï¼Œå¦‚ï¼šGitee ç­‰ï¼Œå¦‚æœæœ‰é’±ä»»æ€§ GitHub æ™®é€šçš„å›¢é˜Ÿå¥—é¤æ¯ä¸ªæœˆæ¯äºº 9 åˆ€ï¼Œä½†æˆ‘ç›¸ä¿¡å¤§å¤šæ•°ä¸­å°ä¼ä¸šä¼šé€‰æ‹© Gitlabã€‚ è¿˜æœ‰å°±æ˜¯æœåŠ¡ç«¯å¦‚æœè¦è‡ªå·±é…ç½® CI æœåŠ¡ä¸å¤ªæ–¹ä¾¿ã€‚å¦‚æœéƒ¨ç½²åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œå…¶ä»–ä¸€äº›æœåŠ¡è„šæœ¬ä¹Ÿéƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä¼šæœ‰å¾ˆå¤§çš„è‡ªä¸»æƒã€‚ç»¼åˆä¹‹åé€‰æ‹©äº†ä¸»æµçš„ Gitlabã€‚ ç¬¬ä¸‰æ–¹ä»“åº“éƒ½å¯èƒ½é‡åˆ°çˆ¶çˆ±å¦‚å±±èˆ¬çš„ç»´æŠ¤æ—¶æœŸã€‚ Git ç›¸å…³è§„èŒƒGit ç›¸æ¯” SVN èƒ½é¿å…å¤§å¤šæ•°éäººä¸ºé—®é¢˜ï¼Œè¿™ç‚¹ç›¸ä¿¡å·²ç»ä¸éœ€è¦è®ºè¯äº†ã€‚ä½†æ˜¯é‚£äº›äººä¸ºçš„é—®é¢˜æ€ä¹ˆåŠï¼Œé‚£å½“ç„¶éœ€è¦è§„èŒƒäº†ã€‚ é¦–å…ˆï¼Œåšå¥½åˆ†å·¥ï¼Œç‰¹åˆ«æ˜¯ Storyboard å’Œ XIB å¤šç§ï¼Œå°½é‡é¿å…å‡ºç°å¤šäººä¿®æ”¹åŒä¸€ä¸ªæ–‡ä»¶ã€‚ æ¯ä¸ªäººçš„æ‰€æœ‰å¼€å‘å·¥ä½œéƒ½åªåœ¨è‡ªå·±çš„åˆ†æ”¯å¼€å‘ã€‚ä¾‹å¦‚å°æ˜å¼€å‘ï¼Œä½ å°±åœ¨æœ¬åœ°åˆ‡æ¢åˆ°è‡ªå·±çš„ xiaoming_gittutorial åˆ†æ”¯ç„¶åè¿›è¡Œå¼€å‘ã€‚ æ¯ä¸ªäººåªå…è®¸åœ¨è‡ªå·±çš„åˆ†æ”¯ç›´æ¥pushè¿œç¨‹åˆ†æ”¯ã€‚ åˆå¹¶çš„æ—¶å€™å¿…é¡»éµå¾ªä»¥ä¸‹æ¡ä»¶ï¼š é¦–å…ˆï¼Œæœ¬åœ°åˆ‡æ¢åˆ°developåˆ†æ”¯ã€‚pull```123* ä¾‹å¦‚ä½ æ˜¯å°æ˜ï¼Œé‚£ä¹ˆåœ¨ pull åˆ°è¿œç¨‹çš„ develop æœ€æ–°çš„å†…å®¹ä¹‹åã€‚```git merge xiaoming_gittutorial å¦‚æœå‡ºç° conflict é‚£ä¹ˆæ¸…é™¤ conflict ä¹‹åï¼Œcommit ç„¶åæŠŠæœ¬åœ° develop push åˆ°è¿œç¨‹çš„ developã€‚ æ¯å®Œæˆä¸€ä¸ªåŠŸèƒ½å°±æäº¤ä¸€æ¬¡ï¼Œä¸è¦ç´¯è®¡ä»£ç ã€‚ ä¿è¯ä¸»åˆ†æ”¯ä»£ç æ°¸è¿œå¯è¿è¡Œï¼Œç‰ˆæœ¬å®Œæ•´ï¼ˆç”¨äºè„šæœ¬è‡ªåŠ¨åŒ–å‘æµ‹è¯•åŒ…ï¼‰ã€‚ è¿™æ ·çš„æµç¨‹æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ å‡ ä¹ä¸ä¼šå‡ºç° conflictã€‚ ä½ æ°¸è¿œä¹Ÿä¸ä¼šæ±¡æŸ“ develop åˆ†æ”¯ã€‚ æ¯æ¬¡éƒ½æ˜¯åœ¨æœ¬åœ° merge å®Œæ¸…é™¤äº† conflict ä¹‹åå† push ä¼šè¿œç«¯ï¼Œé‚£ä¹ˆåˆ«äººæ›´æ–°æœ¬åœ° develop åˆ†æ”¯ï¼Œå†åˆå¹¶çš„æ—¶å€™ï¼Œå°±ç®—å‡ºç° conflict ä¹Ÿåªä¼šæ˜¯è‡ªå·±æœ€æ–°ä»£ç äº§ç”Ÿçš„ conflictã€‚ Sketch è®¾è®¡å·¥å…· + Zeplin æ ‡æ³¨å·¥å…·ç§»åŠ¨ç«¯ä¹Ÿå±äºå‰ç«¯ï¼Œæ˜¯åšç›´æ¥å’Œç”¨æˆ·æ‰“äº¤é“çš„äº‹æƒ…ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬è®¾è®¡ç‹®ï¼Œè®¾è®¡ç‹®æ˜¯ä¸€ç§å¾ˆå‰å®³çš„çŒ«ç§‘åŠ¨ç‰©ï¼Œä»–ä»¬æœ‰ç€ä»¤äººææƒ§çš„åƒç´ çœ¼å’Œè¡€ç»Ÿä¸­çš„å¼ºè¿«ç—‡ã€‚ï¼ˆä»¥ä¸Šæˆ‘å–å¤šäº†è¯´çš„ï¼Œä¸è¦å½“çœŸå“ˆ~ï¼‰ Sketch ä½œä¸ºä¸€æ¬¾ç§»åŠ¨æ—¶ä»£è®¾è®¡å¸ˆæ–°å® ï¼Œè‡ªç„¶æœ‰å…¶å­˜åœ¨çš„é“ç†ã€‚ è‡ªåŠ¨ä¿å­˜å’Œç‰ˆæœ¬ç®¡ç† çŸ¢é‡ç¼–è¾‘å’Œå®Œç¾åƒç´  æ™ºèƒ½å‚è€ƒçº¿ è‡ªç”±ç¼–è¾‘å…ƒç´  å¸ƒå°”è¿ç®— å•å›¾å±‚å¤šé‡æ··åˆæ¨¡å¼ å››èˆäº”å…¥åƒç´ æ•°å€¼å–æ•´ å…±äº«æ ·å¼å’Œç»„ä»¶ ä¼˜ç§€çš„è¾“å‡º åˆ†é…é—´è· ç§»åŠ¨è®¾å¤‡æ¨¡ç‰ˆ è‡ªå¸¦æ ¼æ … å‡ºè‰²çš„æ–‡å­—æ¸²æŸ“ ä¸°å¯Œçš„æ’ä»¶ï¼ˆæ ‡æ³¨ã€å†…å®¹å¡«å……ï¼‰ å¤šç§è½¯ä»¶é«˜åº¦é…åˆ æ—‹è½¬å¤åˆ¶ æ‰‹æœºå®æ—¶é¢„è§ˆ Zeplin é¢å‘çš„ç”¨æˆ·æ˜¯è®¾è®¡å¸ˆå’Œå‰ç«¯ï¼ˆWebã€Mobileï¼‰å·¥ç¨‹å¸ˆï¼Œç›¸å½“äºåšçš„æ˜¯ä¸­é—´æ¡¥æ¢è¿™ä¸€å—ï¼Œæ ¸å¿ƒåŠŸèƒ½ä¸ºæ ‡æ³¨ã€Style Guideã€å¤‡æ³¨æ–‡æ¡£ä¸ç®€å•çš„å›¢é˜Ÿåä½œã€‚ sketchæ”¯æŒå¤šç”»æ¿ï¼Œä¾¿äºåŒæ—¶é¢„è§ˆï¼Œå ç”¨å†…å­˜è¾ƒpså°å¾ˆå¤š sketchæ”¯æŒå¯¼å‡ºflintoï¼Œä¾¿äºåˆ¶ä½œäº¤äº’åŠ¨æ•ˆåŸå‹ zeplinè§£æ”¾è®¾è®¡å¸ˆçš„åŒæ‰‹ï¼Œä»æ­¤å‘Šåˆ«åˆ‡å›¾å’Œæ ‡æ³¨ zepliné™ä½å·¥ç¨‹å¸ˆçš„æ²Ÿé€šæˆæœ¬ï¼Œæé«˜è®¾è®¡è¿˜åŸåº¦ Abstract å°±æ˜¯ä¸€ä¸ªå€ŸåŠ© Git å¯¹ Sketch æ–‡ä»¶è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„è½¯ä»¶ã€‚ è¯¦æƒ…å‚è§ã€ŠGit ä¸ Sketch çš„ç¥å¥‡é‚‚é€…ï¼šAbstractã€‹ï¼ˆhttps://sspai.com/post/40595ï¼‰ æˆæœå¹´ç»ˆæ€»ç»“ Github åŸåˆ›å¼€æºé¡¹ç›® 90+ï¼Œå…±è®¡ 400+ è´¡çŒ®åŠ› å‚ä¸ç»´æŠ¤å¼€æºé¡¹ç›® fastlane 20.5kï¼ˆè‡³2018.02.08ï¼‰ å®Œæˆ Swifter åŠŸèƒ½å±•ç¤ºåº”ç”¨ç ”å‘ Swifter æ˜¯ä¸€æ¬¾åŸºäº Swift å¼€å‘çš„ï¼Œé‡‡ç”¨ MVVM æ¨¡å¼ã€RxSwift å‡½æ•°å¼å“åº”ç¼–ç¨‹ã€ç»„ä»¶åŒ–å’Œ ReactNative ç­‰æŠ€æœ¯çš„æŠ€æœ¯ç¤ºä¾‹åº”ç”¨ã€‚","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"è®© Async å¸®ä½ è§£å†³çº¿ç¨‹é—®é¢˜","slug":"Library Async","date":"2018-02-23T03:56:27.000Z","updated":"2018-11-15T14:59:55.147Z","comments":true,"path":"2018/02/23/Library Async/","link":"","permalink":"https://reversescale.github.io/2018/02/23/Library Async/","excerpt":"çº¿ç¨‹è¿™ç§ä¸œè¥¿ä¸€èˆ¬å°è£…æ¯”è¾ƒæ·±ï¼Œå¾ˆå¾®è§‚ï¼Œä¹Ÿå¾ˆè€ƒå¯Ÿè®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶ç³»ç»Ÿä¸ºæˆ‘ä»¬å°è£…çš„ GCDã€NSOperation å·²ç»å¾ˆå¥½ç”¨äº†ï¼Œä½†æ˜¯æˆ‘å‘ç°äº†ä¸ªæ›´å¥½ç”¨çš„~","text":"çº¿ç¨‹è¿™ç§ä¸œè¥¿ä¸€èˆ¬å°è£…æ¯”è¾ƒæ·±ï¼Œå¾ˆå¾®è§‚ï¼Œä¹Ÿå¾ˆè€ƒå¯Ÿè®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶ç³»ç»Ÿä¸ºæˆ‘ä»¬å°è£…çš„ GCDã€NSOperation å·²ç»å¾ˆå¥½ç”¨äº†ï¼Œä½†æ˜¯æˆ‘å‘ç°äº†ä¸ªæ›´å¥½ç”¨çš„~ ğŸ‘¨ğŸ»â€ğŸ’» Github Demo ğŸ¤– è¦æ±‚ iOS 9.0+ Xcode 9.0+ Swift 4 ğŸ¨ æµ‹è¯• UI ä»€ä¹ˆæ ·å­ï¼Ÿ 1.å±•ç¤ºé¡µ 2.å±•ç¤ºé¡µ 3.å±•ç¤ºé¡µ å¸¸è§åœºæ™¯åˆ—è¡¨ è€—æ—¶æ“ä½œåœºæ™¯ç¤ºä¾‹ é»‘ç§‘æŠ€æ“ä½œåœºæ™¯ç¤ºä¾‹ ğŸ¯ å®‰è£…æ–¹æ³•åœ¨ iOS, ä½ éœ€è¦åœ¨ Podfile ä¸­æ·»åŠ .12345source &apos;https://github.com/CocoaPods/Specs.git&apos;platform :ios, &apos;9.0&apos;use_frameworks!pod &apos;AsyncSwift&apos; ğŸ›  é…ç½®è€—æ—¶æ“ä½œè¿™æ˜¯åº”ç”¨æœ€å¹¿æ³›çš„åœºæ™¯ï¼Œä¸ºäº†é¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œå°†è€—æ—¶æ“ä½œæ”¾åœ¨å­çº¿ç¨‹å¤„ç†ï¼Œç„¶ååœ¨ä¸»çº¿ç¨‹ä½¿ç”¨å¤„ç†ç»“æœã€‚æ¯”å¦‚è¯»å–æ²™ç›’ä¸­çš„ä¸€äº›æ•°æ®ï¼Œç„¶åå°†è¯»å–çš„æ•°æ®å±•ç¤ºåœ¨ UIï¼Œè¿™ä¸ªåœºæ™¯è¿˜æœ‰å‡ ä¸ªç»†åˆ†ï¼š1.1 æ‰§è¡Œä¸€ä¸ªè€—æ—¶æ“ä½œåå›è°ƒä¸»çº¿ç¨‹123456Async.background &#123;print(\"A: This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_BACKGROUND.description))\") sleep(2)&#125;.main &#123; print(\"B: This is run on the \\(qos_class_self().description) (expected \\(qos_class_main().description)), after the previous block\")&#125; 1.2 ä¸²è¡Œè€—æ—¶æ“ä½œ æ¯ä¸€æ®µå­ä»»åŠ¡ä¾èµ–ä¸Šä¸€ä¸ªä»»åŠ¡å®Œæˆï¼Œå…¨éƒ¨å®Œæˆåå›è°ƒä¸»çº¿ç¨‹ï¼š1234567891011let backgroundBlock = Async.background &#123; print(\"This is run on the first\\(qos_class_self().description) (expected \\(QOS_CLASS_BACKGROUND.description))\") sleep(2) print(\"This is run on the second \\(qos_class_self().description) (expected \\(QOS_CLASS_BACKGROUND.description))\") sleep(2)&#125;// Run other code here...backgroundBlock.main &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(qos_class_main().description)), after the previous block\")&#125; 1.3 å¹¶å‘è€—æ—¶æ“ä½œ æ¯ä¸€æ®µå­ä»»åŠ¡ç‹¬ç«‹ï¼Œæ‰€æœ‰å­ä»»åŠ¡å®Œæˆåå›è°ƒä¸»çº¿ç¨‹ï¼š12345678910111213141516Async.main &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(qos_class_main().description))\") // Prints: \"This is run on the Main (expected Main) count: 1 (expected 1)\" &#125;.userInteractive &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_USER_INTERACTIVE.description))\") // Prints: \"This is run on the Main (expected Main) count: 2 (expected 2)\" &#125;.userInitiated &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_USER_INITIATED.description)) \") // Prints: \"This is run on the User Initiated (expected User Initiated) count: 3 (expected 3)\" &#125;.utility &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_UTILITY.description)) \") // Prints: \"This is run on the Utility (expected Utility) count: 4 (expected 4)\" &#125;.background &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_BACKGROUND.description)) \") // Prints: \"This is run on the User Interactive (expected User Interactive) count: 5 (expected 5)\"&#125; å»¶æ—¶æ‰§è¡Œå»¶æ—¶ä¸€æ®µæ—¶é—´åæ‰§è¡Œä»£ç ï¼Œä¸€èˆ¬è§äºæ‰“å¼€ App ä¸€æ®µæ—¶é—´åï¼Œå¼¹å‡ºæ±‚å¥½è¯„å¯¹è¯æ¡†ã€‚123456let seconds = 3.0Async.main(after: seconds) &#123; print(\"Is called after 3 seconds\")&#125;.background(after: 6.0) &#123; print(\"At least 3.0 seconds after previous block, and 6.0 after Async code is called\")&#125; å…¶ä»–ç”¨æ³•è¯·è§ Demoã€‚ ğŸ˜¬ è”ç³» å¾®ä¿¡ : WhatsXie é‚®ä»¶ : ReverseScale@iCloud.com åšå®¢ : https://reversescale.github.io","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"æœ€ç®€ä¾¿çš„æ–¹å¼è®©ä½ çš„åº”ç”¨æ¥å…¥ Emoji","slug":"Emoji Keyboard","date":"2018-02-10T03:56:27.000Z","updated":"2018-11-15T15:00:32.762Z","comments":true,"path":"2018/02/10/Emoji Keyboard/","link":"","permalink":"https://reversescale.github.io/2018/02/10/Emoji Keyboard/","excerpt":"ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼ŒEmoji è¡¨æƒ…æ— å¤„ä¸åœ¨ã€‚å®ƒä»¬æ¯å¤©è¢«æ•°ç™¾ä¸‡äººä½¿ç”¨ï¼Œæˆ–å–œæˆ–æ‚²æˆ–çŒ¥çï¼Œæ˜¯ä¸€ä¸ªæ— ä¸ä¼¦æ¯”çš„è¡¨è¾¾å·¥å…·~","text":"ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼ŒEmoji è¡¨æƒ…æ— å¤„ä¸åœ¨ã€‚å®ƒä»¬æ¯å¤©è¢«æ•°ç™¾ä¸‡äººä½¿ç”¨ï¼Œæˆ–å–œæˆ–æ‚²æˆ–çŒ¥çï¼Œæ˜¯ä¸€ä¸ªæ— ä¸ä¼¦æ¯”çš„è¡¨è¾¾å·¥å…·~ æˆ‘ä»¬ç›¸ä¿¡ï¼Œç”¨æˆ·ä¸åº”è¯¥è¢«é™åˆ¶åœ¨ Unicode åº“ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†è¿™ä¸ªé”®ç›˜ï¼Œä»¥å¢åŠ æ‰€æœ‰ä¸æˆ‘ä»¬åˆä½œçš„åº”ç”¨ç¨‹åºçš„å‚ä¸åº¦ï¼Œä¿ç•™ç‡å’Œæ”¶å…¥ã€‚ ğŸ‘¨ğŸ»â€ğŸ’» Github Demo ğŸ¤– è¦æ±‚ iOS 9.0+ &amp; Android Xcode 9.0+ Swift / Objective-C ğŸš€ å‡†å¤‡å¼€å§‹Makemoji åº”ç”¨å†…é”®ç›˜æ˜¯æˆ‘ä»¬ SDK çš„æ ¸å¿ƒã€‚ è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€æ§åˆ¶çš„è¡¨æƒ…ç¬¦å·é”®ç›˜ä¸ç´§å¯†é›†æˆçš„æ–‡æœ¬è¾“å…¥ï¼Œç”±æˆ‘ä»¬çš„CMSå’Œä»ªè¡¨æ¿æ”¯æŒã€‚ æ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„ç±»åˆ«ï¼Œä¸Šä¼  emoji / gifs å¹¶æ²¿ç€ unicode è¡¨æƒ…ç¬¦å·è·Ÿè¸ªå…¶ä½¿ç”¨æƒ…å†µã€‚ æˆ‘ä»¬çš„æ–‡æœ¬è¾“å…¥çš„è¾“å‡ºæ˜¯ä¸€ä¸ªç®€å•çš„ HTML æ¶ˆæ¯ï¼Œä»¥åŠä¸€ä¸ªçº¯æ–‡æœ¬ç‰ˆæœ¬å’Œæˆ‘ä»¬æ‰€è°“çš„â€œæ›¿ä»£â€ç‰ˆæœ¬ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ¨¡æ¿ç³»ç»Ÿã€‚ è¿™ä¸ªè¾“å‡ºå¯ä»¥ä¿å­˜åœ¨æ‚¨çš„è®¾å¤‡ä¸Šï¼Œåç«¯æˆ–æ‚¨é€‰æ‹©çš„ä»»ä½•åœ°æ–¹ã€‚ ğŸ¨ æµ‹è¯• UI ä»€ä¹ˆæ ·å­ï¼Ÿ 1.å±•ç¤ºé¡µ 2.å±•ç¤ºé¡µ 3.å±•ç¤ºé¡µ 4.å±•ç¤ºé¡µ è¾“å…¥å‰æ ·å¼ æ–‡å­—é”®ç›˜æ ·å¼ è¡¨æƒ…åŒ…é”®ç›˜æ ·å¼ è¡¨æƒ…é”®ç›˜æ ·å¼ ğŸ¯ å®‰è£…æ–¹æ³•å®‰è£…åœ¨ iOS, ä½ éœ€è¦åœ¨ Podfile ä¸­æ·»åŠ .1pod &quot;Makemoji-SDK&quot; å¦‚æœä½ ä½¿ç”¨ Android, æ·»åŠ åœ¨å·¥ç¨‹ build.gradle ç›®å½•ä¸‹123456789dependencies &#123; compile &apos;com.makemoji:makemoji-sdk-android:0.9.777&apos;&#125; repositories &#123; jcenter() maven &#123; url &quot;https://dl.bintray.com/mm/maven/&quot; &#125;&#125; è®¾ç½®ä½ çš„ SDK Keyè¦è·å¾—æ‚¨çš„SDKå¯†é’¥ï¼Œè¯·å‘é€ç”µå­é‚®ä»¶è‡³sdk@makemoji.com è¦å¼€å§‹ä½¿ç”¨MakemojiSDKï¼Œæ‚¨å°†é¦–å…ˆè®¾ç½®æ‚¨çš„SDKå¯†é’¥ã€‚ iOS åœ¨ AppDelegate ä¸­:1#import &quot;MakemojiSDK.h&quot; 12345- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; // setup your SDK key [MakemojiSDK setSDKKey:@&quot;YOUR-SDK-KEY&quot;]; return YES;&#125; Android åœ¨ AndroidManifest.xml:123&lt;application android:name=&quot;com.makemoji.sbaar.mojilist.App&quot; ... å’Œ App.java12345public void onCreate()&#123; super.onCreate(); Moji.initialize(this,&quot;YOUR_KEY_HERE&quot;); //Moji.setUserId(&quot;Google ad id here if needed&quot;); // optional custom user id for analytics&#125; ğŸ›  é…ç½®è®¾ç½®å‡è®¾æ‚¨æœ‰ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„èŠå¤©åŒºåŸŸï¼Œå¹¶ä¸”æ‚¨å¸Œæœ›ä½¿ç”¨æˆ‘ä»¬çš„é”®ç›˜æ¥è®©ç”¨æˆ·åœ¨å¯¹è¯ä¸­å…±äº«ç‹¬ç‰¹çš„è¡¨æƒ…ç¬¦å·ã€‚ è®©æˆ‘ä»¬å¼€å§‹è®¾ç½®æˆ‘ä»¬çš„æ–‡æœ¬è¾“å…¥å¯¹è±¡å±æ€§ã€‚ 1234#import &quot;METextInputView.h&quot;@interface ViewController : UIViewController &lt;METextInputViewDelegate&gt;@property (nonatomic, retain) METextInputView * meTextInputView; METextInputView æ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå®ƒåŒ…å«å¯¼èˆª/è¶‹åŠ¿å›¾æ ä»¥åŠæ–‡æœ¬è¾“å…¥ã€‚ è¿™æ˜¯ä¸ºäº†è§£å†³è‹¹æœçš„InputAccessoryViewçš„æŸäº›æŠ€æœ¯é™åˆ¶ï¼Œå°½ç®¡è¿™ç§è¡Œä¸ºéå¸¸ç›¸ä¼¼ã€‚ åœ¨ viewDidLoad æˆ– init è§†å›¾æ§åˆ¶å™¨ä¸­ï¼Œåˆå§‹åŒ– METextInputViewã€‚12self.meTextInputView = [[METextInputView alloc] initWithFrame:CGRectZero];self.meTextInputView.delegate = self; æ‚¨éœ€è¦å°†è‡ªå·±åˆ†é…ç»™å§”æ‰˜ï¼Œä»¥ä¾¦å¬äº‹ä»¶çš„å›è°ƒï¼Œå¦‚ç‚¹å‡»å‘é€æˆ–ç…§ç›¸æœºæŒ‰é’®å’Œé”®ç›˜äº‹ä»¶ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šæˆ‘ä»¬è¦åœ¨é¡µé¢ä¸Šä½¿ç”¨ä»€ä¹ˆç±»å‹çš„è¾“å…¥ã€‚ æµ®åŠ¨è¾“å…¥å¦‚æœä½ çš„åº”ç”¨ç¨‹åºéœ€è¦ä¸€ä¸ªæµ®åŠ¨çš„ iMessage ç±»å‹çš„æ–‡æœ¬è¾“å…¥ï¼Œä½ å¯ä»¥ç®€å•åœ°å°† METextInputView æ·»åŠ åˆ°ä½ çš„è§†å›¾ä¸­ã€‚ 1[self.view addSubview:self.meTextInputView]; è¿™ä¸ªé»˜è®¤æ¨¡å¼åœ¨é”®ç›˜ä¹‹åï¼Œéšç€ä¸€ä¸ªæ‘„åƒå¤´/å‘é€æŒ‰é’®ï¼Œå¹¶ä¸”å½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªé•¿æ¶ˆæ¯æ—¶ï¼Œæ‰©å±•åˆ°å…¨å±ã€‚ METextInputView éµå¾ª â€˜firstResponder` æ¨¡å¼æ¥éšè—/æ˜¾ç¤ºé”®ç›˜ã€‚ æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥å®šåˆ¶è¿™ä¸ªè¾“å…¥å’Œå¯¼èˆªæ çš„å¤–è§‚å’Œæ„Ÿè§‰ã€‚ æˆ‘ä»¬å°†åœ¨ Customizations ä¸­ä»‹ç» åˆ†ç¦»çš„è¾“å…¥å¦‚æœæ‚¨éœ€è¦ä»é”®ç›˜åˆ†ç¦»çš„æ–‡æœ¬è¾“å…¥ï¼Œæ‚¨å°†éœ€è¦è°ƒç”¨ detachTextInputView æ–¹æ³•ï¼Œç„¶åå°† textInputContainerView æ·»åŠ åˆ°æ‚¨çš„è§†å›¾ã€‚ 12[self.meTextInputView detachTextInputView:YES];[self.view addSubview:self.meTextInputView.textInputContainerView]; ç”±äºâ€œå‘é€æŒ‰é’®â€å’Œâ€œæ‘„åƒå¤´â€æŒ‰é’®åœ¨æ­¤æ¨¡å¼ä¸‹å¤„äºéšè—çŠ¶æ€ï¼Œå› æ­¤æ‚¨éœ€è¦åœ¨ METextInputView çš„ sendMessage æ–¹æ³•ä¸Šé™„åŠ ä¸€ä¸ªæŒ‰é’®æ¥è§¦å‘æ•è·æ–‡æœ¬ã€‚ è¾“å…¥å¤§å°å˜åŒ–å½“ä½¿ç”¨æˆ‘ä»¬çš„æµ®åŠ¨è¾“å…¥æ—¶ï¼Œæ‚¨å°†å¸Œæœ›åœ¨æ˜¾ç¤ºé”®ç›˜æ—¶ä½¿ç”¨ didChangeFrame å§”æ‰˜å›è°ƒæ¥è°ƒæ•´å‘¨å›´çš„è§†å›¾ã€‚ 123-(void)meTextInputView:(METextInputView *)inputView didChangeFrame:(CGRect)frame &#123; self.tableView.frame = CGRectMake(self.tableView.frame.origin.x, self.tableView.frame.origin.y, self.tableView.frame.size.width, self.meTextInputView.frame.origin.y);&#125; å‘é€æ¶ˆæ¯Makemoji æ¶ˆæ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ªå®Œå…¨å½¢æˆçš„HTMLæ¶ˆæ¯ï¼Œä¸€ä¸ªASCIIå…¼å®¹çš„æ˜æ–‡æ¶ˆæ¯å’Œä¸€ä¸ª substitute æ¶ˆæ¯ã€‚ ä½ ä½¿ç”¨å“ªä¸€ä¸ªå–å†³äºä½ çš„æ¶ˆæ¯å­˜å‚¨æ˜¯å¦‚ä½•é…ç½®çš„ã€‚ æ›¿ä»£æ–‡æœ¬å…è®¸æ‚¨å°†å¸¦æœ‰Makemojiè¡¨æƒ…ç¬¦å·å ä½ç¬¦çš„æ˜æ–‡å­˜å‚¨ä¸ºæ–‡æœ¬çš„ä¸€éƒ¨åˆ†ã€‚ è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ¶ˆæ¯ã€‚ 12345&#123; html = &quot;&lt;p dir=\\&quot;auto\\&quot; style=\\&quot;margin-bottom:16px;font-family:&apos;.SF UI Text&apos;;font-size:16px;font-weight:bold;\\&quot;&gt;&lt;span style=\\&quot;color:#000000;\\&quot;&gt;Hey lets play &lt;/span&gt;&lt;img style=\\&quot;vertical-align:middle;width:20px;height:20px;\\&quot; src=\\&quot;https://d1tvcfe0bfyi6u.cloudfront.net/emoji/14-large@2x.png\\&quot; id=\\&quot;14\\&quot; link=\\&quot;\\&quot; name=\\&quot;Pacman\\&quot; /&gt;&lt;span style=\\&quot;color:#000000;\\&quot;&gt; at the &lt;/span&gt;&lt;img style=\\&quot;vertical-align:middle;width:20px;height:20px;\\&quot; src=\\&quot;https://d1tvcfe0bfyi6u.cloudfront.net/emoji/692-large@2x.png\\&quot; id=\\&quot;692\\&quot; name=\\&quot;Arcade\\&quot; link=\\&quot;\\&quot; /&gt;&lt;/p&gt;\\n&quot;; plaintext = &quot;Hey lets play at the \\n&quot;; substitute = &quot;Hey lets play [Pacman.E] at the [Arcade.BA]&quot;;&#125; å½“ç”¨æˆ·ç‚¹å‡» â€˜sendButtonæ—¶ï¼ŒdidTapSend` å§”æ‰˜å›è°ƒè¢«è§¦å‘ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«htmlï¼Œplaintextå’Œsubstituteæ¶ˆæ¯çš„å­—ç¬¦ä¸²çš„NSDictionaryã€‚ 12345-(void)meTextInputView:(METextInputView *)inputView didTapSend:(NSDictionary *)message &#123; // send message to your backend here [self.messages addObject:message]; [self.tableView reloadData];&#125; ç„¶åï¼Œæ‚¨å¯ä»¥å°†é€‰æ‹©çš„éƒ¨åˆ†å‘é€åˆ°åç«¯ä»¥å­˜å‚¨æ¶ˆæ¯ã€‚ æ˜¾ç¤ºæ¶ˆæ¯ç°åœ¨ä½ å·²ç»æœ‰Makemojiæ¶ˆæ¯äº†ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªæ˜¾ç¤ºå®ƒä»¬çš„æ–¹æ³•ã€‚ é€šå¸¸è¿™å°†åœ¨ UITableViewCell ä¸­ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»ä½•è‡ªå®šä¹‰è§†å›¾æ¥æ˜¾ç¤ºæ¶ˆæ¯ã€‚ æˆ‘ä»¬å·²ç»åŒ…æ‹¬ä¸€ä¸ªä¼˜åŒ–çš„UITableViewCellsç”¨äºæ˜¾ç¤ºHTMLæ¶ˆæ¯å’Œä¸€ç§æ–¹æ³•æ¥è‡ªåŠ¨ç¼“å­˜ä½ çš„è¡¨å•å…ƒæ ¼é«˜åº¦ã€‚ è¿™å¯ä»¥é˜²æ­¢ä»»ä½•ä¸å¿…è¦çš„è¡¨æƒ…ç¬¦å·å’Œæ–‡æœ¬å¸ƒå±€ï¼Œå¹¶æé«˜æ€§èƒ½ã€‚ è¿™é‡Œæ˜¯æˆ‘ä»¬æä¾›çš„ä¿¡æ¯æ˜¾ç¤ºçš„æ¦‚è¿°ã€‚ MESimpleTableViewCellè¿™ä¸ªå•å…ƒæ ¼æä¾›äº†ä¸€ä¸ªåŸºæœ¬çš„å¸ƒå±€ï¼Œé»˜è®¤æƒ…å†µä¸‹å°è¯•ä½¿ç”¨æ•´ä¸ªå•å…ƒæ ¼åŒºåŸŸã€‚ æ‚¨å°†ä½¿ç”¨æ­¤å•å…ƒæ ¼ä½œä¸ºå­ç±»å¿«é€Ÿå®ç°è‡ªå®šä¹‰è¡¨æ ¼å•å…ƒæ ¼ã€‚ MEChatTableViewCellèŠå¤©å•å…ƒæä¾›ä¸€ä¸ªiMessageï¼Œå¦‚èŠå¤©æ³¡æ³¡ï¼Œé—´è·ï¼Œå¯è®¾å®šçš„æ–¹å‘å’Œé¢œè‰²è®¾ç½®ã€‚ MECollectionViewCellç®€å•è¡¨æ ¼å•å…ƒæ ¼çš„é›†åˆè§†å›¾ç‰ˆæœ¬ã€‚ MEMessageViewå•å…ƒçš„åº•å±‚è§†å›¾ï¼Œæ¶ˆæ¯çš„æ ¸å¿ƒæ˜¾ç¤ºè§†å›¾ã€‚ æ›¿ä»£æ–‡å­—ä½¿ç”¨ substitute ç±»å‹çš„æ¶ˆæ¯æ—¶ï¼Œå¯ä»¥é€šè¿‡åœ¨ METextInputView ä¸Šä½¿ç”¨ä¸‹é¢çš„é™æ€æ–¹æ³•å°†å…¶è½¬æ¢å›HTML 1+(NSString *)convertSubstituedToHTML:(NSString *)substitute withFontName:(NSString *)fontName pointSize:(CGFloat)pointSize textColor:(UIColor *)color é«˜åº¦ç¼“å­˜ä½¿ç”¨ cellHeightForHTML æ–¹æ³•è·å–æ¶ˆæ¯çš„è¡Œé«˜ã€‚ æ­¤æ–¹æ³•ç¼“å­˜å•å…ƒé«˜åº¦ä»¥æé«˜æ€§èƒ½ã€‚ 123456789101112// determine row height with HTML- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath &#123; if (self.meTextInputView == nil) &#123; return 0; &#125; NSDictionary * message = [self.messages objectAtIndex:indexPath.row]; return [self.meTextInputView cellHeightForHTML:[message objectForKey:@&quot;html&quot;] atIndexPath:indexPath maxCellWidth:self.tableView.frame.size.width cellStyle:MECellStyleChat];&#125; æ‚¨å¯ä»¥é€šè¿‡é‡ç½® METextInputView ä¸Šçš„ cachedHeights å±æ€§æ¥æ‰‹åŠ¨é‡ç½® UITableViewCell é«˜åº¦ç¼“å­˜ã€‚ è¡¨æ ¼å•å…ƒæ ¼ä½¿ç”¨MEChatTableViewCellï¼Œæ‚¨å¯ä»¥ä½¿ç”¨setCellDisplayåœ¨å·¦ä¾§æˆ–å³ä¾§æ˜¾ç¤ºèŠå¤©æ°”æ³¡ã€‚ è¿™åº”è¯¥å‘ç”Ÿåœ¨ä¸ºæ¯ä¸ªæ¶ˆæ¯è®¾ç½®æ‚¨çš„HTMLä¹‹å‰ã€‚ 12345678910111213141516171819202122- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath &#123; static NSString *CellIdentifier = @&quot;Cell&quot;; MEChatTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; if (cell == nil) &#123; cell = [[MEChatTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; &#125; // display chat cell on right side [cell setCellDisplay:MECellDisplayRight]; // display chat cell on left side if (indexPath.row % 2) &#123; [cell setCellDisplay:MECellDisplayLeft]; &#125; NSDictionary * message = [self.messages objectAtIndex:indexPath.row]; [cell setHTMLString:[message objectForKey:@&quot;html&quot;]]; return cell; &#125; Hypermoji - å¸¦æœ‰URLçš„è¡¨æƒ…ç¬¦å·æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ç§æ–°çš„æ–¹å¼æ¥å…±äº«å†…å®¹ï¼Œæµè§ˆç½‘é¡µï¼Œè§‚çœ‹è§†é¢‘æˆ–å¬éŸ³ä¹ï¼Œè€Œä¸ç”¨ç¦»å¼€Hypermojiçš„åº”ç”¨ç¨‹åºã€‚ è¦åœ¨Hypermojiï¼ˆå…·æœ‰URLé“¾æ¥çš„è¡¨æƒ…ç¬¦å·ï¼‰ä¸Šç‚¹å‡»æ—¶æ˜¾ç¤ºç½‘é¡µï¼Œè¯·ä½¿ç”¨ didTapHypermoji å§”æ‰˜å›è°ƒ 1234// handle tapping of links (Hypermoji)-(void)meTextInputView:(METextInputView *)inputView didTapHypermoji:(NSString*)urlString &#123; // open webview here&#125; ç›¸æœºæŒ‰é’®è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„UIButtonï¼Œå¯ä»¥ç”¨å›¾åƒæˆ–æ–‡æœ¬è¿›è¡Œè‡ªå®šä¹‰ã€‚ è¦å¤„ç†ç›¸æœºæŒ‰é’®çš„æ“ä½œï¼Œè¯·ä½¿ç”¨didTapCameraButtonå§”æ‰˜å›è°ƒã€‚ 123-(void)meTextInputView:(METextInputView *)inputView didTapCameraButton:(UIButton*)cameraButton &#123; // Present image controller&#125; è‡ªå®šä¹‰æ‚¨å¯ä»¥é€šè¿‡åœ¨ METextInputView ä¸Šè®¾ç½® displayCameraButton å±æ€§æ¥æ˜¾ç¤ºæˆ–éšè—å†…ç½®æ‘„åƒå¤´ 1self.meTextInputView.displayCameraButton = NO; æ‚¨å¯ä»¥é€šè¿‡åœ¨ METextInputView ä¸Šè®¾ç½® displaySendButton å±æ€§æ¥æ˜¾ç¤ºæˆ–éšè—å†…ç½®çš„å‘é€æŒ‰é’® 1self.meTextInputView.displaySendButton = NO; ä½¿ç”¨setFontä½ å¯ä»¥è®¾ç½®ä½ çš„æ–‡æœ¬è¾“å…¥çš„é»˜è®¤å­—ä½“ã€‚ 1[self.meTextInputView setFont:[UIFont systemFontOfSize:20]]; æ›´æ”¹å ä½ç¬¦æ–‡æœ¬çš„é¢œè‰² 1self.meTextInputView.placeholderLabel.textColor = [UIColor darkGrayColor]; æ§åˆ¶é”å®šçš„ç±»åˆ«æ‚¨å°†éœ€è¦ä¾¦å¬NSNotification MECategorySelectedLockedCategory æ¥ç¡®å®šä»€ä¹ˆæ—¶å€™é”å®šäº†ä¸€ä¸ªç±»åˆ«ã€‚ è¦è§£é”ä¸€ä¸ªç±»åˆ«ï¼Œæ‚¨éœ€è¦è°ƒç”¨ [MakemojiSDK unlockCategoryï¼š@â€œcategoryâ€] æ‚¨å¯ä»¥æ”¶å¬ â€˜MECategoryUnlockedSuccessNotificationå’ŒMECategoryUnlockedFailedNotification` ä»¥ç¡®å®šè§£é”å‘¼å«æ˜¯å¦æˆåŠŸã€‚ ğŸ“ åº”ç”¨ç¨‹åºæäº¤Makemoji SDK ä½¿ç”¨IDFAè·Ÿè¸ªIDæ¥ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºä¸­çš„è§†å›¾ï¼Œå…±äº«å’Œç‚¹å‡»è¿›è¡Œå½’å› ã€‚ å°†åº”ç”¨ç¨‹åºæäº¤åˆ° App Store æ—¶ï¼Œæ‚¨éœ€è¦æ£€æŸ¥â€œå°†æ­¤åº”ç”¨ç¨‹åºå®‰è£…åˆ°ä»¥å‰æŠ•æ”¾çš„å¹¿å‘Šâ€é€‰é¡¹ã€‚ ğŸ˜¬ è”ç³» å¾®ä¿¡ : WhatsXie é‚®ä»¶ : ReverseScale@iCloud.com åšå®¢ : https://reversescale.github.io","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"é—¨ç½—å¸(Monero XMR)ç»™ä½ æœ€è½»å·§çš„çŸ¿å·¥ç”Ÿæ´»(åŒ…æ•™åŒ…ä¼š)","slug":"Monero XMR","date":"2018-02-08T18:56:27.000Z","updated":"2018-11-15T14:40:15.273Z","comments":true,"path":"2018/02/09/Monero XMR/","link":"","permalink":"https://reversescale.github.io/2018/02/09/Monero XMR/","excerpt":"ä½ å‘å¾€èººç€èµšé’±å—ï¼Ÿä½ æƒ³ä¸åŠªåŠ›å·¥ä½œå°±å®ç°è´¢åŠ¡è‡ªç”±å—ï¼Ÿä½ æƒ³ä»€ä¹ˆéƒ½ä¸åšå°±æœ‰æ•°ä¸å®Œçš„é’±å—ï¼Ÿæ´—æ´—ç¡å§~","text":"ä½ å‘å¾€èººç€èµšé’±å—ï¼Ÿä½ æƒ³ä¸åŠªåŠ›å·¥ä½œå°±å®ç°è´¢åŠ¡è‡ªç”±å—ï¼Ÿä½ æƒ³ä»€ä¹ˆéƒ½ä¸åšå°±æœ‰æ•°ä¸å®Œçš„é’±å—ï¼Ÿæ´—æ´—ç¡å§~ ä»2017å¹´8æœˆ21æ—¥å¼€å§‹ï¼ŒXMRä¸€è·¯èµ°é«˜ï¼Œä»$55å·¦å³ï¼Œä¸€è·¯ä¸Šæ¶¨ï¼Œåˆ°æœ¬æ–‡å†™ä½œæ—¶ï¼Œå·²ç»è¾¾åˆ°$269ï¼ˆâ‰ˆï¿¥1,699ï¼‰ã€‚æ•°æ®æ¥æºï¼šCrypto coins mining profit calculator compared to Ethereum é—¨ç½—å¸ï¼ˆMoneroï¼Œä»£å·XMRï¼‰æ˜¯ä¸€ä¸ªåˆ›å»ºäº2014å¹´4æœˆå¼€æºåŠ å¯†è´§å¸ï¼Œå®ƒç€é‡äºéšç§ã€åˆ†æƒå’Œå¯æ‰©å±•æ€§ã€‚ä¸è‡ªæ¯”ç‰¹å¸è¡ç”Ÿçš„è®¸å¤šåŠ å¯†è´§å¸ä¸åŒï¼ŒMoneroåŸºäºCryptoNoteåè®®ï¼Œå¹¶åœ¨åŒºå—é“¾æ¨¡ç³ŠåŒ–æ–¹é¢æœ‰æ˜¾è‘—çš„ç®—æ³•å·®å¼‚ã€‚Moneroçš„æ¨¡å—åŒ–ä»£ç ç»“æ„å¾—åˆ°äº†æ¯”ç‰¹å¸æ ¸å¿ƒç»´æŠ¤è€…ä¹‹ä¸€çš„Wladimir J. van der Laançš„èµèµã€‚Moneroè‡´åŠ›äºæˆä¸ºå¯ä»£æ›¿çš„ä¸å¯è¿½è¸ªçš„ç”µå­è´§å¸ã€‚ç›¸æ¯”æ¯”ç‰¹å¸åŠå…¶åˆ†å‰ï¼ŒMoneroå…·æœ‰æ›´é«˜ç¨‹åº¦çš„åŒ¿åæ€§ã€‚ Moneroäº2014å¹´4æœˆ18æ—¥å‘å¸ƒã€‚ é«˜æ¶¨çš„å¸ä»·ä½¿å¾—åœ¨å›½å†…ä¸€ç›´é»˜é»˜æ— é—»çš„XMRç¬é—´æˆä¸ºç„¦ç‚¹ï¼Œç°åœ¨å·²ç»å˜æˆæŒ–çŸ¿æ”¶ç›Šæœ€é«˜çš„å¸ç§ä¹‹ä¸€ã€‚ä»¥1060 3Gä¸ºä¾‹ï¼Œåœ¨ä¸è¶…é¢‘çš„æƒ…å†µä¸‹ï¼ŒæŒ–æ˜XMRçš„é€Ÿåº¦åœ¨430H/så·¦å³ï¼Œä¸è®¡ç”µè´¹ï¼Œå•å¡æ—¥æ”¶ç›Šè¾¾åˆ°$1.62ï¼Œè¶…è¿‡äº†ä¹‹å‰æ”¶ç›Šä¹‹ç‹ETHã€‚ å¦‚ä½•æŒ–çŸ¿ï¼Ÿ ä½œä¸ºçŸ¿å·¥ï¼Œå¤§å®¶æœ€å…³å¿ƒçš„åº”è¯¥è¿˜æ˜¯æ€ä¹ˆæŒ–çŸ¿äº†ï¼Œä¸‹é¢å°±å‘å¤§å®¶ä»‹ç»ä¸€ä¸‹æŒ–çŸ¿çš„æœ€è½»å·§å§¿åŠ¿ã€‚ è·å¾—ä¸€ä¸ªé’±åŒ…åœ°å€ï¼ˆæ¨èï¼‰ä½¿ç”¨åœ¨çº¿é’±åŒ…ï¼šhttps://mymonero.com/ç‰¹ç‚¹ï¼šä½¿ç”¨æ–¹ä¾¿ï¼Œå®‰å…¨æ€§å·® æˆ–è€…åœ¨XMRçš„å®˜æ–¹ç½‘ç«™ä¸‹è½½é’±åŒ… Appï¼šMonero: Downloads(https://getmonero.org/downloads/)ç‰¹ç‚¹ï¼šç›¸å¯¹å®‰å…¨ï¼Œæ–¹ä¾¿æ€§å·® å‚ä¸æŒ–çŸ¿åœ¨ç½‘ä¸Šï¼Œä½ å¯èƒ½çœ‹åˆ°è¿‡è®¸è®¸å¤šå¤šç¡¬ä»¶é©±åŠ¨çš„æŒ–çŸ¿æ–¹å¼ï¼Œç»„åˆå¤šå°‘æ˜¾å¡çš„çŸ¿æ± ï¼Œä½†æ˜¯è¿™é‡Œçš„ä¸»é¢˜æ˜¯â€œæœ€è½»å·§â€ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåšå¸®å·¥å¥½äº†ã€‚ Coinhiveæ˜¯ä¸€ä¸ªæä¾›æ¶æ„JSè„šæœ¬çš„ç½‘ç«™å¹³å°ï¼ˆhttps://coinhive.comï¼‰ï¼Œå…è®¸æ”»å‡»è€…å°†è„šæœ¬æŒ‚åœ¨åˆ°è‡ªå·±çš„æˆ–å…¥ä¾µçš„ç½‘ç«™ä¸Šï¼Œæ‰€æœ‰è®¿é—®è¯¥ç½‘ç«™çš„ç”¨æˆ·éƒ½å¯èƒ½æˆä¸ºé—¨ç½—å¸çš„æŒ–æ˜çŸ¿å·¥ã€‚è¯¥å·¥å…·åœ¨ç½‘ç»œçŠ¯ç½ªåˆ†å­ä¸­é—´è¿…é€Ÿæ‰©æ•£ï¼Œä¿¨ç„¶å·²ç»æˆä¸ºäº†äº’è”ç½‘çš„â€œMartin Shkreliâ€ã€‚ Coinhiveå·¥å…·å…¶å®æ˜¯ä¸€ä¸ªJavaåº“ï¼Œç”¨æˆ·è®¿é—®åŠ è½½è¯¥JSçš„ç½‘ç«™åï¼ŒCoinhiveçš„JSä»£ç åº“åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šè¿è¡Œï¼Œå¼€å§‹ä¸ºç½‘ç«™æ‰€æœ‰è€…æŒ–æ˜é—¨ç½—å¸ï¼Œæ¶ˆè€—çš„æ˜¯ç”¨æˆ·è‡ªå·±çš„CPUèµ„æºã€‚ ä¸å¾—ä¸è¯´ï¼Œè¿™ä¸ªæƒ³æ³•ç›¸å½“åœ°æœ‰åˆ›æ„ï¼Coinhiveäº9æœˆ14æ—¥æ¨å‡ºï¼Œä½œè€…å‘ç«™é•¿ä»¬æ¨å¹¿Coinhiveæ—¶å£°ç§°ï¼Œç«™é•¿ä»¬åŠ è½½äº†Coinhive JSå°±å¯ä»¥å®ç°ç›ˆåˆ©ï¼šå®ƒä»…è€—è´¹è®¿é—®ç”¨æˆ·çš„å°‘éƒ¨åˆ†CPUï¼Œå°±å¯ä»¥ä¸ºç½‘ç«™æ‰€æœ‰è€…èµšå–åˆ©æ¶¦ï¼Œç”¨äºæ”¯æŒä»–ä»¬çš„ä¸šåŠ¡ï¼Œå†ä¹Ÿä¸ç”¨æ·»åŠ å„ç§çƒ¦äººçš„å¹¿å‘Šäº†ã€‚ è¿™ä¸€æƒ³æ³•è·å¾—äº†æŸäº›äººçš„æ”¯æŒï¼Œåœ¨The Pirate Bayï¼ˆå…¨çƒçŸ¥åçš„BTä¸‹è½½ç½‘ç«™ï¼‰è¯•è¿è¡Œäº†ä¸¤å¤©åï¼Œç”±äºç”¨æˆ·çš„è´Ÿé¢åé¦ˆï¼Œæœ€åæ”¾å¼ƒäº†ã€‚ æœªå¼€æƒ…å†µä¸‹ CPU å ç”¨ï¼š ç†è®ºä¸Šä½ å¯ä»¥ä½¿ç”¨é—²ç½®çš„é‚£ 54.08% è¿›è¡ŒæŒ–çŸ¿ï¼Œå®æµ‹å¯¹ CPU çš„è´Ÿè·è¿˜æ˜¯å¾ˆå¤§çš„ä¸‹å›¾æ˜¯å¼€é€š100 Threads ä¸‹å¤„ç†å™¨å ç”¨æƒ…å†µï¼š çŸ¿å·¥åˆ†æˆä¹‹å‰å·²ç»ä»‹ç»è¿‡è¿™ç§æœºåˆ¶çš„åŸç†äº†ï¼Œè½»é‡ä¹Ÿæ³¨å®šç€æ”¶ç›Šä¸ä¼šå¤ªé«˜ï¼Œä½†æ˜¯ç®€å•çš„ä½¿ç”¨å´å¯ä»¥ä¸ºä½ çœä¸‹å¤§æŠŠæ—¶é—´ï¼Œç›¸ä¿¡ä½ çš„æ—¶é—´æ‰æ˜¯æœ€å®è´µçš„ã€‚ ä¸Šé¢é‚£äº›å¯¹äºåˆšåˆšæ¥è§¦çš„ä½ å¯èƒ½ä¸æ˜¯å¾ˆå—ç”¨ï¼Œé‚£æ¥çœ‹çœ‹ä¸‹é¢è¿™äº› ä»¥ä¸ºè¿™æ ·ä»¥åæ¯å¤©çš„æ—©é¤é’±å°±æœ‰äº†ï¼ŸğŸ˜†é‚£ä½ æœ€å¥½ä»”ç»†è¯»è¯»ä¸‹é¢çš„ä¸œè¥¿â€¦","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"iOS æ¨¡å—åŒ–è·¯ç”±ä¹‹ JLRoute","slug":"Library JLRoute","date":"2018-02-01T13:56:27.000Z","updated":"2018-11-15T15:08:30.895Z","comments":true,"path":"2018/02/01/Library JLRoute/","link":"","permalink":"https://reversescale.github.io/2018/02/01/Library JLRoute/","excerpt":"åŸºäº JLRoute å®ç°çš„æ¨¡å—åŒ–è·¯ç”±ï¼Œæ”¯æŒè‡ªåŠ¨æ³¨å†Œæ˜ å°„è¡¨ã€Url è·³è½¬åŸç”Ÿé¡µé¢ã€WebView é¡µé¢å’Œ ReactNative é¡µé¢ã€è·³è½¬ä¼ å‚åŠå›è°ƒç­‰~","text":"åŸºäº JLRoute å®ç°çš„æ¨¡å—åŒ–è·¯ç”±ï¼Œæ”¯æŒè‡ªåŠ¨æ³¨å†Œæ˜ å°„è¡¨ã€Url è·³è½¬åŸç”Ÿé¡µé¢ã€WebView é¡µé¢å’Œ ReactNative é¡µé¢ã€è·³è½¬ä¼ å‚åŠå›è°ƒç­‰~ æ¨¡å—åŒ–å·²ç»æˆä¸ºè°ƒå‰‚åºå¤§é¡¹ç›®ç»“æ„çš„ä¸€å‰‚è‰¯è¯ï¼Œå¯¹é¡¹ç›®çš„å¼€å‘ã€ç»´æŠ¤å’Œåç»­çš„æ‰©å±•çš„å¥½å¤„å·²ç»ä¸è¨€è€Œå–»ã€‚ ğŸ‘¨ğŸ»â€ğŸ’» Github Demo ğŸ¤– è¦æ±‚ iOS 8.0+ Xcode 7.0+ ğŸ¯ å®‰è£…æ–¹æ³•å®‰è£…åœ¨ iOS, ä½ éœ€è¦åœ¨ Podfile ä¸­æ·»åŠ .1234567891011121314151617source &apos;https://github.com/CocoaPods/Specs.git&apos;platform :ios, &apos;9.0&apos;use_frameworks!pod &apos;JLRoutes&apos;, &apos;~&gt; 2.0.1&apos;# &apos;node_modules&apos;ç›®å½•ä¸€èˆ¬ä½äºæ ¹ç›®å½•ä¸­# ä½†æ˜¯å¦‚æœä½ çš„ç»“æ„ä¸åŒï¼Œé‚£ä½ å°±è¦æ ¹æ®å®é™…è·¯å¾„ä¿®æ”¹ä¸‹é¢çš„`:path`pod &apos;React&apos;, :path =&gt; &apos;./node_modules/react-native&apos;, :subspecs =&gt; [ &apos;Core&apos;, &apos;RCTText&apos;, &apos;RCTNetwork&apos;, &apos;RCTWebSocket&apos;, # è¿™ä¸ªæ¨¡å—æ˜¯ç”¨äºè°ƒè¯•åŠŸèƒ½çš„ # åœ¨è¿™é‡Œç»§ç»­æ·»åŠ ä½ æ‰€éœ€è¦çš„æ¨¡å—]# å¦‚æœä½ çš„RNç‰ˆæœ¬ &gt;= 0.42.0ï¼Œè¯·åŠ å…¥ä¸‹é¢è¿™è¡Œpod &quot;Yoga&quot;, :path =&gt; &quot;./node_modules/react-native/ReactCommon/yoga&quot; å¯åŠ¨ ReactNative ç¯å¢ƒ1.ä¿®æ”¹é¡¹ç›®ModuleARNPageViewController.m IP è·³è½¬åœ°å€ 2.è¿›å…¥é¡¹ç›®æ‰€åœ¨ç›®å½•ï¼Œè¿è¡Œ(é¦–æ¬¡è¿è¡Œéœ€è¦ npm install) 1npm start ğŸ›  JLRoutesçš„å·¥ä½œæµç¨‹å’ŒåŸç†å•ä¸€çš„Schemeæ³¨å†Œè¿‡ç¨‹ï¼š 1.è°ƒç”¨æ³¨å†Œæ–¹æ³•ï¼ˆç”¨æˆ·æ³¨å†ŒroutePatternï¼Œé»˜è®¤ä¼˜å…ˆçº§0ï¼‰ 1- (void)addRoute:(NSString *)routePattern handler:(BOOL (^__nullable)(NSDictionary&lt;NSString *, id&gt; *parameters))handlerBlock; 2.è·¯ç”±è§£æï¼ˆè¿™äº›è§£æè·Ÿæˆ‘ä»¬è®¾ç½®è·¯ç”±çš„è§„åˆ™æœ‰ç›´æ¥å…³ç³»ï¼‰ (1)åˆ¤æ–­æ¥å£URLæ˜¯å¦è®¾ç½®å¯é€‰æ€§URLå¹¶å°†å¯¹åº”çš„URLå°è£…æˆJLRRouteDefinitionå¯¹è±¡ (2)å°†JLRRouteDefinitionå¯¹è±¡è£…è½½è¿›ä¸€ä¸ªå¯å˜æ•°ç»„ï¼Œå†…å­˜ä¿ç•™äº†æ‰€æœ‰çš„å¯¹è±¡ï¼ï¼ ï¼ˆJLRRouteDefinitionå¯¹è±¡åŒ…æ‹¬æœ‰è·¯å¾„ï¼Œå‚æ•°è§£æï¼Œblockç­‰ä¿¡æ¯ï¼‰ å•ä¸€çš„Schemeè°ƒç”¨è¿‡ç¨‹ï¼š1.è°ƒç”¨URL 1+ (BOOL)routeURL:(NSURL *)URL 2.è§£æURLï¼Œå°†å‚æ•°ï¼Œè·¯ç”±ä¿¡æ¯å°è£…æˆJLRRouteRequestå¯¹è±¡ 1- (instancetype)initWithURL:(NSURL *)URL alwaysTreatsHostAsPathComponent:(BOOL)alwaysTreatsHostAsPathComponent 3.ç»™JLrouteRequestå¯¹è±¡å’Œè·¯ç”±æ•°ç»„é‡Œçš„JLRRouteDefinitionå¯¹è±¡ä½œæ¯”å¯¹ï¼Œå¹¶ä¸”è¿”å›JLRRouteResponse å¯¹è±¡æŠ½å‡ºå‚æ•°å’ŒURLåœ¨æ•°ç»„é‡Œ 1JLRRouteResponse *response = [route routeResponseForRequest:request decodePlusSymbols:shouldDecodePlusSymbols]; 4.è°ƒç”¨JLRRouteResponse å¯¹è±¡é‡Œé¢çš„å›è°ƒæ–¹æ³• 1[route callHandlerBlockWithParameters:finalParameters]; JLRoutesçš„URLæ³¨å†Œè§„åˆ™ï¼š 1.æ™®é€šæ³¨å†Œ 123456JLRoutes *routes = [JLRoutes globalRoutes];[routes addRoute:@&quot;/user/view/:userID&quot; handler:^BOOL(NSDictionary *parameters) &#123;NSString *userID = parameters[@&quot;userID&quot;]; // defined in the route by specifying &quot;:userID&quot;// present UI for viewing user with ID &apos;userID&apos;return YES; // return YES to say we have handled the route&#125;]; URLé‡Œï¼Œåˆ†å·è¡¨ç¤ºè¿™ä¸ªæ˜¯å‚æ•° å¦å¤–ä¸€ç§æ³¨å†Œæ–¹å¼ï¼Œä¸‹æ ‡æ³¨å†Œæ³• 123JLRoutes.globalRoutes[@&quot;/route/:param&quot;] = ^BOOL(NSDictionary *parameters) &#123;// ...&#125;; å¦‚ä½•æŒ‰ç…§ä»¥ä¸Šçš„æ–¹å¼æ³¨å†Œï¼Œåœ¨ä»»ä½•æ—¶åˆ»ï¼ˆåŒ…æ‹¬åœ¨å…¶å®ƒçš„APPï¼‰ä½ éƒ½å¯ä»¥è°ƒç”¨è¿™ä¸ªURLã€‚ 12NSURL *viewUserURL = [NSURL URLWithString:@&quot;myapp://user/view/joeldev&quot;];[[UIApplication sharedApplication] openURL:viewUserURL]; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåœ¨parmameterså­—å…¸é‡Œé¢çš„userIDä¼šä¼ ç»™blockï¼Œå®ƒæ˜¯ä¸€ä¸ªé”®å€¼å¯¹ã€‚â€userIDâ€: â€œjoeldevâ€ã€‚ç»™UIå±‚æˆ–è€…ä»»ä½•éœ€è¦å®ƒçš„åœ°æ–¹ç”¨çš„ã€‚ å­—å…¸å‚æ•°ï¼š å­—å…¸å‚æ•°æ€»åŒ…æ‹¬è‡³å°‘ä¸€ä¸‹3ä¸ªé”®ï¼š 12345&#123;&quot;JLRouteURL&quot;: &quot;(the NSURL that caused this block to be fired)&quot;,&quot;JLRoutePattern&quot;: &quot;(the actual route pattern string)&quot;,&quot;JLRouteScheme&quot;: &quot;(the route scheme, defaults to JLRoutesGlobalRoutesScheme)&quot;&#125; å¤„ç†Block ä½ ä¼šå‘ç°ï¼Œæ¯ä¸ªæ³¨å†Œçš„blockéƒ½ä¼šè¿”å›ä¸€ä¸ªYESã€‚è¿™ä¸ªå€¼ï¼Œå¦‚æœä½ è¿”å›NOï¼ŒJLRoutesä¼šè·³è¿‡è¿™ä¸ªåŒ¹é…ï¼Œç„¶åç»§ç»­å»åŒ¹é…å…¶å®ƒçš„ã€‚ å¦‚æœä½ çš„blockè®¾ç½®æˆnilï¼Œå®ƒä¼šé»˜è®¤è¿”å›YESã€‚ 2.å¤æ‚æ³¨å†Œ 1234567[[JLRoutes globalRoutes] addRoute:@&quot;/:object/:action/:primaryKey&quot; handler:^BOOL(NSDictionary *parameters) &#123;NSString *object = parameters[@&quot;object&quot;];NSString *action = parameters[@&quot;action&quot;];NSString *primaryKey = parameters[@&quot;primaryKey&quot;];// stuffreturn YES;&#125;]; è¿™ä¸ªåœ°å€ä¼šè¢«åŒ¹é…å¾ˆå¤šURLï¼Œå¦‚/user/view/joeldev or /post/edit/123ã€‚è¿™äº›URLä¸Šçš„æ˜¯å‚æ•°ã€‚ 12NSURL *editPost = [NSURL URLWithString:@&quot;myapp://post/edit/123?debug=true&amp;foo=bar&quot;];[[UIApplication sharedApplication] openURL:editPost]; è¿™æ—¶ï¼Œpramaterå­—å…¸å°±ä¼šæ˜¯ä»¥ä¸‹è¿™æ ·çš„ï¼ˆä¼ å‚ï¼‰ 12345678910&#123;&quot;object&quot;: &quot;post&quot;,&quot;action&quot;: &quot;edit&quot;,&quot;primaryKey&quot;: &quot;123&quot;,&quot;debug&quot;: &quot;true&quot;,&quot;foo&quot;: &quot;bar&quot;,&quot;JLRouteURL&quot;: &quot;myapp://post/edit/123?debug=true&amp;foo=bar&quot;,&quot;JLRoutePattern&quot;: &quot;/:object/:action/:primaryKey&quot;,&quot;JLRouteScheme&quot;: &quot;JLRoutesGlobalRoutesScheme&quot;&#125; 3.Schemeï¼ˆæœ‰æ²¡æœ‰å¤šæ€çš„æ„Ÿè§‰ï¼‰ JLRoutesæ”¯æŒç”¨æŒ‡å®šçš„URL schemeæ¥åˆ›å»ºè·¯ç”±ã€‚ç›¸åŒçš„schemeæ‰èƒ½è¢«åŒ¹é…ã€‚é»˜è®¤åœ°ï¼Œæ‰€æœ‰çš„URLä¼šè®¾ç½®è¿›global schemeã€‚ 123456789101112[[JLRoutes globalRoutes] addRoute:@&quot;/foo&quot; handler:^BOOL(NSDictionary *parameters) &#123;// This block is called if the scheme is not &apos;thing&apos; or &apos;stuff&apos; (see below)return YES;&#125;];[[JLRoutes routesForScheme:@&quot;thing&quot;] addRoute:@&quot;/foo&quot; handler:^BOOL(NSDictionary *parameters) &#123;// This block is called for thing://fooreturn YES;&#125;];[[JLRoutes routesForScheme:@&quot;stuff&quot;] addRoute:@&quot;/foo&quot; handler:^BOOL(NSDictionary *parameters) &#123;// This block is called for stuff://fooreturn YES;&#125;]; å¦‚æœä½ è°ƒç”¨çš„ä½¿ç”¨ï¼Œæ˜¯è¿™æ ·è°ƒç”¨çš„ 123[[JLRoutes globalRoutes] addRoute:@&quot;/global&quot; handler:^BOOL(NSDictionary *parameters) &#123;return YES;&#125;]; å®ƒåªä¼šè°ƒç”¨global schemeçš„å¯¹åº”çš„URLã€‚ä¸ä¼šè°ƒç”¨ting schemeé‡Œé¢å¯¹åº”çš„URLã€‚ å½“ç„¶ï¼Œä½ å¯ä»¥è®¾ç½®ï¼Œå¦‚æœæŒ‡å®šçš„schemeæ²¡æœ‰è¿™ä¸ªURLï¼Œå»æŸ¥è¯¢global scheme æœ‰æ²¡æœ‰ã€‚ä½ éœ€è¦è®¾ç½®ä¸€ä¸ªå±æ€§ã€‚ 1[JLRoutes routesForScheme:@&quot;thing&quot;].shouldFallbackToGlobalRoutes = YES; 3.é€šé…ç¬¦çš„è®¾ç½®URLçš„æ–¹å¼ é€šé…ç¬¦ä¸ºï¼š* é€šé…ç¬¦ç¬¦åé¢æ‰€æœ‰çš„URLä¸Šçš„å‚æ•°éƒ½ä¼šä»¥ä¸€ä¸ªæ•°ç»„ä¿å­˜åœ¨parameterså­—å…¸é‡Œé¢çš„JLRouteWildcardComponentsKeyå¯¹åº”çš„valueé‡Œã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ æ³¨å†ŒURLå¦‚ä¸‹: 123456789[[JLRoutes globalRoutes] addRoute:@&quot;/wildcard/*&quot; handler:^BOOL(NSDictionary *parameters) &#123;NSArray *pathComponents = parameters[JLRouteWildcardComponentsKey];if ([pathComponents count] &gt; 0 &amp;&amp; [pathComponents[0] isEqualToString:@&quot;joker&quot;]) &#123;// the route matched; do stuffreturn YES;&#125;// not interested unless the joker&apos;s in itreturn NO;&#125;]; å¦‚æœè°ƒç”¨çš„URLå¼€å§‹æ˜¯ï¼wildcardï¼Œè¿™ä¸ªè·¯ç”±å°±å¯èƒ½è¢«è§¦å‘ï¼ï¼å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯jokerï¼Œå°±è¢«è§¦å‘ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±è¢«æ‹’ç»è§¦å‘ã€‚ã€‚ã€‚ 4.é€‰æ‹©æ€§è·¯ç”± å¦‚æœè·¯ç”±åœ°å€è®¾ç½®æ ·å¼æœ‰æ‹¬å·ï¼Œå¦‚ï¼š/the(/foo/:a)(/bar/:b)ï¼Œå…¶å®å®ƒä»£è¡¨çš„URLæœ‰å¦‚ä¸‹ï¼š 1234/the/foo/:a/bar/:b/the/foo/:a/the/bar/:b/the 5.æŸ¥è¯¢Routes ä¸‹é¢çš„æ–¹å¼ï¼Œä½ å¯ä»¥æŸ¥çœ‹Routesé‡Œæ‰€æœ‰æ³¨å†Œçš„URL Routesã€‚ 1234/// All registered routes, keyed by scheme+ (NSDictionary &lt;NSString *, NSArray &lt;JLRRouteDefinition *&gt; *&gt; *)allRoutes;/// Return all registered routes in the receiving scheme namespace.- (NSArray &lt;JLRRouteDefinition *&gt; *)routes; è‡ªå®šä¹‰è·¯ç”±è§£æå¦‚æœä½ æƒ³è‡ªå·±å®šåˆ¶ä¸€ä¸ªè·¯ç”±ç¼–è¾‘ï¼Œä½ å¯ä»¥ç»§æ‰¿JLRouteDefinitionå¹¶ä¸”ç”¨ addRouteï¼šæ–¹æ³•å»æ·»åŠ ä½ è‡ªå®šä¹‰ç±»çš„å¯¹è±¡ã€‚ ğŸ“ è°ƒç ”æ¥æºJLRoutesï¼šhttps://github.com/joeldev/JLRoutes JLRoutesèµ„æ–™åšå®¢ï¼šhttps://www.varsiri.com/archives/305 âš– åè®®123456789101112131415161718192021MIT LicenseCopyright (c) 2017 ReverseScalePermission is hereby granted, free of charge, to any person obtaining a copyof this software and associated documentation files (the &quot;Software&quot;), to dealin the Software without restriction, including without limitation the rightsto use, copy, modify, merge, publish, distribute, sublicense, and/or sellcopies of the Software, and to permit persons to whom the Software isfurnished to do so, subject to the following conditions:The above copyright notice and this permission notice shall be included in allcopies or substantial portions of the Software.THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS ORIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THEAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHERLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THESOFTWARE. ğŸ˜¬ è”ç³» å¾®ä¿¡ : WhatsXie é‚®ä»¶ : ReverseScale@iCloud.com åšå®¢ : https://reversescale.github.io","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"iPhone X + iOS 11 é€‚é…æŒ‡å—","slug":"iPhone X iOS 11","date":"2017-09-30T09:56:27.000Z","updated":"2018-11-15T14:50:44.938Z","comments":true,"path":"2017/09/30/iPhone X iOS 11/","link":"","permalink":"https://reversescale.github.io/2017/09/30/iPhone X iOS 11/","excerpt":"åŒ—äº¬æ—¶é—´ä»Šå¤©å‡Œæ™¨1ç‚¹ï¼Œè‹¹æœå†ä¸€æ¬¡è®©å…¨ä¸–ç•Œæ²¸è…¾ã€‚iPhone X å¸¦ç»™æˆ‘ä»¬çš„æœ€å¤§æ”¹å˜ï¼šå…¨å± Super Retinaæ˜¾ç¤ºå±ã€‚å®ƒæä¾›äº†æ›´å¤šçš„å†…å®¹æ˜¾ç¤ºç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿè¥é€ äº†æ›´åŠ æ·±å…¥çš„æ²‰æµ¸æ„Ÿã€‚ä½œä¸º iOS å¼€å‘è€…ï¼Œåœ¨ä¸ºå¼ºå¤§çš„ Face ID å’Œå…¨é¢å±æ¬£å–œçš„åŒæ—¶ï¼Œæˆ‘æ›´æ‹…å¿§â€œé½åˆ˜æµ·â€çš„é€‚é…ï¼ ä¸‹é¢ç»“åˆå®˜æ–¹çš„äººæœºäº¤äº’æŒ‡å—ï¼Œæ¥äº†è§£ä¸‹å¦‚ä½•è®¾è®¡ App æ‰èƒ½åœ¨iPhone X å’Œå…¶ä»–æ‰€æœ‰ iOS è®¾å¤‡ä¸Šéƒ½çœ‹èµ·æ¥å¾ˆæ£’~","text":"åŒ—äº¬æ—¶é—´ä»Šå¤©å‡Œæ™¨1ç‚¹ï¼Œè‹¹æœå†ä¸€æ¬¡è®©å…¨ä¸–ç•Œæ²¸è…¾ã€‚iPhone X å¸¦ç»™æˆ‘ä»¬çš„æœ€å¤§æ”¹å˜ï¼šå…¨å± Super Retinaæ˜¾ç¤ºå±ã€‚å®ƒæä¾›äº†æ›´å¤šçš„å†…å®¹æ˜¾ç¤ºç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿè¥é€ äº†æ›´åŠ æ·±å…¥çš„æ²‰æµ¸æ„Ÿã€‚ä½œä¸º iOS å¼€å‘è€…ï¼Œåœ¨ä¸ºå¼ºå¤§çš„ Face ID å’Œå…¨é¢å±æ¬£å–œçš„åŒæ—¶ï¼Œæˆ‘æ›´æ‹…å¿§â€œé½åˆ˜æµ·â€çš„é€‚é…ï¼ ä¸‹é¢ç»“åˆå®˜æ–¹çš„äººæœºäº¤äº’æŒ‡å—ï¼Œæ¥äº†è§£ä¸‹å¦‚ä½•è®¾è®¡ App æ‰èƒ½åœ¨iPhone X å’Œå…¶ä»–æ‰€æœ‰ iOS è®¾å¤‡ä¸Šéƒ½çœ‹èµ·æ¥å¾ˆæ£’~ å‰è¨€åŒ—äº¬æ—¶é—´ä»Šå¤©å‡Œæ™¨1ç‚¹ï¼Œè‹¹æœå†ä¸€æ¬¡è®©å…¨ä¸–ç•Œæ²¸è…¾ã€‚iPhone X å¸¦ç»™æˆ‘ä»¬çš„æœ€å¤§æ”¹å˜ï¼šå…¨å± Super Retinaæ˜¾ç¤ºå±ã€‚å®ƒæä¾›äº†æ›´å¤šçš„å†…å®¹æ˜¾ç¤ºç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿè¥é€ äº†æ›´åŠ æ·±å…¥çš„æ²‰æµ¸æ„Ÿã€‚ä½œä¸º iOS å¼€å‘è€…ï¼Œåœ¨ä¸ºå¼ºå¤§çš„ Face ID å’Œå…¨é¢å±æ¬£å–œçš„åŒæ—¶ï¼Œæˆ‘æ›´æ‹…å¿§â€œé½åˆ˜æµ·â€çš„é€‚é…ï¼ ä¸‹é¢ç»“åˆå®˜æ–¹çš„äººæœºäº¤äº’æŒ‡å—ï¼Œæ¥äº†è§£ä¸‹å¦‚ä½•è®¾è®¡ App æ‰èƒ½åœ¨iPhone X å’Œå…¶ä»–æ‰€æœ‰ iOS è®¾å¤‡ä¸Šéƒ½çœ‹èµ·æ¥å¾ˆæ£’ã€‚ ç†è®ºéƒ¨åˆ†å±å¹•å°ºå¯¸ åœ¨ç«–å±ä¸‹ï¼ŒiPhone X ä¸Šçš„æ˜¾ç¤ºçš„å®½åº¦ä¸ iPhone 6ï¼ŒiPhone 7å’Œ iPhone 8çš„4.7è‹±å¯¸æ˜¾ç¤ºå±çš„å®½åº¦ä¿æŒä¸€è‡´ã€‚ç„¶è€Œï¼ŒiPhone X æ¯”4.7è‹±å¯¸æ˜¾ç¤ºå±é«˜äº†145ä¸ªç‚¹ï¼Œè¿™å¯¼è‡´å¢åŠ äº†å¤§çº¦20ï¼…çš„å‚ç›´é«˜åº¦å†…å®¹ã€‚ å¤§å®¶åœ¨ä¸ºè®¾è®¡å¸ˆæ‚²ä¼¤çš„åŒæ—¶ä¹Ÿä¸è¦å¿˜è®°æ·»åŠ å¯åŠ¨å›¾ï¼ˆLaunchImage or LaunchScreen.storyboardï¼‰å‘¦~ å®‰å…¨åŒº åœ¨ iPhone X å¸ƒå±€ä¸­ï¼Œæœ€å…³é”®çš„æ˜¯ï¼šå¿…é¡»ç¡®ä¿å¸ƒå±€å¡«æ»¡å±å¹•ï¼ŒåŒæ—¶åˆä¸ä¼šè¢«è®¾å¤‡çš„åœ†è§’ï¼Œä¼ æ„Ÿå™¨å¤–å£³æˆ–ç”¨äºè®¿é—®ä¸»å±å¹•çš„æŒ‡ç¤ºç¯æ‰€é®ç›–ï¼Œè‹¹æœä¸ºç§°æ­¤åŒºåŸŸä¸ºâ€œå®‰å…¨åŒºâ€ã€‚ å¯å–œçš„æ˜¯ï¼Œå¤§å¤šæ•°æ ‡å‡†çš„ç³»ç»Ÿæä¾›çš„UIå…ƒç´ å’Œæ§ä»¶ï¼ˆå¦‚ navigation barsï¼Œtables å’Œ collectionsï¼‰éƒ½å·²ç»ä¸ºæ–°å¤–å½¢åšäº†å¾ˆå¥½çš„é€‚é…ã€‚ èƒŒæ™¯å·²ç»å»¶ä¼¸åˆ°æ˜¾ç¤ºå™¨çš„è¾¹ç¼˜ï¼Œå¹¶ä¸”UIå…ƒä»¶è¢«å¾ˆæ°å½“åœ°æ’å…¥å’Œå®šä½åœ¨å®‰å…¨åŒºåŸŸã€‚ å› æ­¤ï¼Œå¯¹äºå…·æœ‰è‡ªå®šä¹‰å¸ƒå±€çš„ Appï¼Œæ”¯æŒiPhone X ä¹Ÿåº”è¯¥æ¯”è¾ƒå®¹æ˜“ï¼Œç‰¹åˆ«æ˜¯å¦‚æœä½¿ç”¨äº† AutoLayout å¹¶éµå®ˆå®‰å…¨åŒºåŸŸ(safe area)å’Œè¾¹è·å¸ƒå±€(margin layout)æŒ‡å—ã€‚è¿™äº›åœ¨ä¸Šæ–‡éƒ½å·²ç»æœ‰è¿‡è¾ƒè¯¦ç»†çš„é˜è¿°ã€‚ ä¸‹é¢è¯´å‡ ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ï¼š åœ¨ iPhone X ä¸Šé¢„è§ˆ App: åœ¨æ‹¿åˆ°æ–°æœºä¹‹å‰ï¼Œä¹Ÿå¯ä»¥å…ˆä½¿ç”¨ Simulator æ¥é¢„è§ˆå’Œæ£€æŸ¥ä¸‹å¸ƒå±€é—®é¢˜ã€‚ ä½†æ˜¯ä¸€äº›ä¾èµ–ç¡¬ä»¶çš„åŠŸèƒ½ï¼Œå¦‚å›¾åƒæ•ˆæœå’Œäº¤äº’ä½“éªŒï¼Œæœ€å¥½è¿˜æ˜¯åœ¨çœŸæœºä¸Šé¢„è§ˆã€‚ å§‹ç»ˆä¿æŒå…¨å±ä½“éªŒ: ç¡®ä¿èƒŒæ™¯å»¶ä¼¸åˆ°æ˜¾ç¤ºåŒºåŸŸçš„è¾¹ç¼˜ï¼Œä»¥åŠå‚ç›´å¯æ»šåŠ¨çš„å¸ƒå±€ï¼ˆå¦‚ tables å’Œ collectionsï¼‰ä¸€ç›´å»¶ç»­åˆ°åº•éƒ¨ã€‚ é˜²æ­¢è¾¹ç¼˜å†…å®¹è¢«è£å‰ª: ä¸€èˆ¬æ¥è¯´ï¼Œå†…å®¹åº”è¯¥æ˜¯å±…ä¸­å¯¹ç§°çš„ï¼Œè¿™æ ·å®ƒåœ¨ä»»ä½•æ–¹å‘çœ‹èµ·æ¥éƒ½ä¼šå¾ˆæ£’ï¼Œä¸ä¼šè¢«è¾¹è§’è§’æˆ–è®¾å¤‡å¤–å£³å¤¹ä½ï¼Œæˆ–è¢«ä¸»å±å¹•çš„æŒ‡ç¤ºå™¨é®æŒ¡ã€‚ ä¸ºäº†è·å¾—æœ€ä½³æ•ˆæœï¼Œè¯·ä½¿ç”¨æ ‡å‡†çš„ç³»ç»Ÿç•Œé¢å…ƒç´ å’Œ AutoLayout æ„å»ºç•Œé¢ã€‚ æ‰€æœ‰ App éƒ½åº”éµå¾ª UIKit å®šä¹‰çš„å®‰å…¨åŒºåŸŸå’Œå¸ƒå±€è¾¹è·ï¼Œå› ä¸ºè¿™äº›åŒºåŸŸå¯ä»¥æ ¹æ®è®¾å¤‡å’Œä¸Šä¸‹æ–‡è¿›è¡Œé€‚å½“çš„å¡«å……ã€‚ å®‰å…¨åŒºåŸŸè¿˜å¯ä»¥é˜²æ­¢å†…å®¹è¦†ç›–status bar, navigation bar, toolbar, ä»¥åŠ tab bar. æ³¨æ„ status bar çš„é«˜åº¦: status bar åœ¨iPhone X ä¸Šæ¯”åœ¨å…¶ä»– iPhoneä¸Šæ›´é«˜ã€‚ å¦‚æœå‡å®šä½ å›ºå®š status bar çš„é«˜åº¦ç”¨äºå°†å†…å®¹å®šä½åœ¨ status bar çš„ä¸‹æ–¹ï¼Œé‚£ä¹ˆç°åœ¨å¿…é¡»æ›´æ–°ä½ çš„çš„ Appï¼Œæ‰èƒ½æ ¹æ®ç”¨æˆ·çš„è®¾å¤‡åŠ¨æ€å®šä½å†…å®¹ã€‚ ç‰¹åˆ«éœ€è¦æ³¨æ„ï¼Œå½“åå°ä»»åŠ¡ï¼ˆå¦‚å½•éŸ³å’Œä½ç½®è·Ÿè¸ªï¼‰å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ï¼ŒiPhone Xä¸Šçš„çŠ¶æ€æ ä¸ä¼šæ”¹å˜é«˜åº¦ã€‚ é‡æ–°è€ƒè™‘éšè— status bar: iPhone X è¾ƒä¹‹æ˜¾ç¤ºé«˜åº¦ä¸º4.7â€œiPhone çš„æ˜¾ç¤ºå±æä¾›äº†æ›´å¤šçš„å†…å®¹å‚ç›´ç©ºé—´ï¼Œstatus bar å æ®çš„åªæ˜¯æ‰©å±•å‡ºæ¥çš„å±å¹•åŒºåŸŸã€‚å†µä¸” status bar æ›´ç›´è§‚çš„æ˜¾ç¤ºç”¨æˆ·æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¦‚æœéè¦éšè—çŠ¶æ€æ ï¼Œé‚£æœ€å¥½ç”¨ä¸è¿™äº›ä¿¡æ¯åŒç­‰é‡è¦çš„å†…å®¹æ›¿ä»£ã€‚ æ³¨æ„é•¿å®½æ¯”å·®å¼‚: iPhone X å…·æœ‰ä¸åŒäº4.7â€œiPhone çš„é•¿å®½æ¯”ã€‚å› æ­¤ï¼Œå…¨å±4.7è‹±å¯¸iPhone å›¾å½¢åœ¨iPhone X ä¸Šå…¨å±æ˜¾ç¤ºæ—¶å‡ºç°è£å‰ªæˆ– letterboxing ã€‚åŒæ ·ï¼Œå…¨å±iPhone X å›¾å½¢å…¨å±æ˜¾ç¤ºåœ¨4.7â€œiPhone ä¸Šæ—¶ä¹Ÿä¼šè¢«è£å‰ªæˆ– pillarboxing ï¼Œå› æ­¤è¦ç¡®ä¿é‡è¦çš„è§†è§‰å†…å®¹é€‚é…è¿™ä¸¤ç§å°ºå¯¸ã€‚ é¿å…äº¤äº’å¼æ§ä»¶å‡ºç°åœ¨å±å¹•åº•éƒ¨å’Œè§’è½: iPhone X æä¾›äº†æ˜¾ç¤ºå±åº•éƒ¨çš„æ»‘åŠ¨æ‰‹åŠ¿æ¥è®¿é—®ä¸»å±å¹•å’Œåº”ç”¨ç¨‹åºåˆ‡æ¢å™¨çš„æ–°äº¤äº’æ–¹å¼ï¼Œè¿™äº›æ‰‹åŠ¿å¯èƒ½ä¼šå–æ¶ˆåœ¨æ­¤åŒºåŸŸä¸­å®ç°çš„è‡ªå®šä¹‰æ‰‹åŠ¿ã€‚ å†µä¸”å±å¹•çš„ä¸¤ä¸ªè§’è½è¿‡å¤šå¤æ‚çš„äº¤äº’ä¹Ÿä¸æ˜¯æœ€ä½³ä½“éªŒçš„è‰¯å¥½å®è·µã€‚ ä¸è¦é®æŒ¡æˆ–è€…ç‰¹åˆ«ä¿®é¥°æ˜¾ç¤ºç‰¹æ€§æ¥å¼•èµ·ç”¨æˆ·æ³¨æ„: è¯·å‹¿å°è¯•éšè—è®¾å¤‡çš„åœ†è§’ã€ä¼ æ„Ÿå™¨å¤–å£³ï¼Œæˆ–è€…é€šè¿‡åœ¨å±å¹•é¡¶éƒ¨å’Œåº•éƒ¨æ”¾ç½®æ§ä»¶æ¥è®¿é—®ä¸»å±å¹•çš„å¼•å¯¼ã€‚ä¹Ÿè¦ç‰¹åˆ«æ³¨æ„ä¸è¦è¯•å›¾ä½¿ç”¨åƒæ‹¬å·ï¼Œè¾¹æ¡†æˆ–å„ç§ç¬¦å·ç­‰è§†è§‰ä¿®é¥°è¿™äº›ç‰¹æ®ŠåŒºåŸŸã€‚ ä¸ºäº†è½»æ¾è®¿é—®ä¸»å±å¹•å…è®¸è‡ªåŠ¨éšè—æŒ‡ç¤ºå™¨: å½“å¼€å¯è‡ªåŠ¨éšè—æ—¶ï¼Œå¦‚æœç”¨æˆ·ç¦»å¼€å±å¹•å‡ ç§’é’Ÿï¼ŒæŒ‡ç¤ºå™¨å°†æ¶ˆå¤±ã€‚ å½“ç”¨æˆ·å†æ¬¡è§¦æ‘¸å±å¹•æ—¶ï¼Œå®ƒä¼šé‡æ–°å‡ºç°ã€‚ è¿™ç§è¡Œä¸ºåº”è¯¥åªèƒ½ç”¨äºæå‡è§‚çœ‹ä½“éªŒï¼Œå¦‚æ’­æ”¾è§†é¢‘æˆ–ç…§ç‰‡å¹»ç¯ç‰‡ã€‚ è‰²å½©iPhone X çš„æ˜¾ç¤ºå™¨æ”¯æŒ P3 è‰²å½©ç©ºé—´ï¼Œå®ƒå¯ä»¥äº§ç”Ÿæ¯” sRGB æ›´ä¸°å¯Œï¼Œæ›´é¥±å’Œçš„é¢œè‰²ã€‚ å¯ä»¥ä½¿ç”¨ wide color æ¥å¢å¼ºè§†è§‰ä½“éªŒã€‚ å®ƒå¯ä»¥è®©ç…§ç‰‡å’Œè§†é¢‘æ›´åŠ é€¼çœŸç”ŸåŠ¨ã€‚ æ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒå®˜ç½‘Color managementï¼ˆhttps://developer.apple.com/ios/human-interface-guidelines/visual-design/color/#color-managementï¼‰ æ‰‹åŠ¿æƒ³å¿…å¤§å®¶éƒ½åœ¨å‘å¸ƒä¼šä¸Šçœ‹åˆ°äº†ï¼ŒiPhone X ä¸Šçš„æ˜¾ç¤ºå±å¯ä»¥ä½¿ç”¨å±å¹•è¾¹ç¼˜æ‰‹åŠ¿æ¥è®¿é—®ä¸»å±å¹•ï¼Œåº”ç”¨ç¨‹åºåˆ‡æ¢å™¨ï¼Œé€šçŸ¥ä¸­å¿ƒå’Œæ§åˆ¶ä¸­å¿ƒã€‚é€‚åº”è¿™ä¸ªæ–°å˜åŒ–çš„åŒæ—¶ï¼Œå¯¹äºå¼€å‘è€…è¦ç‰¹åˆ«æ³¨æ„ï¼š é¿å…å¹²æ‰°ç³»ç»ŸèŒƒå›´çš„å±å¹•è¾¹ç¼˜æ‰‹åŠ¿:ç”¨æˆ·ä¾èµ–è¿™äº›æ‰‹åŠ¿åœ¨æ¯ä¸ª App ä¸­æ“ä½œï¼Œæ‰€ä»¥åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œæ¯”å¦‚æ¸¸æˆè¿™ç§å¼ºè°ƒæ²‰æµ¸å¼ä½“éªŒçš„ App å¯èƒ½éœ€è¦è‡ªå®šä¹‰çš„å±å¹•è¾¹ç¼˜æ‰‹åŠ¿ï¼Œä¼˜å…ˆçº§é«˜äºç³»ç»Ÿçš„æ‰‹åŠ¿ã€‚ è¿™ç§è¡Œä¸ºï¼ˆç§°ä¸ºè¾¹ç¼˜ä¿æŠ¤ï¼‰åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä½¿å¾—ç”¨æˆ·éš¾ä»¥è®¿é—®ç³»ç»Ÿçº§çš„æ“ä½œã€‚ æ›´å¤šå†…å®¹å‚è€ƒå®˜ç½‘Gestures ï¼ˆhttps://developer.apple.com/ios/human-interface-guidelines/user-interaction/gestures/ï¼‰ è¡¥å……çš„æ³¨æ„äº‹é¡¹ è®¤è¯æ–¹æ³•å‡†ç¡®:iPhone X æ”¯æŒ Face IDè¿›è¡Œèº«ä»½éªŒè¯ã€‚ å¦‚æœä½ çš„ App é›†æˆäº† Apple Pay æˆ–å…¶ä»–ç³»ç»Ÿèº«ä»½éªŒè¯åŠŸèƒ½ï¼Œè¯·åŠ¡å¿…æ³¨æ„ä¸è¦åœ¨ iPhone X ä¸Šå¼•ç”¨ Touch IDã€‚åŒæ ·åœ°ï¼Œä¹Ÿè¯·ç¡®ä¿ä¸è¦åœ¨æ”¯æŒTouch ID çš„è®¾å¤‡ä¸Šå¼•ç”¨ Face IDã€‚ æ›´è¯¦ç»†çš„å†…å®¹è¯·å‚è€ƒAuthentication(https://developer.apple.com/ios/human-interface-guidelines/user-interaction/authentication/) ä¸è¦é‡å¤å¢åŠ ç³»ç»Ÿæä¾›çš„é”®ç›˜åŠŸèƒ½:åœ¨ iPhone Xä¸Šï¼Œå³ä½¿ä½¿ç”¨è‡ªå®šä¹‰é”®ç›˜ï¼ŒEmoji / Globe æŒ‰é’®å’Œ Dictation æŒ‰é’®ä¹Ÿè‡ªåŠ¨æ˜¾ç¤ºåœ¨é”®ç›˜çš„ä¸‹æ–¹ã€‚ ä½ çš„ App ä¸èƒ½å½±å“è¿™äº›æŒ‰é’®ï¼Œå› æ­¤é¿å…åœ¨é”®ç›˜ä¸­é‡å¤å¢åŠ è¿™äº›æŒ‰é’®é€ æˆæ··ä¹±ã€‚ ç”±äº iPhone Xçš„å±å¹•æ¯”ä¾‹å‘ç”Ÿå˜åŒ–ï¼Œå¯¹äºé•¿æœŸé â€œç­‰æ¯”ç¼©æ”¾â€å®Œæˆé€‚é…çš„H5æ´»åŠ¨é¡µè€Œè¨€ä¹Ÿæœ‰ä¸å°çš„å½±å“ï¼Œéœ€è¦å¯¹é¡µé¢ç»“æ„è¿›è¡Œé€‚å½“å¾®è°ƒã€‚ æ›´è¯¦ç»†å†…å®¹è¯·å‚é˜…Custom-keyboards(https://developer.apple.com/ios/human-interface-guidelines/extensions/custom-keyboards/) åˆ¤æ–­ iPhone X æœºå‹ (Swift)å¦‚ä½•åˆ¤æ–­å½“å‰çš„è®¾å¤‡æ˜¯ iPhone X å‘¢ï¼Ÿæœ‰å¥½å‡ ç§åŠæ³•ï¼Œå¯ä»¥è€ƒè™‘å–å¾—ã€ŒiPhone 10,1ã€è¿™æ ·çš„ Module Name æ¥åˆ¤æ–­ï¼Œä¹Ÿå¯ä»¥ç”¨å±å¹•åˆ†è¾¨ç‡çš„å½¢å¼æ¥åˆ¤æ–­ã€‚æˆ‘è§‰å¾—è¦ç”¨å±å¹•åˆ†è¾¨ç‡çš„æ–¹å¼æ¥åšï¼Œå› ä¸ºè¿™æ˜¯ç›®å‰ä¸ºæ­¢æœ€ç®€å•ä¹Ÿæœ€ä¸å®¹æ˜“å‡ºé”™çš„ã€‚å› ä¸º iPhone X åªæœ‰ä¸€ç§åˆ†è¾¨ç‡ï¼Œé‚£å°±æ˜¯ 812pt x 375pt (@3xï¼‰ï¼Œä¸”æ²¡æœ‰ä»»ä½•å…¶ä»–è®¾å¤‡ç”¨äº†ä¸€æ ·çš„åˆ†è¾¨ç‡ï¼Œç‰¹åˆ«æ˜¯é«˜åº¦ã€‚ äºæ˜¯å†™äº†ä¸€ä¸ªåŸºäº UIDevice çš„æ‰©å±•ï¼ˆæˆ–è€…å…¶ä»–ä»»æ„æ–¹æ³•ä¹Ÿè¡Œï¼‰ï¼š 12345678extension UIDevice &#123; public func isX() -&gt; Bool &#123; if UIScreen.main.bounds.height == 812 &#123; return true &#125; return false &#125;&#125; åœ¨ä»£ç ä¸­ï¼Œå°±å¯ä»¥ç”¨ UIDevice.current.isX() æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯è·‘åœ¨ iPhone X æœºå‹ä¸Šï¼Œç„¶ååšä¸€äº›æˆ–ä¸åšä¸€äº›ç‰¹æ®Šçš„ Hack äº†ã€‚ å½“ç„¶å¦‚æœä½ ä¹ æƒ¯ç”¨ä¸‰æ–¹åº“ï¼Œä¹Ÿå¯ä»¥å°è¯•â€œDeviceKitâ€ 1234567let device = Device()print(device) // prints, for example, \"iPhone X\"if device == .iPhoneX &#123; // Do something&#125; else &#123; // Do something else&#125; ä»£ç é€‚é…éƒ¨åˆ†å½“æˆ‘ä»¬èƒ½å¤Ÿåˆ¤æ–­å‡ºè®¾å¤‡å‹å·å°±å¯ä»¥é…åˆç³»ç»Ÿç‰ˆæœ¬è¿›è¡Œé€‚é…äº† é€‚é… UITableView ç»„ä»¶12345678if (@available(iOS 11.0, *)) &#123; self.contentInsetAdjustmentBehavior = .never self.estimatedRowHeight = 0 self.estimatedSectionHeaderHeight = 0 self.estimatedSectionFooterHeight = 0&#125; else &#123; // Fallback on earlier versions&#125; é€‚é… UIScrollView ç»„ä»¶12345if (@available(iOS 11.0, *)) &#123; scrollView?.contentInsetAdjustmentBehavior = .never&#125; else &#123; // Fallback on earlier versions&#125; UITableViewä¸­çš„sectionHeaderæˆ–è€…Footeræ˜¾ç¤ºä¸æ­£å¸¸è¿˜æœ‰çš„å‘ç°æŸäº›ç•Œé¢tableViewçš„sectionHeaderã€sectionFooteré«˜åº¦ä¸è®¾ç½®ä¸ç¬¦çš„é—®é¢˜ï¼Œåœ¨iOS11ä¸­å¦‚æœä¸å®ç°-tableView: viewForHeaderInSection:å’Œ-tableView: viewForFooterInSection:ï¼Œåˆ™-tableView: heightForHeaderInSection:å’Œ- tableView: heightForFooterInSection:ä¸ä¼šè¢«è°ƒç”¨ï¼Œå¯¼è‡´å®ƒä»¬éƒ½å˜æˆäº†é»˜è®¤é«˜åº¦ï¼Œè¿™æ˜¯å› ä¸ºtableViewåœ¨iOS11é»˜è®¤ä½¿ç”¨Self-Sizingï¼ŒtableViewçš„estimatedRowHeightã€estimatedSectionHeaderHeightã€estimatedSectionFooterHeightä¸‰ä¸ªé«˜åº¦ä¼°ç®—å±æ€§ç”±é»˜è®¤çš„0å˜æˆäº†UITableViewAutomaticDimensionï¼Œè§£å†³åŠæ³•ç®€å•ç²—æš´ï¼Œå°±æ˜¯å®ç°å¯¹åº”æ–¹æ³•æˆ–æŠŠè¿™ä¸‰ä¸ªå±æ€§è®¾ä¸º0ã€‚ 1234567if #available(iOS 11.0, *) &#123; tableView.estimatedRowHeight = 0; tableView.estimatedSectionHeaderHeight = 0; tableView.estimatedSectionFooterHeight = 0;&#125; else &#123; automaticallyAdjustsScrollViewInsets = false;&#125;; é€‚é…ç½‘é¡µåŠ è½½ä¸å…¨ä¸‹é¢æœ‰ç™½è¾¹1234if #available(iOS 11.0, *) &#123; webView.scrollView.contentInsetAdjustmentBehavior = .never&#125; else &#123;&#125;; é€‚é…iPhoneXä¸èƒ½é“ºæ»¡å±çš„é—®é¢˜ç»™Brand Assetsæ·»åŠ ä¸€å¼ 1125*2436å¤§å°çš„å›¾ç‰‡ æ‰“å¼€Assets.xcassetsæ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°Brand Assets å³é”®Show in Finder æ·»åŠ ä¸€å¼ 1125*2436å¤§å°çš„å›¾ç‰‡ ä¿®æ”¹Contents.jsonæ–‡ä»¶,æ·»åŠ å¦‚ä¸‹å†…å®¹ 123456789&#123;&quot;extent&quot; : &quot;full-screen&quot;,&quot;idiom&quot; : &quot;iphone&quot;,&quot;subtype&quot; : &quot;2436h&quot;,&quot;filename&quot; : &quot;1125_2436.pngâ€,&quot;minimum-system-version&quot; : &quot;11.0&quot;,&quot;orientation&quot; : &quot;portrait&quot;,&quot;scale&quot; : &quot;3x&quot;&#125; ä½¿ç”¨ LaunchScreen.storyboard è®¾ç½®å¯åŠ¨å›¾ ä½¿ç”¨ LaunchScreen.storyboard æ–‡ä»¶å°†ç®€å•è§†å›¾çº¦æŸå®šä½ï¼Œå®ç°å„ç§å°ºå¯¸çš„è‡ªé€‚åº”ã€‚ é€‚é…iPhoneX12345//é€‚é…iPhoneXlet LL_iPhoneX = (kScreenW == Double(375.0) &amp;&amp; kScreenH == Double(812.0) ?true:false)let kNavibarH = LL_iPhoneX ? Double(88.0) : Double(64.0)let kTabbarH = LL_iPhoneX ? Double(49.0+34.0) : Double(49.0)let kStatusbarH = LL_iPhoneX ? Double(44.0) : Double(20.0) Xcode9 æ‰“åŒ…æ³¨æ„äº‹é¡¹Xcode9 æ‰“åŒ…ç‰ˆæœ¬åªèƒ½æ˜¯8.2åŠä»¥ä¸‹ç‰ˆæœ¬,æˆ–è€…9.0åŠæ›´é«˜ç‰ˆæœ¬ Xcode9 ä¸æ”¯æŒ8.3å’Œ8.4ç‰ˆæœ¬ Xcode9 æ–°æ‰“åŒ…è¦åœ¨æ„å»ºç‰ˆæœ¬çš„æ—¶å€™åŠ å…¥1024*1024 AppSore icon Xcode9 æ²¿ç”¨äº†ä¹‹å‰çš„åˆ†åŒ…è®¾è®¡ï¼Œå¯ä»¥é…ç½®æ‰“å‡ºå¤šç§è®¾å¤‡çš„åŒ…æ–‡ä»¶ï¼Œç”¨æˆ·å®‰è£…æ—¶æ ¹æ®è®¾å¤‡ä¸åŒåˆ†åˆ«å®‰è£…ä¸åŒçš„APIåŒ…ï¼Œå‡å°å®‰è£…åŒ…å¤§å°ã€‚ iOS 11 ç›¸å†Œæƒé™å˜æ›´iOS11ä»¥å‰ï¼š NSPhotoLibraryUsageDescriptionï¼šè®¿é—®ç›¸å†Œå’Œå­˜å‚¨ç…§ç‰‡åˆ°ç›¸å†Œï¼ˆè¯»å†™ï¼‰ï¼Œä¼šå‡ºç°ç”¨æˆ·æˆæƒã€‚ iOS11ä¹‹åï¼š NSPhotoLibraryUsageDescriptionï¼šæ— éœ€æ·»åŠ ã€‚é»˜è®¤å¼€å¯è®¿é—®ç›¸å†Œæƒé™ï¼ˆè¯»ï¼‰ï¼Œæ— éœ€ç”¨æˆ·æˆæƒã€‚ NSPhotoLibraryAddUsageDescriptionï¼š æ·»åŠ å†…å®¹åˆ°ç›¸å†Œã€‚ï¼ˆå†™ï¼‰ï¼Œä¼šå‡ºç°ç”¨æˆ·æˆæƒã€‚","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"Jenkins + Fastlane è‡ªåŠ¨æ‰“åŒ…è„šæœ¬","slug":"AutoBuildScript","date":"2017-06-20T13:55:38.000Z","updated":"2018-11-15T13:19:25.616Z","comments":true,"path":"2017/06/20/AutoBuildScript/","link":"","permalink":"https://reversescale.github.io/2017/06/20/AutoBuildScript/","excerpt":"ä½¿ç”¨ Jenkins è¿è¡Œ Fastlane å‘½ä»¤ï¼Œå®ç°å®šæ—¶è‡ªåŠ¨æ‰“åŒ…ã€ä¿®æ”¹ç‰ˆæœ¬å·ã€ä¸Šä¼  Fir æˆ–è€… TestFlight ç­‰åŠŸèƒ½ï¼Œä»æ­¤å†ä¹Ÿä¸ç”¨è¢«å°ä¼™ä¼´è¿½ç€è¦æµ‹è¯•åŒ…ã€‚ ä¸‰æ­¥é…ç½®ï¼Œæœç»æ±¡æŸ“ï¼Œä¸€æ­¥æ“ä½œè‡ªåŠ¨ä¸Šä¼ ~","text":"ä½¿ç”¨ Jenkins è¿è¡Œ Fastlane å‘½ä»¤ï¼Œå®ç°å®šæ—¶è‡ªåŠ¨æ‰“åŒ…ã€ä¿®æ”¹ç‰ˆæœ¬å·ã€ä¸Šä¼  Fir æˆ–è€… TestFlight ç­‰åŠŸèƒ½ï¼Œä»æ­¤å†ä¹Ÿä¸ç”¨è¢«å°ä¼™ä¼´è¿½ç€è¦æµ‹è¯•åŒ…ã€‚ ä¸‰æ­¥é…ç½®ï¼Œæœç»æ±¡æŸ“ï¼Œä¸€æ­¥æ“ä½œè‡ªåŠ¨ä¸Šä¼ ~ ğŸ“º æ•…äº‹èƒŒæ™¯è®°å¾—å¤§çº¦ä¸¤å¹´å‰ï¼Œå½“æ—¶åœ¨åˆ›ä¸šå…¬å¸ï¼Œå¼€å‘ä»»åŠ¡é‡ï¼Œææµ‹å‰å¸¸å¸¸åŠ ç­åˆ°æ™šä¸Š 12 ç‚¹ï¼Œå°±ç®— bug ä¿®å®Œï¼Œä¹Ÿè¦çœ‹ç€ Xcode ä¸æ…Œä¸å¿™çš„èŠ±åŠä¸ªå¤šå°æ—¶æ‰“åŒ…å®Œæˆï¼Œå†ä¸Šä¼ æµ‹è¯•å¹³å°ï¼Œå‘äº†é‚®ä»¶æ‰èƒ½å®‰å¿ƒå›å®¶ã€‚é‰´äºè¿™ç§æƒ¨ç—›ç»å†ï¼Œåˆ©ç”¨é—²æš‡æ—¶é—´å°±æä¸€æè‡ªåŠ¨æ‰“åŒ…è„šæœ¬ï¼ŒåæœŸæœ‰é…ä¸Š Jenkinsï¼Œä»æ­¤è¿‡ä¸Šäº†æ²¡ç¾æ²¡è‡Šçš„ç”Ÿæ´»ã€‚ï¼ˆå·²é€‚é… Xcode 8.2 ä¹‹åç‰ˆæœ¬ï¼‰ ğŸš€ æ¡†æ¶çš„ä¼˜åŠ¿ 1.å¸‚é¢ä¸Šæ–‡ä»¶æœ€å°‘ï¼Œä½¿ç”¨æœ€ä¾¿æ·çš„è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ 2.å†—ä½™æ–¹æ³•å°‘ï¼Œç»“æ„æ¸…æ™°ï¼Œæ³¨é‡Šé½å…¨ 3.åŒæ—¶æ”¯æŒå¤šå¹³å°ä¸Šä¼ ï¼Œå¦‚ï¼šDirã€Firã€è’²å…¬è‹±ã€App Storeç­‰ 4.å…·å¤‡è¾ƒé«˜è‡ªå®šä¹‰æ€§ 5.[è‡ªç¼–è„šæœ¬çš„æ—¶ä»£] -&gt; [Fastlane çš„æ—¶ä»£] â–ˆâ—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â–ˆ ğŸš‚ è‡ªç¼–è„šæœ¬çš„æ—¶ä»£ [ğŸš‚ è‡ªç¼–è„šæœ¬çš„æ—¶ä»£] äº†è§£ä¸€ä¸‹å³å¯ï¼Œæœ‰äº›å‡†å¤‡å·¥ä½œæä¾›å‚è€ƒï¼Œå¦‚ç¯å¢ƒå·²ç»é…ç½®å¥½ï¼Œè¯·ç›´æ¥é˜…è¯» [ğŸš„ Fastlane çš„æ—¶ä»£] ç¬¬ä¸€æ­¥ å®‰è£…fir-cilfir-cli ä½¿ç”¨ Ruby æ„å»º, æ— éœ€ç¼–è¯‘, åªè¦å®‰è£…ç›¸åº” gem å³å¯. 12$ ruby -v # &gt; 1.9.3$ gem install fir-cli å¸¸è§çš„å®‰è£…é—®é¢˜(1)ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ Ruby å®‰è£…, éœ€ç¡®ä¿ ruby-dev å·²è¢«æ­£ç¡®çš„å®‰è£…: 12$ xcode-select --install # OS X ç³»ç»Ÿ$ sudo apt-get install ruby-dev # Linux ç³»ç»Ÿ (2)ç° Permission denied ç›¸å…³é”™è¯¯: è§£å†³ï¼šåœ¨å‘½ä»¤å‰åŠ ä¸Š sudo (3)å‡ºç° Gem::RemoteFetcher::FetchError ç›¸å…³é”™è¯¯: è§£å†³ï¼šæ›´æ¢ Ruby çš„æ·˜å®æº(ç”±äºå›½å†…ç½‘ç»œåŸå› , ä½ æ‡‚çš„), å¹¶å‡çº§ä¸‹ç³»ç»Ÿè‡ªå¸¦çš„ gem12345678$ gem sources --remove https://rubygems.org/$ gem sources -a https://ruby.taobao.org/$ gem sources -l*** CURRENT SOURCES ***https://ruby.taobao.org# è¯·ç¡®ä¿åªæœ‰ ruby.taobao.org, å¦‚æœæœ‰å…¶ä»–çš„æº, è¯· remove æ‰gem update --systemgem install fir-cli (4)Mac OS X 10.11 ä»¥åçš„ç‰ˆæœ¬, ç”±äº10.11å¼•å…¥äº† rootless, æ— æ³•ç›´æ¥å®‰è£… fir-cli, æœ‰ä»¥ä¸‹ä¸‰ç§è§£å†³åŠæ³•: æ–¹æ³•ä¸€ï¼š ä½¿ç”¨ Homebrew åŠ RVM å®‰è£… Ruby, å†å®‰è£… fir-cli(æ¨è)12345# Install Homebrew:$ ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;# Install RVM:$ \\curl -sSL https://get.rvm.io | bash -s stable --ruby$ gem install fir-cli æ–¹æ³•äºŒï¼š æŒ‡å®š fir-cli ä¸­ bin æ–‡ä»¶çš„ PATH1$ export PATH=/usr/local/bin:$PATH;gem install -n /usr/local/bin fir-cli æ–¹æ³•ä¸‰ï¼š é‡å†™ Ruby Gem çš„ bindir12$ echo &apos;gem: --bindir /usr/local/bin&apos; &gt;&gt; ~/.gemrc$ gem install fir-cli ç¬¬äºŒæ­¥ ç™»å½•fir.imå…ˆåˆ° https://fir.im åˆ›å»ºé¡¹ç›®ï¼Œå¾—åˆ° API Token å¹¶å¤åˆ¶ã€‚ 1fir login å‘½ä»¤ç”¨äºä½¿ç”¨ API token ç™»å½• fir.im, å¹¶ä½¿ç”¨å‘å¸ƒåº”ç”¨ç­‰ç›¸å…³å‘½ä»¤. 1fir me å‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯. æ˜¾ç¤ºä¿¡æ¯å¦‚ä¸‹ï¼š12345678$ fir login XXX_YOUR_API_TOKEN_XXXI, [2016-03-08T12:48:56.499435 #13043] INFO -- : Login succeed, previous user&apos;s email: xxx@fir.imI, [2016-03-08T12:48:56.507044 #13043] INFO -- : Login succeed, current user&apos;s email: xxx@fir.imI, [2016-03-08T12:48:56.507147 #13043] INFO -- :$ fir meI, [2016-03-08T12:48:14.175488 #12986] INFO -- : Login succeed, current user&apos;s email: xxx@fir.imI, [2016-03-08T12:48:14.175687 #12986] INFO -- : Login succeed, current user&apos;s name: xxxI, [2016-03-08T12:48:14.175765 #12986] INFO -- : ç¬¬ä¸‰æ­¥ ä¸‹è½½å¹¶é…ç½® shell è„šæœ¬1.æŠŠæ–‡ä»¶å¤¹å¯¼å…¥å·¥ç¨‹ç›®å½•æ ¹ç›®å½•ä¸‹ 2.é…ç½® shell è„šæœ¬ 12345678# éœ€è¦æ”¹åŠ¨çš„åœ°æ–¹ (æ ¹æ®é¡¹ç›®å…·ä½“ä¿¡æ¯æ”¹åŠ¨)PROJECT_NAME = &quot;***&quot; #é¡¹ç›®åç§°VERSION = &quot;1.0.0&quot; #æ‰“åŒ…ç‰ˆæœ¬å· ä¼šæ ¹æ®ä¸åŒçš„ç‰ˆæœ¬åˆ›å»ºæ–‡ä»¶å¤¹ï¼ˆä¸é¡¹ç›®æœ¬èº«çš„ç‰ˆæœ¬å·æ— å…³ï¼‰TAGREAT_NAME = &quot;***&quot; #é¡¹ç›®å¯¹åº”targetçš„åç§°å¦‚ &quot;Meifabao_User&quot; &quot;Miefabao_stylist&quot;CONFIGURATION = &quot;Release&quot; #æ‰“åŒ…çš„ç¯å¢ƒè®¾ç½® Release ç¯å¢ƒ Debug ç¯å¢ƒPROFILE = &quot;AdHoc&quot; #é…ç½®æ–‡ä»¶åˆ†ä¸ºå››ç§ AdHoc Dev AppStore Ent åˆ†åˆ«å¯¹åº”å››ç§é…ç½®æ–‡ä»¶OUTPUT = &quot;./Packge/%s&quot; %(CONFIGURATION) #æ‰“åŒ…å¯¼å‡ºipaæ–‡ä»¶è·¯å¾„ï¼ˆè¯·ç¡®ä¿ â€œ%sâ€ ä¹‹å‰çš„æ–‡ä»¶å¤¹æ­£ç¡®å¹¶å­˜åœ¨ï¼‰ æ ¹æ®å…·ä½“é¡¹ç›®å¡«å†™ 3.æ§åˆ¶å°åˆ°é¡¹ç›®æ‰€åœ¨ç›®å½•ä¸‹ï¼Œå¯åŠ¨è„šæœ¬(å¿…è¦æ—¶åŠ ç®¡ç†å‘˜æƒé™) å¯ä»¥å°† autobuild.py æ‹–æ‹½åˆ°æ§åˆ¶å°ï¼Œæ‰§è¡Œè„šæœ¬ æ³¨ï¼šå…¶ä»–çš„åŠŸèƒ½è„šæœ¬ç”±äºå®ç”¨æ€§ä¸é«˜ï¼ˆå…¶å®æˆ‘æ‡’å¾—æï¼‰ï¼Œæš‚æ—¶æ²¡æœ‰é€‚é…ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œé…ç½®è¯•ç”¨ï¼ŒåŒ…æ‹¬ï¼šé‚®ä»¶å‘é€ã€æ‰“åŒ… App Store ç­‰ç­‰ã€‚ å½“çœ‹åˆ° æ—¶ï¼Œæ‰“åŒ…å¥½çš„é¡¹ç›®å·²ç»èººåœ¨ä½ çš„ Fir æµ‹è¯•å¹³å°ä¸­äº†ã€‚ â–ˆâ—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â–ˆ ğŸš„ Fastlane çš„æ—¶ä»£2018.08.20 æ›´æ–°ï¼šJenkins + Fastlane + GitLab + fir (æˆ–è€…è’²å…¬è‹±)ç¬¬ä¸€æ­¥ å®‰è£… FastlaneFastlane æ˜¯ä¸€å¥—ä½¿ç”¨Rubyå†™çš„è‡ªåŠ¨åŒ–å·¥å…·é›†ï¼Œç”¨äºiOSå’ŒAndroidçš„è‡ªåŠ¨åŒ–æ‰“åŒ…ã€å‘å¸ƒç­‰å·¥ä½œï¼Œå¯ä»¥èŠ‚çœå¤§é‡çš„æ—¶é—´ 1sudo gem install fastlane --verbose ç¬¬äºŒæ­¥ ç§»åŠ¨è„šæœ¬è‡³é¡¹ç›®ç›®å½•ä¸‹æ ¹æ®æ³¨é‡Šå®Œå–„è„šæœ¬é…ç½®ä¿¡æ¯ è„šæœ¬è¯´æ˜ï¼š æ”¯æŒç‰ˆæœ¬å·è‡ªå¢é•¿ æ”¯æŒä¼ å…¥è‡ªå®šçš„å®ï¼Œç”¨äºåœ¨ä»£ç é‡Œä½¿ç”¨æ­¤é¢„ç¼–è¯‘çš„å®æ¥åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œå‘å¸ƒç¯å¢ƒ æ”¯æŒè‡ªåŠ¨ä¸Šä¼ åˆ° fir å’Œ testflight ä¸Šä¼ æˆåŠŸåå¼¹çª—æç¤º ç¬¬ä¸‰æ­¥ ä¸Šä¼ ä¸Šä¼ åˆ° fir çš„ç”¨æ³•ï¼š1./build.sh -m &quot;xxxx_app_test&quot; -t test ä¸Šä¼ åˆ° testflight çš„ç”¨æ³•ï¼š1./build.sh -m &quot;xxxx_app_pro&quot; -t pro ç¬¬å››æ­¥ é…ç½® JenkinsJenkins æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæä¾›äº†ä¸€ç§æ˜“äºä½¿ç”¨çš„æŒç»­é›†æˆç³»ç»Ÿï¼Œä½¿å¼€å‘è€…ä»ç¹æ‚çš„é›†æˆä¸­è§£è„±å‡ºæ¥ï¼Œä¸“æ³¨äºæ›´ä¸ºé‡è¦çš„ä¸šåŠ¡é€»è¾‘å®ç°ä¸Šã€‚åŒæ—¶ Jenkins èƒ½å®æ–½ç›‘æ§é›†æˆä¸­å­˜åœ¨çš„é”™è¯¯ï¼Œæä¾›è¯¦ç»†çš„æ—¥å¿—æ–‡ä»¶å’Œæé†’åŠŸèƒ½ï¼Œè¿˜èƒ½ç”¨å›¾è¡¨çš„å½¢å¼å½¢è±¡åœ°å±•ç¤ºé¡¹ç›®æ„å»ºçš„è¶‹åŠ¿å’Œç¨³å®šæ€§ã€‚ ä¸‹è½½ Jenkinsï¼šç‚¹å‡» http://mirrors.jenkins.io/war-stable/latest/jenkins.war ä¸‹è½½æœ€æ–°çš„Jenkins.war è¿è¡ŒæœåŠ¡å™¨ï¼šéœ€è¦å…ˆå®‰è£… java sdk ï¼ˆhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.htmlï¼‰ 1java -jar jenkins.war è¿è¡Œ Jenkins1jenkins é…ç½® Jenkinsï¼šæµè§ˆå™¨æ‰“å¼€ http://localhost:8080/ è¾“å…¥å®‰å…¨å¯†ç ï¼Œå®‰å…¨å¯†ç å‘½ä»¤è¡Œè¾“å‡ºçš„ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚ ç„¶åè‡ªåŠ¨å®‰è£…æ¨èçš„æ’ä»¶ï¼Œå¹¶æ–°å»ºç®¡ç†å‘˜è´¦å·å¯†ç ã€‚ å®‰è£…æ’ä»¶ç™»å½•http://localhost:8080/ ï¼Œé€‰æ‹©ç³»ç»Ÿç®¡ç† - ç®¡ç†æ’ä»¶ã€‚åœ¨å¯é€‰æ’ä»¶ä¸­é€‰æ‹©GitLab Pluginï¼ŒGitlab Hook Pluginï¼Œå’Œ Cocoapod plugin è¿›è¡Œå®‰è£…ã€‚ æ„å»ºä»»åŠ¡ ç‚¹å‡»æ–°å»ºï¼Œè¾“å…¥åç§°ï¼Œæ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®ã€‚ é…ç½® Git ä»“åº“åœ°å€ï¼Œå¹¶æ·»åŠ  git è´¦å·ã€‚ é…ç½®æ„å»ºè„šæœ¬ é™„å½• æ‰§è¡Œè„šæœ¬è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆfir: command not foundè¿™ä¸ªæ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…fir-cilï¼Œå¯¼è‡´æ‰¾ä¸åˆ°ç›¸åº”çš„å‘½ä»¤è¡Œï¼Œåªéœ€è¦å®‰è£…ä¸€ä¸‹å°±è¡Œäº†ï¼Œè¯¦æƒ…è§ä¸Šæ–‡å†™çš„å¦‚ä½•å®‰è£…fir-cilã€‚ README: No such file or directoryé‚£æ˜¯å› ä¸ºä½ çš„è„šæœ¬ç›®å½•ä¸‹æ²¡æœ‰READMEçš„æ–‡ä»¶ï¼Œåªéœ€è¦å»ºä¸€ä¸ªREADMEçš„æ–‡ä»¶å°±è¡Œäº†ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°å½“å‰ä½ç½®ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š 1touch README ERROR â€“ : Token can not be blankè¿™ä¸ªåŸå› æ˜¯å› ä¸ºä½ æ²¡æœ‰ç™»å½•firå¯¼è‡´çš„ï¼Œä½ æ‰§è¡Œè¿™ä¸ªè„šæœ¬ä¹‹å‰åº”è¯¥å…ˆç™»å½•ä¸€ä¸‹firï¼Œè¯¦æƒ…è¯·çœ‹ä¸Šæ–‡å†™çš„ç™»å½•fir.imã€‚ ERROR â€“ : Code=14 (æ²¡æœ‰è¯•ç”¨çš„è®¾å¤‡ Domain=IDEDistributionErrorDomain Code=14 â€œNo applicable devicesåŸå› ï¼šrvm ruby é…ç½®é”™è¯¯ è§£å†³ï¼šæ§åˆ¶å° rvm system â–ˆâ—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â–ˆ 2018.08.20 æ›´æ–°ï¼šJenkins ç›¸å…³è®¾ç½®æ–¹æ³•æŸ¥çœ‹ç«¯å£å ç”¨ç«¯å£å ç”¨ ä½¿ç”¨ lsof ä¼šåˆ—ä¸¾æ‰€æœ‰å ç”¨çš„ç«¯å£åˆ—è¡¨ï¼š 1lsof ä½¿ç”¨lesså¯ä»¥ç”¨äºåˆ†é¡µå±•ç¤ºï¼Œå¦‚ï¼š 1lsof | less ä¹Ÿå¯ä»¥ä½¿ç”¨ -i æŸ¥çœ‹æŸä¸ªç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œå¦‚ï¼š 1lsof -i:3000 æ€æ­»è¿›ç¨‹ 1kill PIDï¼ˆè¿›ç¨‹çš„PIDï¼Œå¦‚2044ï¼‰ Jenkins æ”¹æ—¶åŒºhttp://your-jenkins/systemInfoï¼ŒæŸ¥çœ‹user.timezoneå˜é‡çš„å€¼ åœ¨jenkinsçš„ã€ç³»ç»Ÿç®¡ç†ã€‘-ã€è„šæœ¬å‘½ä»¤è¡Œã€‘é‡Œè¿è¡Œ 1System.setProperty(&apos;org.apache.commons.jelly.tags.fmt.timeZone&apos;, &apos;Asia/Shanghai&apos;) Jenkins æ„å»ºè¶…æ—¶jenkinsçš„â€build timeout pluginâ€æ’ä»¶å¯ä»¥å¸®æˆ‘ä»¬å®Œæˆè¯¥ä»»åŠ¡ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯jenkins-2.7.1, é»˜è®¤å°±å·²ç»å®‰è£…äº†è¯¥æ’ä»¶ï¼Œå¦‚æœé»˜è®¤æ²¡æœ‰å®‰è£…å¯åœ¨æ’ä»¶ç®¡ç†ä¸­æœç´¢è¿›è¡Œå®‰è£…ã€‚ Jenkins å®šæ—¶æ„å»ºå’ŒPoll SCMçš„åŒºåˆ« Build periodicallyï¼šå‘¨æœŸè¿›è¡Œé¡¹ç›®æ„å»ºï¼ˆæºç æ˜¯å¦å‘ç”Ÿå˜åŒ–æ²¡æœ‰å…³ç³»ï¼‰ Poll SCMï¼šå®šæ—¶æ£€æŸ¥æºç å˜æ›´ï¼Œå¦‚æœæœ‰æ›´æ–°å°±checkoutæœ€æ–°codeä¸‹æ¥ï¼Œç„¶åæ‰§è¡Œæ„å»ºåŠ¨ä½œ 12345678910111213æ¯15åˆ†é’Ÿæ„å»ºä¸€æ¬¡ï¼šH/15 * * * * æˆ– */5 * * * *æ¯å¤©8ç‚¹æ„å»ºä¸€æ¬¡ï¼š0 8 * * *æ¯å¤©8ç‚¹~17ç‚¹ï¼Œä¸¤å°æ—¶æ„å»ºä¸€æ¬¡ï¼š0 8-17/2 * * *å‘¨ä¸€åˆ°å‘¨äº”ï¼Œ8ç‚¹~17ç‚¹ï¼Œä¸¤å°æ—¶æ„å»ºä¸€æ¬¡ï¼š0 8-17/2 * * 1-5æ¯æœˆ1å·ã€15å·å„æ„å»ºä¸€æ¬¡ï¼Œé™¤12æœˆï¼šH H 1,15 1-11 **/5 * * * * ï¼ˆæ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡æºç å˜åŒ–ï¼‰0 2 * * * ï¼ˆæ¯å¤©2:00 å¿…é¡»buildä¸€æ¬¡æºç ï¼‰ â–ˆâ—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â–ˆ ğŸ•¹ agvtool å‘½ä»¤è¡Œ2018.08.20 æ›´æ–°ï¼šagvtool å‘½ä»¤è¡Œ ç®¡ç†ç‰ˆæœ¬å·å¸¸ç”¨å‘½ä»¤è¡Œï¼šè®¾ç½® ç‰ˆæœ¬å· ä¸º 1.1.01xcrun agvtool new-marketing-version 1.1.0 è®¾ç½® build å· è‡ªåŠ¨åŠ 11xcrun agvtool next-version -all ç®€ä»‹agvtool æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå…è®¸ä½ è‡ªåŠ¨é€’å¢åˆ°ä¸‹ä¸€ä¸ªæœ€é«˜çš„æ•°é‡æˆ–å…·ä½“çš„æ•°å­—è¿™äº›æ•°å­—ã€‚ ä¿®æ”¹Xcodeçš„é»˜è®¤è®¾ç½®é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ä¸ä½¿ç”¨ä»»ä½•ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚è®¾ç½®ç‰ˆæœ¬ç³»ç»Ÿè‹¹æœé€šç”¨ç¡®ä¿ Xcode å°†åŒ…æ‹¬åœ¨ä½ çš„é¡¹ç›®ä¸­ç”Ÿæˆçš„æ‰€æœ‰agvtoolç‰ˆæœ¬ä¿¡æ¯ã€‚ ä¸Šå›¾ï¼šè®¾ç½®å½“å‰é¡¹ç›®çš„ç‰ˆæœ¬å’Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„æ„å»ºè®¾ç½® è®¾ç½®ä½ çš„ç‰ˆæœ¬å·å’Œ bulid ç‰ˆæœ¬å·agvtool æŸ¥è¯¢åº”ç”¨ç¨‹åºçš„ Info.plist å¾—åˆ°ä½ çš„ç‰ˆæœ¬å’Œ bulid ç‰ˆæœ¬å·ã€‚ æ‰€ä»¥ç¡®ä¿ CFBundleVersion (Bundle version) å’Œ CFBundleShortVersionString (Bundle versions string, shortï¼‰çš„ key åœ¨ä½ çš„ Info.plist ä¸­ã€‚ ä¸Šå›¾ï¼šinfo.plist å‘½ä»¤è¡Œæ“ä½œæ›´æ–°ç‰ˆæœ¬å·é€€å‡ºXcodeï¼Œç„¶åå¯¼èˆªåˆ°åŒ…å«é¡¹ç›®çš„ç›®å½•ï¼Œè¿è¡Œä¸‹åˆ—å‘½ä»¤åœ¨ç»ˆç«¯åº”ç”¨ agvtool å±æ€§å·¥ä½œã€‚ è®¾ç½® ç‰ˆæœ¬å· ä¸º 1.1.01xcrun agvtool new-marketing-version 1.1.0 è®¾ç½® build å· è‡ªåŠ¨åŠ 11xcrun agvtool next-version -all è®¾ç½® build å·ä¸º 311xcrun agvtool new-version -all 31 æŸ¥çœ‹ Version Numbers1xcrun agvtool what-marketing-version æŸ¥çœ‹ Build Numbers1xcrun agvtool what-version ğŸ˜¬ è”ç³» å¾®ä¿¡ : WhatsXie é‚®ä»¶ : ReverseScale@iCloud.com åšå®¢ : https://reversescale.github.io","categories":[{"name":"Script","slug":"Script","permalink":"https://reversescale.github.io/categories/Script/"}],"tags":[{"name":"Script","slug":"Script","permalink":"https://reversescale.github.io/tags/Script/"}]},{"title":"GoF è®¾è®¡æ¨¡å¼ + æƒ…æ™¯å†ç°","slug":"Design patterns Gof","date":"2017-03-01T12:29:16.000Z","updated":"2018-11-15T13:19:15.263Z","comments":true,"path":"2017/03/01/Design patterns Gof/","link":"","permalink":"https://reversescale.github.io/2017/03/01/Design patterns Gof/","excerpt":"ã€ŠDesign Patterns: Elements of Reusable Object-Oriented Softwareã€‹ï¼ˆå³åè¿°ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ï¼‰ï¼Œç”± Erich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides åˆè‘—ï¼ˆAddison-Wesleyï¼Œ1995ï¼‰ï¼Œè¿™å‡ ä½ä½œè€…å¸¸è¢«ç§°ä¸ºâ€å››äººç»„ï¼ˆGang of Fourï¼‰â€~","text":"ã€ŠDesign Patterns: Elements of Reusable Object-Oriented Softwareã€‹ï¼ˆå³åè¿°ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ï¼‰ï¼Œç”± Erich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides åˆè‘—ï¼ˆAddison-Wesleyï¼Œ1995ï¼‰ï¼Œè¿™å‡ ä½ä½œè€…å¸¸è¢«ç§°ä¸ºâ€å››äººç»„ï¼ˆGang of Fourï¼‰â€~ è®¾è®¡æ¨¡å¼å’Œæƒ…æ™¯å†ç°åˆ›å»ºå‹æ¨¡å¼1ã€ABSTRACT FACTORYâ€”è¿½MMå°‘ä¸äº†è¯·åƒé¥­äº†ï¼Œéº¦å½“åŠ³çš„å¥—é¤å’Œè‚¯å¾·åŸºçš„å¥—é¤éƒ½æ˜¯MMçˆ±åƒçš„ä¸œè¥¿ï¼Œè™½ç„¶å£å‘³æœ‰æ‰€ä¸åŒï¼Œä½†ä¸ç®¡ä½ å¸¦MMå»éº¦å½“åŠ³æˆ–è‚¯å¾·åŸºï¼Œåªç®¡å‘æœåŠ¡å‘˜è¯´â€œä¸¤ä¸ªBå¥—é¤â€å°±è¡Œäº†ã€‚éº¦å½“åŠ³å’Œè‚¯å¾·åŸºå°±æ˜¯Bå¥—é¤çš„Abstract Factory, Bå¥—é¤é‡Œå«æœ‰æ±‰å ¡, é¸¡ç¿…å’Œé¥®æ–™. éº¦å½“åŠ³æˆ–è‚¯å¾·åŸºä¼šæ ¹æ®Bå¥—é¤çš„è§„æ ¼, è®©æ±‰å ¡Factory, é¸¡ç¿…Factory, é¥®æ–™Factoryåˆ†åˆ«ç”Ÿäº§å¯¹åº”Bå¥—é¤çš„ææ–™ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šå®¢æˆ·ç±»å’Œå·¥å‚ç±»åˆ†å¼€ã€‚æ¶ˆè´¹è€…ä»»ä½•æ—¶å€™éœ€è¦æŸå¥—äº§å“é›†åˆæ—¶ï¼Œåªéœ€å‘æŠ½è±¡å·¥å‚è¯·æ±‚å³å¯ã€‚æŠ½è±¡å·¥å‚ä¼šå†å‘å…·ä½“çš„å·¥å‚ç”Ÿäº§å‡ºç¬¦åˆäº§å“é›†è§„æ ¼çš„äº§å“ã€‚ 2ã€BUILDERâ€”MMæœ€çˆ±å¬çš„å°±æ˜¯â€œæˆ‘çˆ±ä½ â€è¿™å¥è¯äº†ï¼Œè§åˆ°ä¸åŒåœ°æ–¹çš„MM,è¦èƒ½å¤Ÿç”¨å¥¹ä»¬çš„æ–¹è¨€è·Ÿå¥¹è¯´è¿™å¥è¯å“¦ï¼Œæˆ‘æœ‰ä¸€ä¸ªå¤šç§è¯­è¨€ç¿»è¯‘æœºï¼Œä¸Šé¢æ¯ç§è¯­è¨€éƒ½æœ‰ä¸€ä¸ªæŒ‰é”®ï¼Œè§åˆ°MMæˆ‘åªè¦æŒ‰å¯¹åº”çš„é”®ï¼Œå®ƒå°±èƒ½å¤Ÿç”¨ç›¸åº”çš„è¯­è¨€è¯´å‡ºâ€œæˆ‘çˆ±ä½ â€è¿™å¥è¯äº†ï¼Œå›½å¤–çš„MMä¹Ÿå¯ä»¥è½»æ¾ææ‚ï¼Œè¿™å°±æ˜¯æˆ‘çš„â€œæˆ‘çˆ±ä½ â€builderã€‚ï¼ˆè¿™ä¸€å®šæ¯”ç¾å†›åœ¨ä¼Šæ‹‰å…‹ç”¨çš„ç¿»è¯‘æœºå¥½å–ï¼‰å»ºé€ æ¨¡å¼ï¼šå°†äº§å“çš„å†…éƒ¨è¡¨è±¡å’Œäº§å“çš„ç”Ÿæˆè¿‡ç¨‹åˆ†å‰²å¼€æ¥ï¼Œä»è€Œä½¿ä¸€ä¸ªå»ºé€ è¿‡ç¨‹ç”Ÿæˆå…·æœ‰ä¸åŒçš„å†…éƒ¨è¡¨è±¡çš„äº§å“å¯¹è±¡ã€‚å»ºé€ æ¨¡å¼ä½¿å¾—äº§å“å†…éƒ¨è¡¨è±¡å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ï¼Œå®¢æˆ·ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ã€‚å»ºé€ æ¨¡å¼å¯ä»¥å¼ºåˆ¶å®è¡Œä¸€ç§åˆ†æ­¥éª¤è¿›è¡Œçš„å»ºé€ è¿‡ç¨‹ã€‚ 3ã€FACTORY METHODâ€”è¯·MMå»éº¦å½“åŠ³åƒæ±‰å ¡ï¼Œä¸åŒçš„MMæœ‰ä¸åŒçš„å£å‘³ï¼Œè¦æ¯ä¸ªéƒ½è®°ä½æ˜¯ä¸€ä»¶çƒ¦äººçš„äº‹æƒ…ï¼Œæˆ‘ä¸€èˆ¬é‡‡ç”¨Factory Methodæ¨¡å¼ï¼Œå¸¦ç€MMåˆ°æœåŠ¡å‘˜é‚£å„¿ï¼Œè¯´â€œè¦ä¸€ä¸ªæ±‰å ¡â€ï¼Œå…·ä½“è¦ä»€ä¹ˆæ ·çš„æ±‰å ¡å‘¢ï¼Œè®©MMç›´æ¥è·ŸæœåŠ¡å‘˜è¯´å°±è¡Œäº†ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šæ ¸å¿ƒå·¥å‚ç±»ä¸å†è´Ÿè´£æ‰€æœ‰äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“åˆ›å»ºçš„å·¥ä½œäº¤ç»™å­ç±»å»åšï¼Œæˆä¸ºä¸€ä¸ªæŠ½è±¡å·¥å‚è§’è‰²ï¼Œä»…è´Ÿè´£ç»™å‡ºå…·ä½“å·¥å‚ç±»å¿…é¡»å®ç°çš„æ¥å£ï¼Œè€Œä¸æ¥è§¦å“ªä¸€ä¸ªäº§å“ç±»åº”å½“è¢«å®ä¾‹åŒ–è¿™ç§ç»†èŠ‚ã€‚ 4ã€PROTOTYPEâ€”è·ŸMMç”¨QQèŠå¤©ï¼Œä¸€å®šè¦è¯´äº›æ·±æƒ…çš„è¯è¯­äº†ï¼Œæˆ‘æœé›†äº†å¥½å¤šè‚‰éº»çš„æƒ…è¯ï¼Œéœ€è¦æ—¶åªè¦copyå‡ºæ¥æ”¾åˆ°QQé‡Œé¢å°±è¡Œäº†ï¼Œè¿™å°±æ˜¯æˆ‘çš„æƒ…è¯prototypeäº†ã€‚ï¼ˆ100å—é’±ä¸€ä»½ï¼Œä½ è¦ä¸è¦ï¼‰åŸå§‹æ¨¡å‹æ¨¡å¼ï¼šé€šè¿‡ç»™å‡ºä¸€ä¸ªåŸå‹å¯¹è±¡æ¥æŒ‡æ˜æ‰€è¦åˆ›å»ºçš„å¯¹è±¡çš„ç±»å‹ï¼Œç„¶åç”¨å¤åˆ¶è¿™ä¸ªåŸå‹å¯¹è±¡çš„æ–¹æ³•åˆ›å»ºå‡ºæ›´å¤šåŒç±»å‹çš„å¯¹è±¡ã€‚åŸå§‹æ¨¡å‹æ¨¡å¼å…è®¸åŠ¨æ€çš„å¢åŠ æˆ–å‡å°‘äº§å“ç±»ï¼Œäº§å“ç±»ä¸éœ€è¦éå¾—æœ‰ä»»ä½•äº‹å…ˆç¡®å®šçš„ç­‰çº§ç»“æ„ï¼ŒåŸå§‹æ¨¡å‹æ¨¡å¼é€‚ç”¨äºä»»ä½•çš„ç­‰çº§ç»“æ„ã€‚ç¼ºç‚¹æ˜¯æ¯ä¸€ä¸ªç±»éƒ½å¿…é¡»é…å¤‡ä¸€ä¸ªå…‹éš†æ–¹æ³•ã€‚ 5ã€SINGLETONâ€”ä¿ºæœ‰6ä¸ªæ¼‚äº®çš„è€å©†ï¼Œå¥¹ä»¬çš„è€å…¬éƒ½æ˜¯æˆ‘ï¼Œæˆ‘å°±æ˜¯æˆ‘ä»¬å®¶é‡Œçš„è€å…¬Singletonï¼Œå¥¹ä»¬åªè¦è¯´é“â€œè€å…¬â€ï¼Œéƒ½æ˜¯æŒ‡çš„åŒä¸€ä¸ªäººï¼Œé‚£å°±æ˜¯æˆ‘ã€‚(åˆšæ‰åšäº†ä¸ªæ¢¦å•¦ï¼Œå“ªæœ‰è¿™ä¹ˆå¥½çš„äº‹)å•ä¾‹æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹å•ä¾‹æ¨¡å¼ã€‚å•ä¾‹æ¨¡å¼åªåº”åœ¨æœ‰çœŸæ­£çš„â€œå•ä¸€å®ä¾‹â€çš„éœ€æ±‚æ—¶æ‰å¯ä½¿ç”¨ã€‚ ç»“æ„å‹æ¨¡å¼6ã€ADAPTERâ€”åœ¨æœ‹å‹èšä¼šä¸Šç¢°åˆ°äº†ä¸€ä¸ªç¾å¥³Sarahï¼Œä»é¦™æ¸¯æ¥çš„ï¼Œå¯æˆ‘ä¸ä¼šè¯´ç²¤è¯­ï¼Œå¥¹ä¸ä¼šè¯´æ™®é€šè¯ï¼Œåªå¥½æ±‚åŠ©äºæˆ‘çš„æœ‹å‹kentäº†ï¼Œä»–ä½œä¸ºæˆ‘å’ŒSarahä¹‹é—´çš„Adapterï¼Œè®©æˆ‘å’ŒSarahå¯ä»¥ç›¸äº’äº¤è°ˆäº†(ä¹Ÿä¸çŸ¥é“ä»–ä¼šä¸ä¼šè€æˆ‘)é€‚é…å™¨ï¼ˆå˜å‹å™¨ï¼‰æ¨¡å¼ï¼šæŠŠä¸€ä¸ªç±»çš„æ¥å£å˜æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æ¥å£ï¼Œä»è€Œä½¿åŸæœ¬å› æ¥å£åŸå› ä¸åŒ¹é…è€Œæ— æ³•ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªç±»èƒ½å¤Ÿä¸€èµ·å·¥ä½œã€‚é€‚é…ç±»å¯ä»¥æ ¹æ®å‚æ•°è¿”è¿˜ä¸€ä¸ªåˆé€‚çš„å®ä¾‹ç»™å®¢æˆ·ç«¯ã€‚ 7ã€BRIDGEâ€”æ—©ä¸Šç¢°åˆ°MMï¼Œè¦è¯´æ—©ä¸Šå¥½ï¼Œæ™šä¸Šç¢°åˆ°MMï¼Œè¦è¯´æ™šä¸Šå¥½ï¼›ç¢°åˆ°MMç©¿äº†ä»¶æ–°è¡£æœï¼Œè¦è¯´ä½ çš„è¡£æœå¥½æ¼‚äº®å“¦ï¼Œç¢°åˆ°MMæ–°åšçš„å‘å‹ï¼Œè¦è¯´ä½ çš„å¤´å‘å¥½æ¼‚äº®å“¦ã€‚ä¸è¦é—®æˆ‘â€œæ—©ä¸Šç¢°åˆ°MMæ–°åšäº†ä¸ªå‘å‹æ€ä¹ˆè¯´â€è¿™ç§é—®é¢˜ï¼Œè‡ªå·±ç”¨BRIDGEç»„åˆä¸€ä¸‹ä¸å°±è¡Œäº†ã€‚æ¡¥æ¢æ¨¡å¼ï¼šå°†æŠ½è±¡åŒ–ä¸å®ç°åŒ–è„±è€¦ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´å°†ä»–ä»¬ä¹‹é—´çš„å¼ºå…³è”å˜æˆå¼±å…³è”ï¼Œä¹Ÿå°±æ˜¯æŒ‡åœ¨ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿçš„æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´ä½¿ç”¨ç»„åˆ/èšåˆå…³ç³»è€Œä¸æ˜¯ç»§æ‰¿å…³ç³»ï¼Œä»è€Œä½¿ä¸¤è€…å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚ 8ã€COMPOSITEâ€”Maryä»Šå¤©è¿‡ç”Ÿæ—¥ã€‚â€œæˆ‘è¿‡ç”Ÿæ—¥ï¼Œä½ è¦é€æˆ‘ä¸€ä»¶ç¤¼ç‰©ã€‚â€â€œå—¯ï¼Œå¥½å§ï¼Œå»å•†åº—ï¼Œä½ è‡ªå·±æŒ‘ã€‚â€â€œè¿™ä»¶Tæ¤æŒºæ¼‚äº®ï¼Œä¹°ï¼Œè¿™æ¡è£™å­å¥½çœ‹ï¼Œä¹°ï¼Œè¿™ä¸ªåŒ…ä¹Ÿä¸é”™ï¼Œä¹°ã€‚â€â€œå–‚ï¼Œä¹°äº†ä¸‰ä»¶äº†å‘€ï¼Œæˆ‘åªç­”åº”é€ä¸€ä»¶ç¤¼ç‰©çš„å“¦ã€‚â€â€œä»€ä¹ˆå‘€ï¼ŒTæ¤åŠ è£™å­åŠ åŒ…åŒ…ï¼Œæ­£å¥½é…æˆä¸€å¥—å‘€ï¼Œå°å§ï¼Œéº»çƒ¦ä½ åŒ…èµ·æ¥ã€‚â€â€œâ€¦â€¦â€ï¼ŒMMéƒ½ä¼šç”¨Compositeæ¨¡å¼äº†ï¼Œä½ ä¼šäº†æ²¡æœ‰ï¼Ÿåˆæˆæ¨¡å¼ï¼šåˆæˆæ¨¡å¼å°†å¯¹è±¡ç»„ç»‡åˆ°æ ‘ç»“æ„ä¸­ï¼Œå¯ä»¥ç”¨æ¥æè¿°æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚åˆæˆæ¨¡å¼å°±æ˜¯ä¸€ä¸ªå¤„ç†å¯¹è±¡çš„æ ‘ç»“æ„çš„æ¨¡å¼ã€‚åˆæˆæ¨¡å¼æŠŠéƒ¨åˆ†ä¸æ•´ä½“çš„å…³ç³»ç”¨æ ‘ç»“æ„è¡¨ç¤ºå‡ºæ¥ã€‚åˆæˆæ¨¡å¼ä½¿å¾—å®¢æˆ·ç«¯æŠŠä¸€ä¸ªä¸ªå•ç‹¬çš„æˆåˆ†å¯¹è±¡å’Œç”±ä»–ä»¬å¤åˆè€Œæˆçš„åˆæˆå¯¹è±¡åŒç­‰çœ‹å¾…ã€‚ 9ã€DECORATORâ€”Maryè¿‡å®Œè½®åˆ°Sarlyè¿‡ç”Ÿæ—¥ï¼Œè¿˜æ˜¯ä¸è¦å«å¥¹è‡ªå·±æŒ‘äº†ï¼Œä¸ç„¶è¿™ä¸ªæœˆä¼™é£Ÿè´¹è‚¯å®šç©å®Œï¼Œæ‹¿å‡ºæˆ‘å»å¹´åœ¨åå±±é¡¶ä¸Šç…§çš„ç…§ç‰‡ï¼Œåœ¨èƒŒé¢å†™ä¸Šâ€œæœ€å¥½çš„çš„ç¤¼ç‰©ï¼Œå°±æ˜¯çˆ±ä½ çš„Fitaâ€ï¼Œå†åˆ°è¡—ä¸Šç¤¼å“åº—ä¹°äº†ä¸ªåƒæ¡†ï¼ˆå–ç¤¼å“çš„MMä¹Ÿå¾ˆæ¼‚äº®å“¦ï¼‰ï¼Œå†æ‰¾éš”å£æç¾æœ¯è®¾è®¡çš„Mikeè®¾è®¡äº†ä¸€ä¸ªæ¼‚äº®çš„ç›’å­è£…èµ·æ¥â€¦â€¦ï¼Œæˆ‘ä»¬éƒ½æ˜¯Decoratorï¼Œæœ€ç»ˆéƒ½åœ¨ä¿®é¥°æˆ‘è¿™ä¸ªäººå‘€ï¼Œæ€ä¹ˆæ ·ï¼Œçœ‹æ‡‚äº†å—ï¼Ÿè£…é¥°æ¨¡å¼ï¼šè£…é¥°æ¨¡å¼ä»¥å¯¹å®¢æˆ·ç«¯é€æ˜çš„æ–¹å¼æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œæ˜¯ç»§æ‰¿å…³ç³»çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼Œæä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»æ€§ã€‚åŠ¨æ€ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥å†åŠ¨æ€çš„æ’¤æ¶ˆã€‚å¢åŠ ç”±ä¸€äº›åŸºæœ¬åŠŸèƒ½çš„æ’åˆ—ç»„åˆè€Œäº§ç”Ÿçš„éå¸¸å¤§é‡çš„åŠŸèƒ½ã€‚ 10ã€FACADEâ€”æˆ‘æœ‰ä¸€ä¸ªä¸“ä¸šçš„Nikonç›¸æœºï¼Œæˆ‘å°±å–œæ¬¢è‡ªå·±æ‰‹åŠ¨è°ƒå…‰åœˆã€å¿«é—¨ï¼Œè¿™æ ·ç…§å‡ºæ¥çš„ç…§ç‰‡æ‰ä¸“ä¸šï¼Œä½†MMå¯ä¸æ‡‚è¿™äº›ï¼Œæ•™äº†åŠå¤©ä¹Ÿä¸ä¼šã€‚å¹¸å¥½ç›¸æœºæœ‰Facadeè®¾è®¡æ¨¡å¼ï¼ŒæŠŠç›¸æœºè°ƒæ•´åˆ°è‡ªåŠ¨æ¡£ï¼Œåªè¦å¯¹å‡†ç›®æ ‡æŒ‰å¿«é—¨å°±è¡Œäº†ï¼Œä¸€åˆ‡ç”±ç›¸æœºè‡ªåŠ¨è°ƒæ•´ï¼Œè¿™æ ·MMä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªç›¸æœºç»™æˆ‘æ‹å¼ ç…§ç‰‡äº†ã€‚é—¨é¢æ¨¡å¼ï¼šå¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„é—¨é¢å¯¹è±¡è¿›è¡Œã€‚é—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºä½¿ç”¨ã€‚æ¯ä¸€ä¸ªå­ç³»ç»Ÿåªæœ‰ä¸€ä¸ªé—¨é¢ç±»ï¼Œè€Œä¸”æ­¤é—¨é¢ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ã€‚ä½†æ•´ä¸ªç³»ç»Ÿå¯ä»¥æœ‰å¤šä¸ªé—¨é¢ç±»ã€‚ 11ã€FLYWEIGHTâ€”æ¯å¤©è·ŸMMå‘çŸ­ä¿¡ï¼Œæ‰‹æŒ‡éƒ½ç´¯æ­»äº†ï¼Œæœ€è¿‘ä¹°äº†ä¸ªæ–°æ‰‹æœºï¼Œå¯ä»¥æŠŠä¸€äº›å¸¸ç”¨çš„å¥å­å­˜åœ¨æ‰‹æœºé‡Œï¼Œè¦ç”¨çš„æ—¶å€™ï¼Œç›´æ¥æ‹¿å‡ºæ¥ï¼Œåœ¨å‰é¢åŠ ä¸ŠMMçš„åå­—å°±å¯ä»¥å‘é€äº†ï¼Œå†ä¸ç”¨ä¸€ä¸ªå­—ä¸€ä¸ªå­—æ•²äº†ã€‚å…±äº«çš„å¥å­å°±æ˜¯Flyweightï¼ŒMMçš„åå­—å°±æ˜¯æå–å‡ºæ¥çš„å¤–éƒ¨ç‰¹å¾ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡æƒ…å†µä½¿ç”¨ã€‚äº«å…ƒæ¨¡å¼ï¼šFLYWEIGHTåœ¨æ‹³å‡»æ¯”èµ›ä¸­æŒ‡æœ€è½»é‡çº§ã€‚äº«å…ƒæ¨¡å¼ä»¥å…±äº«çš„æ–¹å¼é«˜æ•ˆçš„æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦å¯¹è±¡ã€‚äº«å…ƒæ¨¡å¼èƒ½åšåˆ°å…±äº«çš„å…³é”®æ˜¯åŒºåˆ†å†…è•´çŠ¶æ€å’Œå¤–è•´çŠ¶æ€ã€‚å†…è•´çŠ¶æ€å­˜å‚¨åœ¨äº«å…ƒå†…éƒ¨ï¼Œä¸ä¼šéšç¯å¢ƒçš„æ”¹å˜è€Œæœ‰æ‰€ä¸åŒã€‚å¤–è•´çŠ¶æ€æ˜¯éšç¯å¢ƒçš„æ”¹å˜è€Œæ”¹å˜çš„ã€‚å¤–è•´çŠ¶æ€ä¸èƒ½å½±å“å†…è•´çŠ¶æ€ï¼Œå®ƒä»¬æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚å°†å¯ä»¥å…±äº«çš„çŠ¶æ€å’Œä¸å¯ä»¥å…±äº«çš„çŠ¶æ€ä»å¸¸è§„ç±»ä¸­åŒºåˆ†å¼€æ¥ï¼Œå°†ä¸å¯ä»¥å…±äº«çš„çŠ¶æ€ä»ç±»é‡Œå‰”é™¤å‡ºå»ã€‚å®¢æˆ·ç«¯ä¸å¯ä»¥ç›´æ¥åˆ›å»ºè¢«å…±äº«çš„å¯¹è±¡ï¼Œè€Œåº”å½“ä½¿ç”¨ä¸€ä¸ªå·¥å‚å¯¹è±¡è´Ÿè´£åˆ›å»ºè¢«å…±äº«çš„å¯¹è±¡ã€‚äº«å…ƒæ¨¡å¼å¤§å¹…åº¦çš„é™ä½å†…å­˜ä¸­å¯¹è±¡çš„æ•°é‡ã€‚ 12ã€PROXYâ€”è·ŸMMåœ¨ç½‘ä¸ŠèŠå¤©ï¼Œä¸€å¼€å¤´æ€»æ˜¯â€œhi,ä½ å¥½â€,â€œä½ ä»å“ªå„¿æ¥å‘€ï¼Ÿâ€â€œä½ å¤šå¤§äº†ï¼Ÿâ€â€œèº«é«˜å¤šå°‘å‘€ï¼Ÿâ€è¿™äº›è¯ï¼ŒçœŸçƒ¦äººï¼Œå†™ä¸ªç¨‹åºåšä¸ºæˆ‘çš„Proxyå§ï¼Œå‡¡æ˜¯æ¥æ”¶åˆ°è¿™äº›è¯éƒ½è®¾ç½®å¥½äº†è‡ªåŠ¨çš„å›ç­”ï¼Œæ¥æ”¶åˆ°å…¶ä»–çš„è¯æ—¶å†é€šçŸ¥æˆ‘å›ç­”ï¼Œæ€ä¹ˆæ ·ï¼Œé…·å§ã€‚ä»£ç†æ¨¡å¼ï¼šä»£ç†æ¨¡å¼ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹æºå¯¹è±¡çš„å¼•ç”¨ã€‚ä»£ç†å°±æ˜¯ä¸€ä¸ªäººæˆ–ä¸€ä¸ªæœºæ„ä»£è¡¨å¦ä¸€ä¸ªäººæˆ–è€…ä¸€ä¸ªæœºæ„é‡‡å–è¡ŒåŠ¨ã€‚æŸäº›æƒ…å†µä¸‹ï¼Œå®¢æˆ·ä¸æƒ³æˆ–è€…ä¸èƒ½å¤Ÿç›´æ¥å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·å’Œç›®æ ‡å¯¹è±¡ç›´æ¥èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨ã€‚å®¢æˆ·ç«¯åˆ†è¾¨ä¸å‡ºä»£ç†ä¸»é¢˜å¯¹è±¡ä¸çœŸå®ä¸»é¢˜å¯¹è±¡ã€‚ä»£ç†æ¨¡å¼å¯ä»¥å¹¶ä¸çŸ¥é“çœŸæ­£çš„è¢«ä»£ç†å¯¹è±¡ï¼Œè€Œä»…ä»…æŒæœ‰ä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„æ¥å£ï¼Œè¿™æ—¶å€™ä»£ç†å¯¹è±¡ä¸èƒ½å¤Ÿåˆ›å»ºè¢«ä»£ç†å¯¹è±¡ï¼Œè¢«ä»£ç†å¯¹è±¡å¿…é¡»æœ‰ç³»ç»Ÿçš„å…¶ä»–è§’è‰²ä»£ä¸ºåˆ›å»ºå¹¶ä¼ å…¥ã€‚ è¡Œä¸ºæ¨¡å¼13ã€CHAIN OF RESPONSIBILITYâ€”æ™šä¸Šå»ä¸Šè‹±è¯­è¯¾ï¼Œä¸ºäº†å¥½å¼€æºœååˆ°äº†æœ€åä¸€æ’ï¼Œå“‡ï¼Œå‰é¢åäº†å¥½å‡ ä¸ªæ¼‚äº®çš„MMå“ï¼Œæ‰¾å¼ çº¸æ¡ï¼Œå†™ä¸Šâ€œHi,å¯ä»¥åšæˆ‘çš„å¥³æœ‹å‹å—ï¼Ÿå¦‚æœä¸æ„¿æ„è¯·å‘å‰ä¼ â€ï¼Œçº¸æ¡å°±ä¸€ä¸ªæ¥ä¸€ä¸ªçš„ä¼ ä¸Šå»äº†ï¼Œç³Ÿç³•ï¼Œä¼ åˆ°ç¬¬ä¸€æ’çš„MMæŠŠçº¸æ¡ä¼ ç»™è€å¸ˆäº†ï¼Œå¬è¯´æ˜¯ä¸ªè€å¤„å¥³å‘€ï¼Œå¿«è·‘!è´£ä»»é“¾æ¨¡å¼ï¼šåœ¨è´£ä»»é“¾æ¨¡å¼ä¸­ï¼Œå¾ˆå¤šå¯¹è±¡ç”±æ¯ä¸€ä¸ªå¯¹è±¡å¯¹å…¶ä¸‹å®¶çš„å¼•ç”¨è€Œæ¥èµ·æ¥å½¢æˆä¸€æ¡é“¾ã€‚è¯·æ±‚åœ¨è¿™ä¸ªé“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸€ä¸ªå¯¹è±¡å†³å®šå¤„ç†æ­¤è¯·æ±‚ã€‚å®¢æˆ·å¹¶ä¸çŸ¥é“é“¾ä¸Šçš„å“ªä¸€ä¸ªå¯¹è±¡æœ€ç»ˆå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œç³»ç»Ÿå¯ä»¥åœ¨ä¸å½±å“å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹åŠ¨æ€çš„é‡æ–°ç»„ç»‡é“¾å’Œåˆ†é…è´£ä»»ã€‚å¤„ç†è€…æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼šæ‰¿æ‹…è´£ä»»æˆ–è€…æŠŠè´£ä»»æ¨ç»™ä¸‹å®¶ã€‚ä¸€ä¸ªè¯·æ±‚å¯ä»¥æœ€ç»ˆä¸è¢«ä»»ä½•æ¥æ”¶ç«¯å¯¹è±¡æ‰€æ¥å—ã€‚ 14ã€COMMANDâ€”ä¿ºæœ‰ä¸€ä¸ªMMå®¶é‡Œç®¡å¾—ç‰¹åˆ«ä¸¥ï¼Œæ²¡æ³•è§é¢ï¼Œåªå¥½å€ŸåŠ©äºå¥¹å¼Ÿå¼Ÿåœ¨æˆ‘ä»¬ä¿©ä¹‹é—´ä¼ é€ä¿¡æ¯ï¼Œå¥¹å¯¹æˆ‘æœ‰ä»€ä¹ˆæŒ‡ç¤ºï¼Œå°±å†™ä¸€å¼ çº¸æ¡è®©å¥¹å¼Ÿå¼Ÿå¸¦ç»™æˆ‘ã€‚è¿™ä¸ï¼Œå¥¹å¼Ÿå¼Ÿåˆä¼ é€è¿‡æ¥ä¸€ä¸ªCOMMANDï¼Œä¸ºäº†æ„Ÿè°¢ä»–ï¼Œæˆ‘è¯·ä»–åƒäº†ç¢—æ‚é…±é¢ï¼Œå“ªçŸ¥é“ä»–è¯´ï¼šâ€œæˆ‘åŒæ—¶ç»™æˆ‘å§å§ä¸‰ä¸ªç”·æœ‹å‹é€COMMANDï¼Œå°±æ•°ä½ æœ€å°æ°”ï¼Œæ‰è¯·æˆ‘åƒé¢ã€‚â€ :-(å‘½ä»¤æ¨¡å¼ï¼šå‘½ä»¤æ¨¡å¼æŠŠä¸€ä¸ªè¯·æ±‚æˆ–è€…æ“ä½œå°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚å‘½ä»¤æ¨¡å¼æŠŠå‘å‡ºå‘½ä»¤çš„è´£ä»»å’Œæ‰§è¡Œå‘½ä»¤çš„è´£ä»»åˆ†å‰²å¼€ï¼Œå§”æ´¾ç»™ä¸åŒçš„å¯¹è±¡ã€‚å‘½ä»¤æ¨¡å¼å…è®¸è¯·æ±‚çš„ä¸€æ–¹å’Œå‘é€çš„ä¸€æ–¹ç‹¬ç«‹å¼€æ¥ï¼Œä½¿å¾—è¯·æ±‚çš„ä¸€æ–¹ä¸å¿…çŸ¥é“æ¥æ”¶è¯·æ±‚çš„ä¸€æ–¹çš„æ¥å£ï¼Œæ›´ä¸å¿…çŸ¥é“è¯·æ±‚æ˜¯æ€ä¹ˆè¢«æ¥æ”¶ï¼Œä»¥åŠæ“ä½œæ˜¯å¦æ‰§è¡Œï¼Œä½•æ—¶è¢«æ‰§è¡Œä»¥åŠæ˜¯æ€ä¹ˆè¢«æ‰§è¡Œçš„ã€‚ç³»ç»Ÿæ”¯æŒå‘½ä»¤çš„æ’¤æ¶ˆã€‚ 15ã€INTERPRETERâ€”ä¿ºæœ‰ä¸€ä¸ªã€Šæ³¡MMçœŸç»ã€‹ï¼Œä¸Šé¢æœ‰å„ç§æ³¡MMçš„æ”»ç•¥ï¼Œæ¯”å¦‚è¯´å»åƒè¥¿é¤çš„æ­¥éª¤ã€å»çœ‹ç”µå½±çš„æ–¹æ³•ç­‰ç­‰ï¼Œè·ŸMMçº¦ä¼šæ—¶ï¼Œåªè¦åšä¸€ä¸ªInterpreterï¼Œç…§ç€ä¸Šé¢çš„è„šæœ¬æ‰§è¡Œå°±å¯ä»¥äº†ã€‚è§£é‡Šå™¨æ¨¡å¼ï¼šç»™å®šä¸€ä¸ªè¯­è¨€åï¼Œè§£é‡Šå™¨æ¨¡å¼å¯ä»¥å®šä¹‰å‡ºå…¶æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶åŒæ—¶æä¾›ä¸€ä¸ªè§£é‡Šå™¨ã€‚å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªè§£é‡Šå™¨æ¥è§£é‡Šè¿™ä¸ªè¯­è¨€ä¸­çš„å¥å­ã€‚è§£é‡Šå™¨æ¨¡å¼å°†æè¿°æ€æ ·åœ¨æœ‰äº†ä¸€ä¸ªç®€å•çš„æ–‡æ³•åï¼Œä½¿ç”¨æ¨¡å¼è®¾è®¡è§£é‡Šè¿™äº›è¯­å¥ã€‚åœ¨è§£é‡Šå™¨æ¨¡å¼é‡Œé¢æåˆ°çš„è¯­è¨€æ˜¯æŒ‡ä»»ä½•è§£é‡Šå™¨å¯¹è±¡èƒ½å¤Ÿè§£é‡Šçš„ä»»ä½•ç»„åˆã€‚åœ¨è§£é‡Šå™¨æ¨¡å¼ä¸­éœ€è¦å®šä¹‰ä¸€ä¸ªä»£è¡¨æ–‡æ³•çš„å‘½ä»¤ç±»çš„ç­‰çº§ç»“æ„ï¼Œä¹Ÿå°±æ˜¯ä¸€ç³»åˆ—çš„ç»„åˆè§„åˆ™ã€‚æ¯ä¸€ä¸ªå‘½ä»¤å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªè§£é‡Šæ–¹æ³•ï¼Œä»£è¡¨å¯¹å‘½ä»¤å¯¹è±¡çš„è§£é‡Šã€‚å‘½ä»¤å¯¹è±¡çš„ç­‰çº§ç»“æ„ä¸­çš„å¯¹è±¡çš„ä»»ä½•æ’åˆ—ç»„åˆéƒ½æ˜¯ä¸€ä¸ªè¯­è¨€ã€‚ 16ã€ITERATORâ€”æˆ‘çˆ±ä¸Šäº†Maryï¼Œä¸é¡¾ä¸€åˆ‡çš„å‘å¥¹æ±‚å©šã€‚Maryï¼šâ€œæƒ³è¦æˆ‘è·Ÿä½ ç»“å©šï¼Œå¾—ç­”åº”æˆ‘çš„æ¡ä»¶â€æˆ‘ï¼šâ€œä»€ä¹ˆæ¡ä»¶æˆ‘éƒ½ç­”åº”ï¼Œä½ è¯´å§â€Maryï¼šâ€œæˆ‘çœ‹ä¸Šäº†é‚£ä¸ªä¸€å…‹æ‹‰çš„é’»çŸ³â€æˆ‘ï¼šâ€œæˆ‘ä¹°ï¼Œæˆ‘ä¹°ï¼Œè¿˜æœ‰å—ï¼Ÿâ€Maryï¼šâ€œæˆ‘çœ‹ä¸Šäº†æ¹–è¾¹çš„é‚£æ ‹åˆ«å¢…â€æˆ‘ï¼šâ€œæˆ‘ä¹°ï¼Œæˆ‘ä¹°ï¼Œè¿˜æœ‰å—ï¼Ÿâ€â€¦â€¦è¿­ä»£å­æ¨¡å¼ï¼šè¿­ä»£å­æ¨¡å¼å¯ä»¥é¡ºåºè®¿é—®ä¸€ä¸ªèšé›†ä¸­çš„å…ƒç´ è€Œä¸å¿…æš´éœ²èšé›†çš„å†…éƒ¨è¡¨è±¡ã€‚å¤šä¸ªå¯¹è±¡èšåœ¨ä¸€èµ·å½¢æˆçš„æ€»ä½“ç§°ä¹‹ä¸ºèšé›†ï¼Œèšé›†å¯¹è±¡æ˜¯èƒ½å¤ŸåŒ…å®¹ä¸€ç»„å¯¹è±¡çš„å®¹å™¨å¯¹è±¡ã€‚è¿­ä»£å­æ¨¡å¼å°†è¿­ä»£é€»è¾‘å°è£…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å­å¯¹è±¡ä¸­ï¼Œä»è€Œä¸èšé›†æœ¬èº«éš”å¼€ã€‚è¿­ä»£å­æ¨¡å¼ç®€åŒ–äº†èšé›†çš„ç•Œé¢ã€‚æ¯ä¸€ä¸ªèšé›†å¯¹è±¡éƒ½å¯ä»¥æœ‰ä¸€ä¸ªæˆ–ä¸€ä¸ªä»¥ä¸Šçš„è¿­ä»£å­å¯¹è±¡ï¼Œæ¯ä¸€ä¸ªè¿­ä»£å­çš„è¿­ä»£çŠ¶æ€å¯ä»¥æ˜¯å½¼æ­¤ç‹¬ç«‹çš„ã€‚è¿­ä»£ç®—æ³•å¯ä»¥ç‹¬ç«‹äºèšé›†è§’è‰²å˜åŒ–ã€‚ 17ã€MEDIATORâ€”å››ä¸ªMMæ‰“éº»å°†ï¼Œç›¸äº’ä¹‹é—´è°åº”è¯¥ç»™è°å¤šå°‘é’±ç®—ä¸æ¸…æ¥šäº†ï¼Œå¹¸äºå½“æ—¶æˆ‘åœ¨æ—è¾¹ï¼ŒæŒ‰ç…§å„è‡ªçš„ç­¹ç æ•°ç®—é’±ï¼Œèµšäº†é’±çš„ä»æˆ‘è¿™é‡Œæ‹¿ï¼Œèµ”äº†é’±çš„ä¹Ÿä»˜ç»™æˆ‘ï¼Œä¸€åˆ‡å°±OKå•¦ï¼Œä¿ºå¾—åˆ°äº†å››ä¸ªMMçš„ç”µè¯ã€‚è°ƒåœè€…æ¨¡å¼ï¼šè°ƒåœè€…æ¨¡å¼åŒ…è£…äº†ä¸€ç³»åˆ—å¯¹è±¡ç›¸äº’ä½œç”¨çš„æ–¹å¼ï¼Œä½¿å¾—è¿™äº›å¯¹è±¡ä¸å¿…ç›¸äº’æ˜æ˜¾ä½œç”¨ã€‚ä»è€Œä½¿ä»–ä»¬å¯ä»¥æ¾æ•£å¶åˆã€‚å½“æŸäº›å¯¹è±¡ä¹‹é—´çš„ä½œç”¨å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¸ä¼šç«‹å³å½±å“å…¶ä»–çš„ä¸€äº›å¯¹è±¡ä¹‹é—´çš„ä½œç”¨ã€‚ä¿è¯è¿™äº›ä½œç”¨å¯ä»¥å½¼æ­¤ç‹¬ç«‹çš„å˜åŒ–ã€‚è°ƒåœè€…æ¨¡å¼å°†å¤šå¯¹å¤šçš„ç›¸äº’ä½œç”¨è½¬åŒ–ä¸ºä¸€å¯¹å¤šçš„ç›¸äº’ä½œç”¨ã€‚è°ƒåœè€…æ¨¡å¼å°†å¯¹è±¡çš„è¡Œä¸ºå’Œåä½œæŠ½è±¡åŒ–ï¼ŒæŠŠå¯¹è±¡åœ¨å°å°ºåº¦çš„è¡Œä¸ºä¸Šä¸å…¶ä»–å¯¹è±¡çš„ç›¸äº’ä½œç”¨åˆ†å¼€å¤„ç†ã€‚ 18ã€MEMENTOâ€”åŒæ—¶è·Ÿå‡ ä¸ªMMèŠå¤©æ—¶ï¼Œä¸€å®šè¦è®°æ¸…æ¥šåˆšæ‰è·ŸMMè¯´äº†äº›ä»€ä¹ˆè¯ï¼Œä¸ç„¶MMå‘ç°äº†ä¼šä¸é«˜å…´çš„å“¦ï¼Œå¹¸äºæˆ‘æœ‰ä¸ªå¤‡å¿˜å½•ï¼Œåˆšæ‰ä¸å“ªä¸ªMMè¯´äº†ä»€ä¹ˆè¯æˆ‘éƒ½æ‹·è´ä¸€ä»½æ”¾åˆ°å¤‡å¿˜å½•é‡Œé¢ä¿å­˜ï¼Œè¿™æ ·å¯ä»¥éšæ—¶å¯Ÿçœ‹ä»¥å‰çš„è®°å½•å•¦ã€‚å¤‡å¿˜å½•æ¨¡å¼ï¼šå¤‡å¿˜å½•å¯¹è±¡æ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨å¦å¤–ä¸€ä¸ªå¯¹è±¡å†…éƒ¨çŠ¶æ€çš„å¿«ç…§çš„å¯¹è±¡ã€‚å¤‡å¿˜å½•æ¨¡å¼çš„ç”¨æ„æ˜¯åœ¨ä¸ç ´åå°è£…çš„æ¡ä»¶ä¸‹ï¼Œå°†ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æ‰ä½ï¼Œå¹¶å¤–éƒ¨åŒ–ï¼Œå­˜å‚¨èµ·æ¥ï¼Œä»è€Œå¯ä»¥åœ¨å°†æ¥åˆé€‚çš„æ—¶å€™æŠŠè¿™ä¸ªå¯¹è±¡è¿˜åŸåˆ°å­˜å‚¨èµ·æ¥çš„çŠ¶æ€ã€‚ 19ã€OBSERVERâ€”æƒ³çŸ¥é“å’±ä»¬å…¬å¸æœ€æ–°MMæƒ…æŠ¥å—ï¼ŸåŠ å…¥å…¬å¸çš„MMæƒ…æŠ¥é‚®ä»¶ç»„å°±è¡Œäº†ï¼Œtomè´Ÿè´£æœé›†æƒ…æŠ¥ï¼Œä»–å‘ç°çš„æ–°æƒ…æŠ¥ä¸ç”¨ä¸€ä¸ªä¸€ä¸ªé€šçŸ¥æˆ‘ä»¬ï¼Œç›´æ¥å‘å¸ƒç»™é‚®ä»¶ç»„ï¼Œæˆ‘ä»¬ä½œä¸ºè®¢é˜…è€…ï¼ˆè§‚å¯Ÿè€…ï¼‰å°±å¯ä»¥åŠæ—¶æ”¶åˆ°æƒ…æŠ¥å•¦è§‚å¯Ÿè€…æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨çŠ¶æ€ä¸Šå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚ 20ã€STATEâ€”è·ŸMMäº¤å¾€æ—¶ï¼Œä¸€å®šè¦æ³¨æ„å¥¹çš„çŠ¶æ€å“¦ï¼Œåœ¨ä¸åŒçš„çŠ¶æ€æ—¶å¥¹çš„è¡Œä¸ºä¼šæœ‰ä¸åŒï¼Œæ¯”å¦‚ä½ çº¦å¥¹ä»Šå¤©æ™šä¸Šå»çœ‹ç”µå½±ï¼Œå¯¹ä½ æ²¡å…´è¶£çš„MMå°±ä¼šè¯´â€œæœ‰äº‹æƒ…å•¦â€ï¼Œå¯¹ä½ ä¸è®¨åŒä½†è¿˜æ²¡å–œæ¬¢ä¸Šçš„MMå°±ä¼šè¯´â€œå¥½å•Šï¼Œä¸è¿‡å¯ä»¥å¸¦ä¸Šæˆ‘åŒäº‹ä¹ˆï¼Ÿâ€ï¼Œå·²ç»å–œæ¬¢ä¸Šä½ çš„MMå°±ä¼šè¯´â€œå‡ ç‚¹é’Ÿï¼Ÿçœ‹å®Œç”µå½±å†å»æ³¡å§æ€ä¹ˆæ ·ï¼Ÿâ€ï¼Œå½“ç„¶ä½ çœ‹ç”µå½±è¿‡ç¨‹ä¸­è¡¨ç°è‰¯å¥½çš„è¯ï¼Œä¹Ÿå¯ä»¥æŠŠMMçš„çŠ¶æ€ä»ä¸è®¨åŒä¸å–œæ¬¢å˜æˆå–œæ¬¢å“¦ã€‚çŠ¶æ€æ¨¡å¼ï¼šçŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜è¡Œä¸ºã€‚è¿™ä¸ªå¯¹è±¡çœ‹ä¸Šå»è±¡æ˜¯æ”¹å˜äº†å®ƒçš„ç±»ä¸€æ ·ã€‚çŠ¶æ€æ¨¡å¼æŠŠæ‰€ç ”ç©¶çš„å¯¹è±¡çš„è¡Œä¸ºåŒ…è£…åœ¨ä¸åŒçš„çŠ¶æ€å¯¹è±¡é‡Œï¼Œæ¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡éƒ½å±äºä¸€ä¸ªæŠ½è±¡çŠ¶æ€ç±»çš„ä¸€ä¸ªå­ç±»ã€‚çŠ¶æ€æ¨¡å¼çš„æ„å›¾æ˜¯è®©ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œå…¶è¡Œä¸ºä¹Ÿéšä¹‹æ”¹å˜ã€‚çŠ¶æ€æ¨¡å¼éœ€è¦å¯¹æ¯ä¸€ä¸ªç³»ç»Ÿå¯èƒ½å–å¾—çš„çŠ¶æ€åˆ›ç«‹ä¸€ä¸ªçŠ¶æ€ç±»çš„å­ç±»ã€‚å½“ç³»ç»Ÿçš„çŠ¶æ€å˜åŒ–æ—¶ï¼Œç³»ç»Ÿä¾¿æ”¹å˜æ‰€é€‰çš„å­ç±»ã€‚ 21ã€STRATEGYâ€”è·Ÿä¸åŒç±»å‹çš„MMçº¦ä¼šï¼Œè¦ç”¨ä¸åŒçš„ç­–ç•¥ï¼Œæœ‰çš„è¯·ç”µå½±æ¯”è¾ƒå¥½ï¼Œæœ‰çš„åˆ™å»åƒå°åƒæ•ˆæœä¸é”™ï¼Œæœ‰çš„å»æµ·è¾¹æµªæ¼«æœ€åˆé€‚ï¼Œå•ç›®çš„éƒ½æ˜¯ä¸ºäº†å¾—åˆ°MMçš„èŠ³å¿ƒï¼Œæˆ‘çš„è¿½MMé”¦å›Šä¸­æœ‰å¥½å¤šStrategyå“¦ã€‚ç­–ç•¥æ¨¡å¼ï¼šç­–ç•¥æ¨¡å¼é’ˆå¯¹ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒæ¥å£çš„ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä»è€Œä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥åœ¨ä¸å½±å“åˆ°å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹å‘ç”Ÿå˜åŒ–ã€‚ç­–ç•¥æ¨¡å¼æŠŠè¡Œä¸ºå’Œç¯å¢ƒåˆ†å¼€ã€‚ç¯å¢ƒç±»è´Ÿè´£ç»´æŒå’ŒæŸ¥è¯¢è¡Œä¸ºç±»ï¼Œå„ç§ç®—æ³•åœ¨å…·ä½“çš„ç­–ç•¥ç±»ä¸­æä¾›ã€‚ç”±äºç®—æ³•å’Œç¯å¢ƒç‹¬ç«‹å¼€æ¥ï¼Œç®—æ³•çš„å¢å‡ï¼Œä¿®æ”¹éƒ½ä¸ä¼šå½±å“åˆ°ç¯å¢ƒå’Œå®¢æˆ·ç«¯ã€‚ 22ã€TEMPLATE METHODâ€”â€”çœ‹è¿‡ã€Šå¦‚ä½•è¯´æœå¥³ç”Ÿä¸ŠåºŠã€‹è¿™éƒ¨ç»å…¸æ–‡ç« å—ï¼Ÿå¥³ç”Ÿä»è®¤è¯†åˆ°ä¸ŠåºŠçš„ä¸å˜çš„æ­¥éª¤åˆ†ä¸ºå·§é‡ã€æ‰“ç ´åƒµå±€ã€å±•å¼€è¿½æ±‚ã€æ¥å»ã€å‰æˆã€åŠ¨æ‰‹ã€çˆ±æŠšã€è¿›å»å…«å¤§æ­¥éª¤(Template method)ï¼Œä½†æ¯ä¸ªæ­¥éª¤é’ˆå¯¹ä¸åŒçš„æƒ…å†µï¼Œéƒ½æœ‰ä¸ä¸€æ ·çš„åšæ³•ï¼Œè¿™å°±è¦çœ‹ä½ éšæœºåº”å˜å•¦(å…·ä½“å®ç°)ï¼›æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼å‡†å¤‡ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå°†éƒ¨åˆ†é€»è¾‘ä»¥å…·ä½“æ–¹æ³•ä»¥åŠå…·ä½“æ„é€ å­çš„å½¢å¼å®ç°ï¼Œç„¶åå£°æ˜ä¸€äº›æŠ½è±¡æ–¹æ³•æ¥è¿«ä½¿å­ç±»å®ç°å‰©ä½™çš„é€»è¾‘ã€‚ä¸åŒçš„å­ç±»å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ï¼Œä»è€Œå¯¹å‰©ä½™çš„é€»è¾‘æœ‰ä¸åŒçš„å®ç°ã€‚å…ˆåˆ¶å®šä¸€ä¸ªé¡¶çº§é€»è¾‘æ¡†æ¶ï¼Œè€Œå°†é€»è¾‘çš„ç»†èŠ‚ç•™ç»™å…·ä½“çš„å­ç±»å»å®ç°ã€‚ 23ã€VISITORâ€”æƒ…äººèŠ‚åˆ°äº†ï¼Œè¦ç»™æ¯ä¸ªMMé€ä¸€æŸé²œèŠ±å’Œä¸€å¼ å¡ç‰‡ï¼Œå¯æ˜¯æ¯ä¸ªMMé€çš„èŠ±éƒ½è¦é’ˆå¯¹å¥¹ä¸ªäººçš„ç‰¹ç‚¹ï¼Œæ¯å¼ å¡ç‰‡ä¹Ÿè¦æ ¹æ®ä¸ªäººçš„ç‰¹ç‚¹æ¥æŒ‘ï¼Œæˆ‘ä¸€ä¸ªäººå“ªæå¾—æ¸…æ¥šï¼Œè¿˜æ˜¯æ‰¾èŠ±åº—è€æ¿å’Œç¤¼å“åº—è€æ¿åšä¸€ä¸‹Visitorï¼Œè®©èŠ±åº—è€æ¿æ ¹æ®MMçš„ç‰¹ç‚¹é€‰ä¸€æŸèŠ±ï¼Œè®©ç¤¼å“åº—è€æ¿ä¹Ÿæ ¹æ®æ¯ä¸ªäººç‰¹ç‚¹é€‰ä¸€å¼ å¡ï¼Œè¿™æ ·å°±è½»æ¾å¤šäº†ï¼›è®¿é—®è€…æ¨¡å¼ï¼šè®¿é—®è€…æ¨¡å¼çš„ç›®çš„æ˜¯å°è£…ä¸€äº›æ–½åŠ äºæŸç§æ•°æ®ç»“æ„å…ƒç´ ä¹‹ä¸Šçš„æ“ä½œã€‚ä¸€æ—¦è¿™äº›æ“ä½œéœ€è¦ä¿®æ”¹çš„è¯ï¼Œæ¥å—è¿™ä¸ªæ“ä½œçš„æ•°æ®ç»“æ„å¯ä»¥ä¿æŒä¸å˜ã€‚è®¿é—®è€…æ¨¡å¼é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹æœªå®šçš„ç³»ç»Ÿï¼Œå®ƒæŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç›¸å¯¹è‡ªç”±çš„æ¼”åŒ–ã€‚è®¿é—®è€…æ¨¡å¼ä½¿å¾—å¢åŠ æ–°çš„æ“ä½œå˜çš„å¾ˆå®¹æ˜“ï¼Œå°±æ˜¯å¢åŠ ä¸€ä¸ªæ–°çš„è®¿é—®è€…ç±»ã€‚è®¿é—®è€…æ¨¡å¼å°†æœ‰å…³çš„è¡Œä¸ºé›†ä¸­åˆ°ä¸€ä¸ªè®¿é—®è€…å¯¹è±¡ä¸­ï¼Œè€Œä¸æ˜¯åˆ†æ•£åˆ°ä¸€ä¸ªä¸ªçš„èŠ‚ç‚¹ç±»ä¸­ã€‚å½“ä½¿ç”¨è®¿é—®è€…æ¨¡å¼æ—¶ï¼Œè¦å°†å°½å¯èƒ½å¤šçš„å¯¹è±¡æµè§ˆé€»è¾‘æ”¾åœ¨è®¿é—®è€…ç±»ä¸­ï¼Œè€Œä¸æ˜¯æ”¾åˆ°å®ƒçš„å­ç±»ä¸­ã€‚è®¿é—®è€…æ¨¡å¼å¯ä»¥è·¨è¿‡å‡ ä¸ªç±»çš„ç­‰çº§ç»“æ„è®¿é—®å±äºä¸åŒçš„ç­‰çº§ç»“æ„çš„æˆå‘˜ç±»ã€‚ è®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³»å›¾ï¼š è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™1ã€å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰å¼€é—­åŸåˆ™å°±æ˜¯è¯´å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚æ‰€ä»¥ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚ 2ã€é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰é‡Œæ°ä»£æ¢åŸåˆ™(Liskov Substitution Principle LSP)é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚ LSPæ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“è¡ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œè½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œè¡ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹â€œå¼€-é—­â€åŸåˆ™çš„è¡¥å……ã€‚å®ç°â€œå¼€-é—­â€åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ã€‚è€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚â€”â€” From Baidu ç™¾ç§‘ 3ã€ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰è¿™ä¸ªæ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šçœŸå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚ 4ã€æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚è¿˜æ˜¯ä¸€ä¸ªé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦çš„æ„æ€ï¼Œä»è¿™å„¿æˆ‘ä»¬çœ‹å‡ºï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ä¸ªè½¯ä»¶çš„è®¾è®¡æ€æƒ³ï¼Œä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ï¼Œä¸ºäº†å‡çº§å’Œç»´æŠ¤æ–¹ä¾¿ã€‚æ‰€ä»¥ä¸Šæ–‡ä¸­å¤šæ¬¡å‡ºç°ï¼šé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚ 5ã€è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰ï¼ˆDemeter Principleï¼‰ä¸ºä»€ä¹ˆå«æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œå°±æ˜¯è¯´ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘çš„ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚ 6ã€åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰åŸåˆ™æ˜¯å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚","categories":[{"name":"Book","slug":"Book","permalink":"https://reversescale.github.io/categories/Book/"}],"tags":[{"name":"Book","slug":"Book","permalink":"https://reversescale.github.io/tags/Book/"}]},{"title":"iOS å¼€å‘ä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼","slug":"Design patterns iOS","date":"2017-02-21T06:56:27.000Z","updated":"2018-11-15T13:23:48.042Z","comments":true,"path":"2017/02/21/Design patterns iOS/","link":"","permalink":"https://reversescale.github.io/2017/02/21/Design patterns iOS/","excerpt":"ä¹‹å‰æœ‰æœ‹å‹é—®åˆ°è®¾è®¡æ¨¡å¼ï¼Œä¾¿ç‰¹æ„æ‰¾äº†ä¸€ç¯‡æ–‡ç« ï¼Œä¸“é—¨ä»‹ç»åœ¨ iOS å¼€å‘ä¸­ï¼Œå¯¹è®¾è®¡æ¨¡å¼çš„å…·ä½“åº”ç”¨ï¼ŒåŒæ—¶æ¨èä¸€æœ¬ä¹¦ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹~","text":"ä¹‹å‰æœ‰æœ‹å‹é—®åˆ°è®¾è®¡æ¨¡å¼ï¼Œä¾¿ç‰¹æ„æ‰¾äº†ä¸€ç¯‡æ–‡ç« ï¼Œä¸“é—¨ä»‹ç»åœ¨ iOS å¼€å‘ä¸­ï¼Œå¯¹è®¾è®¡æ¨¡å¼çš„å…·ä½“åº”ç”¨ï¼ŒåŒæ—¶æ¨èä¸€æœ¬ä¹¦ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹~ ï¼ˆä¸€ï¼‰ä»£ç†æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šå½“ä¸€ä¸ªç±»çš„æŸäº›åŠŸèƒ½éœ€è¦ç”±åˆ«çš„ç±»æ¥å®ç°ï¼Œä½†æ˜¯åˆä¸ç¡®å®šå…·ä½“ä¼šæ˜¯å“ªä¸ªç±»å®ç°ã€‚ä¼˜åŠ¿ï¼šè§£è€¦åˆæ•æ·åŸåˆ™ï¼šå¼€æ”¾-å°é—­åŸåˆ™å®ä¾‹ï¼štableviewçš„ æ•°æ®æºdelegateï¼Œé€šè¿‡å’Œprotocolçš„é…åˆï¼Œå®Œæˆå§”æ‰˜è¯‰æ±‚ã€‚åˆ—è¡¨rowä¸ªæ•°delegateè‡ªå®šä¹‰çš„delegate ï¼ˆäºŒï¼‰è§‚å¯Ÿè€…æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šä¸€èˆ¬ä¸ºmodelå±‚å¯¹ï¼Œcontrollerå’Œviewè¿›è¡Œçš„é€šçŸ¥æ–¹å¼ï¼Œä¸å…³å¿ƒè°å»æ¥æ”¶ï¼Œåªè´Ÿè´£å‘å¸ƒä¿¡æ¯ã€‚ä¼˜åŠ¿ï¼šè§£è€¦åˆæ•æ·åŸåˆ™ï¼šæ¥å£éš”ç¦»åŸåˆ™ï¼Œå¼€æ”¾-å°é—­åŸåˆ™å®ä¾‹ï¼šNotificationé€šçŸ¥ä¸­å¿ƒï¼Œæ³¨å†Œé€šçŸ¥ä¸­å¿ƒï¼Œä»»ä½•ä½ç½®å¯ä»¥å‘é€æ¶ˆæ¯ï¼Œæ³¨å†Œè§‚å¯Ÿè€…çš„å¯¹è±¡å¯ä»¥æ¥æ”¶ã€‚kvoï¼Œé”®å€¼å¯¹æ”¹å˜é€šçŸ¥çš„è§‚å¯Ÿè€…ï¼Œå¹³æ—¶åŸºæœ¬æ²¡ç”¨è¿‡ã€‚ ï¼ˆä¸‰ï¼‰MVCæ¨¡å¼åº”ç”¨åœºæ™¯ï¼šæ˜¯ä¸€ä¸­éå¸¸å¤è€çš„è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡æ•°æ®æ¨¡å‹ï¼Œæ§åˆ¶å™¨é€»è¾‘ï¼Œè§†å›¾å±•ç¤ºå°†åº”ç”¨ç¨‹åºè¿›è¡Œé€»è¾‘åˆ’åˆ†ã€‚ä¼˜åŠ¿ï¼šä½¿ç³»ç»Ÿï¼Œå±‚æ¬¡æ¸…æ™°ï¼ŒèŒè´£åˆ†æ˜ï¼Œæ˜“äºç»´æŠ¤æ•æ·åŸåˆ™ï¼šå¯¹æ‰©å±•å¼€æ”¾-å¯¹ä¿®æ”¹å°é—­å®ä¾‹ï¼šmodel-å³æ•°æ®æ¨¡å‹ï¼Œview-è§†å›¾å±•ç¤ºï¼Œcontrollerè¿›è¡ŒUIå±•ç°å’Œæ•°æ®äº¤äº’çš„é€»è¾‘æ§åˆ¶ã€‚ ï¼ˆå››ï¼‰å•ä¾‹æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šç¡®ä¿ç¨‹åºè¿è¡ŒæœŸæŸä¸ªç±»ï¼Œåªæœ‰ä¸€ä»½å®ä¾‹ï¼Œç”¨äºè¿›è¡Œèµ„æºå…±äº«æ§åˆ¶ã€‚ä¼˜åŠ¿ï¼šä½¿ç”¨ç®€å•ï¼Œå»¶æ—¶æ±‚å€¼ï¼Œæ˜“äºè·¨æ¨¡å—æ•æ·åŸåˆ™ï¼šå•ä¸€èŒè´£åŸåˆ™å®ä¾‹ï¼š[UIApplication sharedApplication]ã€‚æ³¨æ„äº‹é¡¹ï¼šç¡®ä¿ä½¿ç”¨è€…åªèƒ½é€šè¿‡ getInstanceæ–¹æ³•æ‰èƒ½è·å¾—ï¼Œå•ä¾‹ç±»çš„å”¯ä¸€å®ä¾‹ã€‚javaï¼ŒC++ä¸­ä½¿å…¶æ²¡æœ‰å…¬æœ‰æ„é€ å‡½æ•°ï¼Œç§æœ‰åŒ–å¹¶è¦†ç›–å…¶æ„é€ å‡½æ•°ã€‚object cä¸­ï¼Œé‡å†™allocWithZoneæ–¹æ³•ï¼Œä¿è¯å³ä½¿ç”¨æˆ·ç”¨ allocæ–¹æ³•ç›´æ¥åˆ›å»ºå•ä¾‹ç±»çš„å®ä¾‹ï¼Œè¿”å›çš„ä¹Ÿåªæ˜¯æ­¤å•ä¾‹ç±»çš„å”¯ä¸€é™æ€å˜é‡ã€‚ ï¼ˆäº”ï¼‰ç­–ç•¥æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šå®šä¹‰ç®—æ³•æ—ï¼Œå°è£…èµ·æ¥ï¼Œä½¿ä»–ä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ä¼˜åŠ¿ï¼šä½¿ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„ç”¨æˆ·æ•æ·åŸåˆ™ï¼šæ¥å£éš”ç¦»åŸåˆ™ï¼›å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿ï¼›é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œéå®ç°ã€‚å®ä¾‹ï¼šæ’åºç®—æ³•ï¼ŒNSArrayçš„sortedArrayUsingSelectorï¼›ç»å…¸çš„é¸­å­ä¼šå«ï¼Œä¼šé£æ¡ˆä¾‹ã€‚æ³¨æ„äº‹é¡¹ï¼š1ï¼Œå‰¥ç¦»ç±»ä¸­æ˜“äºå˜åŒ–çš„è¡Œä¸ºï¼Œé€šè¿‡ç»„åˆçš„æ–¹å¼åµŒå…¥æŠ½è±¡åŸºç±»2ï¼Œå˜åŒ–çš„è¡Œä¸ºæŠ½è±¡åŸºç±»ä¸ºï¼Œæ‰€æœ‰å¯å˜å˜åŒ–çš„çˆ¶ç±»3ï¼Œç”¨æˆ·ç±»çš„æœ€ç»ˆå®ä¾‹ï¼Œé€šè¿‡æ³¨å…¥è¡Œä¸ºå®ä¾‹çš„æ–¹å¼ï¼Œè®¾å®šæ˜“å˜è¡Œä¸ºé˜²æ­¢äº†ç»§æ‰¿è¡Œä¸ºæ–¹å¼ï¼Œå¯¼è‡´æ— å…³è¡Œä¸ºæ±¡æŸ“å­ç±»ã€‚å®Œæˆäº†ç­–ç•¥å°è£…å’Œå¯æ›¿æ¢æ€§ã€‚ ï¼ˆå…­ï¼‰å·¥å‚æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šå·¥å‚æ–¹å¼åˆ›å»ºç±»çš„å®ä¾‹ï¼Œå¤šä¸proxyæ¨¡å¼é…åˆï¼Œåˆ›å»ºå¯æ›¿æ¢ä»£ç†ç±»ã€‚ä¼˜åŠ¿ï¼šæ˜“äºæ›¿æ¢ï¼Œé¢å‘æŠ½è±¡ç¼–ç¨‹ï¼Œapplicationåªä¸æŠ½è±¡å·¥å‚å’Œæ˜“å˜ç±»çš„å…±æ€§æŠ½è±¡ç±»å‘ç”Ÿè°ƒç”¨å…³ç³»ã€‚æ•æ·åŸåˆ™ï¼šDIPä¾èµ–å€’ç½®åŸåˆ™å®ä¾‹ï¼šé¡¹ç›®éƒ¨ç½²ç¯å¢ƒä¸­ä¾èµ–å¤šä¸ªä¸åŒç±»å‹çš„æ•°æ®åº“æ—¶ï¼Œéœ€è¦ä½¿ç”¨å·¥å‚é…åˆproxyå®Œæˆæ˜“ç”¨æ€§æ›¿æ¢æ³¨æ„äº‹é¡¹ï¼šé¡¹ç›®åˆæœŸï¼Œè½¯ä»¶ç»“æ„å’Œéœ€æ±‚éƒ½æ²¡æœ‰ç¨³å®šä¸‹æ¥æ—¶ï¼Œä¸å»ºè®®ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œå› ä¸ºå…¶åŠ£åŠ¿ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå¢åŠ äº†ä»£ç çš„å¤æ‚åº¦ï¼Œå¢åŠ äº†è°ƒç”¨å±‚æ¬¡ï¼Œå¢åŠ äº†å†…å­˜è´Ÿæ‹…ã€‚æ‰€ä»¥è¦æ³¨æ„é˜²æ­¢æ¨¡å¼çš„æ»¥ç”¨ã€‚ è®¾è®¡æ¨¡å¼å…­å¤§åŸåˆ™1ã€å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰å¼€é—­åŸåˆ™å°±æ˜¯è¯´å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚æ‰€ä»¥ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚ 2ã€é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰é‡Œæ°ä»£æ¢åŸåˆ™(Liskov Substitution Principle LSP)é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚LSPæ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“è¡ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œè½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œè¡ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹â€œå¼€-é—­â€åŸåˆ™çš„è¡¥å……ã€‚å®ç°â€œå¼€-é—­â€åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ã€‚è€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚â€”â€” From Baidu ç™¾ç§‘ 3ã€ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰è¿™ä¸ªæ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šçœŸå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚ 4ã€æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚è¿˜æ˜¯ä¸€ä¸ªé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦çš„æ„æ€ï¼Œä»è¿™å„¿æˆ‘ä»¬çœ‹å‡ºï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ä¸ªè½¯ä»¶çš„è®¾è®¡æ€æƒ³ï¼Œä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ï¼Œä¸ºäº†å‡çº§å’Œç»´æŠ¤æ–¹ä¾¿ã€‚æ‰€ä»¥ä¸Šæ–‡ä¸­å¤šæ¬¡å‡ºç°ï¼šé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚ 5ã€è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰ï¼ˆDemeter Principleï¼‰ä¸ºä»€ä¹ˆå«æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œå°±æ˜¯è¯´ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘çš„ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚ 6ã€åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰åŸåˆ™æ˜¯å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚ ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹http://pan.baidu.com/s/1nvTqSdj éªŒè¯ç ï¼šDG58","categories":[{"name":"Book","slug":"Book","permalink":"https://reversescale.github.io/categories/Book/"}],"tags":[{"name":"Book","slug":"Book","permalink":"https://reversescale.github.io/tags/Book/"}]}]}