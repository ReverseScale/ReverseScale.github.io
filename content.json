{"meta":{"title":"Technology","subtitle":"","description":"","author":"Steven's Blog","url":"https://reversescale.github.io"},"pages":[{"title":"Not found","date":"2018-11-15T12:15:47.151Z","updated":"2018-11-15T02:35:05.000Z","comments":true,"path":"404.html","permalink":"https://reversescale.github.io/404.html","excerpt":"","text":"404 *{margin:0;padding:0;outline:none;font-family:\\5FAE\\8F6F\\96C5\\9ED1,å®‹ä½“;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-khtml-user-select:none;user-select:none;cursor:default;font-weight:lighter;} .center{margin:0 auto;} .whole{width:100%;height:100%;line-height:100%;position:fixed;bottom:0;left:0;z-index:-1000;overflow:hidden;} .whole img{width:100%;height:100%;} .mask{width:100%;height:100%;position:absolute;top:0;left:0;background:#fff;opacity:0.6;filter:alpha(opacity=60);} .b{width:100%;text-align:center;height:400px;position:absolute;top:50%;margin-top:-230px}.a{width:150px;height:50px;margin-top:30px}.a a{display:block;float:left;width:150px;height:50px;background:#fff;text-align:center;line-height:50px;font-size:18px;border-radius:25px;color:#333}.a a:hover{color:#000;box-shadow:#fff 0 0 20px} p{color:#000;margin-top:260px;font-size:24px;} #num{margin:0 5px;font-weight:bold;} var num=5; function redirect(){ num--; document.getElementById(\"num\").innerHTML=num; if(num"},{"title":"Categories","date":"2016-08-16T07:00:44.000Z","updated":"2018-01-25T14:41:06.000Z","comments":false,"path":"categories/index.html","permalink":"https://reversescale.github.io/categories/index.html","excerpt":"","text":""},{"title":"About","date":"2015-08-16T06:58:08.000Z","updated":"2018-11-15T12:29:41.694Z","comments":false,"path":"about/index.html","permalink":"https://reversescale.github.io/about/index.html","excerpt":"","text":"Excellence is a continuous process and not an accident. Thanks for reading! ~ ğŸ‘¨ğŸ»â€ğŸ’» èŒä¸šï¼šç¨‹åºå‘˜åŠé€€å¸ˆğŸ“Ÿ WeChatï¼šWhatsXieğŸ¤ª ä¸åªç”Ÿäº§ bug æ›´æ˜¯ bug çš„æ¬è¿å·¥ğŸ“® é‚®ä»¶ï¼šReverseScale@iCloud.comğŸ¤– Githubï¼šhttps://github.com/ReverseScale åšå®¢æ–°è£…ä¿®ï¼Œå†å²æ–‡ç« æ­£åœ¨è·¯ä¸Šâ€¦"},{"title":"Archives","date":"2016-08-16T07:00:24.000Z","updated":"2018-01-25T14:41:06.000Z","comments":true,"path":"archives/index.html","permalink":"https://reversescale.github.io/archives/index.html","excerpt":"","text":""},{"title":"Tags","date":"2016-08-11T04:12:45.000Z","updated":"2018-01-25T14:41:06.000Z","comments":true,"path":"tags/index.html","permalink":"https://reversescale.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ä½¿ç”¨ ngrok å¿«é€Ÿå®ç°å†…ç½‘ç©¿é€","slug":"Ngrok through","date":"2018-08-13T03:56:27.000Z","updated":"2018-11-15T13:18:46.822Z","comments":true,"path":"2018/08/13/Ngrok through/","link":"","permalink":"https://reversescale.github.io/2018/08/13/Ngrok through/","excerpt":"å®ç°å†…ç½‘ç©¿é€çš„å·¥å…·å¾ˆå¤šï¼Œä¹‹æ‰€ä»¥ä»‹ç» ngrokï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºå®ƒä½¿ç”¨ä¾¿æ·ï¼Œä¸ç”¨æ­å»ºæœåŠ¡å™¨ç­‰ç­‰éº»çƒ¦çš„å·¥åºï¼Œé€‚åˆå‰æ®µå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¿«é€Ÿè¯„ä¼°æ£€æµ‹é¡¹ç›®~","text":"å®ç°å†…ç½‘ç©¿é€çš„å·¥å…·å¾ˆå¤šï¼Œä¹‹æ‰€ä»¥ä»‹ç» ngrokï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºå®ƒä½¿ç”¨ä¾¿æ·ï¼Œä¸ç”¨æ­å»ºæœåŠ¡å™¨ç­‰ç­‰éº»çƒ¦çš„å·¥åºï¼Œé€‚åˆå‰æ®µå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¿«é€Ÿè¯„ä¼°æ£€æµ‹é¡¹ç›®~ Ngrokæ˜¯ä»€ä¹ˆngrok æ˜¯ä¸€ä¸ªåå‘ä»£ç†ï¼Œé€šè¿‡åœ¨å…¬å…±çš„ç«¯ç‚¹å’Œæœ¬åœ°è¿è¡Œçš„ Web æœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªå®‰å…¨çš„é€šé“ã€‚ngrok å¯æ•è·å’Œåˆ†ææ‰€æœ‰é€šé“ä¸Šçš„æµé‡ï¼Œä¾¿äºåæœŸåˆ†æå’Œé‡æ”¾ã€‚ è€Œæˆ‘ç”¨æ¥åœ¨å®¶é‡Œå¿«é€Ÿè®¿é—® Jenkinsï¼Œå·ä¸ªæ‡’ğŸ¤ª æ­å»ºæ–¹æ³•ç”±äºè¦å®Œæˆä¸€ä¸ªç½‘é¡µä¼˜åŒ–çš„ä½œä¸šæ‰¾äº†å¾ˆä¹…ngrokçš„ä½¿ç”¨æ–¹æ³•ï¼Œéƒ½ä¸å¤Ÿç®€ä¾¿æ˜“è¡Œæœ€åç»ˆäºå‘ç°äº†ä¸€ä¸ªå¥½æ–¹æ³•ã€‚ ä¸‹è½½ MAC ç‰ˆçš„ ngrokï¼šhttps://ngrok.com/download è§£å‹åˆ°æŒ‡å®šç›®å½•ï¼šSafari æµè§ˆå™¨ä¸‹è½½ Mac OS X ç¯å¢ƒä¸€èˆ¬ç›´æ¥è§£å‹ï¼ˆåæ­£æˆ‘æ˜¯è‡ªåŠ¨è§£å‹çš„ï¼‰ï¼Œå°† ngrok æ”¾è¿›é¡¹ç›®ç›®å½•ã€‚ è¿›å…¥åˆ° ngrok æ‰€åœ¨è·¯å¾„ï¼š1cd /tmp å¼€å¯æœåŠ¡1./ngrok http localhost:8080 ä¼šå‡ºç°å¦‚ä¸‹ ngrok æ§åˆ¶å° ç­‰å¾… Session Status çŠ¶æ€ä¸º onlineï¼ˆå˜ç»¿ï¼‰ï¼Œå°±å¯ä»¥åœ¨å¤–ç½‘é€šè¿‡ Forwarding çš„åœ°å€è¿›è¡Œè¿æ¥äº†ã€‚ æ³¨æ„ï¼šForwardingåœ°å€ä¸­çš„ c33faf1b ä¸æ˜¯å›ºå®šçš„ï¼Œåœ¨æ¯æ¬¡å¼€å§‹ ngrok æœåŠ¡çš„æ—¶å€™éƒ½ä¼šå˜æ›´ï¼Œæƒ³å›ºå®šï¼Ÿ ngrok:ğŸ˜›è¦é’±ã€‚ æµ‹è¯•ä¸€ä¸‹ä¾‹å¦‚ï¼š ngrok ç©¿é€å‰åœ¨å±€åŸŸç½‘ä¸­è®¿é—®åœ°å€ï¼šhttp://localhost:8080 ngrok ç©¿é€åå±€åŸŸç½‘ + å…¬ç½‘è®¿é—®åœ°å€ï¼šhttps://c33faf1b.ngrok.io","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"å¦‚ä½•ç”¨ Swift æ‰“é€ ä½ çš„ç¬¬ä¸€ä¸ªåŒºå—é“¾ App","slug":"How to build DApp","date":"2018-07-06T14:51:21.000Z","updated":"2018-11-15T13:19:04.032Z","comments":true,"path":"2018/07/06/How to build DApp/","link":"","permalink":"https://reversescale.github.io/2018/07/06/How to build DApp/","excerpt":"åŒºå—é“¾(Blockchain) æ˜¯ä¸€ç§çªç ´æ€§æŠ€æœ¯(Disruptive Technologies)ï¼Œè¿‘å¹´æ¸è·å…³æ³¨ï¼Œå·ç§°å°†äº’è”ç½‘ä»ä¿¡æ¯å…±äº«ï¼Œæ¨å‘ä»·å€¼ä¼ é€’ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„æ¥æ¢ç´¢å®ƒè®¾è®¡ä¸Šçš„å¥‡æ€å¦™æƒ³~","text":"åŒºå—é“¾(Blockchain) æ˜¯ä¸€ç§çªç ´æ€§æŠ€æœ¯(Disruptive Technologies)ï¼Œè¿‘å¹´æ¸è·å…³æ³¨ï¼Œå·ç§°å°†äº’è”ç½‘ä»ä¿¡æ¯å…±äº«ï¼Œæ¨å‘ä»·å€¼ä¼ é€’ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥çš„æ¥æ¢ç´¢å®ƒè®¾è®¡ä¸Šçš„å¥‡æ€å¦™æƒ³~ å› ä¸ºåŒºå—é“¾æ˜¯è®¸å¤šåŠ å¯†è´§å¸(Cryptocurrencies) å¦‚æ¯”ç‰¹å¸(Bitcoin)ã€ä»¥å¤ªåŠ(Ethereum)ã€è±ç‰¹å¸(Litecoin) çš„åˆ›å§‹æŠ€æœ¯ã€‚é‚£åŒºå—é“¾æ˜¯å¦‚ä½•è¿ä½œçš„å‘¢ï¼Ÿåœ¨æœ¬æ¬¡çš„æ•™å­¦é‡Œï¼Œæˆ‘å°†ä¼šè°ˆåˆ°æ‰€æœ‰å…³äºåŒºå—é“¾æŠ€æœ¯çš„çŸ¥è¯†ï¼Œä»¥åŠå¦‚ä½•ç”¨Swift æ¥åˆ¶ä½œè‡ªå·±çš„ã€ŒåŒºå—é“¾ã€ã€‚é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼ åŒºå—é“¾çš„è¿ä½œé¡¾åæ€ä¹‰ï¼ŒåŒºå—é“¾å°±æ˜¯ä¸€ä¸ªç”±ä¸åŒçš„åŒºå—ä¸²è¿åœ¨ä¸€èµ·çš„ã€Œé“¾ã€ï¼Œæ¯ä¸ªåŒºå—åŒ…å«ä¸‰åˆ™èµ„è®¯ï¼šèµ„æ–™(Data)ã€æ‚å‡‘å€¼(Hash)ã€å’Œå‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼ã€‚ èµ„æ–™ â”€â”€ä¾æ®ä½¿ç”¨æƒ…å¢ƒï¼Œå‚¨å­˜åœ¨åŒºå—çš„èµ„æ–™ä¼šå› åŒºå—é“¾çš„ç±»å‹è€Œä¸åŒã€‚ä¾‹å¦‚ï¼Œåœ¨æ¯”ç‰¹å¸åŒºå—é“¾ä¸­ï¼Œå‚¨å­˜èµ„æ–™å°±æ˜¯ä¸äº¤æ˜“æœ‰å…³çš„èµ„è®¯ï¼Œå³æ˜¯è½¬å¸çš„é‡‘é¢ã€ä»¥åŠå‚ä¸äº¤æ˜“äºŒäººçš„èµ„è®¯ã€‚ æ‚å‡‘å€¼ â”€â”€ä½ å¯ä»¥æŠŠæ‚å‡‘æƒ³æˆæ˜¯ä¸€ç§æ•°ä½æŒ‡çº¹ï¼Œå®ƒæ˜¯ç”¨æ¥è¯†åˆ«ä¸€ä¸ªåŒºå—åŠå…¶èµ„æ–™ã€‚æ‚å‡‘æœ€é‡è¦çš„åœ°æ–¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å­—æ¯æ•°å­—(Alphanumeric)ç¨‹å¼ç ï¼Œé€šå¸¸ä¼šç”±64ä¸ªå­—å…ƒç»„æˆã€‚å½“ä¸€ä¸ªåŒºå—è¢«åˆ›é€ æ—¶ï¼Œæ‚å‡‘å€¼ä¹ŸåŒæ—¶äº§ç”Ÿã€‚å½“ä¸€ä¸ªåŒºå—è¢«æ›´åŠ¨æ—¶ï¼Œæ‚å‡‘å€¼ä¹Ÿä¼šåŒæ—¶è¢«æ›´åŠ¨ã€‚é€è¿‡è¿™ç§æ–¹å¼ï¼Œå½“ä½ æƒ³è¦æŸ¥çœ‹åŒºå—ä¸Šçš„ä»»ä½•å˜åŠ¨æ—¶ï¼Œæ‚å‡‘å€¼å°±éå¸¸é‡è¦ã€‚ å‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼ â”€â”€æ¯ä¸ªåŒºå—å°±æ˜¯è—‰ç”±å‚¨å­˜å‰ä¸ªåŒºå—çš„æ‚å‡‘æ¥é“¾ç»“åœ¨ä¸€èµ·ï¼Œç»„æˆä¸€ä¸ªåŒºå—é“¾ï¼è¿™å°±æ˜¯è®©åŒºå—é“¾å¦‚æ­¤å®‰å…¨çš„åŸå› ã€‚çœ‹çœ‹è¿™å¼ å›¾ç‰‡ï¼š å¦‚ä½ æ‰€è§ï¼Œæ¯ä¸ªåŒºå—ç”±èµ„æ–™ï¼ˆæœªæ˜¾ç¤ºï¼‰ã€æ‚å‡‘å€¼ã€å’Œå‰ä¸€ä¸ªåŒºå—æ‚å‡‘å€¼æ‰€ç»„æˆã€‚ä¸¾ä¸ªä¾‹å­ï¼Œé»„è‰²åŒºå—åŒ…å«äº†è‡ªå·±çš„æ‚å‡‘å€¼H7S6ã€å’Œçº¢è‰²åŒºå—çš„æ‚å‡‘å€¼8SD9ã€‚ä»¥è¿™ç§æ–¹å¼ï¼Œå®ƒä»¬ç»„æˆäº†ä¸€ä¸ªé“¾ç»“ï¼Œå¹¶ä»¥æ­¤è¿ç»“åœ¨ä¸€èµ·ã€‚ç°åœ¨ï¼Œå‡è®¾æœ‰ä¸ªéª‡å®¢å…¥ä¾µå¹¶å°è¯•æ›´åŠ¨çº¢è‰²åŒºå—ã€‚è¯·è®°ä½ï¼Œæ¯æ¬¡ä¸€ä¸ªåŒºå—ä»¥ä»»ä½•æ–¹å¼è¢«æ›´åŠ¨æ—¶ï¼ŒåŒºå—çš„æ‚å€¼å‡‘ä¹Ÿä¼šè¢«æ›´åŠ¨ï¼å› æ­¤ï¼Œå½“ä¸‹ä¸€ä¸ªåŒºå—æ‰§è¡Œç¡®è®¤ã€å¹¶çœ‹åˆ°å‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼å¹¶ä¸å»åˆæ—¶ï¼Œå®ƒä¼šæœ‰æ•ˆåœ°å°†è‡ªå·±ä»ã€Œé“¾ã€ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œè€Œä¸ä¼šè¢«éª‡å®¢è¯»å–ã€‚ è¿™å°±æ˜¯åŒºå—ç»ƒä¼šå¦‚æ­¤å®‰å…¨çš„åŸå› ï¼Œä½ å‡ ä¹ä¸å¯èƒ½å°è¯•å›æº¯å¹¶æ›´æ”¹ä»»ä½•èµ„æ–™ã€‚æ‚å‡‘å€¼æä¾›äº†ä¸é”™çš„ä¿å¯†åŠéšç§ï¼Œä½†è¿˜æœ‰ä¸¤ä¸ªå®‰å…¨æœºåˆ¶æ¥è®©åŒºå—é“¾æ›´åŠ å®‰å…¨ï¼šéªŒè¯(Proof-of-work)åŠæ™ºæ…§åˆçº¦(Smart Contract)ã€‚è™½ç„¶æˆ‘ä¸ä¼šè¯¦è¿°ï¼Œä½†ä½ å¯ä»¥åœ¨è¿™é‡Œäº†è§£æ›´å¤šã€‚åŒºå—é“¾æœ€åä¸€ä¸ªä¿å…¨æ–¹å¼å°±æ˜¯åŸºäºå®ƒçš„ä½ç½®ã€‚ä¸å¤§å¤šå‚¨å­˜åœ¨ä¼ºæœå™¨æˆ–æ˜¯èµ„æ–™åº“å†…çš„èµ„æ–™ä¸åŒï¼ŒåŒºå—é“¾ä½¿ç”¨ç‚¹å¯¹ç‚¹ç½‘è·¯(Peer-To-Peer, P2P)ï¼Œå®ƒæ˜¯ä¸€ç§ç½‘è·¯å‹æ€ï¼Œå…è®¸ä»»ä½•äººåŠ å…¥å¹¶å°†è¯¥ç½‘è·¯ä¸Šçš„èµ„æ–™åˆ†å‘ç»™æ¯ä½æ¥æ”¶è€…ã€‚æ¯å½“æœ‰äººåŠ å…¥è¿™ä¸ªç½‘è·¯æ—¶ï¼Œä»–ä»¬å°±ä¼šå¾—åˆ°åŒºå—é“¾çš„å®Œæ•´æ‹·è´ï¼›æ¯å½“æœ‰äººå»ºç«‹ä¸€ä¸ªæ–°åŒºå—æ—¶ï¼Œå°±ä¼šä¼ é€åˆ°ç½‘è·¯å†…çš„æ‰€æœ‰äººã€‚ç„¶åï¼Œé€è¿‡ä¸€äº›å¤æ‚çš„ç¨‹å¼ï¼Œè®©èŠ‚ç‚¹(Node)åœ¨åŠ å…¥è¿™ä¸ªåŒºå—åˆ°åŒºå—é“¾ä¹‹å‰ï¼Œå…ˆç¡®è®¤è¯¥åŒºå—æœ‰å¦è¢«çªœæ”¹ã€‚å°±è¿™æ ·ï¼Œä»»ä½•åœ°æ–¹çš„ä»»ä½•äººéƒ½å¯ä»¥å–å¾—è¿™äº›èµ„è®¯ã€‚å¦‚æœä½ æ˜¯HBOçŸ½è°·ç¾¤çä¼ (Silicon Valley)çš„å¿ å®ç²‰ä¸ï¼Œè¿™å¬èµ·æ¥å¯èƒ½æœ‰ç‚¹ç†Ÿæ‚‰ï¼Œå› ä¸ºåœ¨è¿™å‡ºç¾å‰§é‡Œï¼Œä¸»è§’å°±æ˜¯ç”¨äº†ç±»ä¼¼çš„æŠ€æœ¯æ¥å»ºç«‹ä¸€ä¸ªå…¨æ–°ç½‘è·¯ã€‚ å› ä¸ºæ¯ä¸ªäººæˆ–èŠ‚ç‚¹éƒ½æœ‰ä¸€ä»½åŒºå—é“¾çš„æ‹·è´ï¼Œä»–ä»¬å¯ä»¥æœ‰å…±è¯†å¹¶ç¡®è®¤å“ªäº›åŒºå—æ˜¯åˆæ³•çš„ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦éª‡å…¥ä¸€ä¸ªåŒºå—ï¼Œä½ å¿…é¡»éª‡å…¥ç½‘è·¯ä¸Šè¶…è¿‡50% çš„åŒºå—æ¥é€šè¿‡ä½ çš„èµ„è®¯ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŒºå—é“¾æˆ–è®¸æ˜¯è¿‡å»åå¹´ä»¥æ¥æœ€å®‰å…¨çš„æŠ€æœ¯ä¹‹ä¸€ã€‚ å…³äºèŒƒä¾‹åº”ç”¨ç°åœ¨ä½ äº†è§£åŒºå—é“¾æ˜¯å¦‚ä½•è¿ä½œäº†ï¼Œé‚£ä¹ˆå¼€å§‹æ¥åˆ¶ä½œæˆ‘ä»¬çš„èŒƒä¾‹Appå§ï¼è¯·å…ˆä¸‹è½½åˆå§‹é¡¹ç›®ã€‚ï¼ˆhttps://raw.githubusercontent.com/appcoda/BlockchainDemo/master/BlockchainStarter.zipï¼‰ å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ¯”ç‰¹å¸é’±åŒ…ã€‚ç¬¬ä¸€ä¸ªå¸å·Account 1065 æ‹¥æœ‰500 BTCï¼Œè€Œç¬¬äºŒä¸ªå¸å·0217 åˆ™ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚æˆ‘ä»¬åˆ©ç”¨ä¼ é€æŒ‰é’®æ¥ä¼ é€æ¯”ç‰¹å¸åˆ°å…¶ä»–å¸å·ã€‚ä¸ºäº†èµšå–BTCï¼Œæˆ‘ä»¬æŒ‰ä¸‹Mine æŒ‰é’®å°±å¯ä»¥è·å¾—50 BTC ä¸ºå¥–åŠ±ã€‚åŸºæœ¬æ¥è¯´ï¼Œæˆ‘ä»¬åšçš„æ˜¯å½“App æ‰§è¡Œæ—¶ï¼Œåˆ©ç”¨æ§åˆ¶å°æ¥è§‚å¯Ÿä¸¤ä¸ªæ¯”ç‰¹å¸å¸å·é—´çš„äº¤æ˜“æƒ…å†µã€‚ ä½ ä¼šæ³¨æ„åˆ°ï¼Œä¾§è¾¹æ é‡Œæœ‰ä¸¤ä¸ªé‡è¦çš„ç±»åˆ«ï¼šBlockåŠBlockchainã€‚æ‰“å¼€è¿™äº›æ¡£æ¡ˆï¼Œä½ ä¼šçœ‹åˆ°æ¡£æ¡ˆæ˜¯ç©ºçš„ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘å°†ä¼šå¼•å¯¼ä½ å†™å‡ºè¿™äº›ç±»åˆ«çš„é€»è¾‘ã€‚é‚£æˆ‘ä»¬å¼€å§‹å§ï¼ åœ¨Swift å®šä¹‰Blockå‰å¾€Block.swiftå¹¶æ·»åŠ ç¨‹å¼ç ä»¥å®šä¹‰ä¸€ä¸ªåŒºå—ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹åŒºå—æ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬å…ˆå‰å®šä¹‰äº†ä¸€ä¸ªåŒºå—ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šæ‚å‡‘å€¼ã€è®°å½•çš„å®é™…èµ„æ–™ã€ä»¥åŠå‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼ã€‚å½“æˆ‘ä»¬æƒ³å»ºç«‹è‡ªå·±çš„åŒºå—é“¾æ—¶ï¼Œå¿…é¡»è¦çŸ¥é“åŒºå—çš„æ’åºï¼Œè¿™ä¸€ç‚¹å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨Swiftä¸­å®šä¹‰ã€‚æ·»åŠ ä»¥ä¸‹ç¨‹å¼ç åˆ°ç±»åˆ«é‡Œï¼š 1234var hash: String!var data: String!var previousHash: String!var index: Int! ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æœ€åä¸€ä¸ªé‡è¦çš„ç¨‹å¼ç ã€‚æˆ‘ä¹‹å‰æåˆ°æ¯æ¬¡ä¸€ä¸ªåŒºå—è¢«æ›´åŠ¨ï¼Œæ‚å‡‘å°±ä¼šæ”¹å˜ï¼›è¿™å°±æ˜¯åŒºå—é“¾å¦‚æ­¤å®‰å…¨çš„ç‰¹è‰²ä¹‹ä¸€ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»å»ºç«‹ä¸€ä¸ªå‡½å¼æ¥äº§ç”Ÿä¸€ä¸ªéšæœºå­—æ¯æ•°å­—çš„æ‚å‡‘ã€‚è¿™ä¸ªå‡½å¼åªéœ€è¦å‡ è¡Œç¨‹å¼ç ï¼š 123func generateHash() -&gt; String &#123; return NSUUID().uuidString.replacingOccurrences(of: \"-\", with: \"\")&#125; NSUUIDæ˜¯ä¸€ä¸ªç‰©ä»¶ï¼Œä»£è¡¨æ¡¥æ¥UUIDçš„é€šç”¨å”¯ä¸€å€¼ã€‚å®ƒå†…ç½®äºSwiftä¸­ï¼Œè€Œä¸”éå¸¸é€‚åˆç”¨æ¥äº§ç”Ÿ32å­—å…ƒçš„å­—ä¸²ã€‚è¿™ä¸ªå‡½å¼äº§ç”Ÿä¸€ä¸ªUUIDï¼Œæ¶ˆé™¤æ‰€æœ‰è¿å­—ç¬¦(-)ï¼Œç„¶åå›ä¼ Stringï¼Œå³åŒºå—çš„æ‚å‡‘ã€‚Block.swiftç°åœ¨åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š æˆ‘ä»¬å·²ç»å®šä¹‰äº†Blockç±»åˆ«ï¼Œæ¥ç€è®©æˆ‘ä»¬å®šä¹‰Blockchainç±»åˆ«å§ã€‚åˆ‡æ¢åˆ°Blockchain.swiftã€‚ åœ¨Swift å®šä¹‰Blockchainå¦‚å‰æ–‡æ‰€è¯´ï¼Œè®©æˆ‘ä»¬å°è¯•ä»åŸºæœ¬é¢æ¥äº†è§£åŒºå—é“¾ã€‚åœ¨åŸºæœ¬çš„æœ¯è¯­é‡Œï¼ŒåŒºå—é“¾åªæ˜¯åŒºå—ä¸²åœ¨ä¸€èµ·ç»„æˆçš„é“¾ï¼›æ¢å¥è¯è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰é¡¹ç›®çš„åˆ—è¡¨ã€‚å¬èµ·æ¥æ˜¯ä¸æ˜¯æœ‰ç‚¹ç†Ÿæ‚‰å‘¢ï¼Ÿå› ä¸ºè¿™å°±æ˜¯é˜µåˆ—çš„å®šä¹‰ï¼Œè€Œè¿™ä¸ªé˜µåˆ—å°±æ˜¯ç”±åŒºå—æ‰€ç»„æˆï¼è®©æˆ‘ä»¬æŠŠä¸‹åˆ—çš„ç¨‹å¼ç åŠ è¿›å»å§ï¼š 1var chain = [Block]() å°æç¤ºï¼šè¿™å‡ ä¹å¯ä»¥åº”ç”¨åœ¨ç”µè„‘ç§‘å­¦ä¸–ç•Œçš„æ‰€æœ‰äº‹ä¸Šã€‚å¦‚æœä½ æ›¾é‡è¿‡å¤§é—®é¢˜ï¼Œè¯•ç€å°†å®ƒæ‹†è§£æˆå°ç»„ä»¶ï¼Œç„¶åä»¥è‡ªå·±çš„æ–¹æ³•æ¥è§£å†³é—®é¢˜ï¼›å°±åƒæˆ‘ä»¬å¼„æ¸…æ¥šå¦‚ä½•åœ¨Swiftä¸­åŠ å…¥åŒºå—åŠåŒºå—é“¾ä¸€æ ·ï¼ ä½ ä¼šæ³¨æ„åˆ°åœ¨é˜µåˆ—é‡Œé¢åŒ…å«äº†å…ˆå‰å®šä¹‰çš„Blockç±»åˆ«ï¼Œé‚£æ˜¯æˆ‘ä»¬åœ¨åŒºå—é“¾ä¸­éœ€è¦çš„æ‰€æœ‰å˜æ•°ã€‚åŠ å…¥ä¸¤ä¸ªå‡½å¼åˆ°ç±»åˆ«é‡Œï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ã€‚è¯•ç€ç”¨æˆ‘å‰æ–‡æ‰€æ•™çš„æ¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼š åœ¨ä¸€ä¸ªåŒºå—é“¾ä¸­ï¼Œä¸¤ä¸ªä¸»è¦çš„å‡½å¼æ˜¯ä»€ä¹ˆï¼Ÿ å¸Œæœ›ä½ èƒ½å¤Ÿå›ç­”è¿™ä¸ªé—®é¢˜ï¼è¿™ä¸¤ä¸ªåŒºå—é“¾æ‹¥æœ‰çš„ä¸»è¦å‡½å¼ï¼Œæ˜¯ç”¨æ¥å»ºç«‹åˆå§‹åŒºå—ï¼Œä»¥åŠåœ¨åé¢æ–°å¢æ–°çš„åŒºå—ã€‚å½“ç„¶ï¼Œç°åœ¨æˆ‘ä¸ä¼šä¸‹æ”¾è¿™ä¸ªé“¾å¹¶åŠ å…¥æ™ºæ…§åˆçº¦ï¼Œä½†æ˜¯è¿™äº›æ˜¯åŸºæœ¬å‡½å¼ï¼åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç åˆ°Blockchain.swiftï¼š 1234567891011121314151617func createGenesisBlock(data:String) &#123; let genesisBlock = Block() genesisBlock.hash = genesisBlock.generateHash() genesisBlock.data = data genesisBlock.previousHash = \"0000\" genesisBlock.index = 0 chain.append(genesisBlock)&#125; func createBlock(data:String) &#123; let newBlock = Block() newBlock.hash = newBlock.generateHash() newBlock.data = data newBlock.previousHash = chain[chain.count-1].hash newBlock.index = chain.count chain.append(newBlock)&#125; æˆ‘ä»¬åŠ å…¥çš„ç¬¬ä¸€ä¸ªå‡½å¼æ˜¯ç”¨æ¥å»ºç«‹åˆå§‹åŒºå—ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªå‡½å¼æ¥æŠŠåŒºå—çš„èµ„æ–™ä½œä¸ºInputã€‚ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåä¸ºgenesisBlockçš„å˜æ•°ï¼Œå¹¶å°†å®ƒè®¾ä¸ºBlockå‹åˆ«ã€‚å› ä¸ºå®ƒæ˜¯Blockå‹åˆ«ï¼Œæ‰€ä»¥å®ƒæœ‰æˆ‘ä»¬ä¹‹å‰åœ¨Block.swiftå®šä¹‰çš„æ‰€æœ‰å˜æ•°åŠå‡½å¼ã€‚æˆ‘ä»¬è®¾å®šgenerateHash()ä¸ºæ‚å‡‘ã€ Input dataä¸ºèµ„æ–™ã€‚å› ä¸ºè¿™æ˜¯ç¬¬ä¸€ä¸ªåŒºå—ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘è®¾å®šä¸º000ï¼Œå¥½è®©æˆ‘ä»¬çŸ¥é“è¿™æ˜¯åˆå§‹åŒºå—ã€‚æˆ‘ä»¬å°†å®ƒçš„ç´¢å¼•å€¼è®¾ä¸º0 ï¼Œç„¶åæ”¾åˆ°åŒºå—é“¾chainã€‚ æˆ‘ä»¬å»ºç«‹çš„ä¸‹ä¸€ä¸ªå‡½å¼åˆ™é€‚ç”¨äºæ‰€æœ‰genesisBlockåçš„åŒºå—ï¼Œè€Œå®ƒä¼šå»ºç«‹å‰©ä¸‹çš„æ‰€æœ‰åŒºå—ã€‚ä½ ä¼šæ³¨æ„åˆ°å®ƒè·Ÿä¹‹å‰çš„å‡½å¼éå¸¸ç›¸ä¼¼ï¼Œå”¯ä¸€çš„ä¸åŒçš„æ˜¯æˆ‘ä»¬å°†previousHashè®¾å®šä¸ºå‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘ï¼Œå¹¶å°†indexè®¾ä¸ºå®ƒåœ¨åŒºå—ç»ƒçš„ä½ç½®ã€‚å®Œæˆäº†ï¼æˆ‘ä»¬å·²ç»æˆåŠŸå®šä¹‰è‡ªå·±çš„Blockchainï¼ä½ çš„ç¨‹å¼ç åº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ æ¥ç€ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„éƒ¨åˆ†è¿æ¥åˆ°ViewController.swiftæ¡£æ¡ˆï¼Œå¹¶çœ‹çœ‹æ‰§è¡Œæˆæœå§ï¼ é’±åŒ…åå°(Wallet Backend)åˆ‡æ¢åˆ°ViewController.swiftï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„UIå…ƒä»¶éƒ½å·²ç»è¿ç»“å®Œæ¯•ã€‚æˆ‘ä»¬æ‰€éœ€è¦åšçš„å°±æ˜¯å¤„ç†äº¤æ˜“ï¼Œå¹¶å°†äº¤æ˜“åˆ—å°åˆ°æ§åˆ¶å°ä¸Šã€‚ç„¶è€Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥ç¨å¾®æ¢è®¨ä¸€ä¸‹æ¯”ç‰¹å¸åŒºå—é“¾ã€‚æ¯”ç‰¹å¸æ¥è‡ªä¸€ä¸ªæ€»å¸å·ï¼Œå‡è®¾è¿™ä¸ªå¸å·çš„ç¼–å·æ˜¯000ã€‚å½“ä½ æŒ–æ˜ä¸€é¢—æ¯”ç‰¹å¸æ—¶ï¼Œå°±è¡¨ç¤ºä½ è§£ç­”äº†æ•°å­¦é—®é¢˜ï¼Œå¹¶è·å¾—ä¸€å®šæ•°é‡çš„æ¯”ç‰¹å¸ä½œä¸ºå¥–åŠ±ã€‚è¿™æ˜¯å‘è¡Œè´§å¸ä¸€ä¸ªå¾ˆèªæ˜çš„æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿåˆ›é€ äº†è®©æ›´å¤šäººå»æŒ–æ˜çš„åŠ¨æœºã€‚åœ¨æˆ‘ä»¬çš„App é‡Œï¼Œæˆ‘ä»¬å°†100 BTC ä½œä¸ºå¥–åŠ±ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨ViewController æ·»åŠ éœ€è¦çš„å˜æ•°ï¼š 123456let firstAccount = 1065let secondAccount = 0217let bitcoinChain = Blockchain()let reward = 100var accounts: [String: Int] = [\"0000\": 10000000]let invalidAlert = UIAlertController(title: \"Invalid Transaction\", message: \"Please check the details of your transaction as we were unable to process this.\", preferredStyle: .alert) æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªå¸å·ï¼šä¸€ä¸ªç¼–å·ä¸º1065ï¼Œå¦ä¸€ä¸ªç¼–å·ä¸º0217ã€‚æˆ‘ä»¬åŒæ—¶æ–°å¢ä¸€ä¸ªbitcoinChainå˜æ•°æ¥ä½œä¸ºæˆ‘ä»¬çš„åŒºå—é“¾ï¼Œå¹¶å°†rewardè®¾å®šä¸º100ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä½œä¸ºæ¯”ç‰¹å¸æ¥æºçš„ä¸»å¸å·ï¼šè¿™æ˜¯æˆ‘ä»¬çš„åˆå§‹å¸å·ï¼Œç¼–å·ä¸º0000ï¼Œå®ƒæ‹¥æœ‰ä¸€åƒä¸‡ä¸ªæ¯”ç‰¹å¸ã€‚ä½ å¯ä»¥æŠŠè¿™ä¸ªå¸å·å½“æˆé“¶è¡Œï¼Œåœ¨æ¯ä¸€æ¬¡çš„å¥–åŠ±ä¸­ï¼Œå°±ä¼šä»ä¸­å–å‡º100ä¸ªæ¯”ç‰¹å¸ï¼Œå¹¶è½¬è‡³åˆæ³•çš„å¸å·é‡Œã€‚æˆ‘ä»¬ä¹Ÿå®šä¹‰ä¸€ä¸ªè­¦å‘Šï¼Œåœ¨æ¯æ¬¡äº¤æ˜“æ— æ³•å®Œæˆæ—¶æ˜¾ç¤ºã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥å†™äº›å°†ä¼šæ‰§è¡Œçš„æ³›ç”¨å‡½å¼ã€‚ä½ å¯ä»¥çŒœåˆ°è¿™äº›å‡½å¼æ˜¯ä»€ä¹ˆå—ï¼Ÿ ç¬¬ä¸€ä¸ªå‡½å¼æ˜¯ç”¨æ¥å¤„ç†äº¤æ˜“çš„ã€‚æˆ‘ä»¬è¦ç¡®è®¤ä¼ é€è€…åŠæ¥æ”¶è€…çš„å¸å·ä¸­ï¼Œæ¥æ”¶æˆ–æ‰£é™¤çš„é‡‘é¢æ˜¯æ­£ç¡®çš„ï¼Œè€Œä¸”è¿™ä¸ªèµ„è®¯ä¼šè¢«è®°å½•åœ¨æˆ‘ä»¬çš„åŒºå—é“¾ä¸Šã€‚ ä¸‹ä¸€ä¸ªå‡½å¼æ˜¯è¦åœ¨æ§åˆ¶å°é‡Œå°å‡ºå®Œæ•´çš„çºªå½•ï¼Œå®ƒä¼šæ˜¾ç¤ºæ¯ä¸ªåŒºå—åŠæ¯ä¸ªåŒºå—å†…çš„èµ„æ–™ã€‚ æœ€åä¸€ä¸ªå‡½å¼æ˜¯ç”¨æ¥éªŒè¯åŒºå—é“¾æ˜¯å¦åˆæ³•ï¼Œæ–¹æ³•ä¸ºç¡®è®¤å‰ä¸ªåŒºå—çš„æ‚å‡‘æ˜¯å¦ç¬¦åˆä¸‹ä¸€ä¸ªåŒºå—çš„èµ„è®¯ã€‚å› ä¸ºæˆ‘ä»¬ä¸ä¼šç¤ºèŒƒä»»ä½•éª‡å®¢æ–¹æ³•ï¼Œæ‰€ä»¥èŒƒä¾‹ä¸­çš„é“¾æ°¸è¿œéƒ½æ˜¯åˆæ³•çš„ã€‚ Transaction å‡½å¼ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„æ³›ç”¨äº¤æ˜“å‡½å¼ã€‚åœ¨å®šä¹‰å˜æ•°ä¹‹ä¸‹è¾“å…¥ä»¥ä¸‹ç¨‹å¼ç ï¼š 1234567891011121314151617181920212223242526func transaction(from: String, to: String, amount: Int, type: String) &#123; // 1 if accounts[from] == nil &#123; self.present(invalidAlert, animated: true, completion: nil) return &#125; else if accounts[from]!-amount &lt; 0 &#123; self.present(invalidAlert, animated: true, completion: nil) return &#125; else &#123; accounts.updateValue(accounts[from]!-amount, forKey: from) &#125; // 2 if accounts[to] == nil &#123; accounts.updateValue(amount, forKey: to) &#125; else &#123; accounts.updateValue(accounts[to]!+amount, forKey: to) &#125; // 3 if type == \"genesis\" &#123; bitcoinChain.createGenesisBlock(data: \"From: \\(from); To: \\(to); Amount: \\(amount)BTC\") &#125; else if type == \"normal\" &#123; bitcoinChain.createBlock(data: \"From: \\(from); To: \\(to); Amount: \\(amount)BTC\") &#125;&#125; çœ‹èµ·æ¥ç¨‹å¼ç å¾ˆå¤šï¼Œä½†æ˜¯å®ƒçš„æ ¸å¿ƒåªæ˜¯ä¸ºæ¯æ¬¡çš„äº¤æ˜“å®šä¹‰ä¸€äº›è§„åˆ™ã€‚åœ¨å¼€å¤´çš„åœ°æ–¹ï¼Œæˆ‘ä»¬æœ‰å››ä¸ªå‚æ•°ï¼štoã€fromã€amountä»¥åŠtypeã€‚Toã€Fromã€åŠAmountçš„å«ä¹‰ä¸€ç›®äº†ç„¶ï¼Œè€ŒTypeåŸºæœ¬ä¸Šå°±æ˜¯å®šä¹‰äº¤æ˜“çš„ç±»å‹ã€‚è¿™é‡Œæœ‰ä¸¤ç§Typeï¼šNormalå’ŒGenesisã€‚ä¸€ä¸ªNormalçš„äº¤æ˜“ç±»å‹ä¼šæ˜¯åœ¨å¸å·1065ä¸0217ä¹‹é—´è¿›è¡Œï¼Œè€ŒGenesisäº¤æ˜“ç±»å‹åˆ™ä¼šæ¶‰åŠåˆ°å¸å·0000ã€‚ ç¬¬ä¸€ä¸ªif-elseæ¡ä»¶å¼æ˜¯å…³äºæ¥æºå¸å·ã€‚å¦‚æœæ¥æºå¸å·ä¸å­˜åœ¨æˆ–é‡‘é¢ä¸è¶³ï¼Œæˆ‘ä»¬ä¼šæ˜¾ç¤ºäº¤æ˜“æ— æ•ˆçš„è­¦å‘Šï¼Œç„¶åç»“æŸå‡½å¼ã€‚è€Œå¦‚æœé€šè¿‡çš„è¯ï¼Œæˆ‘ä»¬ä¼šæ›´æ–°æ•°å€¼ã€‚ ç¬¬äºŒä¸ªif-elseæ¡ä»¶å¼æ˜¯å…³äºæ¥æ”¶å¸å·ã€‚å¦‚æœæ¥æ”¶å¸å·ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬éšå®ƒè€Œå»ï¼Œç„¶åç»“æŸå‡½å¼ã€‚è¦ä¸ç„¶ï¼Œæˆ‘ä»¬å°±ä¼šä¼ é€æ­£ç¡®çš„æ¯”ç‰¹å¸æ•°é‡åˆ°å¸å·ã€‚ ç¬¬ä¸‰ä¸ªif-elseæ¡ä»¶å¼å¤„ç†äº¤æ˜“çš„ç±»å‹ã€‚å¦‚æœä¸€ä¸ªäº¤æ˜“æ¶‰åŠåˆå§‹åŒºå—ï¼Œæˆ‘ä»¬å°±å»ºç«‹ä¸€ä¸ªæ–°çš„åˆå§‹åŒºå—ï¼›åä¹‹æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªæ–°åŒºå—æ¥å‚¨å­˜èµ„æ–™ã€‚ Printing å‡½å¼åœ¨æ¯æ¬¡äº¤æ˜“çš„æœ€åï¼Œæˆ‘ä»¬æƒ³è¦çœ‹åˆ°ä¸€ä¸ªæ¸…å•åˆ—å‡ºæ‰€æœ‰äº¤æ˜“ï¼Œæ¥ç¡®ä¿æˆ‘ä»¬çŸ¥é“æ‰€æœ‰å‘ç”Ÿçš„äº‹æƒ…ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨transactionå‡½å¼ä¸‹è¾“å…¥çš„ç¨‹å¼ç ï¼š 123456789func chainState() &#123; for i in 0...bitcoinChain.chain.count-1 &#123; print(\"\\tBlock: \\(bitcoinChain.chain[i].index!)\\n\\tHash: \\(bitcoinChain.chain[i].hash!)\\n\\tPreviousHash: \\(bitcoinChain.chain[i].previousHash!)\\n\\tData: \\(bitcoinChain.chain[i].data!)\") &#125; redLabel.text = \"Balance: \\(accounts[String(describing: firstAccount)]!) BTC\" blueLabel.text = \"Balance: \\(accounts[String(describing: secondAccount)]!) BTC\" print(accounts) print(chainValidity())&#125; è¿™æ˜¯ä¸€ä¸ªç®€å•çš„forå›åœˆï¼ŒåŒ…å«bitcoinChainçš„æ¯ä¸ªåŒºå—ã€‚æˆ‘ä»¬å°å‡ºåŒºå—çš„ç¼–å·ã€æ‚å‡‘å€¼ã€å‰ä¸ªåŒºå—çš„æ‚å‡‘ã€ä»¥åŠå‚¨å­˜çš„èµ„æ–™ï¼Œå†æ›´æ–°UILabelæ¥æ˜¾ç¤ºæ¯ä¸ªå¸å·å†…æ­£ç¡®çš„BTCæ•°ç›®ã€‚æœ€åï¼Œå°å‡ºä¸€ä¸ªåˆ—å‡ºæ¯ä¸ªå¸å·çš„æ¸…å•ï¼ˆåº”è¯¥ä¼šæœ‰ä¸‰ä¸ªï¼‰ï¼Œå¹¶éªŒè¯é“¾çš„åˆæ³•æ€§ã€‚ç°åœ¨ï¼Œä½ åº”è¯¥ä¼šåœ¨å‡½å¼æœ€åä¸€è¡Œä¸­å‘ç”Ÿé”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡å®šä¹‰chainValidity()å‡½å¼ï¼Œé‚£ä¹ˆå°±æ¥å¼€å§‹å§ï¼ Validity å‡½å¼è®°ä½ï¼Œå¦‚æœå‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼ç¬¦åˆç›®å‰åŒºå—æ‰€æè¿°çš„å†…å®¹ï¼Œé‚£ä¹ˆè¿™ä¸€ä¸ªé“¾å°±æ˜¯åˆæ³•çš„ã€‚æˆ‘ä»¬å¯ä»¥è½»æ˜“åœ°ç”¨å¦ä¸€ä¸ªfor å›åœˆæ¥é‡å¤éªŒè¯æ¯ä¸ªåŒºå—ã€‚ 123456789func chainValidity() -&gt; String &#123; var isChainValid = true for i in 1...bitcoinChain.chain.count-1 &#123; if bitcoinChain.chain[i].previousHash != bitcoinChain.chain[i-1].hash &#123; isChainValid = false &#125; &#125; return \"Chain is valid: \\(isChainValid)\\n\"&#125; è·Ÿä¹‹å‰æœ‰ç‚¹ç›¸ä¼¼ï¼Œæˆ‘ä»¬åœ¨bitcoinChainä¸­é‡å¤éªŒè¯æ¯ä¸ªåŒºå—ï¼Œæ¥ç¡®è®¤å‰ä¸€ä¸ªåŒºå—çš„æ‚å‡‘å€¼æ˜¯å¦ä¸ç›®å‰åŒºå—æ‰€æè¿°çš„å†…å®¹ç¬¦åˆã€‚è¿™æ ·å°±å®Œæˆäº†ï¼æˆ‘ä»¬å·²ç»å®šä¹‰äº†å‡½å¼ï¼Œå¹¶å°†ä¼šæ¯æ¬¡éƒ½ç”¨åˆ°å®ƒä»¬ï¼ä½ çš„ViewController.swiftç°åœ¨åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š ç°åœ¨æˆ‘ä»¬åªéœ€è¦å°†æŒ‰é’®è¿æ¥åˆ°å‡½å¼å°±å®Œæˆäº†ï¼Œæ¥å¼€å§‹æœ€åçš„ç¯‡ç« å§ï¼ å°†æ‰€æœ‰ä¸œè¥¿è¿ç»“åœ¨ä¸€èµ·å½“æˆ‘ä»¬çš„Appé¦–æ¬¡å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬æƒ³è®©åˆå§‹å¸å·0000ä¼ é€50 BTCåˆ°æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå¸å·ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†è®©ç¬¬ä¸€ä¸ªå¸å·ä¼ é€10 BTCåˆ°ç¬¬äºŒä¸ªå¸å·ã€‚è¿™ä¸ªæ­¥éª¤ä»…éœ€ä¸‰è¡Œç¨‹å¼ç å°±å¯ä»¥å®Œæˆã€‚å¦‚æ­¤æ›´æ”¹ä½ çš„viewDidLoadå‡½å¼ï¼š 1234567override func viewDidLoad() &#123; super.viewDidLoad() transaction(from: \"0000\", to: \"\\(firstAccount)\", amount: 50, type: \"genesis\") transaction(from: \"\\(firstAccount)\", to: \"\\(secondAccount)\", amount: 10, type: \"normal\") chainState() self.invalidAlert.addAction(UIAlertAction(title: \"OK\", style: .default, handler: nil))&#125; æˆ‘ä»¬ä½¿ç”¨å…ˆå‰å®šä¹‰å¥½çš„å‡½å¼ï¼Œå¹¶åœ¨æœ€åå‘¼å«chainState()ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ªOKæŒ‰é’®åˆ°äº¤æ˜“æ— æ•ˆçš„è­¦å‘Šä¸­ã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹å‰©ä¸‹çš„å››ä¸ªå‡½å¼é‡Œè¦åŠ å…¥ä»€ä¹ˆï¼šredMine()ã€blueMine()ã€redSend()åŠblueSend()ã€‚ æŒ–çŸ¿å‡½å¼æŒ–çŸ¿å‡½å¼éå¸¸åœ°ç®€å•ï¼Œåªè¦ä¸‰è¡Œç¨‹å¼ç å°±è¡Œäº†ã€‚è¿™å°±æ˜¯æˆ‘ä»¬è¦æ·»åŠ çš„ç¨‹å¼ç ï¼š 1234567891011@IBAction func redMine(_ sender: Any) &#123; transaction(from: \"0000\", to: \"\\(firstAccount)\", amount: 100, type: \"normal\") print(\"New block mined by: \\(firstAccount)\") chainState()&#125; @IBAction func blueMine(_ sender: Any) &#123; transaction(from: \"0000\", to: \"\\(secondAccount)\", amount: 100, type: \"normal\") print(\"New block mined by: \\(secondAccount)\") chainState()&#125; åœ¨ç¬¬ä¸€ä¸ªæŒ–çŸ¿å‡½å¼ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨transactionå‡½å¼ä»åˆå§‹å¸å·ä¼ é€100 BTCåˆ°ç¬¬ä¸€ä¸ªå¸å·ï¼Œå…ˆå°å‡ºä¸€ä¸ªåŒºå—è¢«æŒ–å‡ºï¼Œå†å°å‡ºchainStateã€‚åŒæ ·åœ°ï¼Œæˆ‘ä»¬åœ¨blueMineå‡½å¼é‡Œå°†100 BTCä¼ é€åˆ°ç¬¬äºŒä¸ªå¸å·ã€‚ ä¼ é€å‡½å¼ä¼ é€å‡½å¼ä¸å…ˆå‰çš„å‡½å¼ä¹Ÿç¨å¾®ç›¸ä¼¼ã€‚ 123456789101112131415161718192021@IBAction func redSend(_ sender: Any) &#123; if redAmount.text == \"\" &#123; present(invalidAlert, animated: true, completion: nil) &#125; else &#123; transaction(from: \"\\(firstAccount)\", to: \"\\(secondAccount)\", amount: Int(redAmount.text!)!, type: \"normal\") print(\"\\(redAmount.text!) BTC sent from \\(firstAccount) to \\(secondAccount)\") chainState() redAmount.text = \"\" &#125;&#125; @IBAction func blueSend(_ sender: Any) &#123; if blueAmount.text == \"\" &#123; present(invalidAlert, animated: true, completion: nil) &#125; else &#123; transaction(from: \"\\(secondAccount)\", to: \"\\(firstAccount)\", amount: Int(blueAmount.text!)!, type: \"normal\") print(\"\\(blueAmount.text!) BTC sent from \\(secondAccount) to \\(firstAccount)\") chainState() blueAmount.text = \"\" &#125;&#125; é¦–å…ˆï¼Œæˆ‘ä»¬ç¡®è®¤redAmountæˆ–blueAmountä¸­çš„æ–‡å­—æ ä½æ˜¯å¦ä¸ºç©ºå€¼ã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬ä¼šæ˜¾ç¤ºä¸€ä¸ªäº¤æ˜“æ— æ•ˆçš„è­¦å‘Šã€‚å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­ã€‚æˆ‘ä»¬ä½¿ç”¨transactionå‡½å¼è¾“å…¥é‡‘é¢ï¼Œå¹¶æŠŠäº¤æ˜“è®¾ä¸ºnormalå‹æ€ï¼Œä»¥å°†ç¬¬ä¸€ä¸ªå¸å·çš„é‡‘é¢ä¼ é€åˆ°ç¬¬äºŒä¸ªå¸å·ï¼ˆæˆ–ç›¸åï¼‰ã€‚æˆ‘ä»¬å°å‡ºè¢«ä¼ é€çš„é‡‘é¢ï¼Œç„¶åå‘¼å«chainState()å‡½å¼ã€‚æœ€åï¼ŒæŠŠæ–‡å­—æ ä½æ¸…ç©ºã€‚è¿™æ ·æˆ‘ä»¬å°±å®Œæˆå•°ï¼ç¡®è®¤ä¸€ä¸‹ä½ çš„ç¨‹å¼ç æ˜¯å¦ç¬¦åˆä¸‹å›¾æ‰€ç¤ºã€‚ æ‰§è¡ŒApp è¯•è¯•çœ‹ï¼ä»å‰ç«¯æ¥è¯´ï¼Œå®ƒçœ‹èµ·æ¥å°±å¦‚ä¸€ä¸ªæ™®é€šçš„äº¤æ˜“Appï¼Œä½†ä½ ä¼šçŸ¥é“å®ƒåå°çš„è¿ä½œã€‚è¯•è¯•ä½¿ç”¨App å°†BTC ä»ä¸€ä¸ªå¸å·äº¤æ˜“ç»™å¦ä¸€ä¸ªå¸å·ã€å¹¶è¯•ç€æ¬ºéª—App å§ï¼ ç»“è®ºåœ¨è¿™æ¬¡çš„æ•™å­¦ä¸­ï¼Œä½ å­¦åˆ°äº†å¦‚ä½•ä½¿ç”¨Swift æ¥å»ºç«‹ä¸€ä¸ªåŒºå—é“¾ï¼Œå¹¶å»ºç«‹è‡ªå·±çš„æ¯”ç‰¹å¸äº¤æ˜“ã€‚è¯·æ³¨æ„åœ¨çœŸå®çš„åŠ å¯†è´§å¸åå°é‡Œï¼Œå®ä½œéƒ¨åˆ†æ˜¯è·Ÿä¸Šæ–‡æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ä¸œè¥¿ï¼Œå› ä¸ºå®ƒéœ€è¦è—‰ç”±æ™ºæ…§åˆçº¦æ¥åˆ†æ•£ï¼Œä½†æ˜¯ä¸Šé¢çš„ç¤ºèŒƒå†…å®¹ç”¨æ¥å­¦ä¹ çš„ã€‚åœ¨è¿™ä¸ªèŒƒä¾‹ä¸­ï¼Œæˆ‘ä»¬è¿ç”¨äº†æ¯”ç‰¹å¸æ¥å½“åŠ å¯†è´§å¸ï¼Œä½†ä½ èƒ½æƒ³åˆ°åŒºå—é“¾è¿˜çš„å…¶ä»–ç”¨é€”å—ï¼Ÿæ¬¢è¿åœ¨ä¸‹é¢ç•™è¨€åˆ†äº«ä½ çš„çœ‹æ³•ï¼å¸Œæœ›ä½ åœ¨æ­¤å­¦åˆ°æ–°çš„ä¸œè¥¿ï¼ä½ å¯ä»¥åœ¨Githubä¸‹è½½å®Œæ•´é¡¹ç›®ä½œå‚è€ƒã€‚ å®Œæ•´é¡¹ç›®ï¼šhttps://github.com/appcoda/BlockchainDemoåŸæ–‡é“¾æ¥ï¼šhttps://www.appcoda.com/blockchain-introduction/","categories":[{"name":"Blockchain","slug":"Blockchain","permalink":"https://reversescale.github.io/categories/Blockchain/"}],"tags":[{"name":"Blockchain","slug":"Blockchain","permalink":"https://reversescale.github.io/tags/Blockchain/"}]},{"title":"ReactNative å¼€å‘å¸¸ç”¨å‘½ä»¤è¡Œï¼ˆæŒç»­æ›´æ–°ï¼‰","slug":"ReactNative command","date":"2018-03-29T14:56:27.000Z","updated":"2018-11-15T13:53:41.655Z","comments":true,"path":"2018/03/29/ReactNative command/","link":"","permalink":"https://reversescale.github.io/2018/03/29/ReactNative command/","excerpt":"è®°å½•ä¸€äº› ReactNative å¸¸ç”¨çš„å‘½ä»¤è¡Œï¼ŒåŒ…æ‹¬äº†ä¾‹å¦‚å®‰è£…ã€å¯åŠ¨æœåŠ¡ã€æ’ä»¶ç®¡ç†ã€çƒ­æ›´æ–°ç­‰ä¸€äº›æ—¥å¸¸ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ï¼Œä¼šéšç€ä½¿ç”¨çš„æ·±å…¥ä¸æ–­çš„è¡¥å…… ~","text":"è®°å½•ä¸€äº› ReactNative å¸¸ç”¨çš„å‘½ä»¤è¡Œï¼ŒåŒ…æ‹¬äº†ä¾‹å¦‚å®‰è£…ã€å¯åŠ¨æœåŠ¡ã€æ’ä»¶ç®¡ç†ã€çƒ­æ›´æ–°ç­‰ä¸€äº›æ—¥å¸¸ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ï¼Œä¼šéšç€ä½¿ç”¨çš„æ·±å…¥ä¸æ–­çš„è¡¥å…… ~ Node ç›¸å…³æŸ¥çœ‹æ‰€æœ‰å®‰è£…çš„nodeç‰ˆæœ¬ä¿¡æ¯ï¼š1nvm list æŸ¥çœ‹æ›´æ–°äº†çš„nodeçš„ç‰ˆæœ¬(å¯èƒ½éœ€è¦ç¿»å¢™)ï¼š1nvm ls-remote å®‰è£…nodeï¼š1nvm install v7.4.0 è®¾ç½®é»˜è®¤çš„nodeç‰ˆæœ¬(è¿™é‡Œè®¾ç½®æˆäº†7.4.0)ï¼Œè§£å†³æœ‰äº›ç‰ˆæœ¬æœ‰äº›å…¼å®¹æ€§çš„é—®é¢˜ï¼š1nvm alias default v7.4.0 React ç›¸å…³å¸è½½å‘½ä»¤ï¼š1npm uninstall -g react-native-cli å®‰è£…å‘½ä»¤ï¼š1npm install -g react-native-cli æŸ¥çœ‹æŸä¸ªæ¨¡å—æœ€æ–°å‘å¸ƒç‰ˆæœ¬ä¿¡æ¯(è¿™é‡ŒæŸ¥çœ‹react-nativeå‘å¸ƒçš„ç‰ˆæœ¬ä¿¡æ¯)ï¼š1npm info react-native å‡çº§æˆ–è€…é™çº§react-nativeçš„ç‰ˆæœ¬å¹¶ä¸”æ›´æ–°package.jsonï¼Œéœ€è¦ç”¨åœ¨react-nativeé¡¹ç›®ç›®å½•ä¸‹ï¼š1npm install --save react-native@0.41.1 æ–°å»º react-native é¡¹ç›®å¹¶æŒ‡å®šç‰ˆæœ¬ï¼š1react-native init demo --version 0.40.0 å¼€å¯æœåŠ¡ï¼š1react-native start è¿è¡ŒAndroidï¼š1react-native run-android è¿è¡ŒiOSï¼š1react-native run-ios ç‰ˆæœ¬æŸ¥çœ‹ï¼š1react-native --version é¡¹ç›®ç‰ˆæœ¬æŸ¥çœ‹ï¼š1react-native -v æŸ¥çœ‹react-nativeçš„å¸®åŠ©ä¿¡æ¯ï¼š1react-native --help ä½¿ç”¨ Cocoapods ç®¡ç† ReactNativePodfile æ–‡ä»¶æ ¼å¼ï¼š1234567891011pod &apos;React&apos;, :path =&gt; &apos;./node_modules/react-native&apos;, :subspecs =&gt; [ &apos;Core&apos;, &apos;RCTText&apos;, &apos;RCTImage&apos;, &apos;RCTActionSheet&apos;, &apos;RCTGeolocation&apos;, &apos;RCTNetwork&apos;, &apos;RCTSettings&apos;, &apos;RCTVibration&apos;, &apos;RCTWebSocket&apos;, ] ReactNative 0.42.0 ä»¥ä¸Šç‰ˆæœ¬éœ€åœ¨ Podfile é…ç½® yogaï¼š12# å¦‚æœä½ çš„RNç‰ˆæœ¬ &gt;= 0.42.0ï¼Œè¯·åŠ å…¥ä¸‹é¢è¿™è¡Œpod &quot;yoga&quot;, :path =&gt; &quot;./node_modules/react-native/ReactCommon/yoga&quot; å¼€æºç»„ä»¶åº“ï¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š1npm install react-native-tab-navigator --save å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼š1npm install --save react-native-tab-navigator@0.4.0 react-native é›†æˆç»„ä»¶ç»‘å®š(ReactNative 0.27ä»¥åï¼Œè‡ªé›†æˆRNPM)ï¼š1react-native link react-native-splash-screen å¸¸ç”¨å¼€æºåº“ï¼š12345678npm install --save react-native-tab-navigator@0.4.0npm install --save react-native-scrollable-tab-view@0.7.0npm install --save react-native-check-box@1.0.4npm install --react-native-easy-toast@1.0.9npm install --save GitHubTrending@2.0.0npm install --save react-native-htmlview@0.5.0npm install --save react-native-popover@0.5.0npm install --react-native-splash-screen@2.0.0 Code-Push å¸¸ç”¨å‘½ä»¤Code-Push æ¨åŒ…å‘½ä»¤ï¼š1code-push release-react &lt;appName&gt; &lt;platform&gt; [options] ç¤ºä¾‹ï¼š 1code-push release-react RNAPPGithub ios --t 1.0.2 --dev false --d Staging --des &quot;1.çƒ­æ›´æ–°ç›¸å…³è®¾ç½®&quot; --m true Code-Push çº¿ä¸ŠæŸ¥çœ‹æ›´æ–°ï¼š1code-push deployment ls RNAPPGithub Code-Push æŸ¥çœ‹é¡¹ç›®Keyï¼š1code-push deployment ls RNAPPGithub -k Code-Push iOSæ›´æ–°æ‰“åŒ…æ–¹æ³•ï¼š1react-native bundle --platform ios --entry-file index.js --bundle-output release_ios/main.jsbundle --assets-dest release_ios/ --dev fasle IDE æŠ€å·§ã€Šä½¿ç”¨VS Codeè°ƒè¯•React-Nativeç¨‹åºã€‹ï¼ˆhttps://jingyan.baidu.com/article/ad310e80fb13fc1849f49ed1.htmlï¼‰","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"ReactNative å­¦ä¹ æˆæœæ€»ç»“","slug":"ReactNative APP","date":"2018-03-29T11:56:27.000Z","updated":"2018-11-15T13:45:53.356Z","comments":true,"path":"2018/03/29/ReactNative APP/","link":"","permalink":"https://reversescale.github.io/2018/03/29/ReactNative APP/","excerpt":"ReactNative è¿™å‡ å¹´é£ç”Ÿæ°´èµ·ï¼Œå½“ç„¶é™¤äº† React ç¤¾åŒºç”Ÿæ€åœˆçš„åŠ æŒå’Œ Facebook çš„å¤§åŠ›æ¨å¹¿ä»¥å¤–ï¼Œå¦å¤–ä¸€ä¸ªæœ€ä¸»è¦çš„åŸå› å°±æ˜¯å…¶åœ¨å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½æ–¹é¢å–å¾—äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å¹³è¡¡~","text":"ReactNative è¿™å‡ å¹´é£ç”Ÿæ°´èµ·ï¼Œå½“ç„¶é™¤äº† React ç¤¾åŒºç”Ÿæ€åœˆçš„åŠ æŒå’Œ Facebook çš„å¤§åŠ›æ¨å¹¿ä»¥å¤–ï¼Œå¦å¤–ä¸€ä¸ªæœ€ä¸»è¦çš„åŸå› å°±æ˜¯å…¶åœ¨å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½æ–¹é¢å–å¾—äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å¹³è¡¡~ å­¦ä¹ è¯¾ç¨‹ï¼šã€ŠåŒå¹³å°çœŸå®å¼€å‘GitHub App React NativeæŠ€æœ¯å…¨é¢æŒæ¡ã€‹399 å¤§æ´‹ï¼Œå«ç€æ³ªåƒäº†ä¸€ä¸ªæœˆæ³¡é¢.. Github ä»£ç åº“ï¼šhttps://github.com/ReverseScale/RNAPPGithub.git çŸ¥è¯†ç‚¹ï¼š 1.æ•´ç† ReactNative ç½‘ç»œå°è£…åŠå¸¸ç”¨çš„ä¸‰æ–¹æ¨¡å— 2.ReactNative çš„ AsyncStorageæ•°æ®åº“æŠ€æœ¯ã€ç¦»çº¿ç¼“å­˜ 3.ReactNative çš„æ•°æ® DAO å±‚è®¾è®¡æŠ€å·§ï¼Œæ•°æ®çŠ¶æ€å®æ—¶æ›´æ–° 4.ReactNative çš„ä»£ç æå–æŠ€å·§ï¼Œç»„åˆæ¨¡å¼åº”ç”¨æŠ€å·§ï¼Œæ•°æ®å¼‚æ­¥åˆ·æ–°ä¸åŠ¨æ€æ·»åŠ  5.ReactNative çš„ç‰ˆæœ¬å‡çº§ã€æ•°æ®ç»Ÿè®¡ã€ç¤¾ä¼šåŒ–åˆ†äº«ã€ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œçƒ­æ›´æ–°ç­‰ 6.ReactNative é¡¹ç›®å‘å¸ƒå‰çš„ä¼˜åŒ–ã€æ‰“åŒ…ä¸ä¸Šçº¿ ç›®å½•ç»“æ„ï¼š ç”Ÿå‘½å‘¨æœŸåŠä½¿ç”¨åœºæ™¯ é¡¹ç›®ä»‹ç» ç»„ä»¶åŒ– é›†æˆä¸ç®¡ç† å¸ƒå±€çº¦æŸ ç»„ä»¶å°è£… æœ¬åœ°æŒä¹…åŒ– ç½‘ç»œè¯·æ±‚å°è£… åŠŸèƒ½è°ƒè¯• åŒå¹³å°é€‚é… å¼€æºç»„ä»¶åº“çš„ä½¿ç”¨ çƒ­æ›´æ–° ç”Ÿå‘½å‘¨æœŸåŠä½¿ç”¨åœºæ™¯å¸¸ç”¨æ–¹æ³•ï¼š constructor: componentWillMount: render: componentDidMount: componentWillReceiveProps: shouldComponentUpdate: componentWillUpdate: componentDidUpdate componentWillUnmount: constructor:åœ¨ç»„ä»¶åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡,è¿™ä¸ªæ–¹æ³•è¿›è¡Œthis.stateåˆå§‹åŒ–çŠ¶æ€æœºã€‚123456constructor(props) &#123; super(props); // åˆå§‹çŠ¶æ€ this.state = &#123; isShow:true &#125;;&#125; componentWillMount:åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡,åœ¨åˆå§‹æ¸²æŸ“(renderå‡½æ•°)å‰è¢«æ‰§è¡Œã€‚æ³¨æ„: å¦‚æœè¿™ä¸ªå‡½æ•°é€šè¿‡setStateå‡½æ•°ä¿®æ”¹çŠ¶æ€æœºå˜é‡,RNæ¡†æ¶ä¸ä¼šé¢å¤–æ‰§è¡Œæ¸²æŸ“(ç•Œé¢åˆ·æ–°) å¦‚æœå­ç»„ä»¶ä¹Ÿæœ‰componentWillMountå‡½æ•°ä½¿ç”¨,ä¼šåœ¨çˆ¶ç»„ä»¶ä¹‹åè°ƒç”¨ éœ€è¦ä»æœ¬åœ°å­˜å‚¨ä¸­è¯»å–æ•°æ®ç”¨äºæ˜¾ç¤º,å¸¸ç”¨è¿™ä¸ªå‡½æ•° render:è¯¥å‡½æ•°ç»„ä»¶å¿…æœ‰çš„ï¼Œé€šè¿‡è¿”å›JSXæˆ–å…¶ä»–ç»„ä»¶æ¥æ„æˆDOMï¼Œæ¢è¨€ä¹‹ï¼Œå°±æ˜¯ç»„ä»¶çš„æ ¸å¿ƒæ¸²æŸ“è¿‡ç¨‹ã€‚ componentDidMount:åœ¨React Nativeç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­,è¿™ä¸ªå‡½æ•°åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå®ƒåœ¨åˆå§‹æ¸²æŸ“å®Œæˆåä¼šé©¬ä¸Šè¢«è°ƒç”¨ã€‚åœ¨è¿™ä¹‹åå¼€å‘è€…å¯ä»¥é€šè¿‡å­ç»„ä»¶çš„å¼•ç”¨æ¥è®¿é—®ï¼Œæ“ä½œä»»ä½•å­ç»„ä»¶ã€‚å¦‚æœRNç»„ä»¶çš„å­ç»„ä»¶ä¹Ÿæœ‰componentDidMountå‡½æ•°ï¼Œå¹¶ä¼šåœ¨çˆ¶ç»„ä»¶çš„componentDidMountå‡½æ•°ä¹‹å‰è¢«è°ƒç”¨ã€‚ å¸¸ç”¨æ¥ç½‘ç»œè¯·æ±‚æ•°æ® componentWillReceiveProps:åœ¨React Nativeç»„ä»¶çš„åˆå§‹æ¸²æŸ“å®Œæˆåï¼Œpropsæ”¹å˜æ—¶ï¼Œè¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨ï¼Œå‚æ•°æ˜¯ä¸ªæ–°çš„propsã€‚ shouldComponentUpdate:React Nativeç»„ä»¶çš„åˆå§‹æ¸²æŸ“æ‰§è¡Œå®Œæˆå, RNç»„ä»¶æ¥æ”¶åˆ°æ–°çš„stateæˆ–è€…propsæ—¶è¿™ä¸ªå‡½æ•°ä¼šè°ƒç”¨ã€‚ é€šè¿‡è¿™ä¸ªå‡½æ•°é˜»æ­¢æ— å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œæ˜¯æé«˜React Nativeåº”ç”¨ç¨‹åºæ€§èƒ½çš„ä¸€å¤§æŠ€å·§ã€‚ componentWillUpdate:åˆå§‹æ¸²æŸ“å®Œæˆå,é‡æ–°æ¸²æŸ“å‰ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ è¿™ä¸ªå‡½æ•°ä¸èƒ½é€šè¿‡this.setStateå†æ¬¡æ”¹å˜çŠ¶æ€æœºå˜é‡çš„å€¼ã€‚ ç»„ä»¶æ›´æ–°æ—¶è°ƒç”¨ã€‚ componentDidUpdateRNç»„ä»¶åˆå§‹æ¸²æŸ“å®Œæˆåï¼ŒRNæ¡†æ¶åœ¨é‡æ–°æ¸²æŸ“RNç»„ä»¶å®Œæˆåè°ƒç”¨ã€‚å‚æ•°æ˜¯æ¸²æŸ“å‰çš„propså’Œstateã€‚ ç»„ä»¶æ›´æ–°å®Œæ¯•æ—¶è°ƒç”¨ã€‚ componentWillUnmount:ReactNative ç»„ä»¶è¢«å¸è½½å‰ä¼šè°ƒç”¨ï¼Œé€šå¸¸åšä¸€äº›æ¸…ç†å†…å®¹ã€‚ é¡¹ç›®ä»‹ç»åŒå¹³å°æ•ˆæœé¢„è§ˆï¼š React Nativeæ˜¯Reactåœ¨ç§»åŠ¨ç«¯çš„è·¨å¹³å°æ–¹æ¡ˆã€‚å¦‚æœæƒ³æ›´å¿«åœ°ç†è§£å’ŒæŒæ¡React Nativeå¼€å‘ï¼Œå°±å¿…é¡»å…ˆäº†è§£Reactã€‚ Reactæ˜¯FaceBookå¼€æºçš„ä¸€ä¸ªå‰ç«¯æ¡†æ¶ï¼Œå®ƒèµ·æºäº Facebook çš„å†…éƒ¨é¡¹ç›®ï¼Œå¹¶äº 2013 å¹´ 5 æœˆå¼€æºã€‚å› ä¸ºReact æ‹¥æœ‰è¾ƒé«˜çš„æ€§èƒ½ï¼Œä»£ç é€»è¾‘éå¸¸ç®€å•ï¼Œæ‰€ä»¥è¶Šæ¥è¶Šå¤šçš„äººå·²å¼€å§‹å…³æ³¨å’Œä½¿ç”¨å®ƒï¼Œç›®å‰è¯¥æ¡†æ¶åœ¨Githubä¸Šå·²ç»æœ‰7ä¸‡+starã€‚ ReactNative æŠ€æœ¯å¯¼å›¾ï¼š ç»„ä»¶åŒ–Reacté‡‡ç”¨ç»„ä»¶åŒ–çš„æ–¹å¼å¼€å‘ï¼Œé€šè¿‡å°†viewæ„å»ºæˆç»„ä»¶ï¼Œä½¿å¾—ä»£ç æ›´åŠ å®¹æ˜“å¾—åˆ°å¤ç”¨ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„åº”ç”¨åœ¨å¤§é¡¹ç›®çš„å¼€å‘ä¸­ã€‚æœ‰ä¸€å¥è¯è¯´çš„å¾ˆå½¢è±¡ï¼šåœ¨Reactä¸­ï¼Œæ„å»ºåº”ç”¨å°±åƒæ­ç§¯æœ¨ä¸€æ ·ã€‚ ç»„ä»¶åŒ–ç‰¹å¾Reactè®¤ä¸ºä¸€ä¸ªç»„ä»¶åº”è¯¥å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š å¯ç»„åˆï¼ˆComposeableï¼‰ï¼šä¸€ä¸ªç»„ä»¶æ˜“äºå’Œå…¶å®ƒç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œæˆ–è€…åµŒå¥—åœ¨å¦ä¸€ä¸ªç»„ä»¶å†…éƒ¨ã€‚å¦‚æœä¸€ä¸ªç»„ä»¶å†…éƒ¨åˆ›å»ºäº†å¦ä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆè¯´çˆ¶ç»„ä»¶æ‹¥æœ‰å®ƒåˆ›å»ºçš„å­ç»„ä»¶ï¼Œé€šè¿‡è¿™ä¸ªç‰¹æ€§ï¼Œä¸€ä¸ªå¤æ‚çš„UIå¯ä»¥æ‹†åˆ†æˆå¤šä¸ªç®€å•çš„UIç»„ä»¶ï¼› å¯é‡ç”¨ï¼ˆReusableï¼‰ï¼šæ¯ä¸ªç»„ä»¶éƒ½æ˜¯å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„ï¼Œå®ƒå¯ä»¥è¢«ä½¿ç”¨åœ¨å¤šä¸ªUIåœºæ™¯ï¼› å¯ç»´æŠ¤ï¼ˆMaintainableï¼‰ï¼šæ¯ä¸ªå°çš„ç»„ä»¶ä»…ä»…åŒ…å«è‡ªèº«çš„é€»è¾‘ï¼Œæ›´å®¹æ˜“è¢«ç†è§£å’Œç»´æŠ¤ï¼› å°è£…å¥½çš„å¯¼èˆªæ å°±å¯ä»¥è¢«ç§°ä¹‹ä¸ºä¸€ä¸ªç»„ä»¶ï¼Œå®ƒç¬¦åˆä¸Šè¿°ä¸‰ä¸ªç‰¹ç‚¹ï¼š å¯ç»„åˆï¼šå¯ä»¥å°†å¯¼èˆªæ ç»„ä»¶æ”¾åœ¨é¡µé¢ç»„ä»¶ä¸­ä½œä¸ºé¡µé¢ç»„ä»¶çš„å­ç»„ä»¶ã€‚è€Œä¸”åœ¨å¯¼èˆªæ ç»„ä»¶çš„å†…éƒ¨ï¼Œä¹Ÿæœ‰æŒ‰é’®ç»„ä»¶ç­‰å­ç»„ä»¶ã€‚ å¯é‡ç”¨ï¼šå¦‚æœå°è£…å¥½äº†è¯¥ç»„ä»¶ï¼Œå°±å¯ä»¥æ”¾åœ¨ä»»æ„éœ€è¦å¯¼èˆªæ çš„é¡µé¢ï¼ˆç»„ä»¶ï¼‰ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ å¯ç»´æŠ¤ï¼šå› ä¸ºå…·æœ‰ç‹¬ç«‹çš„åŠŸèƒ½å’Œå±•ç¤ºé€»è¾‘ï¼Œæ‰€ä»¥ä¾¿äºå®šä½å’Œä¿®æ”¹ã€‚ ç»„ä»¶çš„å±æ€§ä¸çŠ¶æ€åœ¨React Nativeï¼ˆReact.jsï¼‰é‡Œï¼Œç»„ä»¶æ‰€æŒæœ‰çš„æ•°æ®åˆ†ä¸ºä¸¤ç§ï¼š å±æ€§ï¼ˆpropsï¼‰ï¼šç»„ä»¶çš„propsæ˜¯ä¸å¯å˜çš„ï¼Œå®ƒåªèƒ½ä»å…¶ä»–çš„ç»„ä»¶ï¼ˆä¾‹å¦‚çˆ¶ç»„ä»¶ï¼‰ä¼ é€’è¿‡æ¥ã€‚ çŠ¶æ€ï¼ˆstateï¼‰ï¼šç»„ä»¶çš„stateæ˜¯å¯å˜çš„ï¼Œå®ƒè´Ÿè´£å¤„ç†ä¸ç”¨æˆ·çš„äº¤äº’ã€‚åœ¨é€šè¿‡ç”¨æˆ·ç‚¹å‡»äº‹ä»¶ç­‰æ“ä½œä»¥åï¼Œå¦‚æœä½¿å¾—å½“å‰ç»„ä»¶çš„æŸä¸ªstateå‘ç”Ÿäº†æ”¹å˜ï¼Œé‚£ä¹ˆå½“å‰ç»„ä»¶å°±ä¼šè§¦å‘render()æ–¹æ³•åˆ·æ–°è‡ªå·±ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªé¡µé¢æœ‰ä¸¤ä¸ªå­é¡µé¢ï¼Œä¸€ä¸ªæ˜¯â€˜æœ€çƒ­â€™é¡µé¢ï¼ˆç»„ä»¶ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯â€˜è¶‹åŠ¿â€˜é¡µé¢ï¼ˆç»„ä»¶ï¼‰ã€‚é‚£ä¹ˆè¿™ä¸¤ä¸ªç»„ä»¶éƒ½æœ‰ä»€ä¹ˆpropså’Œstateå‘¢ï¼Ÿ 1.propsï¼šç”±äºpropsæ˜¯ä»å…¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ï¼Œé‚£ä¹ˆå¯æƒ³è€ŒçŸ¥ï¼Œpropsçš„å£°æ˜åº”è¯¥æ˜¯åœ¨å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶é‡Œæ¥åšã€‚åœ¨React Nativeä¸­ï¼Œé€šå¸¸propsçš„å£°æ˜æ˜¯å’Œå½“å‰ç»„ä»¶çš„å£°æ˜æ”¾åœ¨ä¸€èµ·çš„ï¼š 1234//æœ€çƒ­å­é¡µé¢&lt;FavoriteTabPage &#123;...this.props&#125; tabLabel='æœ€çƒ­' flag=&#123;FlAG_STORAGE.flag_popular&#125;/&gt;//è¶‹åŠ¿å­é¡µé¢&lt;FavoriteTabPage &#123;...this.props&#125; tabLabel='è¶‹åŠ¿' flag=&#123;FlAG_STORAGE.flag_trending&#125;/&gt; åœ¨è¿™é‡Œï¼Œæ”¶è—é¡µé¢æ˜¯çˆ¶ç»„ä»¶ï¼Œè€Œæœ€çƒ­é¡µé¢å’Œè¶‹åŠ¿é¡µé¢æ˜¯å…¶å­ç»„ä»¶ã€‚åœ¨æ”¶è—é¡µé¢ç»„ä»¶é‡Œå£°æ˜äº†æœ€çƒ­é¡µé¢å’Œè¶‹åŠ¿é¡µé¢çš„ç»„ä»¶ã€‚ è€Œä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæœ€çƒ­é¡µé¢å’Œè¶‹åŠ¿é¡µé¢ç»„ä»¶éƒ½ç”¨çš„æ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼šFavoriteTabPageï¼Œè€Œè¿™ä¸¤ä¸ªé¡µé¢çš„ä¸åŒç‚¹åªåœ¨äºä¼ å…¥çš„ä¸¤ä¸ªpropsçš„ä¸åŒï¼štabLabelå’Œflagã€‚ è€Œåœ¨FavoriteTabPageç»„ä»¶å†…éƒ¨ï¼Œå¦‚æœæƒ³è°ƒç”¨flagè¿™ä¸ªpropsï¼Œå¯ä»¥ä½¿ç”¨this.props.flagæ¥è°ƒç”¨ã€‚ 2.state: ä¸‹é¢æ˜¯æœ€çƒ­å’Œè¶‹åŠ¿é¡µé¢çš„ç»„ä»¶ï¼š 12345678class FavoriteTabPage extends Component&#123;//ç»„ä»¶çš„æ„é€ æ–¹æ³•constructor(props)&#123; super(props); this.state=&#123; dataSource:new ListView.DataSource(&#123;rowHasChanged:(r1,r2)=&gt;r1!==r2&#125;),isLoading:false, &#125;&#125; è¿™é‡Œé¢å®šä¹‰äº†ä¸¤ä¸ªstate: dataSource:åˆ—è¡¨çš„æ•°æ®æº isLoading:æ˜¯å¦æ­£åœ¨åˆ·æ–° è¿™ä¸¤ä¸ªstateéƒ½æ˜¯å°†æ¥å¯èƒ½ç»å¸¸å˜åŒ–çš„ã€‚æ¯”å¦‚åœ¨ç½‘ç»œè¯·æ±‚ä»¥åï¼Œåˆ—è¡¨çš„æ•°æ®æºä¼šè¢«æ›¿æ¢æ‰ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦è°ƒç”¨: 1234this.setState(&#123; //æŠŠæ–°çš„å€¼newDataArrå¯¹è±¡ä¼ ç»™dataSource dataSource:newDataArr&#125;) 3.DOMDOM æ˜¯å‰ç«¯çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæš‚æ—¶å¯ä»¥ç²—ç•¥ç†è§£ä¸ºä¸€ä¸ªé¡µé¢çš„æ ‘å½¢ç»“æ„ã€‚React ç”Ÿå‘½å‘¨æœŸçš„ä¸‰å¤§é˜¶æ®µ Mountingï¼šå·²æ’å…¥çœŸå® DOM Updatingï¼šæ­£åœ¨è¢«é‡æ–°æ¸²æŸ“ Unmountingï¼šå·²ç§»å‡ºçœŸå® DOM åœ¨æ¯ä¸ªé˜¶æ®µéƒ½æœ‰ç›¸åº”çš„çŠ¶æ€å’Œä¸ä¹‹å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œå…·ä½“å¯ä»¥çœ‹ä¸‹å›¾ï¼š ä¸Šå›¾æ¥è‡ªï¼šè´¾é¹è¾‰çš„æŠ€æœ¯åšå®¢ï¼šReact Nativeä¹‹Reacté€Ÿå­¦æ•™ç¨‹(ä¸­) é›†æˆä¸ç®¡ç†1.æŒ‡å®šç‰ˆæœ¬åˆå§‹åŒ–åœ¨ç»ˆç«¯è¾“å…¥react-native demo â€“version 0.40.0å‘½ä»¤ä»¥åï¼Œå°±ä¼šåˆå§‹åŒ–ä¸€ä¸ªReact Nativeç‰ˆæœ¬ä¸º0.40.0çš„é¡¹ç›®ã€‚è¿™ä¸ªæœ€åˆé¡¹ç›®é‡Œé¢ç›´æ¥å°±åŒ…å«äº†iOSå’ŒAndroidçš„å·¥ç¨‹æ–‡ä»¶å¤¹ï¼Œå¯ä»¥ç”¨å¯¹åº”çš„IDEæ‰“å¼€åç¼–è¯‘è¿è¡Œã€‚ åœ¨æ–°å»ºä¸€ä¸ªReact Nativeé¡¹ç›®ä¹‹åçš„æ ¹ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ï¼š 2.ä½¿ç”¨ Cocoapods ç®¡ç† ReactNativePodfile æ–‡ä»¶æ ¼å¼ï¼š1234567891011pod &apos;React&apos;, :path =&gt; &apos;./node_modules/react-native&apos;, :subspecs =&gt; [ &apos;Core&apos;, &apos;RCTText&apos;, &apos;RCTImage&apos;, &apos;RCTActionSheet&apos;, &apos;RCTGeolocation&apos;, &apos;RCTNetwork&apos;, &apos;RCTSettings&apos;, &apos;RCTVibration&apos;, &apos;RCTWebSocket&apos;, ] ReactNative 0.42.0 ä»¥ä¸Šç‰ˆæœ¬éœ€åœ¨ Podfile é…ç½® yogaï¼š12# å¦‚æœä½ çš„RNç‰ˆæœ¬ &gt;= 0.42.0ï¼Œè¯·åŠ å…¥ä¸‹é¢è¿™è¡Œpod &quot;yoga&quot;, :path =&gt; &quot;./node_modules/react-native/ReactCommon/yoga&quot; è¾“å…¥react-native run-iosæˆ–è€…react-native run-androidæŒ‡ä»¤ï¼Œ å°±ä¼šè‡ªåŠ¨æ‰“å¼€æ¨¡æ‹Ÿå™¨è¿è¡Œé¡¹ç›®(å‰ææ˜¯å®‰è£…äº†ç›¸åº”çš„å¼€å‘ç¯å¢ƒ)ã€‚ ä½†æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„é¡¹ç›®ä»…ä»…æœ‰è¿™äº›ç±»åˆ«çš„æ–‡ä»¶æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦ä¸€äº›å·¥å…·ç±»ï¼Œæ¨¡å‹ç±»ï¼Œèµ„æºç­‰æ–‡ä»¶ã€‚ä¸ºäº†å¾ˆå¥½åœ°åŒºåˆ†å®ƒä»¬ï¼Œä½¿é¡¹ç›®ç»“æ„ä¸€ç›®äº†ç„¶ï¼Œéœ€è¦ç»„ç»‡å¥½é¡¹ç›®æ–‡ä»¶å¤¹ä»¥åŠç±»çš„å‘½åï¼Œä¸‹é¢æ˜¯æˆ‘å°†æ•™ç¨‹é‡Œçš„æ–‡ä»¶å¤¹å‘½åå’Œç»“æ„ç¨åŠ ä¿®æ”¹åçš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œå¯ä¾›å¤§å®¶å‚è€ƒï¼š å¸ƒå±€çº¦æŸé‡‡ç”¨Flexå¸ƒå±€çš„å…ƒç´ ï¼Œè¢«ç§°ä¸ºFlex containerï¼Œå…¶æ‰€æœ‰å­å…ƒç´ è¢«ç§°ä¸ºFlex itemï¼›å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤ä¸ªè½´ï¼Œåˆ†åˆ«æ˜¯ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰,ä¸»è½´å¼€å§‹çš„ä½ç½®å«åšmain startï¼Œç»“æŸçš„ä½ç½®å«main endï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åšcross startï¼Œç»“æŸçš„ä½ç½®å«åšcross endï¼›å•ä¸ªitemå æ®çš„ä¸»è½´ç©ºé—´å«åšmain sizeï¼Œå æ®çš„äº¤å‰è½´æ§ä»¶å«åšcross sizeã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç»„ä»¶åŒ–é©±åŠ¨ä¸‹ï¼Œæœç´¢ç»“æœé¡µä¸­å±•ç¤ºçš„ Cell ä¸ä¹‹å‰çš„åˆ—è¡¨é¡µ Cell å¯ä»¥é‡ç”¨ï¼š æˆ‘ä»¬æŠŠè¯¥ç»„ä»¶å®šåä¸ºï¼šRespositoryCellï¼Œç»“åˆä»£ç æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„å®ç°ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960export default class RepositoryCell extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; isFavorite: this.props.projectModel.isFavorite, favoriteIcon: this.props.projectModel.isFavorite ? require('../../res/images/ic_star.png') : require('../../res/images/ic_unstar_transparent.png'), &#125;; &#125; componentWillReceiveProps(nextProps) &#123; this.setFavoriteState(nextProps.projectModel.isFavorite) &#125; setFavoriteState(isFavorite) &#123; this.props.projectModel.isFavorite = isFavorite; this.setState(&#123; isFavorite: isFavorite, favoriteIcon: isFavorite ? require('../../res/images/ic_star.png') : require('../../res/images/ic_unstar_transparent.png') &#125;) &#125; onPressFavorite() &#123; this.setFavoriteState(!this.state.isFavorite) this.props.onFavorite(this.props.projectModel.item, !this.state.isFavorite) &#125; render() &#123; let item = this.props.projectModel.item? this.props.projectModel.item:this.props.projectModel; let favoriteButton=this.props.projectModel.item? &lt;TouchableOpacity style=&#123;&#123;padding:6&#125;&#125; onPress=&#123;()=&gt;this.onPressFavorite()&#125; underlayColor='transparent'&gt; &lt;Image ref='favoriteIcon' style=&#123;[&#123;width: 22, height: 22,&#125;,this.props.theme.styles.tabBarSelectedIcon]&#125; source=&#123;this.state.favoriteIcon&#125;/&gt; &lt;/TouchableOpacity&gt;:null; return ( &lt;TouchableOpacity onPress=&#123;this.props.onSelect&#125; style=&#123;styles.container&#125; &gt; &lt;View style=&#123;styles.cell_container&#125;&gt; &lt;Text style=&#123;styles.title&#125;&gt;&#123;item.full_name&#125;&lt;/Text&gt; &lt;Text style=&#123;styles.description&#125;&gt;&#123;item.description&#125;&lt;/Text&gt; &lt;View style=&#123;styles.row&#125;&gt; &lt;View style=&#123;styles.row&#125;&gt; &lt;Text&gt;Author:&lt;/Text&gt; &lt;Image style=&#123;&#123;height: 22, width: 22&#125;&#125; source=&#123;&#123;uri: item.owner.avatar_url&#125;&#125; /&gt; &lt;/View&gt; &lt;View style=&#123;&#123;justifyContent: 'space-between', flexDirection: 'row'&#125;&#125;&gt; &lt;Text&gt;Star:&lt;/Text&gt; &lt;Text&gt;&#123;item.stargazers_count&#125;&lt;/Text&gt; &lt;/View&gt; &#123;favoriteButton&#125; &lt;/View&gt; &lt;/View&gt; &lt;/TouchableOpacity&gt; ) &#125;&#125; è¿™é‡Œå£°æ˜äº†RespositoryCellç»„ä»¶ï¼Œå®ƒç»§æ‰¿äºComponentï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶ç±»ï¼Œå³æ˜¯è¯´ï¼Œå£°æ˜ç»„ä»¶çš„æ—¶å€™å¿…é¡»éƒ½è¦ç»§æ‰¿ä¸è¿™ä¸ªç±»ã€‚ é›†ä¸­çœ‹ä¸€ä¸‹è¯¥ç»„ä»¶çš„renderæ–¹æ³•ï¼Œå®ƒè¿”å›çš„æ˜¯è¯¥ç»„ä»¶çš„å®é™…å¸ƒå±€ï¼šåœ¨è¯­æ³•ä¸Šä½¿ç”¨JSXï¼Œç±»ä¼¼äºHTMLçš„æ ‡ç­¾å¼è¯­æ³•ï¼Œå¾ˆæ¸…æ¥šåœ°å°†cellçš„å±‚çº§å±•ç°äº†å‡ºæ¥ï¼š æœ€å¤–å±‚è¢«ä¸€ä¸ªViewç»„ä»¶åŒ…è£¹ç€ï¼Œé‡Œé¢ç¬¬ä¸€å±‚æœ‰ä¸‰ä¸ªå­ç»„ä»¶ï¼šä¸¤ä¸ªTextç»„ä»¶å’Œä¸€ä¸ªä½œä¸ºåº•éƒ¨èƒŒæ™¯çš„Viewç»„ä»¶ã€‚ åº•éƒ¨èƒŒæ™¯çš„Viewç»„ä»¶åˆæœ‰ä¸‰ä¸ªå­ç»„ä»¶ï¼šViewç»„ä»¶ï¼ˆæ˜¾ç¤ºä½œè€…ä¿¡æ¯ï¼‰ï¼ŒViewç»„ä»¶ï¼ˆæ˜¾ç¤ºstarä¿¡æ¯ï¼‰,æ”¶è—æŒ‰é’®ã€‚ ç»“æ„åˆ†è§£å›¾ï¼š ç»„ä»¶å°è£… æˆ‘çš„é¡µé¢ ä¸ªäººä¸­å¿ƒ å¯¹äºâ€œæˆ‘çš„é¡µé¢â€å’Œâ€œä¸ªäººä¸­å¿ƒâ€è¿™ç±»ç»“æ„ç›¸ä¼¼çš„é¡µé¢ï¼Œå»ºè®®è¿›è¡Œç»„ä»¶å°è£…ï¼Œå°è£…åçš„ AboutPage å®ç°ä»£ç ç®€æ´å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768export default class AboutPage extends Component&#123; constructor(props) &#123; super(props); this.aboutCommon=new AboutCommon(props,(dic)=&gt;this.updateState(dic),FLAG_ABOUT.flag_about,config); this.state = &#123; projectModels: [], author:config.author &#125; &#125; componentDidMount() &#123; this.aboutCommon.componentDidMount(); &#125; componentWillUnmount() &#123; this.aboutCommon.componentWillUnmount(); &#125; updateState(dic)&#123; this.setState(dic); &#125; onClick(tab) &#123; let TargetComponent, params = &#123;...this.props,menuType:tab&#125;; switch (tab) &#123; case MORE_MENU.About_Author: TargetComponent = AboutMePage; break; case MORE_MENU.Website: TargetComponent = WebViewPage; params.title='GitHubPopular'; var url='https://reversescale.github.io'; params.url=url; break; case MORE_MENU.Feedback: var url='mailto://reversescale@icloud.com'; Linking.canOpenURL(url).then(supported =&gt; &#123; if (!supported) &#123; console.log('Can\\'t handle url: ' + url); &#125; else &#123; return Linking.openURL(url); &#125; &#125;).catch(err =&gt; console.error('An error occurred', err)); break; case MORE_MENU.Share: break; &#125; if (TargetComponent) &#123; this.props.navigator.push(&#123; component: TargetComponent, params: params, &#125;); &#125; &#125; render() &#123; let content=&lt;View&gt; &#123;this.aboutCommon.renderRepository(this.state.projectModels)&#125; &#123;ViewUtils.getSettingItem(()=&gt;this.onClick(MORE_MENU.Website), require('../../../res/images/ic_computer.png'), MORE_MENU.Website, this.props.theme.styles.tabBarSelectedIcon)&#125; &lt;View style=&#123;GlobalStyles.line&#125;/&gt; &#123;ViewUtils.getSettingItem(()=&gt;this.onClick(MORE_MENU.About_Author), require('../my/img/ic_insert_emoticon.png'), MORE_MENU.About_Author, this.props.theme.styles.tabBarSelectedIcon)&#125; &lt;View style=&#123;GlobalStyles.line&#125;/&gt; &#123;ViewUtils.getSettingItem(()=&gt;this.onClick(MORE_MENU.Feedback), require('../../../res/images/ic_feedback.png'), MORE_MENU.Feedback, this.props.theme.styles.tabBarSelectedIcon)&#125; &lt;/View&gt; return this.aboutCommon.render(content, &#123; 'name': 'GitHub Popular', 'description': 'è¿™æ˜¯ä¸€ä¸ªç”¨æ¥æŸ¥çœ‹GitHubæœ€å—æ¬¢è¿ä¸æœ€çƒ­é¡¹ç›®çš„App,å®ƒåŸºäºReact Nativeæ”¯æŒAndroidå’ŒiOSåŒå¹³å°ã€‚', \"avatar\": \"http://og1yl0w9z.bkt.clouddn.com/18-3-28/61685877.jpg\", \"backgroundImg\": \"http://og1yl0w9z.bkt.clouddn.com/18-3-28/37407402.jpg\", &#125;); &#125;&#125; æœ¬åœ°æŒä¹…åŒ– ä¸»é¢˜é€‰æ‹©ç•Œé¢ åˆ‡æ¢ä¸»é¢˜åç•Œé¢ åœ¨æ¶‰åŠå¦‚ä¸»é¢˜å˜æ›´ç­‰æ“ä½œæ—¶ï¼Œéœ€è¦å°†çŠ¶æ€ä¿¡æ¯ä¿å­˜ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°ç±»ä¼¼äºiOS ä¸­çš„NSUserDefaultï¼Œ AsyncStorage æ˜¯React Nativeä¸­çš„ Key-Value å­˜å‚¨ç³»ç»Ÿï¼Œå¯ä»¥åšæœ¬åœ°æŒä¹…åŒ–ã€‚ é¦–å…ˆçœ‹å®ƒä¸»è¦çš„å‡ ä¸ªæ¥å£ï¼š æ ¹æ®é”®æ¥è·å–å€¼ï¼Œè·å–çš„ç»“æœä¼šæ”¾åœ¨å›è°ƒå‡½æ•°ä¸­ï¼š1static getItem(key: string, callback:(error, result)) æ ¹æ®é”®æ¥è®¾ç½®å€¼ï¼š1static setItem(key: string, value: string, callback:(error)) æ ¹æ®é”®æ¥ç§»é™¤é¡¹ï¼š1static removeItem(key: string, callback:(error)) è·å–æ‰€æœ‰çš„é”®ï¼š1static getAllKeys(callback:(error, keys)) è®¾ç½®å¤šé¡¹ï¼Œå…¶ä¸­ keyValuePairs æ˜¯å­—ç¬¦ä¸²çš„äºŒç»´æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[[â€˜k1â€™, â€˜val1â€™], [â€˜k2â€™, â€˜val2â€™]]ï¼š1static multiSet(keyValuePairs, callback:(errors)) è·å–å¤šé¡¹ï¼Œå…¶ä¸­ keys æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[â€˜k1â€™, â€˜k2â€™]ï¼š1static multiGet(keys, callback:(errors, result)) åˆ é™¤å¤šé¡¹ï¼Œå…¶ä¸­ keys æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯”å¦‚ï¼š[â€˜k1â€™, â€˜k2â€™]ï¼š1static multiRemove(keys, callback:(errors)) æ¸…é™¤æ‰€æœ‰çš„é¡¹ç›®ï¼š1static clear(callback:(error)) ç½‘ç»œè¯·æ±‚å°è£…åœ¨React Nativeä¸­ï¼Œç»å¸¸ä½¿ç”¨Fetchå‡½æ•°æ¥å®ç°ç½‘ç»œè¯·æ±‚ï¼Œå®ƒæ”¯æŒGETå’ŒPOSTè¯·æ±‚å¹¶è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ªæ­£ç¡®çš„ç»“æœå’Œä¸€ä¸ªé”™è¯¯çš„ç»“æœã€‚ æ¥çœ‹ä¸€ä¸‹ç”¨Fetchå‘èµ·çš„POSTè¯·æ±‚å°è£…ï¼š 12345678910111213141516171819static post(url,data)&#123; return new Promise((resolve,reject)=&gt;&#123; fetch(url,&#123; method:'POST', header:&#123; 'Accept':'application/json', 'Content-Type':'application/json' &#125;, body:JSON.stringify(data) &#125;) .then(response=&gt;response.json()) .then(result=&gt;&#123; resolve(result); &#125;) .catch(error=&gt;&#123; reject(error); &#125;) &#125;) &#125; ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´çœ‹åˆ°ï¼šFetchå‡½æ•°ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚urlï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…æ‹¬æ–¹æ³•ï¼Œè¯·æ±‚å¤´ï¼Œè¯·æ±‚ä½“ç­‰ä¿¡æ¯ã€‚ éšåçš„thenå’Œcatchåˆ†åˆ«æ•æ‰äº†fetchå‡½æ•°çš„è¿”å›å€¼ï¼šä¸€ä¸ªPromiseå¯¹è±¡çš„æ­£ç¡®ç»“æœå’Œé”™è¯¯ç»“æœã€‚æ³¨æ„ï¼Œè¿™é‡Œé¢æœ‰ä¸¤ä¸ªthenï¼Œå…¶ä¸­ç¬¬äºŒä¸ªthenæŠŠç¬¬ä¸€ä¸ªthençš„ç»“æœæ‹¿äº†è¿‡æ¥ã€‚è€Œç¬¬ä¸€ä¸ªthenåšçš„äº‹æƒ…æ˜¯æŠŠç½‘ç»œè¯·æ±‚çš„ç»“æœè½¬åŒ–ä¸ºJSONå¯¹è±¡ã€‚ é‚£ä¹ˆä»€ä¹ˆæ˜¯Promiseå¯¹è±¡å‘¢ï¼Ÿ Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ŒPromiseå¯¹è±¡å¯ä»¥è·å–æŸä¸ªå¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚å®ƒé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ å®ƒåˆ†ä¸ºä¸‰ç§çŠ¶æ€ï¼š Pendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€Resolvedï¼ˆå·²æˆåŠŸï¼‰å’ŒRejectedï¼ˆå·²å¤±è´¥ï¼‰ å®ƒçš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectï¼š resolveå‡½æ•°çš„ä½œç”¨ï¼šå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜æˆâ€œæˆåŠŸâ€(å³ä»Pendingå˜ä¸ºResolved)ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼› rejectå‡½æ•°çš„ä½œç”¨ï¼šå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜æˆâ€œæˆåŠŸâ€(å³ä»Pendingå˜ä¸ºRejected)ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚ GET è¯·æ±‚å°è£…ï¼š123456789101112static get(url)&#123; return new Promise((resolve,reject)=&gt;&#123; fetch(url) .then(response=&gt;response.json()) .then(result=&gt;&#123; resolve(result); &#125;) .catch(error=&gt;&#123; reject(error); &#125;) &#125;) &#125; å› ä¸ºåªæ˜¯GETè¯·æ±‚ï¼Œæ‰€ä»¥ä¸éœ€è¦é…ç½®è¯·æ±‚ä½“ï¼Œè€Œä¸”å› ä¸ºè¿™ä¸ªfetchå‡½æ•°è¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨.thenå’Œ.catchæ¥æ•æ‰æ­£ç¡®å’Œé”™è¯¯çš„ç»“æœã€‚ åŠŸèƒ½è°ƒè¯•æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æ¥è°ƒè¯•React Nativeé¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡æ‰“æ–­ç‚¹çš„æ–¹å¼æ¥çœ‹æ•°æ®ä¿¡æ¯ä»¥åŠæ–¹æ³•çš„è°ƒç”¨ï¼š é¦–å…ˆåœ¨iOSæ¨¡æ‹Ÿå™¨ä¸­ç‚¹å‡»command + Dï¼Œç„¶åå†å¼¹å‡ºèœå•é‡Œç‚¹å‡»Debug JS Remotelyã€‚éšåå°±æ‰“å¼€äº†æµè§ˆå™¨è¿›å…¥äº†è°ƒè¯•ã€‚ æµè§ˆå™¨ä¸€èˆ¬ä¼šå±•ç¤ºä¸‹é¢çš„é¡µé¢ï¼Œç„¶åç‚¹å‡»command + option + Jè¿›å…¥çœŸç”Ÿçš„è°ƒè¯•ç•Œé¢ã€‚ åŒå¹³å°é€‚é…å› ä¸ºReact Nativeè®²æ±‚çš„æ˜¯ä¸€ä»½ä»£ç è·‘åœ¨ä¸¤ä¸ªå¹³å°ä¸Šï¼Œè€Œå®¢è§‚ä¸Šè¿™ä¸¤ä¸ªå¹³å°åˆæœ‰ä¸€äº›ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œæ‰€ä»¥å°±éœ€è¦åœ¨åˆ«è¦çš„æ—¶å€™åšä¸€ä¸‹ä¸¤ä¸ªå¹³å°çš„é€‚é…ã€‚ ä¾‹å¦‚å¯¼èˆªæ ï¼šåœ¨iOSè®¾å¤‡ä¸­æ˜¯å­˜åœ¨å¯¼èˆªæ çš„ï¼Œè€Œå®‰å“è®¾å¤‡ä¸Šæ˜¯æ²¡æœ‰çš„ã€‚æ‰€ä»¥åœ¨å®šåˆ¶å¯¼èˆªæ çš„æ—¶å€™ï¼Œåœ¨ä¸åŒå¹³å°ä¸‹ç»™å¯¼èˆªæ è®¾ç½®ä¸åŒçš„é«˜åº¦ï¼š 12345678910const NAV_BAR_HEIGHT_IOS = 54;const NAV_BAR_HEIGHT_ANDROID = 50;// css navBar: &#123; flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', height: Platform.OS === 'ios' ? NAV_BAR_HEIGHT_IOS : NAV_BAR_HEIGHT_ANDROID, &#125;, ä¸Šé¢çš„Platformæ˜¯React Nativeå†…ç½®çš„ç”¨äºåŒºåˆ†å¹³å°çš„åº“ï¼Œå¯ä»¥åœ¨å¼•å…¥åç›´æ¥ä½¿ç”¨ã€‚ å»ºè®®åœ¨è°ƒè¯•ç¨‹åºçš„æ—¶å€™ï¼ŒåŒæ—¶æ‰“å¼€iOSå’ŒAndroidçš„æ¨¡æ‹Ÿå™¨è¿›è¡Œè°ƒè¯•ï¼Œå› ä¸ºæœ‰äº›åœ°æ–¹å¯èƒ½åœ¨æŸä¸ªå¹³å°ä¸Šæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å¦ä¸€ä¸ªå¹³å°ä¸Šæœ‰é—®é¢˜ï¼Œè¿™å°±éœ€è¦ä½¿ç”¨Platformæ¥åŒºåˆ†å¹³å°ã€‚ å¼€æºç»„ä»¶åº“çš„ä½¿ç”¨ReactNative çš„ç»„ä»¶ä¸åŸç”Ÿçš„ç»„ä»¶æœ‰è®¸å¤šå…±åŒä¹‹å¤„ï¼Œå¦‚ä¸‹æ‹‰åˆ·æ–°ï¼ŒåŒæ ·çš„ Github ä¸­å¼€æºç»„ä»¶å·²ç»ç›¸å½“å®Œå–„ã€‚ å¼€æºç»„ä»¶åº“æ–¹æ³•å¦‚ä¸‹ï¼Œå®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š1npm install react-native-tab-navigator --save å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼š1npm install --save react-native-tab-navigator@0.4.0 react-native é›†æˆç»„ä»¶ç»‘å®š(ReactNative 0.27ä»¥åï¼Œè‡ªé›†æˆRNPM)ï¼š1react-native link react-native-splash-screen å¸¸ç”¨å¼€æºåº“ï¼š12345678npm install --save react-native-tab-navigator@0.4.0npm install --save react-native-scrollable-tab-view@0.7.0npm install --save react-native-check-box@1.0.4npm install --react-native-easy-toast@1.0.9npm install --save GitHubTrending@2.0.0npm install --save react-native-htmlview@0.5.0npm install --save react-native-popover@0.5.0npm install --react-native-splash-screen@2.0.0 ä¸‹å›¾ä¸ºä½¿ç”¨ react-native-splash-screen åçš„æ•ˆæœæ¼”ç¤ºï¼š çƒ­æ›´æ–°CodePush æ˜¯å¾®è½¯æä¾›çš„ä¸€å¥—ç”¨äºçƒ­æ›´æ–° React Native å’Œ Cordova åº”ç”¨çš„æœåŠ¡ã€‚ CodePush æ˜¯æä¾›ç»™ React Native å’Œ Cordova å¼€å‘è€…ç›´æ¥éƒ¨ç½²ç§»åŠ¨åº”ç”¨æ›´æ–°ç»™ç”¨æˆ·è®¾å¤‡çš„äº‘æœåŠ¡ã€‚CodePush ä½œä¸ºä¸€ä¸ªä¸­å¤®ä»“åº“ï¼Œå¼€å‘è€…å¯ä»¥æ¨é€æ›´æ–° (JS, HTML, CSS and images)ï¼Œåº”ç”¨å¯ä»¥ä»å®¢æˆ·ç«¯ SDK é‡Œé¢æŸ¥è¯¢æ›´æ–°ã€‚ Code-Push æ¨åŒ…å‘½ä»¤ï¼š1code-push release-react &lt;appName&gt; &lt;platform&gt; [options] ç¤ºä¾‹ï¼š1code-push release-react RNAPPGithub ios --t 1.0.0 --dev false --d Staging --des &quot;1.çƒ­æ›´æ–°æˆ‘çš„é¡µé¢èƒŒæ™¯è‰²&quot; --m true 1code-push release-react RNAPPGithub ios --t 1.0.1 --dev false --d Staging --des &quot;1.çƒ­æ›´æ–°ç›¸å…³è®¾ç½®&quot; --m true Code-Push çº¿ä¸ŠæŸ¥çœ‹æ›´æ–°ï¼š1code-push deployment ls RNAPPGithub Code-Push æŸ¥çœ‹é¡¹ç›®Keyï¼š1code-push deployment ls RNAPPGithub -k Code-Push iOSæ›´æ–°æ‰“åŒ…æ–¹æ³•ï¼š1react-native bundle --platform ios --entry-file index.ios.js --bundle-output release_ios/main.jsbundle --assets-dest release_ios/ --dev fasle æ€»ç»“ä¹‹å‰ä¹Ÿæœ‰é›¶é›¶æ•£æ•£çš„è°ƒç ”è¿™é—¨æŠ€æœ¯ï¼Œä½†æ˜¯ç»è¿‡ç³»ç»Ÿçš„ 15 ä¸ªä¸‹åˆçš„åšæŒå­¦ä¹ ï¼Œæ·±æ„Ÿè·¨å¹³å°æŠ€æœ¯çš„ç‹¬åˆ°ä¹‹å¤„ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸åŸç”Ÿäº¤äº’çš„ç¼–å†™ä¸Šç®€ç›´è®©äººæ¬²ç”Ÿæ¬²æ­»ï¼Œè¿˜å¥½åœ¨ Github ä¸Šå·²ç»æœ‰å„è·¯å¤§ç¥å¼€æºçš„å„ç§æ–¹ä¾¿å¼€å‘çš„ç»„ä»¶åº“å¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚ åˆ†äº«é“¾æ¥ã€ŠReact Native å¼€å‘å¸¸ç”¨å‘½ä»¤è¡Œï¼ˆæŒç»­æ›´æ–°ï¼‰ã€‹(https://juejin.im/post/5abc54c86fb9a028da7c998c) ã€ŠReactNative å¼€å‘å¸¸ç”¨çš„ä¸‰æ–¹æ¨¡å—ã€‹(https://www.jianshu.com/p/53ff78168acc) ã€Šä½¿ç”¨VS Codeè°ƒè¯•React-Nativeç¨‹åºã€‹ï¼ˆhttps://jingyan.baidu.com/article/ad310e80fb13fc1849f49ed1.htmlï¼‰ å‚è€ƒèµ„æ–™ React Nativeä¸­æ–‡ç½‘ è´¾é¹è¾‰çš„æŠ€æœ¯åšå®¢ ä»ä¸€ä¸ªå®æˆ˜é¡¹ç›®æ¥çœ‹ä¸€ä¸‹React Nativeå¼€å‘çš„å‡ ä¸ªå…³é”®æŠ€æœ¯ç‚¹ Marno:ç»™æ‰€æœ‰å¼€å‘è€…çš„React Nativeè¯¦ç»†å…¥é—¨æŒ‡å— å¤§æ¼ :ä¸€ä¸ªå®Œæ•´çš„FlexboxæŒ‡å— é˜®ä¸€å³°:Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡ å…«æ®µä»£ç å½»åº•æŒæ¡ Promise é˜®ä¸€å³°ï¼šPromiseå¯¹è±¡ asce1885:React Native é«˜è´¨é‡å­¦ä¹ èµ„æ–™æ±‡æ€» ä¸–é”‹æ—¥ä¸Š:ReactNative å­¦ä¹ èµ„æºå¤§æ±‡é›†","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"iOS RAC çš„ä½¿ç”¨æ€»ç»“","slug":"Reactive Cocoa","date":"2018-03-16T14:56:27.000Z","updated":"2018-11-15T14:12:52.976Z","comments":true,"path":"2018/03/16/Reactive Cocoa/","link":"","permalink":"https://reversescale.github.io/2018/03/16/Reactive Cocoa/","excerpt":"Reactive Cocoa(ç®€ç§°RAC),æ˜¯ GitHub ä¸Šå¼€æºçš„ä¸€ä¸ªåº”ç”¨äº iOS å’Œ OS X å¼€å‘çš„ä¸€ä¸ªæ–°æ¡†æ¶ï¼ŒRACå…·æœ‰å‡½æ•°å¼ç¼–ç¨‹å’Œå“åº”è€…ç¼–ç¨‹çš„ç‰¹æ€§~","text":"Reactive Cocoa(ç®€ç§°RAC),æ˜¯ GitHub ä¸Šå¼€æºçš„ä¸€ä¸ªåº”ç”¨äº iOS å’Œ OS X å¼€å‘çš„ä¸€ä¸ªæ–°æ¡†æ¶ï¼ŒRACå…·æœ‰å‡½æ•°å¼ç¼–ç¨‹å’Œå“åº”è€…ç¼–ç¨‹çš„ç‰¹æ€§~ ReactiveCocoaè§£å†³çš„é—®é¢˜: 1.ä¼ ç»ŸiOSå¼€å‘è¿‡ç¨‹ä¸­,çŠ¶æ€ä»¥åŠçŠ¶æ€ä¹‹é—´ä¾èµ–è¿‡å¤šçš„é—®é¢˜ 2.ä¼ ç»ŸMVCæ¶æ„çš„é—®é¢˜:Controlleræ¯”è¾ƒå¤æ‚,å¯æµ‹è¯•æ€§å·® 3.æä¾›ç»Ÿä¸€çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ é”®å€¼è§‚å¯Ÿâ€“ç›‘å¬ TF çš„å€¼å‘ç”Ÿå˜åŒ–123456789101112- (void)demo1&#123; @weakify(self); [self.tF.rac_textSignal subscribeNext:^(NSString *value) &#123; @strongify(self); self.value = value; &#125;]; //å½“self.valueçš„å€¼å˜åŒ–æ—¶è°ƒç”¨Blockï¼Œè¿™æ˜¯ç”¨KVOçš„æœºåˆ¶ï¼ŒRACå°è£…äº†KVO [RACObserve(self, value) subscribeNext:^(NSString *value) &#123; NSLog(@&quot;%@&quot;,value); &#125;];&#125; map çš„ä½¿ç”¨1234567891011121314151617- (void)demo2&#123; //åˆ›å»ºä¸€ä¸ªä¿¡å· RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; //è¿™ä¸ªä¿¡å·é‡Œé¢æœ‰ä¸€ä¸ªNextäº‹ä»¶çš„ç»ç’ƒçƒå’Œä¸€ä¸ªcompleteäº‹ä»¶çš„ç»ç’ƒçƒ [subscriber sendNext:@&quot;å”±æ­Œ&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //å¯¹ä¿¡å·è¿›è¡Œæ”¹è¿›,å½“ä¿¡å·é‡Œé¢æµçš„æ˜¯å”±æ­Œ.å°±æ”¹è¿›ä¸º&apos;è·³èˆ&apos;è¿”è¿˜ç»™self.value RAC(self, tF.text) = [signalA map:^id(NSString *value) &#123; if ([value isEqualToString:@&quot;å”±æ­Œ&quot;]) &#123; return @&quot;è·³èˆ&quot;; &#125; return @&quot;&quot;; &#125;]; &#125; filter ä½¿ç”¨,ä½ å‘è¥¿ï¼Œä»–å°±å‘ä¸œï¼Œä»–å‘å·¦ï¼Œä½ å°±å‘å³1234567891011121314151617181920212223242526272829303132333435363738394041424344- (void)demo3&#123; //åˆ›å»ºä¸¤ä¸ªé€šé“,ä¸€ä¸ªä»Aæµå‡ºçš„é€šé“A,å’Œä¸€ä¸ªä»Bæµå‡ºçš„é€šé“B RACChannelTerminal *channelA = RACChannelTo(self, value); RACChannelTerminal *channelB = RACChannelTo(self, value2); //æ”¹é€ é€šé“A,ä½¿é€šè¿‡é€šé“Açš„å€¼,å¦‚æœç­‰äº&apos;è¥¿&apos;,å°±æ”¹ä¸º&apos;ä¸œ&apos; [[channelA map:^id(NSString *value) &#123; if ([value isEqualToString:@&quot;è¥¿&quot;]) &#123; NSLog(@&quot;ä¸œ&quot;); return @&quot;ä¸œ&quot;; &#125; NSLog(@&quot;====== %@&quot;,value); return value; &#125;] subscribe:channelB];//é€šé“Aæµå‘B //æ”¹é€ é€šé“B,ä½¿é€šè¿‡é€šé“Bçš„å€¼,å¦‚æœç­‰äº&apos;å·¦&apos;,å°±æ”¹ä¸º&apos;å³&apos;ä¼ å‡ºå» [[channelB map:^id(id value) &#123; if ([value isEqualToString:@&quot;å·¦&quot;]) &#123; NSLog(@&quot;å³&quot;); return @&quot;å³&quot;; &#125; NSLog(@&quot;====== %@&quot;,value); return value; &#125;] subscribe:channelA];//é€šé“Bæµå‘é€šé“A //KVOç›‘å¬valueAçš„å€¼çš„å˜åŒ–,è¿‡æ»¤valueAçš„å€¼,è¿”å›Yesè¡¨ç¤ºé€šè¿‡ //åªæœ‰valueæœ‰å€¼,æ‰å¯é€šè¿‡ [[RACObserve(self, value) filter:^BOOL(id value) &#123; return value ? YES : NO; &#125;] subscribeNext:^(id x) &#123; NSLog(@&quot;ä½ å‘%@&quot;,x); &#125;]; //KVOç›‘å¬value2çš„å˜åŒ– [[RACObserve(self, value2) filter:^BOOL(id value) &#123; return value ? YES: NO; &#125;] subscribeNext:^(id x) &#123; NSLog(@&quot;ä»–å‘%@&quot;,x); &#125;]; //ä¸‹é¢ä½¿valueçš„å€¼å’Œvalue2çš„å€¼å‘ç”Ÿæ”¹å˜ self.value = @&quot;è¥¿&quot;; self.value2 = @&quot;å·¦&quot;; &#125; ä»£ç†1)ä»£ç†çš„ç¬¬ä¸€ç§å†™æ³• .mæ–‡ä»¶123- (void)demo4&#123; [self.delegate makeAnApp:@&quot;12345ä¸Šå±±æ‰“è€è™&quot; String:@&quot;è€è™ä¸åœ¨å®¶,æ€ä¹ˆåŠ&quot;];&#125; .hæ–‡ä»¶12345- (void)makeAnApp:(NSString *)string String:(NSString *)string;@end@interface Base5Controller : UIViewController@property (nonatomic, assign)id&lt;ProgrammerDelegate&gt; delegate; ç¬¬ä¸€ä¸ªæ§åˆ¶å™¨çš„.h123456789101112131415161718192021222324Base5Controller *base = [[Base5Controller alloc] init]; // base.delegate = self; [self demo4]; // è¿™é‡Œæ˜¯ä¸ªå‘,å¿…é¡»å°†ä»£ç†æœ€åè®¾ç½®,å¦åˆ™ä¿¡å·æ˜¯æ— æ³•è®¢é˜…åˆ°çš„ // é›·çº¯å³°å¤§å¤§æ˜¯è¿™æ ·å­è§£é‡Šçš„:åœ¨è®¾ç½®ä»£ç†çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šç¼“å­˜è¿™ä¸ªä»£ç†å¯¹è±¡å®ç°äº†å“ªäº›ä»£ç æ–¹æ³• // å¦‚æœå°†ä»£ç†æ”¾åœ¨è®¢é˜…ä¿¡å·å‰è®¾ç½®,é‚£ä¹ˆå½“æ§åˆ¶å™¨æˆä¸ºä»£ç†æ—¶æ˜¯æ— æ³•ç¼“å­˜è¿™ä¸ªä»£ç†å¯¹è±¡å®ç°äº†å“ªäº›ä»£ç æ–¹æ³•çš„ base.delegate = self; [self.navigationController pushViewController:base animated:YES]; &#125; else &#123; [self.navigationController pushViewController:[cl new] animated:YES]; &#125;&#125;#pragma mark---demo4//ä½¿ç”¨RACä»£æ›¿ä»£ç†æ—¶,rac_signalForSelector: fromProtocol:è¿™ä¸ªä»£æ›¿ä»£ç†çš„æ–¹æ³•ä½¿ç”¨æ—¶,åˆ‡è®°è¦å°†selfè®¾ä¸ºä»£ç†è¿™å¥è¯æ”¾åœ¨è®¢é˜…ä»£ç†ä¿¡å·çš„åé¢å†™,å¦åˆ™ä¼šæ— æ³•æ‰§è¡Œ- (void)demo4&#123; //ä¸ºselfæ·»åŠ ä¸€ä¸ªä¿¡å·,è¡¨ç¤ºä»£ç†ProgrammerDelegateçš„makeAnApp; //RACTuple ç›¸å½“äºswiftä¸­çš„å…ƒç¥– [[self rac_signalForSelector:@selector(makeAnApp:String:) fromProtocol:@protocol(ProgrammerDelegate)] subscribeNext:^(RACTuple *x) &#123; //è¿™é‡Œå¯ä»¥ç«‹å³ä¸ºmakeAnAppçš„æ–¹æ³•è¦æ‰§è¡Œçš„ä»£ç  NSLog(@&quot;%@ &quot;,x.first); NSLog(@&quot;%@&quot;,x.second); &#125;];&#125; 2)æ–¹æ³•2 ä½¿ç”¨RACSubjectæ›¿ä»£ä»£ç†123456789101112131415161718192021/*** RACSubject:ä¿¡å·æä¾›è€…,è‡ªå·±å¯ä»¥å……å½“ä¿¡å·,åˆèƒ½å‘é€ä¿¡å·åˆ›å»ºæ–¹æ³•:1.åˆ›å»ºRACSubject2.è®¢é˜…ä¿¡å·3.å‘é€ä¿¡å·å·¥ä½œæµç¨‹:1.è®¢é˜…ä¿¡å·,å†…éƒ¨ä¿å­˜äº†è®¢é˜…è€…,å’Œè®¢é˜…è€…ç›¸åº”block2.å½“å‘é€ä¿¡å·çš„,éå†è®¢é˜…è€…,è°ƒç”¨è®¢é˜…è€…çš„nextBolckæ³¨:å¦‚æœè®¢é˜…ä¿¡å·,å¿…é¡»åœ¨å‘é€ä¿¡å·ä¹‹å‰è®¢é˜…ä¿¡å·,ä¸ç„¶æ”¶ä¸åˆ°ä¿¡å·,æœ‰åˆ©ç”¨åŒºåˆ«RACReplaySubject*/-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; RacSubjectController *racsub = [[RacSubjectController alloc] init]; racsub.subject = [RACSubject subject]; [racsub.subject subscribeNext:^(id x) &#123; NSLog(@&quot;è¢«é€šçŸ¥äº†%@&quot;,x); &#125;]; [self.navigationController pushViewController:racsub animated:YES];&#125; åœ¨RacSubjectController.hé‡Œé¢å£°æ˜å±æ€§1@property (nonatomic, strong) RACSubject *subject; .mé‡Œé¢è¿›è¡Œæ•°æ®çš„ä¼ é€’12345-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; if (self.subject) &#123; [self.subject sendNext:@1]; &#125;&#125; å¹¿æ’­12345678910111213141516//å‘é€é€šçŸ¥- (void)demo5&#123; NSNotificationCenter *center = [NSNotificationCenter defaultCenter]; //å‘é€å¹¿æ’­é€šçŸ¥ [center postNotificationName:@&quot;å¦‡å¥³ä¹‹å‹&quot; object:nil userInfo:@&#123;@&quot;æŠ€å·§&quot;:@&quot;ç”¨å¿ƒå¬&quot;&#125;];&#125;//æ¥æ”¶é€šçŸ¥NSNotificationCenter *center = [NSNotificationCenter defaultCenter];//RACçš„é€šçŸ¥ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç§»é™¤//æ³¨å†Œå¹¿æ’­é€šçŸ¥RACSignal *siganl = [center rac_addObserverForName:@&quot;å¦‡å¥³ä¹‹å‹&quot; object:nil];//è®¾ç½®æ¥æ”¶é€šçŸ¥çš„å›è°ƒå¤„ç†[siganl subscribeNext:^(NSNotification *x) &#123; NSLog(@&quot;æŠ€å·§: %@&quot;,x.userInfo[@&quot;æŠ€å·§&quot;]);&#125;]; ä¸¤ä¸ªä¿¡å·ä¸²è”,ä¸¤ä¸ªç®¡ä¸²è”,ä¸€ä¸ªç®¡å¤„ç†å®Œè‡ªå·±çš„ä¸œè¥¿,ä¸‹ä¸€ä¸ªç®¡æ‰å¼€å§‹å¤„ç†è‡ªå·±çš„ä¸œè¥¿12345678910111213141516171819202122- (void)demo6&#123; //åˆ›å»ºä¸€ä¸ªä¿¡å·ç®¡A RACSignal *siganlA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;åƒé¥­&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆ›å»ºä¸€ä¸ªä¿¡å·ç®¡B RACSignal *siganlB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;åƒçš„é¥±é¥±çš„,æ‰å¯ä»¥ç¡è§‰çš„&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //ä¸²è”ç®¡Aå’Œç®¡B RACSignal *concatSiganl = [siganlA concat:siganlB]; //ä¸²è”åçš„æ¥æ”¶ç«¯å¤„ç† ,ä¸¤ä¸ªäº‹ä»¶,èµ°ä¸¤æ¬¡,ç¬¬ä¸€ä¸ªæ‰“å°siggnalAçš„ç»“æœ,ç¬¬äºŒæ¬¡æ‰“å°siganlBçš„ç»“æœ [concatSiganl subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; å¹¶è”,åªè¦æœ‰ä¸€ä¸ªç®¡æœ‰ä¸œè¥¿,å°±å¯ä»¥æ‰“å°123456789101112131415161718192021- (void)demo7&#123; //åˆ›å»ºä¿¡å·A RACSignal *siganlA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;çº¸å‚æ±¡æ°´&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆ›å»ºä¿¡å·B RACSignal *siganlB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;ç”µé•€å‚æ±¡æ°´&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //å¹¶è”ä¸¤ä¸ªä¿¡å·,æ ¹ä¸Šé¢ä¸€æ ·,åˆ†ä¸¤æ¬¡æ‰“å° RACSignal *mergeSiganl = [RACSignal merge:@[siganlA,siganlB]]; [mergeSiganl subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; ç»„åˆ,åªæœ‰ä¸¤ä¸ªä¿¡å·éƒ½æœ‰å€¼,æ‰å¯ä»¥ç»„åˆ1234567891011121314151617181920- (void)demo8&#123; //å®šä¹‰2ä¸ªè‡ªå®šä¹‰ä¿¡å· RACSubject *letters = [RACSubject subject]; RACSubject *numbers = [RACSubject subject]; //ç»„åˆä¿¡å· [[RACSignal combineLatest:@[letters,numbers] reduce:^(NSString *letter, NSString *number)&#123; return [letter stringByAppendingString:number]; &#125;] subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;]; //è‡ªå·±æ§åˆ¶å‘ç”Ÿä¿¡å·å€¼ [letters sendNext:@&quot;A&quot;]; [letters sendNext:@&quot;B&quot;]; [numbers sendNext:@&quot;1&quot;]; //æ‰“å°B1 [letters sendNext:@&quot;C&quot;];//æ‰“å°C1 [numbers sendNext:@&quot;2&quot;];//æ‰“å°C2&#125; åˆæµå‹ç¼©12345678910111213141516171819202122- (void)demo9&#123; //åˆ›å»ºä¿¡å·A RACSignal *siganlA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;çº¢&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆ›å»ºä¿¡å·B RACSignal *siganlB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;ç™½&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆæµåå¤„ç†çš„æ˜¯å‹ç¼©åŒ…,éœ€è¦è§£å‹åæ‰èƒ½å–åˆ°é‡Œé¢çš„å€¼ [[siganlA zipWith:siganlB] subscribeNext:^(id x) &#123; //è§£å‹ç¼© RACTupleUnpack(NSString *stringA, NSString *stringB) = x; NSLog(@&quot;%@ %@&quot;,stringA, stringB); &#125;];&#125; æ˜ å°„,æˆ‘å¯ä»¥ç‚¹çŸ³æˆé‡‘12345678910111213141516171819- (void)demo10&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:nil]; [subscriber sendCompleted]; return nil; &#125;]; //å¯¹ä¿¡å·è¿›è¡Œæ”¹é€ ,æ”¹&quot;çŸ³&quot;æˆ&quot;é‡‘&quot; siganl = [siganl map:^id(NSString *value) &#123; if ([value isEqualToString:@&quot;çŸ³&quot;]) &#123; return @&quot;é‡‘&quot;; &#125; return value; &#125;]; //æ‰“å°,ä¸è®ºä¿¡å·å‘é€çš„æ˜¯ä»€ä¹ˆ,è¿™ä¸€æ­¥éƒ½ä¼šèµ°çš„ [siganl subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; è¿‡æ»¤,æœªæ»¡18å²,ç¦æ­¢å…¥å†…12345678910111213141516171819- (void)demo11&#123; RACSignal *singal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@(15)]; [subscriber sendNext:@(17)]; [subscriber sendNext:@(21)]; [subscriber sendNext:@(14)]; [subscriber sendNext:@(30)]; [subscriber sendCompleted]; return nil; &#125;]; //è¿‡æ»¤ä¿¡å·,æ‰“å° [[singal filter:^BOOL(NSNumber *value) &#123; //å¤§äº18å²çš„,æ‰å¯ä»¥é€šè¿‡ return value.integerValue &gt;= 18;//returnä¸ºyeså¯ä»¥é€šè¿‡ &#125;] subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; ç§©åº(flattenMap æ–¹æ³•ä¹Ÿå¯ä»¥æ¢æˆ then æ–¹æ³•,æ•ˆæœä¸€æ ·)123456789101112131415161718192021222324252627282930313233-(void)demo12&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@&quot;æ‰“è›‹æ¶²&quot;); [subscriber sendNext:@&quot;è›‹æ¶²&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //å¯¹ä¿¡å·è¿›è¡Œç§©åºç§©åºçš„ç¬¬ä¸€æ­¥ siganl = [siganl flattenMap:^RACStream *(NSString *value) &#123; //å¤„ç†ä¸Šä¸€æ­¥çš„RACSiganlçš„ä¿¡å·value.è¿™é‡Œçš„value=@&quot;è›‹æ¶²&quot; NSLog(@&quot;æŠŠ%@å€’è¿›é”…é‡Œé¢ç…&quot;,value); return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;ç…è›‹&quot;]; [subscriber sendCompleted]; return nil; &#125;]; &#125;]; //å¯¹ä¿¡å·è¿›è¡Œç¬¬äºŒæ­¥å¤„ç† siganl = [siganl flattenMap:^RACStream *(id value) &#123; NSLog(@&quot;æŠŠ%@è£…è½½ç›˜é‡Œ&quot;,value); return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;ä¸Šèœ&quot;]; [subscriber sendCompleted]; return nil; &#125;]; &#125;]; //æœ€åæ‰“å° æœ€åå¸¦æœ‰===ä¸Šèœ [siganl subscribeNext:^(id x) &#123; NSLog(@&quot;====%@&quot;,x); &#125;];&#125; å‘½ä»¤12345678910111213-(void)demo13&#123; RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123; //æ‰“å°ï¼šä»Šå¤©æˆ‘æŠ•é™äº† //å‘½ä»¤æ‰§è¡Œä»£ç† NSLog(@&quot;%@æˆ‘æŠ•é™äº†&quot;,input); //è¿”å›ä¸€ä¸ªRACSignalä¿¡å· return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; return nil; &#125;]; &#125;]; //æ‰§è¡Œå‘½ä»¤ [command execute:@&quot;ä»Šå¤©&quot;];&#125; å»¶è¿Ÿ12345678910111213- (void)demo14&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@&quot;ç­‰ç­‰æˆ‘,æˆ‘è¿˜æœ‰10så°±åˆ°äº†&quot;); [subscriber sendNext:@&quot;åŒ—æ&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //å»¶è¿Ÿ10sæ¥å—nextçš„ç»ç’ƒçƒ [[siganl delay:10] subscribeNext:^(id x) &#123; NSLog(@&quot;æˆ‘åˆ°äº†%@&quot;,x); &#125;];&#125; é‡æ”¾123456789101112131415161718- (void)demo15&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@&quot;ç”µå½±&quot;); [subscriber sendNext:@&quot;ç”µå½±&quot;]; [subscriber sendCompleted]; return nil; &#125;]; //åˆ›å»ºè¯¥æ™®é€šä¿¡å·çš„é‡å¤ä¿¡å· RACSignal *replaySiganl = [siganl replay]; //é‡å¤æ¥å—ä¿¡å· [replaySiganl subscribeNext:^(NSString *x) &#123; NSLog(@&quot;å°ç±³%@&quot;,x); &#125;]; [replaySiganl subscribeNext:^(NSString *x) &#123; NSLog(@&quot;å°çº¢%@&quot;,x); &#125;];&#125; å®šæ—¶â€”æ¯éš” 8 å°æ—¶æœç”¨ä¸€æ¬¡è¯12345678- (void)demo16&#123; //åˆ›å»ºå®šæ—¶å™¨ä¿¡å·.å®šæ—¶8å°æ—¶ RACSignal *siganl = [RACSignal interval:60 * 60 * 8 onScheduler:[RACScheduler mainThreadScheduler]]; //å®šæ—¶å™¨æ‰§è¡Œä»£ç  [siganl subscribeNext:^(id x) &#123; NSLog(@&quot;åƒè¯&quot;); &#125;];&#125; è¶…æ—¶12345678910111213141516171819202122- (void)demo17&#123; RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@&quot;æˆ‘å¿«åˆ°äº†&quot;); RACSignal *sendSiganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:nil]; [subscriber sendCompleted]; return nil; &#125;]; //å‘ç”Ÿä¿¡å·è¦1ä¸ªå°æ—¶10åˆ†é’Ÿæ‰åˆ° [[sendSiganl delay:60 * 70] subscribeNext:^(id x) &#123; //è¿™é‡Œæ‰å‘é€nextç»ç’ƒçƒåˆ°siganl [subscriber sendNext:@&quot;æˆ‘åˆ°äº†&quot;]; [subscriber sendCompleted]; &#125;]; return nil; &#125;]; [[siganl timeout:60 * 60 onScheduler:[RACScheduler mainThreadScheduler]] subscribeNext:^(id x) &#123; NSLog(@&quot;ç­‰äº†ä½ ä¸€ä¸ªå°æ—¶,ä½ ä¸€ç›´æ²¡æ¥,æˆ‘èµ°äº†&quot;); &#125;];&#125; é‡è¯•12345678910111213141516171819202122- (void)demo18&#123; __block int failedCount = 0; //åˆ›å»ºä¿¡å· RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; if (failedCount &lt; 100) &#123; failedCount ++; NSLog(@&quot;æˆ‘å¤±è´¥äº†&quot;); [subscriber sendError:nil]; &#125;else&#123; NSLog(@&quot;ç»å†äº†æ•°ç™¾æ¬¡å,æˆ‘æˆåŠŸäº†&quot;); [subscriber sendNext:nil]; &#125; return nil; &#125;]; //é‡è¯• RACSignal *retrySiganl = [siganl retry]; //ç›´åˆ°å‘ç”Ÿnextçš„ç»ç’ƒçƒ [retrySiganl subscribeNext:^(id x) &#123; NSLog(@&quot;é‡è¦æˆåŠŸäº†&quot;); &#125;];&#125; èŠ‚æµ,ä¸å¥½æ„æ€,è¿™é‡Œæ¯ä¸€ç§’åªèƒ½é€šè¿‡ä¸€ä¸ªäºº,å¦‚æœ 1s å†…å‘ç”Ÿå¤šä¸ª,åªé€šè¿‡æœ€åä¸€ä¸ª1234567891011121314151617181920212223242526272829- (void)demo19&#123; RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; //å³ä½¿å‘é€ä¸€ä¸ªnextçš„ç»ç’ƒçƒ [subscriber sendNext:@&quot;A&quot;]; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; [subscriber sendNext:@&quot;B&quot;]; &#125;); dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; [subscriber sendNext:@&quot;C&quot;]; [subscriber sendNext:@&quot;D&quot;]; [subscriber sendNext:@&quot;E&quot;]; &#125;); dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; [subscriber sendNext:@&quot;F&quot;]; &#125;); return nil; &#125;]; //å¯¹ä¿¡å·è¿›è¡ŒèŠ‚æµ,é™åˆ¶æ—¶é—´å†…ä¸€æ¬¡åªèƒ½é€šè¿‡ä¸€ä¸ªç»ç’ƒçƒ [[signal throttle:1] subscribeNext:^(id x) &#123; NSLog(@&quot;%@é€šè¿‡äº†&quot;,x); &#125;]; /* [2015-08-16 22:08:45.677]æ—…å®¢A [2015-08-16 22:08:46.737]æ—…å®¢B [2015-08-16 22:08:47.822]æ—…å®¢E [2015-08-16 22:08:48.920]æ—…å®¢F */&#125; æ¡ä»¶(takeUntil æ–¹æ³•,å½“ç»™å®šçš„ signal å®Œæˆå‰ä¸€ç›´å–å€¼)1234567891011121314151617181920212223242526- (void)demo20&#123; RACSignal *takeSiganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; //åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ä¿¡å·,æ¯ä¸€ç§’è§¦å‘ä¸€æ¬¡ RACSignal *siganl = [RACSignal interval:1 onScheduler:[RACScheduler mainThreadScheduler]]; [siganl subscribeNext:^(id x) &#123; //åœ¨è¿™é‡Œå®šæ—¶å‘é€nextç»ç’ƒçƒ [subscriber sendNext:@&quot;ç›´åˆ°ä¸–ç•Œå°½å¤´&quot;]; &#125;]; return nil; &#125;]; //åˆ›å»ºæ¡ä»¶ä¿¡å· RACSignal *conditionSiganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; //è®¾ç½®5såå‘ç”Ÿcompleteç»ç’ƒçƒ dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; NSLog(@&quot;ä¸–ç•Œçš„ä»Šå¤©åˆ°äº†,è¯·ä¸‹è½¦&quot;); [subscriber sendCompleted]; &#125;); return nil; &#125;]; //è®¾ç½®æ¡ä»¶,takeSiganlä¿¡å·åœ¨conditionSignalä¿¡å·æ¥æ”¶å®Œæˆå‰,ä¸æ–­å–å€¼ [[takeSiganl takeUntil:conditionSiganl] subscribeNext:^(id x) &#123; NSLog(@&quot;%@&quot;,x); &#125;];&#125; RACReplaySubject ä½¿ç”¨12345678910111213141516171819202122232425/*** RACReplaySubjectåˆ›å»ºæ–¹æ³• 1.åˆ›å»ºRACSubject 2.è®¢é˜…ä¿¡å· 3.å‘é€ä¿¡å· å·¥ä½œæµç¨‹: 1.è®¢é˜…ä¿¡å·,å†…éƒ¨ä¿å­˜äº†è®¢é˜…è€…,å’Œè®¢é˜…è€…ç›¸åº”çš„block 2.å½“å‘é€ä¿¡å·çš„,éå†è®¢é˜…è€…,è°ƒç”¨è®¢é˜…è€…çš„nextBlock 3.å‘é€çš„ä¿¡å·ä¼šä¿å­˜èµ·æ¥,å½“è®¢é˜…è€…è®¢é˜…ä¿¡å·çš„æ—¶å€™,ä¼šå°†ä¹‹å‰ä¿å­˜çš„ä¿¡å·,ä¸€ä¸ªä¸ªä½œç”¨äºæ–°çš„è®¢é˜…è€…,ä¿å­˜ä¿¡å·çš„å®¹é‡ç”±capacityå†³å®š,è¿™ä¹Ÿæ˜¯æœ‰åˆ«äºRACSubjectçš„*/-(void)RACReplaySubject&#123; RACReplaySubject *replaySubject = [RACReplaySubject subject]; [replaySubject subscribeNext:^(id x) &#123; NSLog(@&quot; 1 %@&quot;,x); &#125;]; [replaySubject subscribeNext:^(id x) &#123; NSLog(@&quot;2 %@&quot;,x); &#125;]; [replaySubject sendNext:@7]; [replaySubject subscribeNext:^(id x) &#123; NSLog(@&quot;3 %@&quot;,x); &#125;];&#125; rac_liftSelector:withSignals ä½¿ç”¨12345678910111213141516171819//è¿™é‡Œçš„rac_liftSelector:withSignals å°±æ˜¯å¹²è¿™ä»¶äº‹çš„ï¼Œå®ƒçš„æ„æ€æ˜¯å½“signalAå’ŒsignalBéƒ½è‡³å°‘sendNextè¿‡ä¸€æ¬¡ï¼Œæ¥ä¸‹æ¥åªè¦å…¶ä¸­ä»»æ„ä¸€ä¸ªsignalæœ‰äº†æ–°çš„å†…å®¹ï¼ŒdoA:withBè¿™ä¸ªæ–¹æ³•å°±ä¼šè‡ªåŠ¨è¢«è§¦å‘-(void)test&#123; RACSignal *sigalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; double delayInSeconds = 2.0; dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds *NSEC_PER_SEC)); dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(popTime * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; [subscriber sendNext:@&quot;A&quot;]; &#125;); return nil; &#125;]; RACSignal *signalB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@&quot;B&quot;]; [subscriber sendNext:@&quot;Another B&quot;]; [subscriber sendCompleted]; return nil; &#125;]; [self rac_liftSelector:@selector(doA:withB:) withSignals:sigalA,signalB, nil];&#125; æ¥æºï¼šç®€ä¹¦ä½œè€…æœªé­é›¨è¾° ã€ŠiOS RACçš„ä½¿ç”¨æ€»ç»“ã€‹","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"Swift 4.0 ä¸­å¯¹ Dictionary çš„æ”¹è¿›","slug":"Swift 4 Dictionary","date":"2018-03-13T13:56:27.000Z","updated":"2018-11-15T14:04:15.042Z","comments":true,"path":"2018/03/13/Swift 4 Dictionary/","link":"","permalink":"https://reversescale.github.io/2018/03/13/Swift 4 Dictionary/","excerpt":"Swift 4 å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰åˆ‡æ¢åˆ° 4.0 ç‰ˆæœ¬ã€‚ è¿™æ¬¡ 4.0 æ›´æ–°ç»™æˆ‘æœ€å¤§çš„æ„Ÿå—å°±æ˜¯æ²¡æœ‰äº†å‰å‡ æ¬¡å‡çº§çš„è·³è·ƒå¼å˜åŒ–ã€‚ ä¸ç”¨ä¸ºäº†æ›´æ–°è¯­è¨€ç‰ˆæœ¬ï¼Œå®Œå…¨æ¨ç¿»å·²æœ‰çš„é¡¹ç›®ï¼Œè¿™ä¹Ÿæ˜¯ Swift æ…¢æ…¢è¶‹å‘äºç¨³å®šçš„æ ‡å¿—~","text":"Swift 4 å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰åˆ‡æ¢åˆ° 4.0 ç‰ˆæœ¬ã€‚ è¿™æ¬¡ 4.0 æ›´æ–°ç»™æˆ‘æœ€å¤§çš„æ„Ÿå—å°±æ˜¯æ²¡æœ‰äº†å‰å‡ æ¬¡å‡çº§çš„è·³è·ƒå¼å˜åŒ–ã€‚ ä¸ç”¨ä¸ºäº†æ›´æ–°è¯­è¨€ç‰ˆæœ¬ï¼Œå®Œå…¨æ¨ç¿»å·²æœ‰çš„é¡¹ç›®ï¼Œè¿™ä¹Ÿæ˜¯ Swift æ…¢æ…¢è¶‹å‘äºç¨³å®šçš„æ ‡å¿—~ å’±ä»¬è¿™æ¬¡è¯´è¯´ Swift 4.0 å¯¹ Dictionary è¿™ä¸ªç»å¸¸ä¼šç”¨åˆ°çš„ç±»çš„æ”¹è¿›ã€‚ è‡ªåŠ¨æ ¹æ® key åˆ†ç»„Dictionary æ–°å¢äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¯ä»¥å°†ç»™å®šçš„ä¸€ä¸ªæ•°ç»„ï¼Œæ ¹æ®æŒ‡å®šçš„æ¡ä»¶è¿›è¡Œåˆ†ç»„ã€‚ æ¥çœ‹ä¸€ä¸ªä¾‹å­: 123456789struct Person &#123; var name: String var gender: Gender var age: Int enum Gender &#123; case male case female &#125;&#125; è¿™é‡Œæœ‰ä¸€ä¸ª Person ç»“æ„, ç„¶åæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ï¼š 12345let p1 = Person(name: \"aa\", gender: .female, age: 22)let p2 = Person(name: \"bb\", gender: .male, age: 24)let p3 = Person(name: \"cc\", gender: .male, age: 21)let persons = [p1, p2, p3] ç°åœ¨ç”¨æ–°çš„ Dictionary æ„é€ æ–¹æ³•ï¼Œå¯ä»¥ç«‹å³å°†è¿™ç»„ Person å®ä¾‹æ ¹æ®ä»–ä»¬çš„ gender å±æ€§è¿›è¡Œåˆ†ç»„ï¼š 123let groupedDict = Dictionary(grouping: persons) &#123; p in return p.gender&#125; è¿™ä¸ªæ„é€ æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•° grouping æ¥æ”¶çš„æ˜¯ persons æ•°ç»„ï¼Œ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œç”¨äºè¿”å›æ ¹æ®è¿›è¡Œåˆ†ç»„çš„ä¾æ®ï¼Œæˆ‘ä»¬è¿™é‡Œè¿”å›çš„æ˜¯ p.genderã€‚ç»“æœä¸€ç›®äº†ç„¶ï¼š 123456789[ .male: [ Person(name: \"bb\", gender: .male, age: 24), Person(name: \"cc\", gender: .male, age: 21) ], .female: [ Person(name: \"aa\", gender: .female, age: 22) ]] ä»¥å¾€è¦å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œå°±éœ€è¦æ‰‹åŠ¨éå†æ•´ä¸ªæ•°ç»„ï¼Œå–å‡º keyï¼Œ ç„¶åç”Ÿæˆå­—å…¸ï¼Œ ç°åœ¨æ–¹ä¾¿å¾ˆå¤šã€‚ value æ— ç¼è½¬æ¢å¦å¤–ä¸€ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„ç‰¹æ€§æ˜¯ï¼ŒDictionary æä¾›çš„ mapValues æ–¹æ³•ã€‚ è¿˜ä»¥æˆ‘ä»¬åˆšæ‰ç”Ÿæˆçš„ groupedDict ä¸ºä¾‹ï¼Œå¯ä»¥è¿›è¡Œè¿™æ ·çš„æ“ä½œï¼š 123let count = groupedDict.mapValues &#123; persons in persons.count&#125; å…ˆçœ‹ä¸€ä¸‹è¾“å‡ºï¼Œå¤§å®¶å¯èƒ½å°±çŒœåˆ°è¿™ä¸ªæ–¹æ³•çš„ç”¨é€”æ˜¯ä»€ä¹ˆäº†ï¼š 1234[ .male: 2, .female: 1] ä¸Šé¢çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œ mapValues ä¼šéå†æ¯ä¸€ä¸ª key å¯¹åº”çš„ valuesï¼Œ ç„¶åä¼ é€’ç»™é—­åŒ…è¿›è¡Œè‡ªå®šä¹‰è½¬æ¢ã€‚ æˆ‘ä»¬ä¾‹å­ä¸­çš„é—­åŒ…è¿”å›çš„å°±æ˜¯æ¯ä¸ª key å¯¹åº”çš„ Person é›†åˆçš„æ•°é‡ï¼Œæœ€ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„ Dictionaryï¼Œé‡Œé¢çš„ key å’Œä¹‹å‰ä¸€æ ·ï¼Œåªæ˜¯å¯¹åº”çš„å€¼å˜æˆäº†æˆ‘ä»¬é—­åŒ…ä¸­è‡ªå®šä¹‰çš„äº†ã€‚ mapValues æ–¹æ³•åŒæ ·æ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬è§£å†³ç¹æ‚æ“ä½œçš„å·¥å…·æ–¹æ³•ã€‚ ä»é”®å€¼å¯¹å…ƒç»„ä¸­ç›´æ¥æ„å»ºå‡å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªæ•°ç»„: 1let personsTuples = [(\"group 1\", [p1, p2]), (\"group 2\", [p3])] ç„¶åå¯ä»¥è°ƒç”¨ uniqueKeysWithValues æ„é€ æ–¹æ³•ç›´æ¥åˆå§‹åŒ–å­—å…¸ï¼š 1let dict = Dictionary(uniqueKeysWithValues: personsTuples) personsTuples æ•°ç»„ä¸­ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå…ƒç»„(Tuple)ï¼Œ è¿™ä¸ªæ„é€ æ–¹æ³•æŠŠå…ƒç»„ä¸­çš„ç¬¬ä¸€é¡¹å½“åš keyï¼Œ ç¬¬äºŒé¡¹å½“åš valueï¼Œ ç”Ÿæˆä¸€ä¸ªæ–°çš„ Dictionaryï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789[ \"group 1\": [ Person(name: \"aa\", gender: .female, age: 22), Person(name: \"bb\", gender: .male, age: 24) ], \"group 2\": [ Person(name: \"cc\", gender: .male, age: 21) ]] ä½¿ç”¨ uniqueKeysWithValues æ„é€ æ–¹æ³•æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå°±æ˜¯ä¼ å…¥çš„æ•°ç»„ä¸­ï¼Œä¸èƒ½æœ‰é‡å¤çš„ keyï¼Œ å¦åˆ™ä¼šæŠ¥è¿è¡Œæ—¶é”™è¯¯ï¼Œæ¯”å¦‚è¿™ä¸ªæ•°ç»„å°±ä¼šæŠ¥é”™ï¼š 1let personsTuples = [(\"group 1\", [p1, p2]), (\"group 2\", [p3]), (\"group 2\", [p4])] ä¸Šé¢æ•°ç»„ä¸­ group 2 å‡ºç°äº†ä¸¤æ¬¡ã€‚ å¦‚æœç”¨å®ƒæ¥åˆå§‹åŒ–çš„è¯ï¼Œå°±ä¼šå‡ºé”™ã€‚ æ‰€ä»¥ Swift 4.0 è¿˜æä¾›äº†å¦å¤–ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œ å¯¹äºä¸Šé¢è¿™ä¸ªæ•°ç»„ï¼Œå¯ä»¥è°ƒç”¨ï¼š 123let dict = Dictionary(personsTuples) &#123; old, new in return new&#125; ç¬¬äºŒä¸ªé—­åŒ…å‚æ•°ï¼Œä¼šåœ¨é‡åˆ°é‡å¤çš„ key æ—¶å€™è°ƒç”¨ã€‚ å®ƒæä¾›ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯åŒæ ·è¿™ä¸ª key çš„ä¸Šä¸€ä¸ªå€¼ oldï¼Œ è¿˜æœ‰å½“å‰çš„å€¼ newã€‚ æˆ‘ä»¬è¿™é‡Œç›´æ¥è¿”å› newï¼Œæ„æ€å°±æ˜¯ æ¯æ¬¡é‡åˆ°é‡å¤çš„ keyï¼Œ å°±ç”¨æ–°çš„å€¼ä»£æ›¿è€çš„å€¼ã€‚ è¿™æ ·åˆå§‹åŒ–åï¼Œç”Ÿæˆçš„ Dictionary ç»“æ„å¦‚ä¸‹ï¼š 123456789[ \"group 1\": [ p1, p2 ], \"group 2\": [ p4 ]] group 2 ä¸­çš„å€¼ï¼Œ æ˜¯ç¬¬äºŒæ¬¡ key æ‰€å¯¹åº”çš„ p4ã€‚ æä¾›é»˜è®¤å€¼å¦‚æœæˆ‘ä»¬è®¿é—®äº†ä¸€ä¸ªå­—å…¸ä¸­ä¸å­˜åœ¨çš„ keyï¼Œ ä¼šè¿”å› nilï¼š 1dict[\"group 3\"] å› ä¸ºä¸Šé¢å­—å…¸ä¸­ï¼Œä¸å­˜åœ¨ group 3 è¿™ä¸ª keyï¼Œ æ‰€ä»¥å®ƒè¿”å›äº† nilã€‚ Swift 4 ä¸­æ–°å¢äº†æŒ‡å®šé»˜è®¤å€¼çš„èƒ½åŠ›ï¼š 1dict[\"group 3\", default: []] è¿™æ ·è°ƒç”¨ï¼Œå¦‚æœ group 3 è¿™ä¸ª key ä¸å­˜åœ¨çš„è¯ï¼Œ å°±ä¼šè¿”å›æˆ‘ä»¬æŒ‡å®šçš„é»˜è®¤å€¼ç©ºæ•°ç»„ï¼Œ è€Œä¸æ˜¯ nil äº†ã€‚ è¿™ä¸ªç‰¹æ€§åœ¨æˆ‘ä»¬å¤„ç† JSON æ•°æ®è§£æè¿™ç±»çš„é—®é¢˜ä¸Šå¾ˆå®ç”¨ã€‚ è¿‡æ»¤å™¨è¿‡æ»¤å™¨å¯¹äºé›†åˆç±»æ¥è¯´æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„åŠŸèƒ½ã€‚ Swift 4 ä¸­å¯¹ Dictionary ç±»å‹ä¹Ÿæä¾›äº†è¿‡æ»¤å™¨çš„æ”¯æŒï¼š 123let filteredDict = dict.filter &#123; key, val in return val.count &gt;= 2&#125; filter æ–¹æ³•æ¥æ”¶ä¸€ä¸ªé—­åŒ…ï¼Œå®ƒä¼šéå† Dictionary ä¸­æ‰€æœ‰çš„å…ƒç´ ï¼Œå¹¶ä¸”ä½œä¸ºé—­åŒ…çš„å‚æ•°ä¼ å…¥ã€‚ æˆ‘ä»¬éœ€è¦é€šè¿‡é—­åŒ…çš„è¿”å›å€¼ç¡®å®šè¿™ä¸ªå…ƒç´ æ˜¯å¦è¢«ä¿ç•™ã€‚ ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ¯”å¦‚æˆ‘ä»¬ dict ä¸­çš„å…ƒç´ æ˜¯ ï¼š 123456789[ \"group 1\": [ p1, p2 ], \"group 2\": [ p4 ]] è°ƒç”¨ filter åï¼Œæˆ‘ä»¬åªä¿ç•™æ•°é‡å¤§äº 2 çš„é›†åˆï¼š 123456[ \"group 1\": [ p1, p2 ]] æ€»ç»“ä»¥ä¸Šå°±æ˜¯ Swift 4.0 å¯¹äº Dictionary çš„ä¸»è¦æ”¹è¿›ã€‚ è¿™äº›æ–°å¢çš„å·¥å…·æ–¹æ³•å¯¹äºæé«˜æˆ‘ä»¬å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡éƒ½æœ‰å¸®åŠ©ï¼Œå¸Œæœ›è¿™é‡Œçš„ä»‹ç»å¯¹ä½ æœ‰å¸®åŠ©ã€‚ å…³äº Dictionary æ›´å®Œæ•´çš„ä¿¡æ¯ï¼Œå¤§å®¶è¿˜å¯ä»¥å‚è€ƒè‹¹æœå®˜æ–¹çš„æ–‡æ¡£ï¼Œè¿˜æœ‰ Swift Blog ä¸­çš„ä»‹ç»ã€‚ å‚è€ƒæ–‡çŒ®Dictionary å®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.apple.com/documentation/swift/dictionarySwift Blog: https://swift.org/blog/dictionary-and-set-improvements/","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"ä½¿ç”¨ CocoaPods å¯¹å…¬æœ‰åº“å¼€æºå’Œç§æœ‰åº“ç»„ä»¶","slug":"Open source library","date":"2018-03-12T13:56:27.000Z","updated":"2018-11-15T14:01:12.844Z","comments":true,"path":"2018/03/12/Open source library/","link":"","permalink":"https://reversescale.github.io/2018/03/12/Open source library/","excerpt":"æœ€è¿‘åœ¨ç ”ç©¶ä½¿ç”¨ CocoaPods å¯¹ iOS å·¥ç¨‹ç»„ä»¶åŒ–ï¼Œåˆ›å»ºå…¬æœ‰ Pod åº“å’Œç§æœ‰ Pod åº“æ–¹æ³•ï¼Œä¸ºäº†æ–¹ä¾¿æ•´ç†å’Œå­¦ä¹ å°±æ•´ç†äº†è¿™ç¯‡æ–‡ç« ~","text":"æœ€è¿‘åœ¨ç ”ç©¶ä½¿ç”¨ CocoaPods å¯¹ iOS å·¥ç¨‹ç»„ä»¶åŒ–ï¼Œåˆ›å»ºå…¬æœ‰ Pod åº“å’Œç§æœ‰ Pod åº“æ–¹æ³•ï¼Œä¸ºäº†æ–¹ä¾¿æ•´ç†å’Œå­¦ä¹ å°±æ•´ç†äº†è¿™ç¯‡æ–‡ç« ~ åˆ›å»ºå…¬æœ‰ Pod åº“æˆ–è€…ç§æœ‰ Pod åº“ï¼Œå®é™…ä¸ŠåŸç†æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åŸºäº git æœåŠ¡å’Œ repo åè®®ï¼Œä¸ä¸€æ ·çš„æ˜¯ï¼Œä¸¤è€…çš„ç‰ˆæœ¬ç´¢å¼•æŸ¥è¯¢æ–¹å¼ä¸ä¸€æ ·ï¼Œå…¬æœ‰åº“çš„ podspec ç”± CocoaPods/Specs ç®¡ç†ï¼Œè€Œå†…éƒ¨ç§æœ‰ä½¿ç”¨çš„ pod åº“éœ€è¦è‡ªå·±å»ºç«‹ä¸€ä¸ªä»“åº“æ¥ç®¡ç† podspecã€‚ å®ç”¨ï¼šå¼€æºå…¬æœ‰åº“ä¾‹å­: æˆ‘æœ‰å°è£…è¿‡ä¸€ä¸ªå·¥å…·CollectionIndexToolsï¼ŒCollectionIndexTools å¯ä»¥ç»™ Collection æ·»åŠ ä¸€ä¸ªç±»ä¼¼ TableView å³ä¾§çš„ç´¢å¼•æ¡ï¼Œæˆ‘æƒ³é€šè¿‡ Podfile ä¸­æ·»åŠ  pod â€˜CollectionIndexToolsLibâ€™ å³å¯ä½¿ç”¨. æ³¨å†Œ CocoaPods è´¦æˆ·ä¿¡æ¯æƒ³è¦åˆ›å»ºä¸€ä¸ªå¼€æº pod åº“ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æ³¨å†Œ CocoaPods, è¿™é‡Œä½¿ç”¨ trunk æ–¹å¼ï¼Œä½œä¸ºä¸€ä¸ª iOS å¼€å‘äººå‘˜ä½ ä¸€å®šå®‰è£…äº† CocoaPodsï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œï¼š 1pod trunk register é‚®ç®±åœ°å€ &apos;ç”¨æˆ·å&apos; --verbose è¿™é‡Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ Github é‚®ç®±å’Œç”¨æˆ·åï¼Œç„¶ååœ¨ä½ çš„é‚®ç®±ä¸­ä¼šæ”¶åˆ°ç¡®è®¤é‚®ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»é“¾æ¥ç¡®è®¤å³æ³¨å†ŒæˆåŠŸï¼ŒæˆåŠŸä¹‹åå¯ä»¥ç»ˆç«¯æ‰§è¡Œï¼š 1pod trunk me æŸ¥çœ‹è‡ªå·±çš„æ³¨å†Œä¿¡æ¯ï¼Œä»¥åå½“ä½ æœ‰äº†è‡ªå·±çš„å¼€æºPodåº“ï¼Œä¹Ÿå¯ä»¥ç”¨æ­¤æ–¹å¼éšæ—¶æŸ¥çœ‹è‡ªå·±å‘å¸ƒè¿‡çš„Podsï¼š åˆ›å»ºå…±äº«åº“æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°å…¬æœ‰ä»“åº“å…±äº«åº“éœ€è¦ä¸‰ä¸ªå¿…ä¸å¯å°‘çš„éƒ¨åˆ†: 1.å…±äº«æ–‡ä»¶å¤¹(æ–‡ä»¶å¤¹å­˜æ”¾ç€ä½ è¦å…±äº«çš„å†…å®¹, ä¹Ÿå°±æ˜¯å…¶ä»–äººpodå¾—åˆ°çš„æ–‡ä»¶, .podspecæ–‡ä»¶ä¸­çš„source_fileséœ€è¦æŒ‡å®šæ­¤æ–‡ä»¶è·¯å¾„åŠæ–‡ä»¶ç±»å‹); 2.LICENSEæ–‡ä»¶(é»˜è®¤ä¸€èˆ¬é€‰æ‹©MIT); 3.åº“æè¿°æ–‡ä»¶.podspec(æœ¬åº“çš„å„é¡¹ä¿¡æ¯æè¿°, éœ€è¦æäº¤ç»™CocoaPods, podé€šè¿‡è¿™ä¸ªæ–‡ä»¶æŸ¥æ‰¾åˆ°ä½ å…±äº«çš„åº“, .podspecæ–‡ä»¶çš„æ ¼å¼è§ç¬¬3ç‚¹). è¿™ä¸€æ­¥åˆ†ä¸¤ç§åœºæ™¯: åœºæ™¯ä¸€ï¼šå¦‚æœä½ å·²ç»æœ‰äº†ç°æˆçš„æƒ³è¦å…±äº«çš„æ–‡ä»¶,ä½ åªéœ€è¦æ»¡è¶³ä¸Šé¢ä¸‰ä¸ªéƒ¨åˆ†,å³å¯ä¸Šä¼ åˆ°å…¬æœ‰ä»“åº“å³å¯ç»§ç»­å…¶ä»–çš„æ­¥éª¤; åœºæ™¯äºŒï¼šä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å·¥ç¨‹å»åšè‡ªå·±çš„å…±äº«, å¯ä»¥ä½¿ç”¨ç»ˆç«¯å‘½ä»¤: 1pod lib create CollectionIndexToolsLib éœ€è¦è¾“å…¥ä¸€äº›æ¨¡æ¿å‚æ•°ï¼š Cocoapods ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ¨¡æ¿é¡¹ç›®ï¼Œç›®å½•ç»“æ„ï¼š 123456789101112131415CollectionIndexToolsLibâ”œâ”€â”€ Example #demo APPâ”‚ â”œâ”€â”€ CollectionIndexToolsLibâ”‚ â”œâ”€â”€ CollectionIndexToolsLib.xcodeprojâ”‚ â”œâ”€â”€ CollectionIndexToolsLib.xcworkspaceâ”‚ â”œâ”€â”€ Podfile #demo APP çš„ä¾èµ–æè¿°æ–‡ä»¶â”‚ â”œâ”€â”€ Podfile.lockâ”‚ â”œâ”€â”€ Pods #demo APP çš„ä¾èµ–æ–‡ä»¶â”‚ â””â”€â”€ Testsâ”œâ”€â”€ LICENSE #å¼€æºåè®® é»˜è®¤MITâ”œâ”€â”€ Pod #ç»„ä»¶çš„ç›®å½•â”‚ â”œâ”€â”€ Assets #èµ„æºæ–‡ä»¶â”‚ â””â”€â”€ Classes #ç±»æ–‡ä»¶â”œâ”€â”€ PodCollectionIndexToolsLib.podspec #ç¬¬ä¸‰æ­¥è¦åˆ›å»ºçš„podspecæ–‡ä»¶â””â”€â”€ README.md #markdownæ ¼å¼çš„README ç¼–è¾‘.podspecæ–‡ä»¶ä»¥CollectionIndexToolsLib.podspecä¸ºä¾‹:123456789101112131415161718192021Pod::Spec.new do |s| s.name = 'CollectionIndexToolsLib' s.version = '0.1.0' s.summary = 'Custom IndexTools similar to TableViews index bar' s.description = &lt;&lt;-DESC I believe you must have thought about adding an index like Table View to Collection View. I will give you one today. DESC s.homepage = 'https://github.com/ReverseScale/CollectionIndexToolsLib' s.license = 'MIT' s.author = &#123; 'ReverseScale' =&gt; 'reversescale@icloud.com' &#125; s.source = &#123; :git =&gt; 'https://github.com/ReverseScale/CollectionIndexToolsLib.git', :tag =&gt; s.version.to_s &#125; s.ios.deployment_target = '8.0' s.source_files = 'CollectionIndexToolsLib/Classes/**/*' s.requires_arc = trueend ç†è®ºä¸Šå‰é¢çš„è®¾ç½®å°±å¯ä»¥é€šè¿‡éªŒè¯ï¼Œä¸‹é¢æ˜¯æ³¨é‡Šå‚ç…§ï¼š1234567891011121314151617181920212223242526272829Pod::Spec.new do |s| s.name = \"PodTestLibrary\" #åç§° s.version = \"0.1.0\" #ç‰ˆæœ¬å· s.summary = \"Just Testing.\" #ç®€çŸ­ä»‹ç»ï¼Œä¸‹é¢æ˜¯è¯¦ç»†ä»‹ç» s.description = &lt;&lt;-DESC Testing Private Podspec. * Markdown format. * Don't worry about the indent, we strip it! DESC s.homepage = \"https://coding.net/u/wtlucky/p/podTestLibrary\" #ä¸»é¡µ,è¿™é‡Œè¦å¡«å†™å¯ä»¥è®¿é—®åˆ°çš„åœ°å€ï¼Œä¸ç„¶éªŒè¯ä¸é€šè¿‡ # s.screenshots = \"www.example.com/screenshots_1\", \"www.example.com/screenshots_2\" #æˆªå›¾ s.license = 'MIT' #å¼€æºåè®® s.author = &#123; \"wtlucky\" =&gt; \"wtlucky@foxmail.com\" &#125; #ä½œè€…ä¿¡æ¯ s.source = &#123; :git =&gt; \"https://coding.net/wtlucky/podTestLibrary.git\", :tag =&gt; \"0.1.0\" &#125; #é¡¹ç›®åœ°å€ï¼Œè¿™é‡Œä¸æ”¯æŒsshçš„åœ°å€ï¼ŒéªŒè¯ä¸é€šè¿‡ï¼Œåªæ”¯æŒHTTPå’ŒHTTPSï¼Œæœ€å¥½ä½¿ç”¨HTTPS # s.social_media_url = 'https://twitter.com/&lt;TWITTER_USERNAME&gt;' #å¤šåª’ä½“ä»‹ç»åœ°å€ s.platform = :ios, '7.0' #æ”¯æŒçš„å¹³å°åŠç‰ˆæœ¬ s.requires_arc = true #æ˜¯å¦ä½¿ç”¨ARCï¼Œå¦‚æœæŒ‡å®šå…·ä½“æ–‡ä»¶ï¼Œåˆ™å…·ä½“çš„é—®é¢˜ä½¿ç”¨ARC s.source_files = 'Pod/Classes/**/*' #ä»£ç æºæ–‡ä»¶åœ°å€ï¼Œ**/*è¡¨ç¤ºClassesç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚æœæœ‰å¤šä¸ªç›®å½•ä¸‹åˆ™ç”¨é€—å·åˆ†å¼€ï¼Œå¦‚æœéœ€è¦åœ¨é¡¹ç›®ä¸­åˆ†ç»„æ˜¾ç¤ºï¼Œè¿™é‡Œä¹Ÿè¦åšç›¸åº”çš„è®¾ç½® s.resource_bundles = &#123; 'PodTestLibrary' =&gt; ['Pod/Assets/*.png'] &#125; #èµ„æºæ–‡ä»¶åœ°å€ s.public_header_files = 'Pod/Classes/**/*.h' #å…¬å¼€å¤´æ–‡ä»¶åœ°å€ s.frameworks = 'UIKit' #æ‰€éœ€çš„frameworkï¼Œå¤šä¸ªç”¨é€—å·éš”å¼€ s.dependency 'AFNetworking', '~&gt; 2.3' #ä¾èµ–å…³ç³»ï¼Œè¯¥é¡¹ç›®æ‰€ä¾èµ–çš„å…¶ä»–åº“ï¼Œå¦‚æœæœ‰å¤šä¸ªéœ€è¦å¡«å†™å¤šä¸ªs.dependencyend ç¼–å†™å®Œæˆå, æˆ‘ä»¬éœ€è¦éªŒè¯.podspecæ–‡ä»¶çš„åˆæ³•æ€§, è¿™é‡Œéœ€è¦ç»ˆç«¯cdåˆ°.podspecæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹, æ‰§è¡Œ:å¿½è§†è­¦å‘Šï¼šâ€“allow-warnings 1pod lib lint CollectionIndexToolsLib.podspec å¦‚æœ‰è­¦å‘Šæˆ–è€…é”™è¯¯è¯·é‡æ–°æ£€æŸ¥ä½ çš„ç¼–å†™æ­£ç¡®æ€§ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜ä¼šå‡ºç°ï¼š 123-&gt; CollectionIndexToolsLib (0.1.0)CollectionIndexToolsLib passed validation. æ‰“tag, å‘å¸ƒä¸€ä¸ªreleaseç‰ˆæœ¬ä¸€åˆ‡å‡†å¤‡å°±ç»ªå, æˆ‘ä»¬éœ€è¦åœ¨ä½ çš„gitä»“åº“é‡Œé¢å­˜åœ¨ä¸€ä¸ªä¸.podspecæ–‡ä»¶ä¸­ä¸€è‡´çš„version, è¿™é‡Œä½ å¯ä»¥åœ¨ä½ çš„gitä»“åº“ä¸­çš„releasesä¸€é¡¹å»æ‰‹åŠ¨å‘å¸ƒ, ä¹Ÿå¯ä»¥åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ç»ˆç«¯å‘½ä»¤: 12git tag -m &apos;ğŸ”–:Releasing tags.&apos; &apos;0.1.0&apos;git push --tag #æ¨é€tagåˆ°è¿œç«¯ä»“åº“ æˆåŠŸä¹‹åå³å¯åœ¨ä½ çš„ releases é‡Œé¢çœ‹åˆ°è¿™ä¸ª tag çš„ç‰ˆæœ¬. å‘å¸ƒè‡ªå·±çš„åº“æè¿°æ–‡ä»¶podspecç»™cocoapodsåŒæ ·åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹, ç»ˆç«¯æ‰§è¡Œ:å¿½è§†è­¦å‘Šï¼šâ€“allow-warnings 1pod trunk push CollectionIndexToolsLib.podspec å°†ä½ çš„åº“æ–‡ä»¶.podspecæ–‡ä»¶æäº¤åˆ°å…¬æœ‰çš„specsä¸Šé¢, è¿™ä¸€æ­¥åšçš„æ“ä½œæ˜¯éªŒè¯ä½ çš„podspecæ–‡ä»¶æ˜¯å¦åˆæ³•+æäº¤åˆ°specsä¸­(ç­‰åŒäºfork;commit;push)+å°†ä¸Šä¼ çš„podspecæ–‡ä»¶è½¬æˆjsonæ ¼å¼æ–‡ä»¶)ï¼ŒæˆåŠŸåä¼šå‡ºç°Congratsä¿¡æ¯ã€‚ æˆåŠŸä¸Šä¼ åç­‰å¾…ç‰‡åˆ»å°±å¯ä»¥ç”¨æŸ¥æ‰¾å‘½ä»¤æ‰¾åˆ°ä½ çš„åº“ï¼š 1pod search CollectionIndexToolsLib æ—¥åç»´æŠ¤æ›´æ–°å¼€æºåº“å¦‚æœæœ‰é”™è¯¯æˆ–è€…éœ€è¦è¿­ä»£ç‰ˆæœ¬,ä¿®æ”¹å·¥ç¨‹æ–‡ä»¶åæ¨é€åˆ°è¿œç«¯ä»“åº“å, éœ€è¦ä¿®æ”¹podspecä¸­çš„ç‰ˆæœ¬å·, å¹¶é‡æ–°æ‰“tagä¸Šä¼ , å†è¿›è¡Œæ–°ä¸€è½®çš„éªŒè¯å’Œå‘å¸ƒ.å¦‚æœåœ¨å¼€å‘è¿‡ç¨‹ä¸­å‘ç°æŸåŸºç¡€ç»„ä»¶å­˜åœ¨ bug éœ€è¦æ›´æ–° Podï¼Œå…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š ä¿®æ”¹ podspec æ–‡ä»¶ä¸­çš„ s.version; ä¿®å¤ bug å¹¶å¯¹é¡¹ç›®æ‰“ tagï¼Œtag åç§°å’Œ s.version ä¸€ç›´å¹¶ push åˆ°è¿œç¨‹ä»“åº“ã€‚ éªŒè¯ podspec æ–‡ä»¶çš„æœ‰æ•ˆæ€§ï¼› æ¨é€ podspec æ–‡ä»¶åˆ°è¿œç¨‹ä»“åº“ï¼› æ‰§è¡Œ pod search RRCache éªŒè¯ç»“æœï¼› å®ç”¨ï¼šç»„ä»¶åŒ–ç§æœ‰åº“ç»„ä»¶åŒ–çš„å®ç”¨ä¹‹å¤„è¯·å‚è€ƒã€Šç§»åŠ¨ç«¯ iOS å¹´ç»ˆå·¥ä½œæ€»ç»“-çº¯å¹²è´§è¯·è‡ªå¤‡é…’æ°´ã€‹ï¼ˆhttps://juejin.im/post/5a934dfa6fb9a0634514d8a9ï¼‰ ç§æœ‰Podåº“å’Œå…¬æœ‰Podåº“çš„åˆ›å»ºæ–¹å¼æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«, ä¸ä¸€æ ·çš„æ˜¯ç®¡ç†ä»–ä»¬çš„ spec repo ä¸ä¸€æ ·. æ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªè·ŸCocoaPods/Specsç±»ä¼¼çš„ä»“åº“æ¥ç®¡ç†å†…éƒ¨åˆ›å»ºçš„Podåº“çš„podspecæ–‡ä»¶, ä¾›å†…éƒ¨äººå‘˜æ›´æ–°å’Œä¾èµ–ä½¿ç”¨å†…éƒ¨Podç»„ä»¶åº“. ç§æœ‰repoçš„æ„å»ºå½¢å¼æœ‰ä¸¤ç§, ä¸€ç§æ˜¯ç§æœ‰gitæœåŠ¡å™¨ä¸Šé¢åˆ›å»ºï¼Œä¸€ç§æ˜¯æœ¬æœºåˆ›å»º. æœ¬æœºåˆ›å»ºè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£:Private Pods, è¿™é‡Œä»‹ç»çš„æ˜¯åœ¨å…¬å¸å†…éƒ¨æ­å»ºçš„gitæœåŠ¡å™¨ä¸Šé¢åˆ›å»ºæ•´ä¸ªæœåŠ¡çš„æ–¹å¼. åˆ›å»ºä¸€ä¸ªgitä»“åº“ç”¨æ¥åšå†…éƒ¨ç§æœ‰åº“çš„Spec Repoåœ¨ç§æœ‰æœåŠ¡å™¨ä¸€ä¸ªä»“åº“,ä¸€ä¸ªç”¨æ¥å­˜æ”¾æ‰€æœ‰å…±äº«åº“çš„podspec, è¿™é‡Œåˆ›å»ºå¥½ä¹‹åçš„å†…éƒ¨SSHåè®®åœ°å€æ˜¯:https://gitee.com/WhatsXie/LibComponent.git, èŠ±é’±ä¹°gitçš„ç§æœ‰ä»“åº“æˆ–è€…ä½¿ç”¨å…¶ä»–å…è´¹çš„ç¬¬ä¸‰æ–¹gitæœåŠ¡(å¦‚Bitbucketç­‰)åˆ›å»ºçš„ç§æœ‰ä»“åº“ç»™åˆ°çš„http/httpsåœ°å€ä¹Ÿä¸€æ ·.ç»ˆç«¯è¾“å…¥å‘½ä»¤:1pod repo add LibComponent https://gitee.com/WhatsXie/LibComponent.git å°†LibComponentæ·»åŠ åˆ°æœ¬åœ°repo, æ·»åŠ æˆåŠŸåå¯ä»¥åœ¨/.cocoapods/repos/ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°å®˜æ–¹çš„specs:masterå’ŒåˆšåˆšåŠ å…¥çš„specs:LibComponent å¦‚æœæœ‰å…¶ä»–åˆä½œäººå‘˜å…±åŒä½¿ç”¨è¿™ä¸ªç§æœ‰Spec Repoçš„è¯åœ¨ä»–æœ‰å¯¹åº”Gitä»“åº“çš„æƒé™çš„å‰æä¸‹æ‰§è¡Œç›¸åŒçš„å‘½ä»¤æ·»åŠ è¿™ä¸ªSpec Repoå³å¯. åˆ›å»ºç§æœ‰Podç»„ä»¶åº“ç»§ç»­åˆ›å»ºä¸€ä¸ªç§æœ‰ä»“åº“,ç”¨æ¥å»ºç«‹éœ€è¦å…±äº«çš„å†…éƒ¨ç»„ä»¶, ä»¥RSGuidePageLibä¸ºä¾‹:https://gitee.com/WhatsXie/RSGuidePageLib.git å¯ä»¥åˆ›å»ºç¤ºä¾‹å·¥ç¨‹, åƒåˆ›å»ºå…¬æœ‰çš„åº“ä¸€æ ·, å¡«å†™è‡ªå·±çš„podspecæ–‡ä»¶ 1234567891011121314151617181920212223242526272829Pod::Spec.new do |s|s.name = 'RSGuidePageLib's.version = '0.3.0's.summary = 'Custom guide page package's.description = &lt;&lt;-DESCSwift implementation of the guide page package, support for multiple pictures and video guide pageDESCs.homepage = 'https://gitee.com/WhatsXie/RSGuidePageLib.git's.license = &#123; :type =&gt; 'MIT', :file =&gt; 'LICENSE' &#125;s.author = &#123; 'ReverseScale@icloud.com' =&gt; 'reversescale' &#125;s.source = &#123; :git =&gt; 'https://gitee.com/WhatsXie/RSGuidePageLib.git', :tag =&gt; s.version.to_s &#125;s.ios.deployment_target = '8.0's.swift_version = '3.2's.source_files = 'RSGuidePageLib/Classes/**/*'s.requires_arc = true å€¼å¾—æ³¨æ„çš„æ˜¯:podspecæ–‡ä»¶ä¸­çš„homepageå’Œsourceä¸æ”¯æŒsshåè®®åœ°å€,æ‰€ä»¥æˆ‘ä»¬å¾—æ”¾å…¥http/httpsåœ°å€. ä¸å…¬æœ‰åº“çš„åˆ›å»ºæ–¹å¼ä¸€æ ·, pod lib lint Category.podspecéªŒè¯æˆåŠŸä¹‹åpushåˆ°ä»“åº“, ç„¶åæ‰“tagå‘å¸ƒreleaseç‰ˆæœ¬. ç„¶åå°†podspecåŠ å…¥ç§æœ‰Sepc repoä¸­å…¬æœ‰åº“ä½¿ç”¨trunkæ–¹å¼å°†.podspecæ–‡ä»¶å‘å¸ƒåˆ°CocoaPods/Specs, å†…éƒ¨çš„podç»„ä»¶åº“åˆ™æ˜¯æ·»åŠ åˆ°æˆ‘ä»¬ç¬¬ä¸€æ­¥åˆ›å»ºçš„ç§æœ‰Spec repoä¸­å», åœ¨ç»ˆç«¯æ‰§è¡Œ:â€“allow-warnings å¿½ç•¥è­¦å‘Šâ€“private ç§æœ‰åº“ 1pod repo push LibComponent RSGuidePageLib.podspec æ·»åŠ æˆåŠŸä¹‹åLibComponentä¸­ä¼šåŒ…å«RSGuidePageLibåº“çš„podspecä¿¡æ¯, å¯ä»¥å‰å¾€~/.cocoapods/reposä¸‹çš„LibComponentæ–‡ä»¶å¤¹ä¸­æŸ¥çœ‹, åŒæ—¶gitæœåŠ¡å™¨ä¸­çš„è¿œç«¯ä¹Ÿæ›´æ–°äº†. ç§»é™¤ç§æœ‰Repo 1pod repo remove [name] æŸ¥æ‰¾å’Œä½¿ç”¨å†…éƒ¨ç»„ä»¶åº“æ‰§è¡Œpod search Categoryå°±èƒ½æŸ¥åˆ°åˆšåˆšåˆ›å»ºå¥½çš„Categoryåº“äº†, ç„¶ååœ¨æƒ³è¦ä½¿ç”¨æ­¤ç»„ä»¶çš„å·¥ç¨‹çš„Podfileä¸­åŠ å…¥pod â€˜Categoryâ€™, â€˜~&gt;1.0.1â€™å³å¯ä½¿ç”¨å†…éƒ¨ç»„ä»¶å•¦ï¼ å€¼å¾—æ³¨æ„çš„æ˜¯:å¿…é¡»åœ¨Podfileå‰é¢éœ€è¦æ·»åŠ ä½ çš„ç§æœ‰Spec repoçš„gitåœ°å€source, pod installæ—¶, æ‰èƒ½åœ¨ç§æœ‰repoä¸­æŸ¥æ‰¾åˆ°ç§æœ‰åº“, åƒè¿™æ ·: 1234567891011# Uncomment the next line to define a global platform for your projectsource &apos;https://github.com/CocoaPods/Specs.git&apos;source &apos;https://gitee.com/WhatsXie/LibComponent.git&apos;# platform :ios, &apos;9.0&apos;target &apos;Demo&apos; dopod &apos;RSGuidePageLib&apos;, &apos;~&gt;0.3.0â€™end ç»è¿‡æµ‹è¯•, è¿™ç§æ–¹å¼å¯ä»¥æŠŠä½ çš„æ‰€æœ‰å¯ä»¥æ‹†åˆ†å‡ºæ¥çš„ç»„ä»¶, ç”šè‡³æ˜¯ä¸šåŠ¡éƒ½æ¥ä½¿ç”¨Podç®¡ç†, è¿™æ ·è¾¾åˆ°äº†è§£è€¦å’Œå•é¡¹æ›´æ–°ä¼˜åŒ–ã€‚æŸäº›ç»„ä»¶ä¸å½±å“è€ç‰ˆæœ¬çš„ä¾èµ–ä½¿ç”¨, å‡ºç°é—®é¢˜ä¿®æ”¹Podfileä¸­çš„ä¾èµ–ç‰ˆæœ¬å³å¯éšæ—¶å›æ»š, ç»™å¼€å‘äº†å¸¦æ¥æå¤§çš„ä¾¿åˆ©ã€‚ å‚è€ƒé“¾æ¥: CocoaPodsåˆ›å»ºå…¬æœ‰å’Œç§æœ‰Podåº“æ–¹æ³•æ€»ç»“ï¼ˆhttps://www.aliyun.com/jiaocheng/376300.htmlï¼‰ CocoaPods Guides(https://guides.cocoapods.org) Private Pods(https://guides.cocoapods.org/making/private-cocoapods.html) æ‰‹æŠŠæ‰‹æ•™ä½ å‘å¸ƒä»£ç åˆ°CocoaPods(Trunkæ–¹å¼)(http://www.cnblogs.com/wengzilin/p/4742530.html) ä½¿ç”¨Cocoapodsåˆ›å»ºç§æœ‰podspec(http://blog.wtlucky.com/blog/2015/02/26/create-private-podspec/) COCOAPODSåˆ›å»ºç§æœ‰PODS(http://www.cnblogs.com/tufeibo/p/5654268.html) CocoaPods ç»„ä»¶åŒ–å®è·µ - ç§æœ‰Pod(https://www.jianshu.com/p/475d6b6d5600)","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"Swift 4.0 æ–°ç‰¹å¾æ±‡æ€»åŠæ¼”ç¤ºé™„ Demo","slug":"Swift 4 New feature","date":"2018-03-09T13:16:27.000Z","updated":"2018-11-15T14:33:01.163Z","comments":true,"path":"2018/03/09/Swift 4 New feature/","link":"","permalink":"https://reversescale.github.io/2018/03/09/Swift 4 New feature/","excerpt":"Swift åœ¨ä¸æ–­çš„ç‰ˆæœ¬è¿­ä»£ä¸­ï¼Œç”±äºå…¶ ABI å°šä¸ç¨³å®šï¼Œæ‰€ä»¥ç»™å¼€å‘è€…å¸¦æ¥è®¸å¤šçš„æŒ‘æˆ˜ï¼Œä½†ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œè¿™é—¨è¯­è¨€æ‰æœ‰æ— é™å¯èƒ½~","text":"Swift åœ¨ä¸æ–­çš„ç‰ˆæœ¬è¿­ä»£ä¸­ï¼Œç”±äºå…¶ ABI å°šä¸ç¨³å®šï¼Œæ‰€ä»¥ç»™å¼€å‘è€…å¸¦æ¥è®¸å¤šçš„æŒ‘æˆ˜ï¼Œä½†ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œè¿™é—¨è¯­è¨€æ‰æœ‰æ— é™å¯èƒ½~ Key Paths æ–°è¯­æ³•key-path é€šå¸¸æ˜¯ç”¨åœ¨é”®å€¼ç¼–ç ï¼ˆKVCï¼‰ä¸é”®å€¼è§‚å¯Ÿï¼ˆKVOï¼‰ä¸Šçš„ï¼ŒKVCã€KVO ç›¸å…³å†…å®¹å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„è¿™ç¯‡æ–‡ç« ï¼šSwift - åå°„ï¼ˆReflectionï¼‰çš„ä»‹ç»ä¸ä½¿ç”¨æ ·ä¾‹ï¼ˆé™„KVCä»‹ç»ï¼‰ 1.Swift 3 ä¹‹å‰ä½¿ç”¨çš„æ˜¯ String ç±»å‹çš„ key-Path1234567891011121314151617//ç”¨æˆ·ç±»class User: NSObject&#123; @objc var name:String = &quot;&quot; //å§“å @objc var age:Int = 0 //å¹´é¾„&#125; //åˆ›å»ºä¸€ä¸ªUserå®ä¾‹å¯¹è±¡let user1 = User()user1.name = &quot;hangge&quot;user1.age = 100 //ä½¿ç”¨KVCå–å€¼let name = user1.value(forKey: &quot;name&quot;)print(name) //ä½¿ç”¨KVCèµ‹å€¼user1.setValue(&quot;hangge.com&quot;, forKey: &quot;name&quot;) å…·ä½“æ˜¾ç¤ºå¦‚ä¸‹ï¼š 2.åˆ°äº† Swift 3 æ–°å¢äº† #keyPath() å†™æ³•ä½¿ç”¨ #keyPath() å†™æ³•ï¼Œå¯ä»¥é¿å…æˆ‘ä»¬å› ä¸ºæ‹¼å†™é”™è¯¯è€Œå¼•å‘é—®é¢˜ã€‚1234567891011121314151617//ç”¨æˆ·ç±»class User: NSObject&#123; @objc var name:String = &quot;&quot; //å§“å @objc var age:Int = 0 //å¹´é¾„&#125; //åˆ›å»ºä¸€ä¸ªUserå®ä¾‹å¯¹è±¡let user1 = User()user1.name = &quot;hangge&quot;user1.age = 100 //ä½¿ç”¨KVCå–å€¼let name = user1.value(forKeyPath: #keyPath(User.name))print(name) //ä½¿ç”¨KVCèµ‹å€¼user1.setValue(&quot;hangge.com&quot;, forKeyPath: #keyPath(User.name)) 3.Swift 4 ä¸­ç›´æ¥ç”¨ \\ ä½œä¸ºå¼€å¤´åˆ›å»º KeyPathæ–°çš„æ–¹å¼ä¸ä»…ä½¿ç”¨æ›´åŠ ç®€å•ï¼Œè€Œä¸”æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š ç±»å‹å¯ä»¥å®šä¹‰ä¸º classã€struct å®šä¹‰ç±»å‹æ—¶æ— éœ€åŠ ä¸Š @objc ç­‰å…³é”®å­— æ€§èƒ½æ›´å¥½ ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­ï¼Œä¾‹å¦‚ï¼šuser1.value(forKeyPath: #keyPath(User.name)) è¿”å›çš„ç±»å‹æ˜¯ Anyï¼Œuser1[keyPath: \\User.name] ç›´æ¥è¿”å› String ç±»å‹ å¯ä»¥åœ¨æ‰€æœ‰å€¼ç±»å‹ä¸Šä½¿ç”¨ï¼ˆ1ï¼‰æ¯”å¦‚ä¸Šé¢çš„æ ·ä¾‹åœ¨ Swift4 ä¸­å¯ä»¥è¿™ä¹ˆå†™ï¼š1234567891011121314151617//ç”¨æˆ·ç±»class User: NSObject&#123; var name:String = &quot;&quot; //å§“å var age:Int = 0 //å¹´é¾„&#125; //åˆ›å»ºä¸€ä¸ªUserå®ä¾‹å¯¹è±¡let user1 = User()user1.name = &quot;hangge&quot;user1.age = 100 //ä½¿ç”¨KVCå–å€¼let name = user1[keyPath: \\User.name]print(name) //ä½¿ç”¨KVCèµ‹å€¼user1[keyPath: \\User.name] = &quot;hangge.com&quot; ï¼ˆ2ï¼‰keyPath å®šä¹‰åœ¨å¤–é¢ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š123456let keyPath = \\User.name let name = user1[keyPath: keyPath]print(name) user1[keyPath: keyPath] = &quot;hangge.com&quot; ï¼ˆ3ï¼‰å¯ä»¥ä½¿ç”¨ appending æ–¹æ³•å‘å·²å®šä¹‰çš„ Key Path åŸºç¡€ä¸Šå¡«åŠ æ–°çš„ Key Pathã€‚12let keyPath1 = \\User.phonelet keyPath2 = keyPath1.appending(path: \\.number) ç±»ä¸åè®®çš„ç»„åˆç±»å‹åœ¨ Swift 4 ä¸­ï¼Œå¯ä»¥æŠŠç±»ï¼ˆClassï¼‰å’Œåè®®ï¼ˆProtocolï¼‰ç”¨ &amp; ç»„åˆåœ¨ä¸€èµ·ä½œä¸ºä¸€ä¸ªç±»å‹ä½¿ç”¨ã€‚ ä½¿ç”¨æ ·ä¾‹1ï¼š12345678910111213protocol MyProtocol &#123; &#125; class View &#123; &#125; class ViewSubclass: View, MyProtocol &#123; &#125; class MyClass &#123; var delegate: (View &amp; MyProtocol)?&#125; let myClass = MyClass()myClass.delegate = ViewSubclass() //è¿™ä¸ªç¼–è¯‘æ­£å¸¸myClass.delegate = View() //è¿™ä¸ªç¼–è¯‘æŠ¥é”™: å…·ä½“é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š ä½¿ç”¨æ ·ä¾‹2ï¼š123456789101112131415161718192021protocol Shakeable &#123; func shake()&#125; extension UIButton: Shakeable &#123; func shake() &#123; /* ... */ &#125;&#125; extension UISlider: Shakeable &#123; func shake() &#123; /* ... */ &#125;&#125; func shakeEm(controls: [UIControl &amp; Shakeable]) &#123; for control in controls where control.isEnabled &#123; control.shake() &#125;&#125; ä¸‹æ ‡æ”¯æŒæ³›å‹1.ä¸‹æ ‡çš„è¿”å›ç±»å‹æ”¯æŒæ³›å‹æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå†™ä¸€äº›æ•°æ®å®¹å™¨ï¼ŒSwift æ”¯æŒé€šè¿‡ä¸‹æ ‡æ¥è¯»å†™å®¹å™¨ä¸­çš„æ•°æ®ã€‚ä½†æ˜¯å¦‚æœå®¹å™¨ç±»ä¸­çš„æ•°æ®ç±»å‹å®šä¹‰ä¸ºæ³›å‹ï¼Œè¿‡å»ä¸‹æ ‡è¯­æ³•å°±åªèƒ½è¿”å› Anyï¼Œåœ¨å–å‡ºå€¼åéœ€è¦ç”¨ as? æ¥è½¬æ¢ç±»å‹ã€‚ç°åœ¨ Swift 4 å®šä¹‰ä¸‹æ ‡ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹äº†ã€‚12345678910111213141516171819202122struct GenericDictionary&lt;Key: Hashable, Value&gt; &#123; private var data: [Key: Value] init(data: [Key: Value]) &#123; self.data = data &#125; subscript&lt;T&gt;(key: Key) -&gt; T? &#123; return data[key] as? T &#125;&#125; //å­—å…¸ç±»å‹: [String: Any]let earthData = GenericDictionary(data: [&quot;name&quot;: &quot;Earth&quot;, &quot;population&quot;: 7500000000, &quot;moons&quot;: 1]) //è‡ªåŠ¨è½¬æ¢ç±»å‹ï¼Œä¸éœ€è¦åœ¨å†™ &quot;as? String&quot;let name: String? = earthData[&quot;name&quot;]print(name) //è‡ªåŠ¨è½¬æ¢ç±»å‹ï¼Œä¸éœ€è¦åœ¨å†™ &quot;as? Int&quot;let population: Int? = earthData[&quot;population&quot;]print(population) 2.ä¸‹æ ‡ç±»å‹åŒæ ·æ”¯æŒæ³›å‹12345678910111213141516extension GenericDictionary &#123; subscript&lt;Keys: Sequence&gt;(keys: Keys) -&gt; [Value] where Keys.Iterator.Element == Key &#123; var values: [Value] = [] for key in keys &#123; if let value = data[key] &#123; values.append(value) &#125; &#125; return values &#125;&#125; // Arrayä¸‹æ ‡let nameAndMoons = earthData[[&quot;moons&quot;, &quot;name&quot;]] // [1, &quot;Earth&quot;]// Setä¸‹æ ‡let nameAndMoons2 = earthData[Set([&quot;moons&quot;, &quot;name&quot;])] // [1, &quot;Earth&quot;] Codable åºåˆ—åŒ–å¦‚æœè¦å°†ä¸€ä¸ªå¯¹è±¡æŒä¹…åŒ–ï¼Œéœ€è¦æŠŠè¿™ä¸ªå¯¹è±¡åºåˆ—åŒ–ã€‚è¿‡å»çš„åšæ³•æ˜¯å®ç° NSCoding åè®®ï¼Œä½†å®ç° NSCoding åè®®çš„ä»£ç å†™èµ·æ¥å¾ˆç¹çï¼Œå°¤å…¶æ˜¯å½“å±æ€§éå¸¸å¤šçš„æ—¶å€™ã€‚Swift 4 ä¸­å¼•å…¥äº† Codable åè®®ï¼Œå¯ä»¥å¤§å¤§å‡è½»äº†æˆ‘ä»¬çš„å·¥ä½œé‡ã€‚æˆ‘ä»¬åªéœ€è¦è®©éœ€è¦åºåˆ—åŒ–çš„å¯¹è±¡ç¬¦åˆ Codable åè®®å³å¯ï¼Œä¸ç”¨å†å†™ä»»ä½•å…¶ä»–çš„ä»£ç ã€‚1234struct Language: Codable &#123; var name: String var version: Int&#125; 1.Encode æ“ä½œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠç¬¦åˆäº† Codable åè®®çš„å¯¹è±¡ encode æˆ JSON æˆ–è€… PropertyListã€‚12345678let swift = Language(name: &quot;Swift&quot;, version: 4) //encodedå¯¹è±¡let encodedData = try JSONEncoder().encode(swift) //ä»encodedå¯¹è±¡è·å–Stringlet jsonString = String(data: encodedData, encoding: .utf8)print(jsonString) 2.Decode æ“ä½œ12let decodedData = try JSONDecoder().decode(Language.self, from: encodedData)print(decodedData.name, decodedData.version) SubtringSwift 4 ä¸­æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–å°±æ˜¯ String å¯ä»¥å½“åš Collection æ¥ç”¨ï¼Œå¹¶ä¸æ˜¯å› ä¸º String å®ç°äº† Collection åè®®ï¼Œè€Œæ˜¯ String æœ¬èº«å¢åŠ äº†å¾ˆå¤š Collection åè®®ä¸­çš„æ–¹æ³•ï¼Œä½¿å¾— String åœ¨ä½¿ç”¨æ—¶çœ‹ä¸Šå»å°±æ˜¯ä¸ª Collectionã€‚1234567let str = &quot;hangge.com&quot; print(str.prefix(5)) // &quot;hangg&quot;print(str.suffix(5)) // &quot;e.com&quot; print(str.dropFirst()) // &quot;angge.com&quot;print(str.dropLast()) // &quot;hangge.co&quot; æ¯”å¦‚ä¸Šé¢çš„æ ·ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€äº› Collection åè®®çš„æ–¹æ³•å¯¹å­—ç¬¦ä¸²è¿›è¡Œæˆªå–ï¼Œåªä¸è¿‡å®ƒä»¬çš„è¿”å›ç»“æœä¸æ˜¯ String ç±»å‹ï¼Œè€Œæ˜¯ Swift 4 æ–°å¢çš„ Substring ç±»å‹ã€‚ 1.ä¸ºä½•è¦å¼•å…¥ Substringï¼Ÿæ—¢ç„¶æˆ‘ä»¬æƒ³è¦çš„åˆ°çš„å°±æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆç›´æ¥è¿”å› String å°±å¥½äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¤šæ­¤ä¸€ä¸¾è¿”å› Substringã€‚åŸå› åªæœ‰ä¸€ä¸ªï¼šæ€§èƒ½ã€‚å…·ä½“å¯ä»¥å‚è€ƒä¸‹å›¾ï¼šå½“æˆ‘ä»¬ç”¨ä¸€äº› Collection çš„æ–¹å¼å¾—åˆ° String é‡Œçš„ä¸€éƒ¨åˆ†æ—¶ï¼Œåˆ›å»ºçš„éƒ½æ˜¯ Substringã€‚Substring ä¸åŸ String æ˜¯å…±äº«ä¸€ä¸ª Storageã€‚è¿™æ„å‘³æˆ‘ä»¬åœ¨æ“ä½œè¿™ä¸ªéƒ¨åˆ†çš„æ—¶å€™ï¼Œæ˜¯ä¸éœ€è¦é¢‘ç¹çš„å»åˆ›å»ºå†…å­˜ï¼Œä»è€Œä½¿å¾— Swift 4 çš„ String ç›¸å…³æ“ä½œå¯ä»¥è·å–æ¯”è¾ƒé«˜çš„æ€§èƒ½ã€‚è€Œå½“æˆ‘ä»¬æ˜¾å¼åœ°å°† Substring è½¬æˆ String çš„æ—¶å€™ï¼Œæ‰ä¼š Copy ä¸€ä»½ String åˆ°æ–°çš„å†…å­˜ç©ºé—´æ¥ï¼Œè¿™æ—¶æ–°çš„ String å’Œä¹‹å‰çš„ String å°±æ²¡æœ‰å…³ç³»äº†ã€‚ 2.ä½¿ç”¨ Substring çš„æ³¨æ„äº‹é¡¹ç”±äº Substring ä¸åŸ String æ˜¯å…±äº«å­˜å‚¨ç©ºé—´çš„ï¼Œåªè¦æˆ‘ä»¬ä½¿ç”¨äº† Substringï¼ŒåŸ String å°±ä¼šå­˜åœ¨å†…å­˜ç©ºé—´ä¸­ã€‚åªæœ‰ Substring è¢«é‡Šæ”¾ä»¥åï¼Œæ•´ä¸ª String æ‰ä¼šè¢«é‡Šæ”¾ã€‚è€Œä¸” Substring ç±»å‹æ— æ³•ç›´æ¥èµ‹å€¼ç»™éœ€è¦ String ç±»å‹çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¿…é¡»ç”¨ String() åŒ…ä¸€å±‚ã€‚å½“ç„¶è¿™æ—¶ç³»ç»Ÿå°±ä¼šé€šè¿‡å¤åˆ¶åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¹‹ååŸå­—ç¬¦ä¸²å°±ä¼šè¢«é‡Šæ”¾ã€‚ 3.ä½¿ç”¨æ ·ä¾‹è¿™é‡Œå¯¹ String è¿›è¡Œæ‰©å±•ï¼Œæ–°å¢ä¸€ä¸ª subString æ–¹æ³•ã€‚ç›´æ¥å¯ä»¥æ ¹æ®èµ·å§‹ä½ç½®ï¼ˆInt ç±»å‹ï¼‰å’Œéœ€è¦çš„é•¿åº¦ï¼ˆInt ç±»å‹ï¼‰ï¼Œæ¥æˆªå–å‡ºå­å­—ç¬¦ä¸²ã€‚123456789101112extension String &#123; //æ ¹æ®å¼€å§‹ä½ç½®å’Œé•¿åº¦æˆªå–å­—ç¬¦ä¸² func subString(start:Int, length:Int = -1) -&gt; String &#123; var len = length if len == -1 &#123; len = self.count - start &#125; let st = self.index(startIndex, offsetBy:start) let en = self.index(st, offsetBy:len) return String(self[st ..&lt; en]) &#125;&#125; ä½¿ç”¨æ ·ä¾‹ï¼š1234let str1 = &quot;æ¬¢è¿è®¿é—®hangge.com&quot;let str2 = str1.subString(start: 4, length: 6)print(&quot;åŸå­—ç¬¦ä¸²ï¼š\\(str1)&quot;)print(&quot;æˆªå–å‡ºçš„å­—ç¬¦ä¸²ï¼š\\(str2)&quot;) è¿è¡Œç»“æœå¦‚ä¸‹ï¼š æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•æœ€åæˆ‘ä»¬ä¼šå°† Substring æ˜¾å¼åœ°è½¬æˆ String å†è¿”å›ã€‚ åºŸé™¤ swap æ–¹æ³•ï¼ˆ1ï¼‰è¿‡å»æˆ‘ä»¬ä¼šä½¿ç”¨ swap(_:_:) æ¥å°†ä¸¤ä¸ªå˜é‡çš„å€¼è¿›è¡Œäº¤æ¢ï¼š1234var a = 1var b = 2swap(&amp;a, &amp;b)print(a, b) ï¼ˆ2ï¼‰åé¢ swap() æ–¹æ³•å°†ä¼šè¢«åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨ tupleï¼ˆå…ƒç»„ï¼‰ç‰¹æ€§æ¥å®ç°å€¼äº¤æ¢ï¼Œä¹Ÿåªéœ€è¦ä¸€å¥è¯å°±èƒ½å®ç°ï¼š1234var a = 1var b = 2(b, a) = (a, b)print(a, b) ä½¿ç”¨ tuple æ–¹å¼çš„å¥½å¤„æ˜¯ï¼Œå¤šä¸ªå˜é‡å€¼ä¹Ÿå¯ä»¥ä¸€èµ·è¿›è¡Œäº¤æ¢ï¼š12345var a = 1var b = 2var c = 3(a, b, c) = (b, c, a)print(a, b, c) ï¼ˆ3ï¼‰è¡¥å……ä¸€ä¸‹ï¼šç°åœ¨æ•°ç»„å¢åŠ äº†ä¸ª swapAt æ–¹æ³•å¯ä»¥å®ç°ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®äº¤æ¢ã€‚1234var fruits = [&quot;apple&quot;, &quot;pear&quot;, &quot;grape&quot;, &quot;banana&quot;]//äº¤æ¢å…ƒç´ ä½ç½®ï¼ˆç¬¬2ä¸ªå’Œç¬¬3ä¸ªå…ƒç´ ä½ç½®è¿›è¡Œäº¤æ¢ï¼‰fruits.swapAt(1, 2)print(fruits) å‡å°‘éšå¼ @objc è‡ªåŠ¨æ¨æ–­1.è¿‡å»çš„æƒ…å†µï¼ˆSwift 3ï¼‰ï¼ˆ1ï¼‰åœ¨é¡¹ç›®ä¸­å¦‚æœæƒ³æŠŠ Swift å†™çš„ API æš´éœ²ç»™ Objective-C è°ƒç”¨ï¼Œéœ€è¦å¢åŠ  @objcã€‚åœ¨ Swift 3 ä¸­ï¼Œç¼–è¯‘å™¨ä¼šåœ¨å¾ˆå¤šåœ°æ–¹ä¸ºæˆ‘ä»¬éšå¼çš„åŠ ä¸Š @objcã€‚ï¼ˆ2ï¼‰æ¯”å¦‚å½“ä¸€ä¸ªç±»ç»§æ‰¿äº NSObjectï¼Œé‚£ä¹ˆè¿™ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè¢«éšå¼çš„åŠ ä¸Š @objcã€‚1234class MyClass: NSObject &#123; func print() &#123; &#125; // åŒ…å«éšå¼çš„ @objc func show() &#123; &#125; // åŒ…å«éšå¼çš„ @objc&#125; ï¼ˆ3ï¼‰ä½†è¿™æ ·åšå¾ˆå¤šå¹¶ä¸éœ€è¦æš´éœ²ç»™ Objective-C ä¹Ÿè¢«åŠ ä¸Šäº† @objcã€‚è€Œå¤§é‡ @objc ä¼šå¯¼è‡´äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°çš„å¢åŠ ã€‚ 2.ç°åœ¨çš„æƒ…å†µï¼ˆSwift 4ï¼‰ï¼ˆ1ï¼‰åœ¨ Swift 4 ä¸­éšå¼ @objc è‡ªåŠ¨æ¨æ–­åªä¼šå‘ç”Ÿåœ¨ä¸‹é¢è¿™ç§å¿…é¡»è¦ä½¿ç”¨ @objc çš„æƒ…å†µï¼š è¦†ç›–çˆ¶ç±»çš„ Objective-C æ–¹æ³• ç¬¦åˆä¸€ä¸ª Objective-C çš„åè®® ï¼ˆ2ï¼‰å¤§å¤šæ•°åœ°æ–¹å¿…é¡»æ‰‹å·¥æ˜¾ç¤ºåœ°åŠ ä¸Š @objcã€‚1234class MyClass: NSObject &#123; @objc func print() &#123; &#125; //æ˜¾ç¤ºçš„åŠ ä¸Š @objc @objc func show() &#123; &#125; //æ˜¾ç¤ºçš„åŠ ä¸Š @objc&#125; ï¼ˆ3ï¼‰å¦‚æœåœ¨ç±»å‰åŠ ä¸Š @objcMembersï¼Œé‚£ä¹ˆå®ƒã€å®ƒçš„å­ç±»ã€æ‰©å±•é‡Œçš„æ–¹æ³•éƒ½ä¼šéšå¼çš„åŠ ä¸Š @objcã€‚123456789@objcMembersclass MyClass: NSObject &#123; func print() &#123; &#125; //åŒ…å«éšå¼çš„ @objc func show() &#123; &#125; //åŒ…å«éšå¼çš„ @objc&#125; extension MyClass &#123; func baz() &#123; &#125; //åŒ…å«éšå¼çš„ @objc&#125; ï¼ˆ4ï¼‰å¦‚æœåœ¨æ‰©å±•ï¼ˆextensionï¼‰å‰åŠ ä¸Š @objcï¼Œé‚£ä¹ˆè¯¥æ‰©å±•é‡Œçš„æ–¹æ³•éƒ½ä¼šéšå¼çš„åŠ ä¸Š @objcã€‚123456class SwiftClass &#123; &#125; @objc extension SwiftClass &#123; func foo() &#123; &#125; //åŒ…å«éšå¼çš„ @objc func bar() &#123; &#125; //åŒ…å«éšå¼çš„ @objc&#125; ï¼ˆ5ï¼‰å¦‚æœåœ¨æ‰©å±•ï¼ˆextensionï¼‰å‰åŠ ä¸Š @nonobjcï¼Œé‚£ä¹ˆè¯¥æ‰©å±•é‡Œçš„æ–¹æ³•éƒ½ä¸ä¼šéšå¼çš„åŠ ä¸Š @objcã€‚12345678@objcMembersclass MyClass : NSObject &#123; func wibble() &#123; &#125; //åŒ…å«éšå¼çš„ @objc&#125; @nonobjc extension MyClass &#123; func wobble() &#123; &#125; //ä¸ä¼šåŒ…å«éšå¼çš„ @objc&#125; Demo æ¼”ç¤º æºç  : https://github.com/ReverseScale/Swift4.0NewFeature","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"è®© Async å¸®ä½ è§£å†³çº¿ç¨‹é—®é¢˜","slug":"Library Async","date":"2018-02-23T03:56:27.000Z","updated":"2018-11-15T14:21:40.758Z","comments":true,"path":"2018/02/23/Library Async/","link":"","permalink":"https://reversescale.github.io/2018/02/23/Library Async/","excerpt":"çº¿ç¨‹è¿™ç§ä¸œè¥¿ä¸€èˆ¬å°è£…æ¯”è¾ƒæ·±ï¼Œå¾ˆå¾®è§‚ï¼Œä¹Ÿå¾ˆè€ƒå¯Ÿè®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶ç³»ç»Ÿä¸ºæˆ‘ä»¬å°è£…çš„ GCDã€NSOperation å·²ç»å¾ˆå¥½ç”¨äº†ï¼Œä½†æ˜¯æˆ‘å‘ç°äº†ä¸ªæ›´å¥½ç”¨çš„~","text":"çº¿ç¨‹è¿™ç§ä¸œè¥¿ä¸€èˆ¬å°è£…æ¯”è¾ƒæ·±ï¼Œå¾ˆå¾®è§‚ï¼Œä¹Ÿå¾ˆè€ƒå¯Ÿè®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶ç³»ç»Ÿä¸ºæˆ‘ä»¬å°è£…çš„ GCDã€NSOperation å·²ç»å¾ˆå¥½ç”¨äº†ï¼Œä½†æ˜¯æˆ‘å‘ç°äº†ä¸ªæ›´å¥½ç”¨çš„~ ğŸ¤– è¦æ±‚ iOS 9.0+ Xcode 9.0+ Swift 4 ğŸ¨ æµ‹è¯• UI ä»€ä¹ˆæ ·å­ï¼Ÿ 1.å±•ç¤ºé¡µ 2.å±•ç¤ºé¡µ 3.å±•ç¤ºé¡µ å¸¸è§åœºæ™¯åˆ—è¡¨ è€—æ—¶æ“ä½œåœºæ™¯ç¤ºä¾‹ é»‘ç§‘æŠ€æ“ä½œåœºæ™¯ç¤ºä¾‹ ğŸ¯ å®‰è£…æ–¹æ³•åœ¨ iOS, ä½ éœ€è¦åœ¨ Podfile ä¸­æ·»åŠ .12345source &apos;https://github.com/CocoaPods/Specs.git&apos;platform :ios, &apos;9.0&apos;use_frameworks!pod &apos;AsyncSwift&apos; ğŸ›  é…ç½®è€—æ—¶æ“ä½œè¿™æ˜¯åº”ç”¨æœ€å¹¿æ³›çš„åœºæ™¯ï¼Œä¸ºäº†é¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œå°†è€—æ—¶æ“ä½œæ”¾åœ¨å­çº¿ç¨‹å¤„ç†ï¼Œç„¶ååœ¨ä¸»çº¿ç¨‹ä½¿ç”¨å¤„ç†ç»“æœã€‚æ¯”å¦‚è¯»å–æ²™ç›’ä¸­çš„ä¸€äº›æ•°æ®ï¼Œç„¶åå°†è¯»å–çš„æ•°æ®å±•ç¤ºåœ¨ UIï¼Œè¿™ä¸ªåœºæ™¯è¿˜æœ‰å‡ ä¸ªç»†åˆ†ï¼š1.1 æ‰§è¡Œä¸€ä¸ªè€—æ—¶æ“ä½œåå›è°ƒä¸»çº¿ç¨‹123456Async.background &#123;print(\"A: This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_BACKGROUND.description))\") sleep(2)&#125;.main &#123; print(\"B: This is run on the \\(qos_class_self().description) (expected \\(qos_class_main().description)), after the previous block\")&#125; 1.2 ä¸²è¡Œè€—æ—¶æ“ä½œ æ¯ä¸€æ®µå­ä»»åŠ¡ä¾èµ–ä¸Šä¸€ä¸ªä»»åŠ¡å®Œæˆï¼Œå…¨éƒ¨å®Œæˆåå›è°ƒä¸»çº¿ç¨‹ï¼š1234567891011let backgroundBlock = Async.background &#123; print(\"This is run on the first\\(qos_class_self().description) (expected \\(QOS_CLASS_BACKGROUND.description))\") sleep(2) print(\"This is run on the second \\(qos_class_self().description) (expected \\(QOS_CLASS_BACKGROUND.description))\") sleep(2)&#125;// Run other code here...backgroundBlock.main &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(qos_class_main().description)), after the previous block\")&#125; 1.3 å¹¶å‘è€—æ—¶æ“ä½œ æ¯ä¸€æ®µå­ä»»åŠ¡ç‹¬ç«‹ï¼Œæ‰€æœ‰å­ä»»åŠ¡å®Œæˆåå›è°ƒä¸»çº¿ç¨‹ï¼š12345678910111213141516Async.main &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(qos_class_main().description))\") // Prints: \"This is run on the Main (expected Main) count: 1 (expected 1)\" &#125;.userInteractive &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_USER_INTERACTIVE.description))\") // Prints: \"This is run on the Main (expected Main) count: 2 (expected 2)\" &#125;.userInitiated &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_USER_INITIATED.description)) \") // Prints: \"This is run on the User Initiated (expected User Initiated) count: 3 (expected 3)\" &#125;.utility &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_UTILITY.description)) \") // Prints: \"This is run on the Utility (expected Utility) count: 4 (expected 4)\" &#125;.background &#123; print(\"This is run on the \\(qos_class_self().description) (expected \\(QOS_CLASS_BACKGROUND.description)) \") // Prints: \"This is run on the User Interactive (expected User Interactive) count: 5 (expected 5)\"&#125; å»¶æ—¶æ‰§è¡Œå»¶æ—¶ä¸€æ®µæ—¶é—´åæ‰§è¡Œä»£ç ï¼Œä¸€èˆ¬è§äºæ‰“å¼€ App ä¸€æ®µæ—¶é—´åï¼Œå¼¹å‡ºæ±‚å¥½è¯„å¯¹è¯æ¡†ã€‚123456let seconds = 3.0Async.main(after: seconds) &#123; print(\"Is called after 3 seconds\")&#125;.background(after: 6.0) &#123; print(\"At least 3.0 seconds after previous block, and 6.0 after Async code is called\")&#125; å…¶ä»–ç”¨æ³•è¯·è§ Demoã€‚ ğŸ˜¬ è”ç³» å¾®ä¿¡ : WhatsXie é‚®ä»¶ : ReverseScale@iCloud.com åšå®¢ : https://reversescale.github.io æºç  : https://github.com/ReverseScale/ThreadScenarioDemo","categories":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/categories/Project/"}],"tags":[{"name":"Project","slug":"Project","permalink":"https://reversescale.github.io/tags/Project/"}]},{"title":"é—¨ç½—å¸(Monero XMR)ç»™ä½ æœ€è½»å·§çš„çŸ¿å·¥ç”Ÿæ´»(åŒ…æ•™åŒ…ä¼š)","slug":"Monero XMR","date":"2018-02-08T18:56:27.000Z","updated":"2018-11-15T14:40:15.273Z","comments":true,"path":"2018/02/09/Monero XMR/","link":"","permalink":"https://reversescale.github.io/2018/02/09/Monero XMR/","excerpt":"ä½ å‘å¾€èººç€èµšé’±å—ï¼Ÿä½ æƒ³ä¸åŠªåŠ›å·¥ä½œå°±å®ç°è´¢åŠ¡è‡ªç”±å—ï¼Ÿä½ æƒ³ä»€ä¹ˆéƒ½ä¸åšå°±æœ‰æ•°ä¸å®Œçš„é’±å—ï¼Ÿæ´—æ´—ç¡å§~","text":"ä½ å‘å¾€èººç€èµšé’±å—ï¼Ÿä½ æƒ³ä¸åŠªåŠ›å·¥ä½œå°±å®ç°è´¢åŠ¡è‡ªç”±å—ï¼Ÿä½ æƒ³ä»€ä¹ˆéƒ½ä¸åšå°±æœ‰æ•°ä¸å®Œçš„é’±å—ï¼Ÿæ´—æ´—ç¡å§~ ä»2017å¹´8æœˆ21æ—¥å¼€å§‹ï¼ŒXMRä¸€è·¯èµ°é«˜ï¼Œä»$55å·¦å³ï¼Œä¸€è·¯ä¸Šæ¶¨ï¼Œåˆ°æœ¬æ–‡å†™ä½œæ—¶ï¼Œå·²ç»è¾¾åˆ°$269ï¼ˆâ‰ˆï¿¥1,699ï¼‰ã€‚æ•°æ®æ¥æºï¼šCrypto coins mining profit calculator compared to Ethereum é—¨ç½—å¸ï¼ˆMoneroï¼Œä»£å·XMRï¼‰æ˜¯ä¸€ä¸ªåˆ›å»ºäº2014å¹´4æœˆå¼€æºåŠ å¯†è´§å¸ï¼Œå®ƒç€é‡äºéšç§ã€åˆ†æƒå’Œå¯æ‰©å±•æ€§ã€‚ä¸è‡ªæ¯”ç‰¹å¸è¡ç”Ÿçš„è®¸å¤šåŠ å¯†è´§å¸ä¸åŒï¼ŒMoneroåŸºäºCryptoNoteåè®®ï¼Œå¹¶åœ¨åŒºå—é“¾æ¨¡ç³ŠåŒ–æ–¹é¢æœ‰æ˜¾è‘—çš„ç®—æ³•å·®å¼‚ã€‚Moneroçš„æ¨¡å—åŒ–ä»£ç ç»“æ„å¾—åˆ°äº†æ¯”ç‰¹å¸æ ¸å¿ƒç»´æŠ¤è€…ä¹‹ä¸€çš„Wladimir J. van der Laançš„èµèµã€‚Moneroè‡´åŠ›äºæˆä¸ºå¯ä»£æ›¿çš„ä¸å¯è¿½è¸ªçš„ç”µå­è´§å¸ã€‚ç›¸æ¯”æ¯”ç‰¹å¸åŠå…¶åˆ†å‰ï¼ŒMoneroå…·æœ‰æ›´é«˜ç¨‹åº¦çš„åŒ¿åæ€§ã€‚ Moneroäº2014å¹´4æœˆ18æ—¥å‘å¸ƒã€‚ é«˜æ¶¨çš„å¸ä»·ä½¿å¾—åœ¨å›½å†…ä¸€ç›´é»˜é»˜æ— é—»çš„XMRç¬é—´æˆä¸ºç„¦ç‚¹ï¼Œç°åœ¨å·²ç»å˜æˆæŒ–çŸ¿æ”¶ç›Šæœ€é«˜çš„å¸ç§ä¹‹ä¸€ã€‚ä»¥1060 3Gä¸ºä¾‹ï¼Œåœ¨ä¸è¶…é¢‘çš„æƒ…å†µä¸‹ï¼ŒæŒ–æ˜XMRçš„é€Ÿåº¦åœ¨430H/så·¦å³ï¼Œä¸è®¡ç”µè´¹ï¼Œå•å¡æ—¥æ”¶ç›Šè¾¾åˆ°$1.62ï¼Œè¶…è¿‡äº†ä¹‹å‰æ”¶ç›Šä¹‹ç‹ETHã€‚ å¦‚ä½•æŒ–çŸ¿ï¼Ÿ ä½œä¸ºçŸ¿å·¥ï¼Œå¤§å®¶æœ€å…³å¿ƒçš„åº”è¯¥è¿˜æ˜¯æ€ä¹ˆæŒ–çŸ¿äº†ï¼Œä¸‹é¢å°±å‘å¤§å®¶ä»‹ç»ä¸€ä¸‹æŒ–çŸ¿çš„æœ€è½»å·§å§¿åŠ¿ã€‚ è·å¾—ä¸€ä¸ªé’±åŒ…åœ°å€ï¼ˆæ¨èï¼‰ä½¿ç”¨åœ¨çº¿é’±åŒ…ï¼šhttps://mymonero.com/ç‰¹ç‚¹ï¼šä½¿ç”¨æ–¹ä¾¿ï¼Œå®‰å…¨æ€§å·® æˆ–è€…åœ¨XMRçš„å®˜æ–¹ç½‘ç«™ä¸‹è½½é’±åŒ… Appï¼šMonero: Downloads(https://getmonero.org/downloads/)ç‰¹ç‚¹ï¼šç›¸å¯¹å®‰å…¨ï¼Œæ–¹ä¾¿æ€§å·® å‚ä¸æŒ–çŸ¿åœ¨ç½‘ä¸Šï¼Œä½ å¯èƒ½çœ‹åˆ°è¿‡è®¸è®¸å¤šå¤šç¡¬ä»¶é©±åŠ¨çš„æŒ–çŸ¿æ–¹å¼ï¼Œç»„åˆå¤šå°‘æ˜¾å¡çš„çŸ¿æ± ï¼Œä½†æ˜¯è¿™é‡Œçš„ä¸»é¢˜æ˜¯â€œæœ€è½»å·§â€ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåšå¸®å·¥å¥½äº†ã€‚ Coinhiveæ˜¯ä¸€ä¸ªæä¾›æ¶æ„JSè„šæœ¬çš„ç½‘ç«™å¹³å°ï¼ˆhttps://coinhive.comï¼‰ï¼Œå…è®¸æ”»å‡»è€…å°†è„šæœ¬æŒ‚åœ¨åˆ°è‡ªå·±çš„æˆ–å…¥ä¾µçš„ç½‘ç«™ä¸Šï¼Œæ‰€æœ‰è®¿é—®è¯¥ç½‘ç«™çš„ç”¨æˆ·éƒ½å¯èƒ½æˆä¸ºé—¨ç½—å¸çš„æŒ–æ˜çŸ¿å·¥ã€‚è¯¥å·¥å…·åœ¨ç½‘ç»œçŠ¯ç½ªåˆ†å­ä¸­é—´è¿…é€Ÿæ‰©æ•£ï¼Œä¿¨ç„¶å·²ç»æˆä¸ºäº†äº’è”ç½‘çš„â€œMartin Shkreliâ€ã€‚ Coinhiveå·¥å…·å…¶å®æ˜¯ä¸€ä¸ªJavaåº“ï¼Œç”¨æˆ·è®¿é—®åŠ è½½è¯¥JSçš„ç½‘ç«™åï¼ŒCoinhiveçš„JSä»£ç åº“åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šè¿è¡Œï¼Œå¼€å§‹ä¸ºç½‘ç«™æ‰€æœ‰è€…æŒ–æ˜é—¨ç½—å¸ï¼Œæ¶ˆè€—çš„æ˜¯ç”¨æˆ·è‡ªå·±çš„CPUèµ„æºã€‚ ä¸å¾—ä¸è¯´ï¼Œè¿™ä¸ªæƒ³æ³•ç›¸å½“åœ°æœ‰åˆ›æ„ï¼Coinhiveäº9æœˆ14æ—¥æ¨å‡ºï¼Œä½œè€…å‘ç«™é•¿ä»¬æ¨å¹¿Coinhiveæ—¶å£°ç§°ï¼Œç«™é•¿ä»¬åŠ è½½äº†Coinhive JSå°±å¯ä»¥å®ç°ç›ˆåˆ©ï¼šå®ƒä»…è€—è´¹è®¿é—®ç”¨æˆ·çš„å°‘éƒ¨åˆ†CPUï¼Œå°±å¯ä»¥ä¸ºç½‘ç«™æ‰€æœ‰è€…èµšå–åˆ©æ¶¦ï¼Œç”¨äºæ”¯æŒä»–ä»¬çš„ä¸šåŠ¡ï¼Œå†ä¹Ÿä¸ç”¨æ·»åŠ å„ç§çƒ¦äººçš„å¹¿å‘Šäº†ã€‚ è¿™ä¸€æƒ³æ³•è·å¾—äº†æŸäº›äººçš„æ”¯æŒï¼Œåœ¨The Pirate Bayï¼ˆå…¨çƒçŸ¥åçš„BTä¸‹è½½ç½‘ç«™ï¼‰è¯•è¿è¡Œäº†ä¸¤å¤©åï¼Œç”±äºç”¨æˆ·çš„è´Ÿé¢åé¦ˆï¼Œæœ€åæ”¾å¼ƒäº†ã€‚ æœªå¼€æƒ…å†µä¸‹ CPU å ç”¨ï¼š ç†è®ºä¸Šä½ å¯ä»¥ä½¿ç”¨é—²ç½®çš„é‚£ 54.08% è¿›è¡ŒæŒ–çŸ¿ï¼Œå®æµ‹å¯¹ CPU çš„è´Ÿè·è¿˜æ˜¯å¾ˆå¤§çš„ä¸‹å›¾æ˜¯å¼€é€š100 Threads ä¸‹å¤„ç†å™¨å ç”¨æƒ…å†µï¼š çŸ¿å·¥åˆ†æˆä¹‹å‰å·²ç»ä»‹ç»è¿‡è¿™ç§æœºåˆ¶çš„åŸç†äº†ï¼Œè½»é‡ä¹Ÿæ³¨å®šç€æ”¶ç›Šä¸ä¼šå¤ªé«˜ï¼Œä½†æ˜¯ç®€å•çš„ä½¿ç”¨å´å¯ä»¥ä¸ºä½ çœä¸‹å¤§æŠŠæ—¶é—´ï¼Œç›¸ä¿¡ä½ çš„æ—¶é—´æ‰æ˜¯æœ€å®è´µçš„ã€‚ ä¸Šé¢é‚£äº›å¯¹äºåˆšåˆšæ¥è§¦çš„ä½ å¯èƒ½ä¸æ˜¯å¾ˆå—ç”¨ï¼Œé‚£æ¥çœ‹çœ‹ä¸‹é¢è¿™äº› ä»¥ä¸ºè¿™æ ·ä»¥åæ¯å¤©çš„æ—©é¤é’±å°±æœ‰äº†ï¼ŸğŸ˜†é‚£ä½ æœ€å¥½ä»”ç»†è¯»è¯»ä¸‹é¢çš„ä¸œè¥¿â€¦","categories":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://reversescale.github.io/tags/Tips/"}]},{"title":"Jenkins + Fastlane è‡ªåŠ¨æ‰“åŒ…è„šæœ¬","slug":"AutoBuildScript","date":"2017-06-20T13:55:38.000Z","updated":"2018-11-15T13:19:25.616Z","comments":true,"path":"2017/06/20/AutoBuildScript/","link":"","permalink":"https://reversescale.github.io/2017/06/20/AutoBuildScript/","excerpt":"ä½¿ç”¨ Jenkins è¿è¡Œ Fastlane å‘½ä»¤ï¼Œå®ç°å®šæ—¶è‡ªåŠ¨æ‰“åŒ…ã€ä¿®æ”¹ç‰ˆæœ¬å·ã€ä¸Šä¼  Fir æˆ–è€… TestFlight ç­‰åŠŸèƒ½ï¼Œä»æ­¤å†ä¹Ÿä¸ç”¨è¢«å°ä¼™ä¼´è¿½ç€è¦æµ‹è¯•åŒ…ã€‚ ä¸‰æ­¥é…ç½®ï¼Œæœç»æ±¡æŸ“ï¼Œä¸€æ­¥æ“ä½œè‡ªåŠ¨ä¸Šä¼ ~","text":"ä½¿ç”¨ Jenkins è¿è¡Œ Fastlane å‘½ä»¤ï¼Œå®ç°å®šæ—¶è‡ªåŠ¨æ‰“åŒ…ã€ä¿®æ”¹ç‰ˆæœ¬å·ã€ä¸Šä¼  Fir æˆ–è€… TestFlight ç­‰åŠŸèƒ½ï¼Œä»æ­¤å†ä¹Ÿä¸ç”¨è¢«å°ä¼™ä¼´è¿½ç€è¦æµ‹è¯•åŒ…ã€‚ ä¸‰æ­¥é…ç½®ï¼Œæœç»æ±¡æŸ“ï¼Œä¸€æ­¥æ“ä½œè‡ªåŠ¨ä¸Šä¼ ~ ğŸ“º æ•…äº‹èƒŒæ™¯è®°å¾—å¤§çº¦ä¸¤å¹´å‰ï¼Œå½“æ—¶åœ¨åˆ›ä¸šå…¬å¸ï¼Œå¼€å‘ä»»åŠ¡é‡ï¼Œææµ‹å‰å¸¸å¸¸åŠ ç­åˆ°æ™šä¸Š 12 ç‚¹ï¼Œå°±ç®— bug ä¿®å®Œï¼Œä¹Ÿè¦çœ‹ç€ Xcode ä¸æ…Œä¸å¿™çš„èŠ±åŠä¸ªå¤šå°æ—¶æ‰“åŒ…å®Œæˆï¼Œå†ä¸Šä¼ æµ‹è¯•å¹³å°ï¼Œå‘äº†é‚®ä»¶æ‰èƒ½å®‰å¿ƒå›å®¶ã€‚é‰´äºè¿™ç§æƒ¨ç—›ç»å†ï¼Œåˆ©ç”¨é—²æš‡æ—¶é—´å°±æä¸€æè‡ªåŠ¨æ‰“åŒ…è„šæœ¬ï¼ŒåæœŸæœ‰é…ä¸Š Jenkinsï¼Œä»æ­¤è¿‡ä¸Šäº†æ²¡ç¾æ²¡è‡Šçš„ç”Ÿæ´»ã€‚ï¼ˆå·²é€‚é… Xcode 8.2 ä¹‹åç‰ˆæœ¬ï¼‰ ğŸš€ æ¡†æ¶çš„ä¼˜åŠ¿ 1.å¸‚é¢ä¸Šæ–‡ä»¶æœ€å°‘ï¼Œä½¿ç”¨æœ€ä¾¿æ·çš„è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ 2.å†—ä½™æ–¹æ³•å°‘ï¼Œç»“æ„æ¸…æ™°ï¼Œæ³¨é‡Šé½å…¨ 3.åŒæ—¶æ”¯æŒå¤šå¹³å°ä¸Šä¼ ï¼Œå¦‚ï¼šDirã€Firã€è’²å…¬è‹±ã€App Storeç­‰ 4.å…·å¤‡è¾ƒé«˜è‡ªå®šä¹‰æ€§ 5.[è‡ªç¼–è„šæœ¬çš„æ—¶ä»£] -&gt; [Fastlane çš„æ—¶ä»£] â–ˆâ—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â–ˆ ğŸš‚ è‡ªç¼–è„šæœ¬çš„æ—¶ä»£ [ğŸš‚ è‡ªç¼–è„šæœ¬çš„æ—¶ä»£] äº†è§£ä¸€ä¸‹å³å¯ï¼Œæœ‰äº›å‡†å¤‡å·¥ä½œæä¾›å‚è€ƒï¼Œå¦‚ç¯å¢ƒå·²ç»é…ç½®å¥½ï¼Œè¯·ç›´æ¥é˜…è¯» [ğŸš„ Fastlane çš„æ—¶ä»£] ç¬¬ä¸€æ­¥ å®‰è£…fir-cilfir-cli ä½¿ç”¨ Ruby æ„å»º, æ— éœ€ç¼–è¯‘, åªè¦å®‰è£…ç›¸åº” gem å³å¯. 12$ ruby -v # &gt; 1.9.3$ gem install fir-cli å¸¸è§çš„å®‰è£…é—®é¢˜(1)ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ Ruby å®‰è£…, éœ€ç¡®ä¿ ruby-dev å·²è¢«æ­£ç¡®çš„å®‰è£…: 12$ xcode-select --install # OS X ç³»ç»Ÿ$ sudo apt-get install ruby-dev # Linux ç³»ç»Ÿ (2)ç° Permission denied ç›¸å…³é”™è¯¯: è§£å†³ï¼šåœ¨å‘½ä»¤å‰åŠ ä¸Š sudo (3)å‡ºç° Gem::RemoteFetcher::FetchError ç›¸å…³é”™è¯¯: è§£å†³ï¼šæ›´æ¢ Ruby çš„æ·˜å®æº(ç”±äºå›½å†…ç½‘ç»œåŸå› , ä½ æ‡‚çš„), å¹¶å‡çº§ä¸‹ç³»ç»Ÿè‡ªå¸¦çš„ gem12345678$ gem sources --remove https://rubygems.org/$ gem sources -a https://ruby.taobao.org/$ gem sources -l*** CURRENT SOURCES ***https://ruby.taobao.org# è¯·ç¡®ä¿åªæœ‰ ruby.taobao.org, å¦‚æœæœ‰å…¶ä»–çš„æº, è¯· remove æ‰gem update --systemgem install fir-cli (4)Mac OS X 10.11 ä»¥åçš„ç‰ˆæœ¬, ç”±äº10.11å¼•å…¥äº† rootless, æ— æ³•ç›´æ¥å®‰è£… fir-cli, æœ‰ä»¥ä¸‹ä¸‰ç§è§£å†³åŠæ³•: æ–¹æ³•ä¸€ï¼š ä½¿ç”¨ Homebrew åŠ RVM å®‰è£… Ruby, å†å®‰è£… fir-cli(æ¨è)12345# Install Homebrew:$ ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;# Install RVM:$ \\curl -sSL https://get.rvm.io | bash -s stable --ruby$ gem install fir-cli æ–¹æ³•äºŒï¼š æŒ‡å®š fir-cli ä¸­ bin æ–‡ä»¶çš„ PATH1$ export PATH=/usr/local/bin:$PATH;gem install -n /usr/local/bin fir-cli æ–¹æ³•ä¸‰ï¼š é‡å†™ Ruby Gem çš„ bindir12$ echo &apos;gem: --bindir /usr/local/bin&apos; &gt;&gt; ~/.gemrc$ gem install fir-cli ç¬¬äºŒæ­¥ ç™»å½•fir.imå…ˆåˆ° https://fir.im åˆ›å»ºé¡¹ç›®ï¼Œå¾—åˆ° API Token å¹¶å¤åˆ¶ã€‚ 1fir login å‘½ä»¤ç”¨äºä½¿ç”¨ API token ç™»å½• fir.im, å¹¶ä½¿ç”¨å‘å¸ƒåº”ç”¨ç­‰ç›¸å…³å‘½ä»¤. 1fir me å‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯. æ˜¾ç¤ºä¿¡æ¯å¦‚ä¸‹ï¼š12345678$ fir login XXX_YOUR_API_TOKEN_XXXI, [2016-03-08T12:48:56.499435 #13043] INFO -- : Login succeed, previous user&apos;s email: xxx@fir.imI, [2016-03-08T12:48:56.507044 #13043] INFO -- : Login succeed, current user&apos;s email: xxx@fir.imI, [2016-03-08T12:48:56.507147 #13043] INFO -- :$ fir meI, [2016-03-08T12:48:14.175488 #12986] INFO -- : Login succeed, current user&apos;s email: xxx@fir.imI, [2016-03-08T12:48:14.175687 #12986] INFO -- : Login succeed, current user&apos;s name: xxxI, [2016-03-08T12:48:14.175765 #12986] INFO -- : ç¬¬ä¸‰æ­¥ ä¸‹è½½å¹¶é…ç½® shell è„šæœ¬1.æŠŠæ–‡ä»¶å¤¹å¯¼å…¥å·¥ç¨‹ç›®å½•æ ¹ç›®å½•ä¸‹ 2.é…ç½® shell è„šæœ¬ 12345678# éœ€è¦æ”¹åŠ¨çš„åœ°æ–¹ (æ ¹æ®é¡¹ç›®å…·ä½“ä¿¡æ¯æ”¹åŠ¨)PROJECT_NAME = &quot;***&quot; #é¡¹ç›®åç§°VERSION = &quot;1.0.0&quot; #æ‰“åŒ…ç‰ˆæœ¬å· ä¼šæ ¹æ®ä¸åŒçš„ç‰ˆæœ¬åˆ›å»ºæ–‡ä»¶å¤¹ï¼ˆä¸é¡¹ç›®æœ¬èº«çš„ç‰ˆæœ¬å·æ— å…³ï¼‰TAGREAT_NAME = &quot;***&quot; #é¡¹ç›®å¯¹åº”targetçš„åç§°å¦‚ &quot;Meifabao_User&quot; &quot;Miefabao_stylist&quot;CONFIGURATION = &quot;Release&quot; #æ‰“åŒ…çš„ç¯å¢ƒè®¾ç½® Release ç¯å¢ƒ Debug ç¯å¢ƒPROFILE = &quot;AdHoc&quot; #é…ç½®æ–‡ä»¶åˆ†ä¸ºå››ç§ AdHoc Dev AppStore Ent åˆ†åˆ«å¯¹åº”å››ç§é…ç½®æ–‡ä»¶OUTPUT = &quot;./Packge/%s&quot; %(CONFIGURATION) #æ‰“åŒ…å¯¼å‡ºipaæ–‡ä»¶è·¯å¾„ï¼ˆè¯·ç¡®ä¿ â€œ%sâ€ ä¹‹å‰çš„æ–‡ä»¶å¤¹æ­£ç¡®å¹¶å­˜åœ¨ï¼‰ æ ¹æ®å…·ä½“é¡¹ç›®å¡«å†™ 3.æ§åˆ¶å°åˆ°é¡¹ç›®æ‰€åœ¨ç›®å½•ä¸‹ï¼Œå¯åŠ¨è„šæœ¬(å¿…è¦æ—¶åŠ ç®¡ç†å‘˜æƒé™) å¯ä»¥å°† autobuild.py æ‹–æ‹½åˆ°æ§åˆ¶å°ï¼Œæ‰§è¡Œè„šæœ¬ æ³¨ï¼šå…¶ä»–çš„åŠŸèƒ½è„šæœ¬ç”±äºå®ç”¨æ€§ä¸é«˜ï¼ˆå…¶å®æˆ‘æ‡’å¾—æï¼‰ï¼Œæš‚æ—¶æ²¡æœ‰é€‚é…ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œé…ç½®è¯•ç”¨ï¼ŒåŒ…æ‹¬ï¼šé‚®ä»¶å‘é€ã€æ‰“åŒ… App Store ç­‰ç­‰ã€‚ å½“çœ‹åˆ° æ—¶ï¼Œæ‰“åŒ…å¥½çš„é¡¹ç›®å·²ç»èººåœ¨ä½ çš„ Fir æµ‹è¯•å¹³å°ä¸­äº†ã€‚ â–ˆâ—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â–ˆ ğŸš„ Fastlane çš„æ—¶ä»£2018.08.20 æ›´æ–°ï¼šJenkins + Fastlane + GitLab + fir (æˆ–è€…è’²å…¬è‹±)ç¬¬ä¸€æ­¥ å®‰è£… FastlaneFastlane æ˜¯ä¸€å¥—ä½¿ç”¨Rubyå†™çš„è‡ªåŠ¨åŒ–å·¥å…·é›†ï¼Œç”¨äºiOSå’ŒAndroidçš„è‡ªåŠ¨åŒ–æ‰“åŒ…ã€å‘å¸ƒç­‰å·¥ä½œï¼Œå¯ä»¥èŠ‚çœå¤§é‡çš„æ—¶é—´ 1sudo gem install fastlane --verbose ç¬¬äºŒæ­¥ ç§»åŠ¨è„šæœ¬è‡³é¡¹ç›®ç›®å½•ä¸‹æ ¹æ®æ³¨é‡Šå®Œå–„è„šæœ¬é…ç½®ä¿¡æ¯ è„šæœ¬è¯´æ˜ï¼š æ”¯æŒç‰ˆæœ¬å·è‡ªå¢é•¿ æ”¯æŒä¼ å…¥è‡ªå®šçš„å®ï¼Œç”¨äºåœ¨ä»£ç é‡Œä½¿ç”¨æ­¤é¢„ç¼–è¯‘çš„å®æ¥åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œå‘å¸ƒç¯å¢ƒ æ”¯æŒè‡ªåŠ¨ä¸Šä¼ åˆ° fir å’Œ testflight ä¸Šä¼ æˆåŠŸåå¼¹çª—æç¤º ç¬¬ä¸‰æ­¥ ä¸Šä¼ ä¸Šä¼ åˆ° fir çš„ç”¨æ³•ï¼š1./build.sh -m &quot;xxxx_app_test&quot; -t test ä¸Šä¼ åˆ° testflight çš„ç”¨æ³•ï¼š1./build.sh -m &quot;xxxx_app_pro&quot; -t pro ç¬¬å››æ­¥ é…ç½® JenkinsJenkins æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæä¾›äº†ä¸€ç§æ˜“äºä½¿ç”¨çš„æŒç»­é›†æˆç³»ç»Ÿï¼Œä½¿å¼€å‘è€…ä»ç¹æ‚çš„é›†æˆä¸­è§£è„±å‡ºæ¥ï¼Œä¸“æ³¨äºæ›´ä¸ºé‡è¦çš„ä¸šåŠ¡é€»è¾‘å®ç°ä¸Šã€‚åŒæ—¶ Jenkins èƒ½å®æ–½ç›‘æ§é›†æˆä¸­å­˜åœ¨çš„é”™è¯¯ï¼Œæä¾›è¯¦ç»†çš„æ—¥å¿—æ–‡ä»¶å’Œæé†’åŠŸèƒ½ï¼Œè¿˜èƒ½ç”¨å›¾è¡¨çš„å½¢å¼å½¢è±¡åœ°å±•ç¤ºé¡¹ç›®æ„å»ºçš„è¶‹åŠ¿å’Œç¨³å®šæ€§ã€‚ ä¸‹è½½ Jenkinsï¼šç‚¹å‡» http://mirrors.jenkins.io/war-stable/latest/jenkins.war ä¸‹è½½æœ€æ–°çš„Jenkins.war è¿è¡ŒæœåŠ¡å™¨ï¼šéœ€è¦å…ˆå®‰è£… java sdk ï¼ˆhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.htmlï¼‰ 1java -jar jenkins.war è¿è¡Œ Jenkins1jenkins é…ç½® Jenkinsï¼šæµè§ˆå™¨æ‰“å¼€ http://localhost:8080/ è¾“å…¥å®‰å…¨å¯†ç ï¼Œå®‰å…¨å¯†ç å‘½ä»¤è¡Œè¾“å‡ºçš„ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚ ç„¶åè‡ªåŠ¨å®‰è£…æ¨èçš„æ’ä»¶ï¼Œå¹¶æ–°å»ºç®¡ç†å‘˜è´¦å·å¯†ç ã€‚ å®‰è£…æ’ä»¶ç™»å½•http://localhost:8080/ ï¼Œé€‰æ‹©ç³»ç»Ÿç®¡ç† - ç®¡ç†æ’ä»¶ã€‚åœ¨å¯é€‰æ’ä»¶ä¸­é€‰æ‹©GitLab Pluginï¼ŒGitlab Hook Pluginï¼Œå’Œ Cocoapod plugin è¿›è¡Œå®‰è£…ã€‚ æ„å»ºä»»åŠ¡ ç‚¹å‡»æ–°å»ºï¼Œè¾“å…¥åç§°ï¼Œæ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®ã€‚ é…ç½® Git ä»“åº“åœ°å€ï¼Œå¹¶æ·»åŠ  git è´¦å·ã€‚ é…ç½®æ„å»ºè„šæœ¬ é™„å½• æ‰§è¡Œè„šæœ¬è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆfir: command not foundè¿™ä¸ªæ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…fir-cilï¼Œå¯¼è‡´æ‰¾ä¸åˆ°ç›¸åº”çš„å‘½ä»¤è¡Œï¼Œåªéœ€è¦å®‰è£…ä¸€ä¸‹å°±è¡Œäº†ï¼Œè¯¦æƒ…è§ä¸Šæ–‡å†™çš„å¦‚ä½•å®‰è£…fir-cilã€‚ README: No such file or directoryé‚£æ˜¯å› ä¸ºä½ çš„è„šæœ¬ç›®å½•ä¸‹æ²¡æœ‰READMEçš„æ–‡ä»¶ï¼Œåªéœ€è¦å»ºä¸€ä¸ªREADMEçš„æ–‡ä»¶å°±è¡Œäº†ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°å½“å‰ä½ç½®ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š 1touch README ERROR â€“ : Token can not be blankè¿™ä¸ªåŸå› æ˜¯å› ä¸ºä½ æ²¡æœ‰ç™»å½•firå¯¼è‡´çš„ï¼Œä½ æ‰§è¡Œè¿™ä¸ªè„šæœ¬ä¹‹å‰åº”è¯¥å…ˆç™»å½•ä¸€ä¸‹firï¼Œè¯¦æƒ…è¯·çœ‹ä¸Šæ–‡å†™çš„ç™»å½•fir.imã€‚ ERROR â€“ : Code=14 (æ²¡æœ‰è¯•ç”¨çš„è®¾å¤‡ Domain=IDEDistributionErrorDomain Code=14 â€œNo applicable devicesåŸå› ï¼šrvm ruby é…ç½®é”™è¯¯ è§£å†³ï¼šæ§åˆ¶å° rvm system â–ˆâ—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â–ˆ 2018.08.20 æ›´æ–°ï¼šJenkins ç›¸å…³è®¾ç½®æ–¹æ³•æŸ¥çœ‹ç«¯å£å ç”¨ç«¯å£å ç”¨ ä½¿ç”¨ lsof ä¼šåˆ—ä¸¾æ‰€æœ‰å ç”¨çš„ç«¯å£åˆ—è¡¨ï¼š 1lsof ä½¿ç”¨lesså¯ä»¥ç”¨äºåˆ†é¡µå±•ç¤ºï¼Œå¦‚ï¼š 1lsof | less ä¹Ÿå¯ä»¥ä½¿ç”¨ -i æŸ¥çœ‹æŸä¸ªç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œå¦‚ï¼š 1lsof -i:3000 æ€æ­»è¿›ç¨‹ 1kill PIDï¼ˆè¿›ç¨‹çš„PIDï¼Œå¦‚2044ï¼‰ Jenkins æ”¹æ—¶åŒºhttp://your-jenkins/systemInfoï¼ŒæŸ¥çœ‹user.timezoneå˜é‡çš„å€¼ åœ¨jenkinsçš„ã€ç³»ç»Ÿç®¡ç†ã€‘-ã€è„šæœ¬å‘½ä»¤è¡Œã€‘é‡Œè¿è¡Œ 1System.setProperty(&apos;org.apache.commons.jelly.tags.fmt.timeZone&apos;, &apos;Asia/Shanghai&apos;) Jenkins æ„å»ºè¶…æ—¶jenkinsçš„â€build timeout pluginâ€æ’ä»¶å¯ä»¥å¸®æˆ‘ä»¬å®Œæˆè¯¥ä»»åŠ¡ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯jenkins-2.7.1, é»˜è®¤å°±å·²ç»å®‰è£…äº†è¯¥æ’ä»¶ï¼Œå¦‚æœé»˜è®¤æ²¡æœ‰å®‰è£…å¯åœ¨æ’ä»¶ç®¡ç†ä¸­æœç´¢è¿›è¡Œå®‰è£…ã€‚ Jenkins å®šæ—¶æ„å»ºå’ŒPoll SCMçš„åŒºåˆ« Build periodicallyï¼šå‘¨æœŸè¿›è¡Œé¡¹ç›®æ„å»ºï¼ˆæºç æ˜¯å¦å‘ç”Ÿå˜åŒ–æ²¡æœ‰å…³ç³»ï¼‰ Poll SCMï¼šå®šæ—¶æ£€æŸ¥æºç å˜æ›´ï¼Œå¦‚æœæœ‰æ›´æ–°å°±checkoutæœ€æ–°codeä¸‹æ¥ï¼Œç„¶åæ‰§è¡Œæ„å»ºåŠ¨ä½œ 12345678910111213æ¯15åˆ†é’Ÿæ„å»ºä¸€æ¬¡ï¼šH/15 * * * * æˆ– */5 * * * *æ¯å¤©8ç‚¹æ„å»ºä¸€æ¬¡ï¼š0 8 * * *æ¯å¤©8ç‚¹~17ç‚¹ï¼Œä¸¤å°æ—¶æ„å»ºä¸€æ¬¡ï¼š0 8-17/2 * * *å‘¨ä¸€åˆ°å‘¨äº”ï¼Œ8ç‚¹~17ç‚¹ï¼Œä¸¤å°æ—¶æ„å»ºä¸€æ¬¡ï¼š0 8-17/2 * * 1-5æ¯æœˆ1å·ã€15å·å„æ„å»ºä¸€æ¬¡ï¼Œé™¤12æœˆï¼šH H 1,15 1-11 **/5 * * * * ï¼ˆæ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡æºç å˜åŒ–ï¼‰0 2 * * * ï¼ˆæ¯å¤©2:00 å¿…é¡»buildä¸€æ¬¡æºç ï¼‰ â–ˆâ—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â—¤â—¢â–ˆ ğŸ•¹ agvtool å‘½ä»¤è¡Œ2018.08.20 æ›´æ–°ï¼šagvtool å‘½ä»¤è¡Œ ç®¡ç†ç‰ˆæœ¬å·å¸¸ç”¨å‘½ä»¤è¡Œï¼šè®¾ç½® ç‰ˆæœ¬å· ä¸º 1.1.01xcrun agvtool new-marketing-version 1.1.0 è®¾ç½® build å· è‡ªåŠ¨åŠ 11xcrun agvtool next-version -all ç®€ä»‹agvtool æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå…è®¸ä½ è‡ªåŠ¨é€’å¢åˆ°ä¸‹ä¸€ä¸ªæœ€é«˜çš„æ•°é‡æˆ–å…·ä½“çš„æ•°å­—è¿™äº›æ•°å­—ã€‚ ä¿®æ”¹Xcodeçš„é»˜è®¤è®¾ç½®é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ä¸ä½¿ç”¨ä»»ä½•ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚è®¾ç½®ç‰ˆæœ¬ç³»ç»Ÿè‹¹æœé€šç”¨ç¡®ä¿ Xcode å°†åŒ…æ‹¬åœ¨ä½ çš„é¡¹ç›®ä¸­ç”Ÿæˆçš„æ‰€æœ‰agvtoolç‰ˆæœ¬ä¿¡æ¯ã€‚ ä¸Šå›¾ï¼šè®¾ç½®å½“å‰é¡¹ç›®çš„ç‰ˆæœ¬å’Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„æ„å»ºè®¾ç½® è®¾ç½®ä½ çš„ç‰ˆæœ¬å·å’Œ bulid ç‰ˆæœ¬å·agvtool æŸ¥è¯¢åº”ç”¨ç¨‹åºçš„ Info.plist å¾—åˆ°ä½ çš„ç‰ˆæœ¬å’Œ bulid ç‰ˆæœ¬å·ã€‚ æ‰€ä»¥ç¡®ä¿ CFBundleVersion (Bundle version) å’Œ CFBundleShortVersionString (Bundle versions string, shortï¼‰çš„ key åœ¨ä½ çš„ Info.plist ä¸­ã€‚ ä¸Šå›¾ï¼šinfo.plist å‘½ä»¤è¡Œæ“ä½œæ›´æ–°ç‰ˆæœ¬å·é€€å‡ºXcodeï¼Œç„¶åå¯¼èˆªåˆ°åŒ…å«é¡¹ç›®çš„ç›®å½•ï¼Œè¿è¡Œä¸‹åˆ—å‘½ä»¤åœ¨ç»ˆç«¯åº”ç”¨ agvtool å±æ€§å·¥ä½œã€‚ è®¾ç½® ç‰ˆæœ¬å· ä¸º 1.1.01xcrun agvtool new-marketing-version 1.1.0 è®¾ç½® build å· è‡ªåŠ¨åŠ 11xcrun agvtool next-version -all è®¾ç½® build å·ä¸º 311xcrun agvtool new-version -all 31 æŸ¥çœ‹ Version Numbers1xcrun agvtool what-marketing-version æŸ¥çœ‹ Build Numbers1xcrun agvtool what-version ğŸ˜¬ è”ç³» å¾®ä¿¡ : WhatsXie é‚®ä»¶ : ReverseScale@iCloud.com åšå®¢ : https://reversescale.github.io","categories":[{"name":"Script","slug":"Script","permalink":"https://reversescale.github.io/categories/Script/"}],"tags":[{"name":"Script","slug":"Script","permalink":"https://reversescale.github.io/tags/Script/"}]},{"title":"GoF è®¾è®¡æ¨¡å¼ + æƒ…æ™¯å†ç°","slug":"Design patterns Gof","date":"2017-03-01T12:29:16.000Z","updated":"2018-11-15T13:19:15.263Z","comments":true,"path":"2017/03/01/Design patterns Gof/","link":"","permalink":"https://reversescale.github.io/2017/03/01/Design patterns Gof/","excerpt":"ã€ŠDesign Patterns: Elements of Reusable Object-Oriented Softwareã€‹ï¼ˆå³åè¿°ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ï¼‰ï¼Œç”± Erich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides åˆè‘—ï¼ˆAddison-Wesleyï¼Œ1995ï¼‰ï¼Œè¿™å‡ ä½ä½œè€…å¸¸è¢«ç§°ä¸ºâ€å››äººç»„ï¼ˆGang of Fourï¼‰â€~","text":"ã€ŠDesign Patterns: Elements of Reusable Object-Oriented Softwareã€‹ï¼ˆå³åè¿°ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ï¼‰ï¼Œç”± Erich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides åˆè‘—ï¼ˆAddison-Wesleyï¼Œ1995ï¼‰ï¼Œè¿™å‡ ä½ä½œè€…å¸¸è¢«ç§°ä¸ºâ€å››äººç»„ï¼ˆGang of Fourï¼‰â€~ è®¾è®¡æ¨¡å¼å’Œæƒ…æ™¯å†ç°åˆ›å»ºå‹æ¨¡å¼1ã€ABSTRACT FACTORYâ€”è¿½MMå°‘ä¸äº†è¯·åƒé¥­äº†ï¼Œéº¦å½“åŠ³çš„å¥—é¤å’Œè‚¯å¾·åŸºçš„å¥—é¤éƒ½æ˜¯MMçˆ±åƒçš„ä¸œè¥¿ï¼Œè™½ç„¶å£å‘³æœ‰æ‰€ä¸åŒï¼Œä½†ä¸ç®¡ä½ å¸¦MMå»éº¦å½“åŠ³æˆ–è‚¯å¾·åŸºï¼Œåªç®¡å‘æœåŠ¡å‘˜è¯´â€œä¸¤ä¸ªBå¥—é¤â€å°±è¡Œäº†ã€‚éº¦å½“åŠ³å’Œè‚¯å¾·åŸºå°±æ˜¯Bå¥—é¤çš„Abstract Factory, Bå¥—é¤é‡Œå«æœ‰æ±‰å ¡, é¸¡ç¿…å’Œé¥®æ–™. éº¦å½“åŠ³æˆ–è‚¯å¾·åŸºä¼šæ ¹æ®Bå¥—é¤çš„è§„æ ¼, è®©æ±‰å ¡Factory, é¸¡ç¿…Factory, é¥®æ–™Factoryåˆ†åˆ«ç”Ÿäº§å¯¹åº”Bå¥—é¤çš„ææ–™ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šå®¢æˆ·ç±»å’Œå·¥å‚ç±»åˆ†å¼€ã€‚æ¶ˆè´¹è€…ä»»ä½•æ—¶å€™éœ€è¦æŸå¥—äº§å“é›†åˆæ—¶ï¼Œåªéœ€å‘æŠ½è±¡å·¥å‚è¯·æ±‚å³å¯ã€‚æŠ½è±¡å·¥å‚ä¼šå†å‘å…·ä½“çš„å·¥å‚ç”Ÿäº§å‡ºç¬¦åˆäº§å“é›†è§„æ ¼çš„äº§å“ã€‚ 2ã€BUILDERâ€”MMæœ€çˆ±å¬çš„å°±æ˜¯â€œæˆ‘çˆ±ä½ â€è¿™å¥è¯äº†ï¼Œè§åˆ°ä¸åŒåœ°æ–¹çš„MM,è¦èƒ½å¤Ÿç”¨å¥¹ä»¬çš„æ–¹è¨€è·Ÿå¥¹è¯´è¿™å¥è¯å“¦ï¼Œæˆ‘æœ‰ä¸€ä¸ªå¤šç§è¯­è¨€ç¿»è¯‘æœºï¼Œä¸Šé¢æ¯ç§è¯­è¨€éƒ½æœ‰ä¸€ä¸ªæŒ‰é”®ï¼Œè§åˆ°MMæˆ‘åªè¦æŒ‰å¯¹åº”çš„é”®ï¼Œå®ƒå°±èƒ½å¤Ÿç”¨ç›¸åº”çš„è¯­è¨€è¯´å‡ºâ€œæˆ‘çˆ±ä½ â€è¿™å¥è¯äº†ï¼Œå›½å¤–çš„MMä¹Ÿå¯ä»¥è½»æ¾ææ‚ï¼Œè¿™å°±æ˜¯æˆ‘çš„â€œæˆ‘çˆ±ä½ â€builderã€‚ï¼ˆè¿™ä¸€å®šæ¯”ç¾å†›åœ¨ä¼Šæ‹‰å…‹ç”¨çš„ç¿»è¯‘æœºå¥½å–ï¼‰å»ºé€ æ¨¡å¼ï¼šå°†äº§å“çš„å†…éƒ¨è¡¨è±¡å’Œäº§å“çš„ç”Ÿæˆè¿‡ç¨‹åˆ†å‰²å¼€æ¥ï¼Œä»è€Œä½¿ä¸€ä¸ªå»ºé€ è¿‡ç¨‹ç”Ÿæˆå…·æœ‰ä¸åŒçš„å†…éƒ¨è¡¨è±¡çš„äº§å“å¯¹è±¡ã€‚å»ºé€ æ¨¡å¼ä½¿å¾—äº§å“å†…éƒ¨è¡¨è±¡å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ï¼Œå®¢æˆ·ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ã€‚å»ºé€ æ¨¡å¼å¯ä»¥å¼ºåˆ¶å®è¡Œä¸€ç§åˆ†æ­¥éª¤è¿›è¡Œçš„å»ºé€ è¿‡ç¨‹ã€‚ 3ã€FACTORY METHODâ€”è¯·MMå»éº¦å½“åŠ³åƒæ±‰å ¡ï¼Œä¸åŒçš„MMæœ‰ä¸åŒçš„å£å‘³ï¼Œè¦æ¯ä¸ªéƒ½è®°ä½æ˜¯ä¸€ä»¶çƒ¦äººçš„äº‹æƒ…ï¼Œæˆ‘ä¸€èˆ¬é‡‡ç”¨Factory Methodæ¨¡å¼ï¼Œå¸¦ç€MMåˆ°æœåŠ¡å‘˜é‚£å„¿ï¼Œè¯´â€œè¦ä¸€ä¸ªæ±‰å ¡â€ï¼Œå…·ä½“è¦ä»€ä¹ˆæ ·çš„æ±‰å ¡å‘¢ï¼Œè®©MMç›´æ¥è·ŸæœåŠ¡å‘˜è¯´å°±è¡Œäº†ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šæ ¸å¿ƒå·¥å‚ç±»ä¸å†è´Ÿè´£æ‰€æœ‰äº§å“çš„åˆ›å»ºï¼Œè€Œæ˜¯å°†å…·ä½“åˆ›å»ºçš„å·¥ä½œäº¤ç»™å­ç±»å»åšï¼Œæˆä¸ºä¸€ä¸ªæŠ½è±¡å·¥å‚è§’è‰²ï¼Œä»…è´Ÿè´£ç»™å‡ºå…·ä½“å·¥å‚ç±»å¿…é¡»å®ç°çš„æ¥å£ï¼Œè€Œä¸æ¥è§¦å“ªä¸€ä¸ªäº§å“ç±»åº”å½“è¢«å®ä¾‹åŒ–è¿™ç§ç»†èŠ‚ã€‚ 4ã€PROTOTYPEâ€”è·ŸMMç”¨QQèŠå¤©ï¼Œä¸€å®šè¦è¯´äº›æ·±æƒ…çš„è¯è¯­äº†ï¼Œæˆ‘æœé›†äº†å¥½å¤šè‚‰éº»çš„æƒ…è¯ï¼Œéœ€è¦æ—¶åªè¦copyå‡ºæ¥æ”¾åˆ°QQé‡Œé¢å°±è¡Œäº†ï¼Œè¿™å°±æ˜¯æˆ‘çš„æƒ…è¯prototypeäº†ã€‚ï¼ˆ100å—é’±ä¸€ä»½ï¼Œä½ è¦ä¸è¦ï¼‰åŸå§‹æ¨¡å‹æ¨¡å¼ï¼šé€šè¿‡ç»™å‡ºä¸€ä¸ªåŸå‹å¯¹è±¡æ¥æŒ‡æ˜æ‰€è¦åˆ›å»ºçš„å¯¹è±¡çš„ç±»å‹ï¼Œç„¶åç”¨å¤åˆ¶è¿™ä¸ªåŸå‹å¯¹è±¡çš„æ–¹æ³•åˆ›å»ºå‡ºæ›´å¤šåŒç±»å‹çš„å¯¹è±¡ã€‚åŸå§‹æ¨¡å‹æ¨¡å¼å…è®¸åŠ¨æ€çš„å¢åŠ æˆ–å‡å°‘äº§å“ç±»ï¼Œäº§å“ç±»ä¸éœ€è¦éå¾—æœ‰ä»»ä½•äº‹å…ˆç¡®å®šçš„ç­‰çº§ç»“æ„ï¼ŒåŸå§‹æ¨¡å‹æ¨¡å¼é€‚ç”¨äºä»»ä½•çš„ç­‰çº§ç»“æ„ã€‚ç¼ºç‚¹æ˜¯æ¯ä¸€ä¸ªç±»éƒ½å¿…é¡»é…å¤‡ä¸€ä¸ªå…‹éš†æ–¹æ³•ã€‚ 5ã€SINGLETONâ€”ä¿ºæœ‰6ä¸ªæ¼‚äº®çš„è€å©†ï¼Œå¥¹ä»¬çš„è€å…¬éƒ½æ˜¯æˆ‘ï¼Œæˆ‘å°±æ˜¯æˆ‘ä»¬å®¶é‡Œçš„è€å…¬Singletonï¼Œå¥¹ä»¬åªè¦è¯´é“â€œè€å…¬â€ï¼Œéƒ½æ˜¯æŒ‡çš„åŒä¸€ä¸ªäººï¼Œé‚£å°±æ˜¯æˆ‘ã€‚(åˆšæ‰åšäº†ä¸ªæ¢¦å•¦ï¼Œå“ªæœ‰è¿™ä¹ˆå¥½çš„äº‹)å•ä¾‹æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹å•ä¾‹æ¨¡å¼ã€‚å•ä¾‹æ¨¡å¼åªåº”åœ¨æœ‰çœŸæ­£çš„â€œå•ä¸€å®ä¾‹â€çš„éœ€æ±‚æ—¶æ‰å¯ä½¿ç”¨ã€‚ ç»“æ„å‹æ¨¡å¼6ã€ADAPTERâ€”åœ¨æœ‹å‹èšä¼šä¸Šç¢°åˆ°äº†ä¸€ä¸ªç¾å¥³Sarahï¼Œä»é¦™æ¸¯æ¥çš„ï¼Œå¯æˆ‘ä¸ä¼šè¯´ç²¤è¯­ï¼Œå¥¹ä¸ä¼šè¯´æ™®é€šè¯ï¼Œåªå¥½æ±‚åŠ©äºæˆ‘çš„æœ‹å‹kentäº†ï¼Œä»–ä½œä¸ºæˆ‘å’ŒSarahä¹‹é—´çš„Adapterï¼Œè®©æˆ‘å’ŒSarahå¯ä»¥ç›¸äº’äº¤è°ˆäº†(ä¹Ÿä¸çŸ¥é“ä»–ä¼šä¸ä¼šè€æˆ‘)é€‚é…å™¨ï¼ˆå˜å‹å™¨ï¼‰æ¨¡å¼ï¼šæŠŠä¸€ä¸ªç±»çš„æ¥å£å˜æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æ¥å£ï¼Œä»è€Œä½¿åŸæœ¬å› æ¥å£åŸå› ä¸åŒ¹é…è€Œæ— æ³•ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªç±»èƒ½å¤Ÿä¸€èµ·å·¥ä½œã€‚é€‚é…ç±»å¯ä»¥æ ¹æ®å‚æ•°è¿”è¿˜ä¸€ä¸ªåˆé€‚çš„å®ä¾‹ç»™å®¢æˆ·ç«¯ã€‚ 7ã€BRIDGEâ€”æ—©ä¸Šç¢°åˆ°MMï¼Œè¦è¯´æ—©ä¸Šå¥½ï¼Œæ™šä¸Šç¢°åˆ°MMï¼Œè¦è¯´æ™šä¸Šå¥½ï¼›ç¢°åˆ°MMç©¿äº†ä»¶æ–°è¡£æœï¼Œè¦è¯´ä½ çš„è¡£æœå¥½æ¼‚äº®å“¦ï¼Œç¢°åˆ°MMæ–°åšçš„å‘å‹ï¼Œè¦è¯´ä½ çš„å¤´å‘å¥½æ¼‚äº®å“¦ã€‚ä¸è¦é—®æˆ‘â€œæ—©ä¸Šç¢°åˆ°MMæ–°åšäº†ä¸ªå‘å‹æ€ä¹ˆè¯´â€è¿™ç§é—®é¢˜ï¼Œè‡ªå·±ç”¨BRIDGEç»„åˆä¸€ä¸‹ä¸å°±è¡Œäº†ã€‚æ¡¥æ¢æ¨¡å¼ï¼šå°†æŠ½è±¡åŒ–ä¸å®ç°åŒ–è„±è€¦ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´å°†ä»–ä»¬ä¹‹é—´çš„å¼ºå…³è”å˜æˆå¼±å…³è”ï¼Œä¹Ÿå°±æ˜¯æŒ‡åœ¨ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿçš„æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´ä½¿ç”¨ç»„åˆ/èšåˆå…³ç³»è€Œä¸æ˜¯ç»§æ‰¿å…³ç³»ï¼Œä»è€Œä½¿ä¸¤è€…å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚ 8ã€COMPOSITEâ€”Maryä»Šå¤©è¿‡ç”Ÿæ—¥ã€‚â€œæˆ‘è¿‡ç”Ÿæ—¥ï¼Œä½ è¦é€æˆ‘ä¸€ä»¶ç¤¼ç‰©ã€‚â€â€œå—¯ï¼Œå¥½å§ï¼Œå»å•†åº—ï¼Œä½ è‡ªå·±æŒ‘ã€‚â€â€œè¿™ä»¶Tæ¤æŒºæ¼‚äº®ï¼Œä¹°ï¼Œè¿™æ¡è£™å­å¥½çœ‹ï¼Œä¹°ï¼Œè¿™ä¸ªåŒ…ä¹Ÿä¸é”™ï¼Œä¹°ã€‚â€â€œå–‚ï¼Œä¹°äº†ä¸‰ä»¶äº†å‘€ï¼Œæˆ‘åªç­”åº”é€ä¸€ä»¶ç¤¼ç‰©çš„å“¦ã€‚â€â€œä»€ä¹ˆå‘€ï¼ŒTæ¤åŠ è£™å­åŠ åŒ…åŒ…ï¼Œæ­£å¥½é…æˆä¸€å¥—å‘€ï¼Œå°å§ï¼Œéº»çƒ¦ä½ åŒ…èµ·æ¥ã€‚â€â€œâ€¦â€¦â€ï¼ŒMMéƒ½ä¼šç”¨Compositeæ¨¡å¼äº†ï¼Œä½ ä¼šäº†æ²¡æœ‰ï¼Ÿåˆæˆæ¨¡å¼ï¼šåˆæˆæ¨¡å¼å°†å¯¹è±¡ç»„ç»‡åˆ°æ ‘ç»“æ„ä¸­ï¼Œå¯ä»¥ç”¨æ¥æè¿°æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚åˆæˆæ¨¡å¼å°±æ˜¯ä¸€ä¸ªå¤„ç†å¯¹è±¡çš„æ ‘ç»“æ„çš„æ¨¡å¼ã€‚åˆæˆæ¨¡å¼æŠŠéƒ¨åˆ†ä¸æ•´ä½“çš„å…³ç³»ç”¨æ ‘ç»“æ„è¡¨ç¤ºå‡ºæ¥ã€‚åˆæˆæ¨¡å¼ä½¿å¾—å®¢æˆ·ç«¯æŠŠä¸€ä¸ªä¸ªå•ç‹¬çš„æˆåˆ†å¯¹è±¡å’Œç”±ä»–ä»¬å¤åˆè€Œæˆçš„åˆæˆå¯¹è±¡åŒç­‰çœ‹å¾…ã€‚ 9ã€DECORATORâ€”Maryè¿‡å®Œè½®åˆ°Sarlyè¿‡ç”Ÿæ—¥ï¼Œè¿˜æ˜¯ä¸è¦å«å¥¹è‡ªå·±æŒ‘äº†ï¼Œä¸ç„¶è¿™ä¸ªæœˆä¼™é£Ÿè´¹è‚¯å®šç©å®Œï¼Œæ‹¿å‡ºæˆ‘å»å¹´åœ¨åå±±é¡¶ä¸Šç…§çš„ç…§ç‰‡ï¼Œåœ¨èƒŒé¢å†™ä¸Šâ€œæœ€å¥½çš„çš„ç¤¼ç‰©ï¼Œå°±æ˜¯çˆ±ä½ çš„Fitaâ€ï¼Œå†åˆ°è¡—ä¸Šç¤¼å“åº—ä¹°äº†ä¸ªåƒæ¡†ï¼ˆå–ç¤¼å“çš„MMä¹Ÿå¾ˆæ¼‚äº®å“¦ï¼‰ï¼Œå†æ‰¾éš”å£æç¾æœ¯è®¾è®¡çš„Mikeè®¾è®¡äº†ä¸€ä¸ªæ¼‚äº®çš„ç›’å­è£…èµ·æ¥â€¦â€¦ï¼Œæˆ‘ä»¬éƒ½æ˜¯Decoratorï¼Œæœ€ç»ˆéƒ½åœ¨ä¿®é¥°æˆ‘è¿™ä¸ªäººå‘€ï¼Œæ€ä¹ˆæ ·ï¼Œçœ‹æ‡‚äº†å—ï¼Ÿè£…é¥°æ¨¡å¼ï¼šè£…é¥°æ¨¡å¼ä»¥å¯¹å®¢æˆ·ç«¯é€æ˜çš„æ–¹å¼æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œæ˜¯ç»§æ‰¿å…³ç³»çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼Œæä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»æ€§ã€‚åŠ¨æ€ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥å†åŠ¨æ€çš„æ’¤æ¶ˆã€‚å¢åŠ ç”±ä¸€äº›åŸºæœ¬åŠŸèƒ½çš„æ’åˆ—ç»„åˆè€Œäº§ç”Ÿçš„éå¸¸å¤§é‡çš„åŠŸèƒ½ã€‚ 10ã€FACADEâ€”æˆ‘æœ‰ä¸€ä¸ªä¸“ä¸šçš„Nikonç›¸æœºï¼Œæˆ‘å°±å–œæ¬¢è‡ªå·±æ‰‹åŠ¨è°ƒå…‰åœˆã€å¿«é—¨ï¼Œè¿™æ ·ç…§å‡ºæ¥çš„ç…§ç‰‡æ‰ä¸“ä¸šï¼Œä½†MMå¯ä¸æ‡‚è¿™äº›ï¼Œæ•™äº†åŠå¤©ä¹Ÿä¸ä¼šã€‚å¹¸å¥½ç›¸æœºæœ‰Facadeè®¾è®¡æ¨¡å¼ï¼ŒæŠŠç›¸æœºè°ƒæ•´åˆ°è‡ªåŠ¨æ¡£ï¼Œåªè¦å¯¹å‡†ç›®æ ‡æŒ‰å¿«é—¨å°±è¡Œäº†ï¼Œä¸€åˆ‡ç”±ç›¸æœºè‡ªåŠ¨è°ƒæ•´ï¼Œè¿™æ ·MMä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªç›¸æœºç»™æˆ‘æ‹å¼ ç…§ç‰‡äº†ã€‚é—¨é¢æ¨¡å¼ï¼šå¤–éƒ¨ä¸ä¸€ä¸ªå­ç³»ç»Ÿçš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„é—¨é¢å¯¹è±¡è¿›è¡Œã€‚é—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºä½¿ç”¨ã€‚æ¯ä¸€ä¸ªå­ç³»ç»Ÿåªæœ‰ä¸€ä¸ªé—¨é¢ç±»ï¼Œè€Œä¸”æ­¤é—¨é¢ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ã€‚ä½†æ•´ä¸ªç³»ç»Ÿå¯ä»¥æœ‰å¤šä¸ªé—¨é¢ç±»ã€‚ 11ã€FLYWEIGHTâ€”æ¯å¤©è·ŸMMå‘çŸ­ä¿¡ï¼Œæ‰‹æŒ‡éƒ½ç´¯æ­»äº†ï¼Œæœ€è¿‘ä¹°äº†ä¸ªæ–°æ‰‹æœºï¼Œå¯ä»¥æŠŠä¸€äº›å¸¸ç”¨çš„å¥å­å­˜åœ¨æ‰‹æœºé‡Œï¼Œè¦ç”¨çš„æ—¶å€™ï¼Œç›´æ¥æ‹¿å‡ºæ¥ï¼Œåœ¨å‰é¢åŠ ä¸ŠMMçš„åå­—å°±å¯ä»¥å‘é€äº†ï¼Œå†ä¸ç”¨ä¸€ä¸ªå­—ä¸€ä¸ªå­—æ•²äº†ã€‚å…±äº«çš„å¥å­å°±æ˜¯Flyweightï¼ŒMMçš„åå­—å°±æ˜¯æå–å‡ºæ¥çš„å¤–éƒ¨ç‰¹å¾ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡æƒ…å†µä½¿ç”¨ã€‚äº«å…ƒæ¨¡å¼ï¼šFLYWEIGHTåœ¨æ‹³å‡»æ¯”èµ›ä¸­æŒ‡æœ€è½»é‡çº§ã€‚äº«å…ƒæ¨¡å¼ä»¥å…±äº«çš„æ–¹å¼é«˜æ•ˆçš„æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦å¯¹è±¡ã€‚äº«å…ƒæ¨¡å¼èƒ½åšåˆ°å…±äº«çš„å…³é”®æ˜¯åŒºåˆ†å†…è•´çŠ¶æ€å’Œå¤–è•´çŠ¶æ€ã€‚å†…è•´çŠ¶æ€å­˜å‚¨åœ¨äº«å…ƒå†…éƒ¨ï¼Œä¸ä¼šéšç¯å¢ƒçš„æ”¹å˜è€Œæœ‰æ‰€ä¸åŒã€‚å¤–è•´çŠ¶æ€æ˜¯éšç¯å¢ƒçš„æ”¹å˜è€Œæ”¹å˜çš„ã€‚å¤–è•´çŠ¶æ€ä¸èƒ½å½±å“å†…è•´çŠ¶æ€ï¼Œå®ƒä»¬æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚å°†å¯ä»¥å…±äº«çš„çŠ¶æ€å’Œä¸å¯ä»¥å…±äº«çš„çŠ¶æ€ä»å¸¸è§„ç±»ä¸­åŒºåˆ†å¼€æ¥ï¼Œå°†ä¸å¯ä»¥å…±äº«çš„çŠ¶æ€ä»ç±»é‡Œå‰”é™¤å‡ºå»ã€‚å®¢æˆ·ç«¯ä¸å¯ä»¥ç›´æ¥åˆ›å»ºè¢«å…±äº«çš„å¯¹è±¡ï¼Œè€Œåº”å½“ä½¿ç”¨ä¸€ä¸ªå·¥å‚å¯¹è±¡è´Ÿè´£åˆ›å»ºè¢«å…±äº«çš„å¯¹è±¡ã€‚äº«å…ƒæ¨¡å¼å¤§å¹…åº¦çš„é™ä½å†…å­˜ä¸­å¯¹è±¡çš„æ•°é‡ã€‚ 12ã€PROXYâ€”è·ŸMMåœ¨ç½‘ä¸ŠèŠå¤©ï¼Œä¸€å¼€å¤´æ€»æ˜¯â€œhi,ä½ å¥½â€,â€œä½ ä»å“ªå„¿æ¥å‘€ï¼Ÿâ€â€œä½ å¤šå¤§äº†ï¼Ÿâ€â€œèº«é«˜å¤šå°‘å‘€ï¼Ÿâ€è¿™äº›è¯ï¼ŒçœŸçƒ¦äººï¼Œå†™ä¸ªç¨‹åºåšä¸ºæˆ‘çš„Proxyå§ï¼Œå‡¡æ˜¯æ¥æ”¶åˆ°è¿™äº›è¯éƒ½è®¾ç½®å¥½äº†è‡ªåŠ¨çš„å›ç­”ï¼Œæ¥æ”¶åˆ°å…¶ä»–çš„è¯æ—¶å†é€šçŸ¥æˆ‘å›ç­”ï¼Œæ€ä¹ˆæ ·ï¼Œé…·å§ã€‚ä»£ç†æ¨¡å¼ï¼šä»£ç†æ¨¡å¼ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹æºå¯¹è±¡çš„å¼•ç”¨ã€‚ä»£ç†å°±æ˜¯ä¸€ä¸ªäººæˆ–ä¸€ä¸ªæœºæ„ä»£è¡¨å¦ä¸€ä¸ªäººæˆ–è€…ä¸€ä¸ªæœºæ„é‡‡å–è¡ŒåŠ¨ã€‚æŸäº›æƒ…å†µä¸‹ï¼Œå®¢æˆ·ä¸æƒ³æˆ–è€…ä¸èƒ½å¤Ÿç›´æ¥å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·å’Œç›®æ ‡å¯¹è±¡ç›´æ¥èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨ã€‚å®¢æˆ·ç«¯åˆ†è¾¨ä¸å‡ºä»£ç†ä¸»é¢˜å¯¹è±¡ä¸çœŸå®ä¸»é¢˜å¯¹è±¡ã€‚ä»£ç†æ¨¡å¼å¯ä»¥å¹¶ä¸çŸ¥é“çœŸæ­£çš„è¢«ä»£ç†å¯¹è±¡ï¼Œè€Œä»…ä»…æŒæœ‰ä¸€ä¸ªè¢«ä»£ç†å¯¹è±¡çš„æ¥å£ï¼Œè¿™æ—¶å€™ä»£ç†å¯¹è±¡ä¸èƒ½å¤Ÿåˆ›å»ºè¢«ä»£ç†å¯¹è±¡ï¼Œè¢«ä»£ç†å¯¹è±¡å¿…é¡»æœ‰ç³»ç»Ÿçš„å…¶ä»–è§’è‰²ä»£ä¸ºåˆ›å»ºå¹¶ä¼ å…¥ã€‚ è¡Œä¸ºæ¨¡å¼13ã€CHAIN OF RESPONSIBILITYâ€”æ™šä¸Šå»ä¸Šè‹±è¯­è¯¾ï¼Œä¸ºäº†å¥½å¼€æºœååˆ°äº†æœ€åä¸€æ’ï¼Œå“‡ï¼Œå‰é¢åäº†å¥½å‡ ä¸ªæ¼‚äº®çš„MMå“ï¼Œæ‰¾å¼ çº¸æ¡ï¼Œå†™ä¸Šâ€œHi,å¯ä»¥åšæˆ‘çš„å¥³æœ‹å‹å—ï¼Ÿå¦‚æœä¸æ„¿æ„è¯·å‘å‰ä¼ â€ï¼Œçº¸æ¡å°±ä¸€ä¸ªæ¥ä¸€ä¸ªçš„ä¼ ä¸Šå»äº†ï¼Œç³Ÿç³•ï¼Œä¼ åˆ°ç¬¬ä¸€æ’çš„MMæŠŠçº¸æ¡ä¼ ç»™è€å¸ˆäº†ï¼Œå¬è¯´æ˜¯ä¸ªè€å¤„å¥³å‘€ï¼Œå¿«è·‘!è´£ä»»é“¾æ¨¡å¼ï¼šåœ¨è´£ä»»é“¾æ¨¡å¼ä¸­ï¼Œå¾ˆå¤šå¯¹è±¡ç”±æ¯ä¸€ä¸ªå¯¹è±¡å¯¹å…¶ä¸‹å®¶çš„å¼•ç”¨è€Œæ¥èµ·æ¥å½¢æˆä¸€æ¡é“¾ã€‚è¯·æ±‚åœ¨è¿™ä¸ªé“¾ä¸Šä¼ é€’ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸€ä¸ªå¯¹è±¡å†³å®šå¤„ç†æ­¤è¯·æ±‚ã€‚å®¢æˆ·å¹¶ä¸çŸ¥é“é“¾ä¸Šçš„å“ªä¸€ä¸ªå¯¹è±¡æœ€ç»ˆå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œç³»ç»Ÿå¯ä»¥åœ¨ä¸å½±å“å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹åŠ¨æ€çš„é‡æ–°ç»„ç»‡é“¾å’Œåˆ†é…è´£ä»»ã€‚å¤„ç†è€…æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼šæ‰¿æ‹…è´£ä»»æˆ–è€…æŠŠè´£ä»»æ¨ç»™ä¸‹å®¶ã€‚ä¸€ä¸ªè¯·æ±‚å¯ä»¥æœ€ç»ˆä¸è¢«ä»»ä½•æ¥æ”¶ç«¯å¯¹è±¡æ‰€æ¥å—ã€‚ 14ã€COMMANDâ€”ä¿ºæœ‰ä¸€ä¸ªMMå®¶é‡Œç®¡å¾—ç‰¹åˆ«ä¸¥ï¼Œæ²¡æ³•è§é¢ï¼Œåªå¥½å€ŸåŠ©äºå¥¹å¼Ÿå¼Ÿåœ¨æˆ‘ä»¬ä¿©ä¹‹é—´ä¼ é€ä¿¡æ¯ï¼Œå¥¹å¯¹æˆ‘æœ‰ä»€ä¹ˆæŒ‡ç¤ºï¼Œå°±å†™ä¸€å¼ çº¸æ¡è®©å¥¹å¼Ÿå¼Ÿå¸¦ç»™æˆ‘ã€‚è¿™ä¸ï¼Œå¥¹å¼Ÿå¼Ÿåˆä¼ é€è¿‡æ¥ä¸€ä¸ªCOMMANDï¼Œä¸ºäº†æ„Ÿè°¢ä»–ï¼Œæˆ‘è¯·ä»–åƒäº†ç¢—æ‚é…±é¢ï¼Œå“ªçŸ¥é“ä»–è¯´ï¼šâ€œæˆ‘åŒæ—¶ç»™æˆ‘å§å§ä¸‰ä¸ªç”·æœ‹å‹é€COMMANDï¼Œå°±æ•°ä½ æœ€å°æ°”ï¼Œæ‰è¯·æˆ‘åƒé¢ã€‚â€ :-(å‘½ä»¤æ¨¡å¼ï¼šå‘½ä»¤æ¨¡å¼æŠŠä¸€ä¸ªè¯·æ±‚æˆ–è€…æ“ä½œå°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚å‘½ä»¤æ¨¡å¼æŠŠå‘å‡ºå‘½ä»¤çš„è´£ä»»å’Œæ‰§è¡Œå‘½ä»¤çš„è´£ä»»åˆ†å‰²å¼€ï¼Œå§”æ´¾ç»™ä¸åŒçš„å¯¹è±¡ã€‚å‘½ä»¤æ¨¡å¼å…è®¸è¯·æ±‚çš„ä¸€æ–¹å’Œå‘é€çš„ä¸€æ–¹ç‹¬ç«‹å¼€æ¥ï¼Œä½¿å¾—è¯·æ±‚çš„ä¸€æ–¹ä¸å¿…çŸ¥é“æ¥æ”¶è¯·æ±‚çš„ä¸€æ–¹çš„æ¥å£ï¼Œæ›´ä¸å¿…çŸ¥é“è¯·æ±‚æ˜¯æ€ä¹ˆè¢«æ¥æ”¶ï¼Œä»¥åŠæ“ä½œæ˜¯å¦æ‰§è¡Œï¼Œä½•æ—¶è¢«æ‰§è¡Œä»¥åŠæ˜¯æ€ä¹ˆè¢«æ‰§è¡Œçš„ã€‚ç³»ç»Ÿæ”¯æŒå‘½ä»¤çš„æ’¤æ¶ˆã€‚ 15ã€INTERPRETERâ€”ä¿ºæœ‰ä¸€ä¸ªã€Šæ³¡MMçœŸç»ã€‹ï¼Œä¸Šé¢æœ‰å„ç§æ³¡MMçš„æ”»ç•¥ï¼Œæ¯”å¦‚è¯´å»åƒè¥¿é¤çš„æ­¥éª¤ã€å»çœ‹ç”µå½±çš„æ–¹æ³•ç­‰ç­‰ï¼Œè·ŸMMçº¦ä¼šæ—¶ï¼Œåªè¦åšä¸€ä¸ªInterpreterï¼Œç…§ç€ä¸Šé¢çš„è„šæœ¬æ‰§è¡Œå°±å¯ä»¥äº†ã€‚è§£é‡Šå™¨æ¨¡å¼ï¼šç»™å®šä¸€ä¸ªè¯­è¨€åï¼Œè§£é‡Šå™¨æ¨¡å¼å¯ä»¥å®šä¹‰å‡ºå…¶æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶åŒæ—¶æä¾›ä¸€ä¸ªè§£é‡Šå™¨ã€‚å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªè§£é‡Šå™¨æ¥è§£é‡Šè¿™ä¸ªè¯­è¨€ä¸­çš„å¥å­ã€‚è§£é‡Šå™¨æ¨¡å¼å°†æè¿°æ€æ ·åœ¨æœ‰äº†ä¸€ä¸ªç®€å•çš„æ–‡æ³•åï¼Œä½¿ç”¨æ¨¡å¼è®¾è®¡è§£é‡Šè¿™äº›è¯­å¥ã€‚åœ¨è§£é‡Šå™¨æ¨¡å¼é‡Œé¢æåˆ°çš„è¯­è¨€æ˜¯æŒ‡ä»»ä½•è§£é‡Šå™¨å¯¹è±¡èƒ½å¤Ÿè§£é‡Šçš„ä»»ä½•ç»„åˆã€‚åœ¨è§£é‡Šå™¨æ¨¡å¼ä¸­éœ€è¦å®šä¹‰ä¸€ä¸ªä»£è¡¨æ–‡æ³•çš„å‘½ä»¤ç±»çš„ç­‰çº§ç»“æ„ï¼Œä¹Ÿå°±æ˜¯ä¸€ç³»åˆ—çš„ç»„åˆè§„åˆ™ã€‚æ¯ä¸€ä¸ªå‘½ä»¤å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªè§£é‡Šæ–¹æ³•ï¼Œä»£è¡¨å¯¹å‘½ä»¤å¯¹è±¡çš„è§£é‡Šã€‚å‘½ä»¤å¯¹è±¡çš„ç­‰çº§ç»“æ„ä¸­çš„å¯¹è±¡çš„ä»»ä½•æ’åˆ—ç»„åˆéƒ½æ˜¯ä¸€ä¸ªè¯­è¨€ã€‚ 16ã€ITERATORâ€”æˆ‘çˆ±ä¸Šäº†Maryï¼Œä¸é¡¾ä¸€åˆ‡çš„å‘å¥¹æ±‚å©šã€‚Maryï¼šâ€œæƒ³è¦æˆ‘è·Ÿä½ ç»“å©šï¼Œå¾—ç­”åº”æˆ‘çš„æ¡ä»¶â€æˆ‘ï¼šâ€œä»€ä¹ˆæ¡ä»¶æˆ‘éƒ½ç­”åº”ï¼Œä½ è¯´å§â€Maryï¼šâ€œæˆ‘çœ‹ä¸Šäº†é‚£ä¸ªä¸€å…‹æ‹‰çš„é’»çŸ³â€æˆ‘ï¼šâ€œæˆ‘ä¹°ï¼Œæˆ‘ä¹°ï¼Œè¿˜æœ‰å—ï¼Ÿâ€Maryï¼šâ€œæˆ‘çœ‹ä¸Šäº†æ¹–è¾¹çš„é‚£æ ‹åˆ«å¢…â€æˆ‘ï¼šâ€œæˆ‘ä¹°ï¼Œæˆ‘ä¹°ï¼Œè¿˜æœ‰å—ï¼Ÿâ€â€¦â€¦è¿­ä»£å­æ¨¡å¼ï¼šè¿­ä»£å­æ¨¡å¼å¯ä»¥é¡ºåºè®¿é—®ä¸€ä¸ªèšé›†ä¸­çš„å…ƒç´ è€Œä¸å¿…æš´éœ²èšé›†çš„å†…éƒ¨è¡¨è±¡ã€‚å¤šä¸ªå¯¹è±¡èšåœ¨ä¸€èµ·å½¢æˆçš„æ€»ä½“ç§°ä¹‹ä¸ºèšé›†ï¼Œèšé›†å¯¹è±¡æ˜¯èƒ½å¤ŸåŒ…å®¹ä¸€ç»„å¯¹è±¡çš„å®¹å™¨å¯¹è±¡ã€‚è¿­ä»£å­æ¨¡å¼å°†è¿­ä»£é€»è¾‘å°è£…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å­å¯¹è±¡ä¸­ï¼Œä»è€Œä¸èšé›†æœ¬èº«éš”å¼€ã€‚è¿­ä»£å­æ¨¡å¼ç®€åŒ–äº†èšé›†çš„ç•Œé¢ã€‚æ¯ä¸€ä¸ªèšé›†å¯¹è±¡éƒ½å¯ä»¥æœ‰ä¸€ä¸ªæˆ–ä¸€ä¸ªä»¥ä¸Šçš„è¿­ä»£å­å¯¹è±¡ï¼Œæ¯ä¸€ä¸ªè¿­ä»£å­çš„è¿­ä»£çŠ¶æ€å¯ä»¥æ˜¯å½¼æ­¤ç‹¬ç«‹çš„ã€‚è¿­ä»£ç®—æ³•å¯ä»¥ç‹¬ç«‹äºèšé›†è§’è‰²å˜åŒ–ã€‚ 17ã€MEDIATORâ€”å››ä¸ªMMæ‰“éº»å°†ï¼Œç›¸äº’ä¹‹é—´è°åº”è¯¥ç»™è°å¤šå°‘é’±ç®—ä¸æ¸…æ¥šäº†ï¼Œå¹¸äºå½“æ—¶æˆ‘åœ¨æ—è¾¹ï¼ŒæŒ‰ç…§å„è‡ªçš„ç­¹ç æ•°ç®—é’±ï¼Œèµšäº†é’±çš„ä»æˆ‘è¿™é‡Œæ‹¿ï¼Œèµ”äº†é’±çš„ä¹Ÿä»˜ç»™æˆ‘ï¼Œä¸€åˆ‡å°±OKå•¦ï¼Œä¿ºå¾—åˆ°äº†å››ä¸ªMMçš„ç”µè¯ã€‚è°ƒåœè€…æ¨¡å¼ï¼šè°ƒåœè€…æ¨¡å¼åŒ…è£…äº†ä¸€ç³»åˆ—å¯¹è±¡ç›¸äº’ä½œç”¨çš„æ–¹å¼ï¼Œä½¿å¾—è¿™äº›å¯¹è±¡ä¸å¿…ç›¸äº’æ˜æ˜¾ä½œç”¨ã€‚ä»è€Œä½¿ä»–ä»¬å¯ä»¥æ¾æ•£å¶åˆã€‚å½“æŸäº›å¯¹è±¡ä¹‹é—´çš„ä½œç”¨å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¸ä¼šç«‹å³å½±å“å…¶ä»–çš„ä¸€äº›å¯¹è±¡ä¹‹é—´çš„ä½œç”¨ã€‚ä¿è¯è¿™äº›ä½œç”¨å¯ä»¥å½¼æ­¤ç‹¬ç«‹çš„å˜åŒ–ã€‚è°ƒåœè€…æ¨¡å¼å°†å¤šå¯¹å¤šçš„ç›¸äº’ä½œç”¨è½¬åŒ–ä¸ºä¸€å¯¹å¤šçš„ç›¸äº’ä½œç”¨ã€‚è°ƒåœè€…æ¨¡å¼å°†å¯¹è±¡çš„è¡Œä¸ºå’Œåä½œæŠ½è±¡åŒ–ï¼ŒæŠŠå¯¹è±¡åœ¨å°å°ºåº¦çš„è¡Œä¸ºä¸Šä¸å…¶ä»–å¯¹è±¡çš„ç›¸äº’ä½œç”¨åˆ†å¼€å¤„ç†ã€‚ 18ã€MEMENTOâ€”åŒæ—¶è·Ÿå‡ ä¸ªMMèŠå¤©æ—¶ï¼Œä¸€å®šè¦è®°æ¸…æ¥šåˆšæ‰è·ŸMMè¯´äº†äº›ä»€ä¹ˆè¯ï¼Œä¸ç„¶MMå‘ç°äº†ä¼šä¸é«˜å…´çš„å“¦ï¼Œå¹¸äºæˆ‘æœ‰ä¸ªå¤‡å¿˜å½•ï¼Œåˆšæ‰ä¸å“ªä¸ªMMè¯´äº†ä»€ä¹ˆè¯æˆ‘éƒ½æ‹·è´ä¸€ä»½æ”¾åˆ°å¤‡å¿˜å½•é‡Œé¢ä¿å­˜ï¼Œè¿™æ ·å¯ä»¥éšæ—¶å¯Ÿçœ‹ä»¥å‰çš„è®°å½•å•¦ã€‚å¤‡å¿˜å½•æ¨¡å¼ï¼šå¤‡å¿˜å½•å¯¹è±¡æ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨å¦å¤–ä¸€ä¸ªå¯¹è±¡å†…éƒ¨çŠ¶æ€çš„å¿«ç…§çš„å¯¹è±¡ã€‚å¤‡å¿˜å½•æ¨¡å¼çš„ç”¨æ„æ˜¯åœ¨ä¸ç ´åå°è£…çš„æ¡ä»¶ä¸‹ï¼Œå°†ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æ‰ä½ï¼Œå¹¶å¤–éƒ¨åŒ–ï¼Œå­˜å‚¨èµ·æ¥ï¼Œä»è€Œå¯ä»¥åœ¨å°†æ¥åˆé€‚çš„æ—¶å€™æŠŠè¿™ä¸ªå¯¹è±¡è¿˜åŸåˆ°å­˜å‚¨èµ·æ¥çš„çŠ¶æ€ã€‚ 19ã€OBSERVERâ€”æƒ³çŸ¥é“å’±ä»¬å…¬å¸æœ€æ–°MMæƒ…æŠ¥å—ï¼ŸåŠ å…¥å…¬å¸çš„MMæƒ…æŠ¥é‚®ä»¶ç»„å°±è¡Œäº†ï¼Œtomè´Ÿè´£æœé›†æƒ…æŠ¥ï¼Œä»–å‘ç°çš„æ–°æƒ…æŠ¥ä¸ç”¨ä¸€ä¸ªä¸€ä¸ªé€šçŸ¥æˆ‘ä»¬ï¼Œç›´æ¥å‘å¸ƒç»™é‚®ä»¶ç»„ï¼Œæˆ‘ä»¬ä½œä¸ºè®¢é˜…è€…ï¼ˆè§‚å¯Ÿè€…ï¼‰å°±å¯ä»¥åŠæ—¶æ”¶åˆ°æƒ…æŠ¥å•¦è§‚å¯Ÿè€…æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨çŠ¶æ€ä¸Šå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚ 20ã€STATEâ€”è·ŸMMäº¤å¾€æ—¶ï¼Œä¸€å®šè¦æ³¨æ„å¥¹çš„çŠ¶æ€å“¦ï¼Œåœ¨ä¸åŒçš„çŠ¶æ€æ—¶å¥¹çš„è¡Œä¸ºä¼šæœ‰ä¸åŒï¼Œæ¯”å¦‚ä½ çº¦å¥¹ä»Šå¤©æ™šä¸Šå»çœ‹ç”µå½±ï¼Œå¯¹ä½ æ²¡å…´è¶£çš„MMå°±ä¼šè¯´â€œæœ‰äº‹æƒ…å•¦â€ï¼Œå¯¹ä½ ä¸è®¨åŒä½†è¿˜æ²¡å–œæ¬¢ä¸Šçš„MMå°±ä¼šè¯´â€œå¥½å•Šï¼Œä¸è¿‡å¯ä»¥å¸¦ä¸Šæˆ‘åŒäº‹ä¹ˆï¼Ÿâ€ï¼Œå·²ç»å–œæ¬¢ä¸Šä½ çš„MMå°±ä¼šè¯´â€œå‡ ç‚¹é’Ÿï¼Ÿçœ‹å®Œç”µå½±å†å»æ³¡å§æ€ä¹ˆæ ·ï¼Ÿâ€ï¼Œå½“ç„¶ä½ çœ‹ç”µå½±è¿‡ç¨‹ä¸­è¡¨ç°è‰¯å¥½çš„è¯ï¼Œä¹Ÿå¯ä»¥æŠŠMMçš„çŠ¶æ€ä»ä¸è®¨åŒä¸å–œæ¬¢å˜æˆå–œæ¬¢å“¦ã€‚çŠ¶æ€æ¨¡å¼ï¼šçŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜è¡Œä¸ºã€‚è¿™ä¸ªå¯¹è±¡çœ‹ä¸Šå»è±¡æ˜¯æ”¹å˜äº†å®ƒçš„ç±»ä¸€æ ·ã€‚çŠ¶æ€æ¨¡å¼æŠŠæ‰€ç ”ç©¶çš„å¯¹è±¡çš„è¡Œä¸ºåŒ…è£…åœ¨ä¸åŒçš„çŠ¶æ€å¯¹è±¡é‡Œï¼Œæ¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡éƒ½å±äºä¸€ä¸ªæŠ½è±¡çŠ¶æ€ç±»çš„ä¸€ä¸ªå­ç±»ã€‚çŠ¶æ€æ¨¡å¼çš„æ„å›¾æ˜¯è®©ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™ï¼Œå…¶è¡Œä¸ºä¹Ÿéšä¹‹æ”¹å˜ã€‚çŠ¶æ€æ¨¡å¼éœ€è¦å¯¹æ¯ä¸€ä¸ªç³»ç»Ÿå¯èƒ½å–å¾—çš„çŠ¶æ€åˆ›ç«‹ä¸€ä¸ªçŠ¶æ€ç±»çš„å­ç±»ã€‚å½“ç³»ç»Ÿçš„çŠ¶æ€å˜åŒ–æ—¶ï¼Œç³»ç»Ÿä¾¿æ”¹å˜æ‰€é€‰çš„å­ç±»ã€‚ 21ã€STRATEGYâ€”è·Ÿä¸åŒç±»å‹çš„MMçº¦ä¼šï¼Œè¦ç”¨ä¸åŒçš„ç­–ç•¥ï¼Œæœ‰çš„è¯·ç”µå½±æ¯”è¾ƒå¥½ï¼Œæœ‰çš„åˆ™å»åƒå°åƒæ•ˆæœä¸é”™ï¼Œæœ‰çš„å»æµ·è¾¹æµªæ¼«æœ€åˆé€‚ï¼Œå•ç›®çš„éƒ½æ˜¯ä¸ºäº†å¾—åˆ°MMçš„èŠ³å¿ƒï¼Œæˆ‘çš„è¿½MMé”¦å›Šä¸­æœ‰å¥½å¤šStrategyå“¦ã€‚ç­–ç•¥æ¨¡å¼ï¼šç­–ç•¥æ¨¡å¼é’ˆå¯¹ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒæ¥å£çš„ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä»è€Œä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥åœ¨ä¸å½±å“åˆ°å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹å‘ç”Ÿå˜åŒ–ã€‚ç­–ç•¥æ¨¡å¼æŠŠè¡Œä¸ºå’Œç¯å¢ƒåˆ†å¼€ã€‚ç¯å¢ƒç±»è´Ÿè´£ç»´æŒå’ŒæŸ¥è¯¢è¡Œä¸ºç±»ï¼Œå„ç§ç®—æ³•åœ¨å…·ä½“çš„ç­–ç•¥ç±»ä¸­æä¾›ã€‚ç”±äºç®—æ³•å’Œç¯å¢ƒç‹¬ç«‹å¼€æ¥ï¼Œç®—æ³•çš„å¢å‡ï¼Œä¿®æ”¹éƒ½ä¸ä¼šå½±å“åˆ°ç¯å¢ƒå’Œå®¢æˆ·ç«¯ã€‚ 22ã€TEMPLATE METHODâ€”â€”çœ‹è¿‡ã€Šå¦‚ä½•è¯´æœå¥³ç”Ÿä¸ŠåºŠã€‹è¿™éƒ¨ç»å…¸æ–‡ç« å—ï¼Ÿå¥³ç”Ÿä»è®¤è¯†åˆ°ä¸ŠåºŠçš„ä¸å˜çš„æ­¥éª¤åˆ†ä¸ºå·§é‡ã€æ‰“ç ´åƒµå±€ã€å±•å¼€è¿½æ±‚ã€æ¥å»ã€å‰æˆã€åŠ¨æ‰‹ã€çˆ±æŠšã€è¿›å»å…«å¤§æ­¥éª¤(Template method)ï¼Œä½†æ¯ä¸ªæ­¥éª¤é’ˆå¯¹ä¸åŒçš„æƒ…å†µï¼Œéƒ½æœ‰ä¸ä¸€æ ·çš„åšæ³•ï¼Œè¿™å°±è¦çœ‹ä½ éšæœºåº”å˜å•¦(å…·ä½“å®ç°)ï¼›æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼å‡†å¤‡ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå°†éƒ¨åˆ†é€»è¾‘ä»¥å…·ä½“æ–¹æ³•ä»¥åŠå…·ä½“æ„é€ å­çš„å½¢å¼å®ç°ï¼Œç„¶åå£°æ˜ä¸€äº›æŠ½è±¡æ–¹æ³•æ¥è¿«ä½¿å­ç±»å®ç°å‰©ä½™çš„é€»è¾‘ã€‚ä¸åŒçš„å­ç±»å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ï¼Œä»è€Œå¯¹å‰©ä½™çš„é€»è¾‘æœ‰ä¸åŒçš„å®ç°ã€‚å…ˆåˆ¶å®šä¸€ä¸ªé¡¶çº§é€»è¾‘æ¡†æ¶ï¼Œè€Œå°†é€»è¾‘çš„ç»†èŠ‚ç•™ç»™å…·ä½“çš„å­ç±»å»å®ç°ã€‚ 23ã€VISITORâ€”æƒ…äººèŠ‚åˆ°äº†ï¼Œè¦ç»™æ¯ä¸ªMMé€ä¸€æŸé²œèŠ±å’Œä¸€å¼ å¡ç‰‡ï¼Œå¯æ˜¯æ¯ä¸ªMMé€çš„èŠ±éƒ½è¦é’ˆå¯¹å¥¹ä¸ªäººçš„ç‰¹ç‚¹ï¼Œæ¯å¼ å¡ç‰‡ä¹Ÿè¦æ ¹æ®ä¸ªäººçš„ç‰¹ç‚¹æ¥æŒ‘ï¼Œæˆ‘ä¸€ä¸ªäººå“ªæå¾—æ¸…æ¥šï¼Œè¿˜æ˜¯æ‰¾èŠ±åº—è€æ¿å’Œç¤¼å“åº—è€æ¿åšä¸€ä¸‹Visitorï¼Œè®©èŠ±åº—è€æ¿æ ¹æ®MMçš„ç‰¹ç‚¹é€‰ä¸€æŸèŠ±ï¼Œè®©ç¤¼å“åº—è€æ¿ä¹Ÿæ ¹æ®æ¯ä¸ªäººç‰¹ç‚¹é€‰ä¸€å¼ å¡ï¼Œè¿™æ ·å°±è½»æ¾å¤šäº†ï¼›è®¿é—®è€…æ¨¡å¼ï¼šè®¿é—®è€…æ¨¡å¼çš„ç›®çš„æ˜¯å°è£…ä¸€äº›æ–½åŠ äºæŸç§æ•°æ®ç»“æ„å…ƒç´ ä¹‹ä¸Šçš„æ“ä½œã€‚ä¸€æ—¦è¿™äº›æ“ä½œéœ€è¦ä¿®æ”¹çš„è¯ï¼Œæ¥å—è¿™ä¸ªæ“ä½œçš„æ•°æ®ç»“æ„å¯ä»¥ä¿æŒä¸å˜ã€‚è®¿é—®è€…æ¨¡å¼é€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹æœªå®šçš„ç³»ç»Ÿï¼Œå®ƒæŠŠæ•°æ®ç»“æ„å’Œä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œä¹‹é—´çš„è€¦åˆè§£è„±å¼€ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç›¸å¯¹è‡ªç”±çš„æ¼”åŒ–ã€‚è®¿é—®è€…æ¨¡å¼ä½¿å¾—å¢åŠ æ–°çš„æ“ä½œå˜çš„å¾ˆå®¹æ˜“ï¼Œå°±æ˜¯å¢åŠ ä¸€ä¸ªæ–°çš„è®¿é—®è€…ç±»ã€‚è®¿é—®è€…æ¨¡å¼å°†æœ‰å…³çš„è¡Œä¸ºé›†ä¸­åˆ°ä¸€ä¸ªè®¿é—®è€…å¯¹è±¡ä¸­ï¼Œè€Œä¸æ˜¯åˆ†æ•£åˆ°ä¸€ä¸ªä¸ªçš„èŠ‚ç‚¹ç±»ä¸­ã€‚å½“ä½¿ç”¨è®¿é—®è€…æ¨¡å¼æ—¶ï¼Œè¦å°†å°½å¯èƒ½å¤šçš„å¯¹è±¡æµè§ˆé€»è¾‘æ”¾åœ¨è®¿é—®è€…ç±»ä¸­ï¼Œè€Œä¸æ˜¯æ”¾åˆ°å®ƒçš„å­ç±»ä¸­ã€‚è®¿é—®è€…æ¨¡å¼å¯ä»¥è·¨è¿‡å‡ ä¸ªç±»çš„ç­‰çº§ç»“æ„è®¿é—®å±äºä¸åŒçš„ç­‰çº§ç»“æ„çš„æˆå‘˜ç±»ã€‚ è®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³»å›¾ï¼š è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™1ã€å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰å¼€é—­åŸåˆ™å°±æ˜¯è¯´å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚æ‰€ä»¥ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚ 2ã€é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰é‡Œæ°ä»£æ¢åŸåˆ™(Liskov Substitution Principle LSP)é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚ LSPæ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“è¡ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œè½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œè¡ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹â€œå¼€-é—­â€åŸåˆ™çš„è¡¥å……ã€‚å®ç°â€œå¼€-é—­â€åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ã€‚è€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚â€”â€” From Baidu ç™¾ç§‘ 3ã€ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰è¿™ä¸ªæ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šçœŸå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚ 4ã€æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚è¿˜æ˜¯ä¸€ä¸ªé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦çš„æ„æ€ï¼Œä»è¿™å„¿æˆ‘ä»¬çœ‹å‡ºï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ä¸ªè½¯ä»¶çš„è®¾è®¡æ€æƒ³ï¼Œä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ï¼Œä¸ºäº†å‡çº§å’Œç»´æŠ¤æ–¹ä¾¿ã€‚æ‰€ä»¥ä¸Šæ–‡ä¸­å¤šæ¬¡å‡ºç°ï¼šé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚ 5ã€è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰ï¼ˆDemeter Principleï¼‰ä¸ºä»€ä¹ˆå«æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œå°±æ˜¯è¯´ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘çš„ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚ 6ã€åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰åŸåˆ™æ˜¯å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚","categories":[{"name":"Book","slug":"Book","permalink":"https://reversescale.github.io/categories/Book/"}],"tags":[{"name":"Book","slug":"Book","permalink":"https://reversescale.github.io/tags/Book/"}]},{"title":"iOS å¼€å‘ä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼","slug":"Design patterns iOS","date":"2017-02-21T06:56:27.000Z","updated":"2018-11-15T13:23:48.042Z","comments":true,"path":"2017/02/21/Design patterns iOS/","link":"","permalink":"https://reversescale.github.io/2017/02/21/Design patterns iOS/","excerpt":"ä¹‹å‰æœ‰æœ‹å‹é—®åˆ°è®¾è®¡æ¨¡å¼ï¼Œä¾¿ç‰¹æ„æ‰¾äº†ä¸€ç¯‡æ–‡ç« ï¼Œä¸“é—¨ä»‹ç»åœ¨ iOS å¼€å‘ä¸­ï¼Œå¯¹è®¾è®¡æ¨¡å¼çš„å…·ä½“åº”ç”¨ï¼ŒåŒæ—¶æ¨èä¸€æœ¬ä¹¦ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹~","text":"ä¹‹å‰æœ‰æœ‹å‹é—®åˆ°è®¾è®¡æ¨¡å¼ï¼Œä¾¿ç‰¹æ„æ‰¾äº†ä¸€ç¯‡æ–‡ç« ï¼Œä¸“é—¨ä»‹ç»åœ¨ iOS å¼€å‘ä¸­ï¼Œå¯¹è®¾è®¡æ¨¡å¼çš„å…·ä½“åº”ç”¨ï¼ŒåŒæ—¶æ¨èä¸€æœ¬ä¹¦ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹~ ï¼ˆä¸€ï¼‰ä»£ç†æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šå½“ä¸€ä¸ªç±»çš„æŸäº›åŠŸèƒ½éœ€è¦ç”±åˆ«çš„ç±»æ¥å®ç°ï¼Œä½†æ˜¯åˆä¸ç¡®å®šå…·ä½“ä¼šæ˜¯å“ªä¸ªç±»å®ç°ã€‚ä¼˜åŠ¿ï¼šè§£è€¦åˆæ•æ·åŸåˆ™ï¼šå¼€æ”¾-å°é—­åŸåˆ™å®ä¾‹ï¼štableviewçš„ æ•°æ®æºdelegateï¼Œé€šè¿‡å’Œprotocolçš„é…åˆï¼Œå®Œæˆå§”æ‰˜è¯‰æ±‚ã€‚åˆ—è¡¨rowä¸ªæ•°delegateè‡ªå®šä¹‰çš„delegate ï¼ˆäºŒï¼‰è§‚å¯Ÿè€…æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šä¸€èˆ¬ä¸ºmodelå±‚å¯¹ï¼Œcontrollerå’Œviewè¿›è¡Œçš„é€šçŸ¥æ–¹å¼ï¼Œä¸å…³å¿ƒè°å»æ¥æ”¶ï¼Œåªè´Ÿè´£å‘å¸ƒä¿¡æ¯ã€‚ä¼˜åŠ¿ï¼šè§£è€¦åˆæ•æ·åŸåˆ™ï¼šæ¥å£éš”ç¦»åŸåˆ™ï¼Œå¼€æ”¾-å°é—­åŸåˆ™å®ä¾‹ï¼šNotificationé€šçŸ¥ä¸­å¿ƒï¼Œæ³¨å†Œé€šçŸ¥ä¸­å¿ƒï¼Œä»»ä½•ä½ç½®å¯ä»¥å‘é€æ¶ˆæ¯ï¼Œæ³¨å†Œè§‚å¯Ÿè€…çš„å¯¹è±¡å¯ä»¥æ¥æ”¶ã€‚kvoï¼Œé”®å€¼å¯¹æ”¹å˜é€šçŸ¥çš„è§‚å¯Ÿè€…ï¼Œå¹³æ—¶åŸºæœ¬æ²¡ç”¨è¿‡ã€‚ ï¼ˆä¸‰ï¼‰MVCæ¨¡å¼åº”ç”¨åœºæ™¯ï¼šæ˜¯ä¸€ä¸­éå¸¸å¤è€çš„è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡æ•°æ®æ¨¡å‹ï¼Œæ§åˆ¶å™¨é€»è¾‘ï¼Œè§†å›¾å±•ç¤ºå°†åº”ç”¨ç¨‹åºè¿›è¡Œé€»è¾‘åˆ’åˆ†ã€‚ä¼˜åŠ¿ï¼šä½¿ç³»ç»Ÿï¼Œå±‚æ¬¡æ¸…æ™°ï¼ŒèŒè´£åˆ†æ˜ï¼Œæ˜“äºç»´æŠ¤æ•æ·åŸåˆ™ï¼šå¯¹æ‰©å±•å¼€æ”¾-å¯¹ä¿®æ”¹å°é—­å®ä¾‹ï¼šmodel-å³æ•°æ®æ¨¡å‹ï¼Œview-è§†å›¾å±•ç¤ºï¼Œcontrollerè¿›è¡ŒUIå±•ç°å’Œæ•°æ®äº¤äº’çš„é€»è¾‘æ§åˆ¶ã€‚ ï¼ˆå››ï¼‰å•ä¾‹æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šç¡®ä¿ç¨‹åºè¿è¡ŒæœŸæŸä¸ªç±»ï¼Œåªæœ‰ä¸€ä»½å®ä¾‹ï¼Œç”¨äºè¿›è¡Œèµ„æºå…±äº«æ§åˆ¶ã€‚ä¼˜åŠ¿ï¼šä½¿ç”¨ç®€å•ï¼Œå»¶æ—¶æ±‚å€¼ï¼Œæ˜“äºè·¨æ¨¡å—æ•æ·åŸåˆ™ï¼šå•ä¸€èŒè´£åŸåˆ™å®ä¾‹ï¼š[UIApplication sharedApplication]ã€‚æ³¨æ„äº‹é¡¹ï¼šç¡®ä¿ä½¿ç”¨è€…åªèƒ½é€šè¿‡ getInstanceæ–¹æ³•æ‰èƒ½è·å¾—ï¼Œå•ä¾‹ç±»çš„å”¯ä¸€å®ä¾‹ã€‚javaï¼ŒC++ä¸­ä½¿å…¶æ²¡æœ‰å…¬æœ‰æ„é€ å‡½æ•°ï¼Œç§æœ‰åŒ–å¹¶è¦†ç›–å…¶æ„é€ å‡½æ•°ã€‚object cä¸­ï¼Œé‡å†™allocWithZoneæ–¹æ³•ï¼Œä¿è¯å³ä½¿ç”¨æˆ·ç”¨ allocæ–¹æ³•ç›´æ¥åˆ›å»ºå•ä¾‹ç±»çš„å®ä¾‹ï¼Œè¿”å›çš„ä¹Ÿåªæ˜¯æ­¤å•ä¾‹ç±»çš„å”¯ä¸€é™æ€å˜é‡ã€‚ ï¼ˆäº”ï¼‰ç­–ç•¥æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šå®šä¹‰ç®—æ³•æ—ï¼Œå°è£…èµ·æ¥ï¼Œä½¿ä»–ä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ä¼˜åŠ¿ï¼šä½¿ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„ç”¨æˆ·æ•æ·åŸåˆ™ï¼šæ¥å£éš”ç¦»åŸåˆ™ï¼›å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿ï¼›é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œéå®ç°ã€‚å®ä¾‹ï¼šæ’åºç®—æ³•ï¼ŒNSArrayçš„sortedArrayUsingSelectorï¼›ç»å…¸çš„é¸­å­ä¼šå«ï¼Œä¼šé£æ¡ˆä¾‹ã€‚æ³¨æ„äº‹é¡¹ï¼š1ï¼Œå‰¥ç¦»ç±»ä¸­æ˜“äºå˜åŒ–çš„è¡Œä¸ºï¼Œé€šè¿‡ç»„åˆçš„æ–¹å¼åµŒå…¥æŠ½è±¡åŸºç±»2ï¼Œå˜åŒ–çš„è¡Œä¸ºæŠ½è±¡åŸºç±»ä¸ºï¼Œæ‰€æœ‰å¯å˜å˜åŒ–çš„çˆ¶ç±»3ï¼Œç”¨æˆ·ç±»çš„æœ€ç»ˆå®ä¾‹ï¼Œé€šè¿‡æ³¨å…¥è¡Œä¸ºå®ä¾‹çš„æ–¹å¼ï¼Œè®¾å®šæ˜“å˜è¡Œä¸ºé˜²æ­¢äº†ç»§æ‰¿è¡Œä¸ºæ–¹å¼ï¼Œå¯¼è‡´æ— å…³è¡Œä¸ºæ±¡æŸ“å­ç±»ã€‚å®Œæˆäº†ç­–ç•¥å°è£…å’Œå¯æ›¿æ¢æ€§ã€‚ ï¼ˆå…­ï¼‰å·¥å‚æ¨¡å¼åº”ç”¨åœºæ™¯ï¼šå·¥å‚æ–¹å¼åˆ›å»ºç±»çš„å®ä¾‹ï¼Œå¤šä¸proxyæ¨¡å¼é…åˆï¼Œåˆ›å»ºå¯æ›¿æ¢ä»£ç†ç±»ã€‚ä¼˜åŠ¿ï¼šæ˜“äºæ›¿æ¢ï¼Œé¢å‘æŠ½è±¡ç¼–ç¨‹ï¼Œapplicationåªä¸æŠ½è±¡å·¥å‚å’Œæ˜“å˜ç±»çš„å…±æ€§æŠ½è±¡ç±»å‘ç”Ÿè°ƒç”¨å…³ç³»ã€‚æ•æ·åŸåˆ™ï¼šDIPä¾èµ–å€’ç½®åŸåˆ™å®ä¾‹ï¼šé¡¹ç›®éƒ¨ç½²ç¯å¢ƒä¸­ä¾èµ–å¤šä¸ªä¸åŒç±»å‹çš„æ•°æ®åº“æ—¶ï¼Œéœ€è¦ä½¿ç”¨å·¥å‚é…åˆproxyå®Œæˆæ˜“ç”¨æ€§æ›¿æ¢æ³¨æ„äº‹é¡¹ï¼šé¡¹ç›®åˆæœŸï¼Œè½¯ä»¶ç»“æ„å’Œéœ€æ±‚éƒ½æ²¡æœ‰ç¨³å®šä¸‹æ¥æ—¶ï¼Œä¸å»ºè®®ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œå› ä¸ºå…¶åŠ£åŠ¿ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå¢åŠ äº†ä»£ç çš„å¤æ‚åº¦ï¼Œå¢åŠ äº†è°ƒç”¨å±‚æ¬¡ï¼Œå¢åŠ äº†å†…å­˜è´Ÿæ‹…ã€‚æ‰€ä»¥è¦æ³¨æ„é˜²æ­¢æ¨¡å¼çš„æ»¥ç”¨ã€‚ è®¾è®¡æ¨¡å¼å…­å¤§åŸåˆ™1ã€å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰å¼€é—­åŸåˆ™å°±æ˜¯è¯´å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚æ‰€ä»¥ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚ 2ã€é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰é‡Œæ°ä»£æ¢åŸåˆ™(Liskov Substitution Principle LSP)é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚LSPæ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“è¡ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œè½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œè¡ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹â€œå¼€-é—­â€åŸåˆ™çš„è¡¥å……ã€‚å®ç°â€œå¼€-é—­â€åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ã€‚è€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚â€”â€” From Baidu ç™¾ç§‘ 3ã€ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰è¿™ä¸ªæ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šçœŸå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚ 4ã€æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚è¿˜æ˜¯ä¸€ä¸ªé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦çš„æ„æ€ï¼Œä»è¿™å„¿æˆ‘ä»¬çœ‹å‡ºï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ä¸ªè½¯ä»¶çš„è®¾è®¡æ€æƒ³ï¼Œä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ï¼Œä¸ºäº†å‡çº§å’Œç»´æŠ¤æ–¹ä¾¿ã€‚æ‰€ä»¥ä¸Šæ–‡ä¸­å¤šæ¬¡å‡ºç°ï¼šé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚ 5ã€è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰ï¼ˆDemeter Principleï¼‰ä¸ºä»€ä¹ˆå«æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œå°±æ˜¯è¯´ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘çš„ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚ 6ã€åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰åŸåˆ™æ˜¯å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚ ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹http://pan.baidu.com/s/1nvTqSdj éªŒè¯ç ï¼šDG58","categories":[{"name":"Book","slug":"Book","permalink":"https://reversescale.github.io/categories/Book/"}],"tags":[{"name":"Book","slug":"Book","permalink":"https://reversescale.github.io/tags/Book/"}]}]}